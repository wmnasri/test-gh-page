import{j as u,b as x,a as z}from"./index-BzhTyqaY.js";import{r as g}from"./index-0X8QCd_i.js";import{n as L}from"./react-spring-web.esm-DsMzZgQq.js";import{u as A,O as J,S as N}from"./formik.esm-DgjVmEdT.js";import"./main-BbuvrTKi.js";import"./index-m5SwaE3w.js";import"./AxiosInstance-BZZbXQ8a.js";/* empty css              *//* empty css                         */import{F as B}from"./FormError-BtpZASc0.js";import{u as G}from"./useTranslation-BYGhmYBG.js";function H(n,o){return{inputs:Object.fromEntries([...Array(n)].map((a,i)=>[`${o}_${i}`,g.useRef()]))}}const K=L.div`
  margin-right: 1px;
`;function w(n){return Object.values(n).join("")}function S(n,o){return new RegExp(n).test(o)}function oe({length:n,label:o,prefixName:e,maxLength:a=1,placeholders:i=[],pattern:c="^[0-9]?$",children:h}){const D="-",{t:O}=G(),{inputs:l}=H(n,e),j=Object.keys(l).filter(t=>t.includes(`${e}_`)),y=A(),{handleChange:k,values:b,setValues:C,setFieldValue:E,errors:_,setErrors:F,validateField:R}=y,T=!!_[e];g.useEffect(()=>{const t=s=>{const{relatedTarget:r}=s;r===null&&R(e)};return Object.values(l).forEach(s=>{var r;(r=s.current)==null||r.addEventListener("blur",t)}),()=>{Object.values(l).forEach(s=>{var r;(r=s.current)==null||r.removeEventListener("blur",t)})}},[]);const P=t=>{var p;const{value:s,name:r}=t.target,f=j.indexOf(r)+1,d=`${e}_${f}`,m=Object.fromEntries(j.map(v=>[v,b[v]]).filter(([,v])=>v));m[r]=s,S(c,s)&&(s.length<=a&&(F({}),k(t),E(e,w(m))),f<n&&s.length===a&&((p=l[d].current)==null||p.focus()))},q=t=>{const{name:s}=t.target;if(s===`${e}_0`){const r=t.clipboardData.getData("Text").split("");if(!r.every(m=>S(c,m)))return;const d=Object.fromEntries(r.map((m,p)=>[`${e}_${p}`,m]));C({...b,...d}),E(e,w(d))}};return u.jsxDEV(u.Fragment,{children:[u.jsxDEV("div",{className:"col-12",children:u.jsxDEV(x.SzTypographie,{tag:"label",children:o},void 0,!1,{fileName:"/usr/var/www/assets/js/form/InputSeries.tsx",lineNumber:128,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/form/InputSeries.tsx",lineNumber:127,columnNumber:7},this),Object.keys(l).map((t,s)=>{const r=z({"mr-lg-2":s<n-1}),f=O(i[s])||D;return u.jsxDEV(K,{className:r,children:u.jsxDEV(x.SzInput,{ref:l[t],variant:"outlined",name:t,onChange:P,onPaste:q,value:b[t]||"",type:"text",placeholder:f,className:"pr-0"},void 0,!1,{fileName:"/usr/var/www/assets/js/form/InputSeries.tsx",lineNumber:139,columnNumber:13},this)},t,!1,{fileName:"/usr/var/www/assets/js/form/InputSeries.tsx",lineNumber:138,columnNumber:11},this)}),h,u.jsxDEV(B,{field:e,customDisplay:T},void 0,!1,{fileName:"/usr/var/www/assets/js/form/InputSeries.tsx",lineNumber:154,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/form/InputSeries.tsx",lineNumber:126,columnNumber:5},this)}const I=6,V="models.codeSchema.defaultError",$=/^[0-9]+$/;function ae({name:n,error:o=V,regex:e=$,length:a=I}){return J({...M({length:a,regex:e,error:o,name:n}),[n]:N().length(a,o).required(o)})}function M({length:n=I,regex:o=$,error:e=V,name:a}){const i={};for(let c=1;c<n;c++){const h=`${a}_${c}`;i[h]=N().matches(o,"Valeur incorrecte").min(1,e).required(e)}return i}export{ae as I,oe as a};
