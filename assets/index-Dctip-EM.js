import"./index-0X8QCd_i.js";import{h as We,C as Ve}from"./index-m5SwaE3w.js";async function rn(e){const t=e.name.indexOf(".HEIC")>-1,r=t&&new Blob([e]),n=t?await We({blob:r}):e,i={targetSize:.2,quality:.75,maxWidth:800,maxHeight:600},o=await new Ve(i).compress([n]),{photo:s}=o[0],u=t?e.name.split(".").slice(0,-1).join(".")+".jpeg":s.name,c=new File([s.data],u,{type:s.type,lastModified:Date.now()}),f=URL.createObjectURL(t?n:e);return{fileConvert:c,objectURL:f}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var l=function(){return l=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},l.apply(this,arguments)};function Vt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function b(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function R(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var j;(function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"})(j||(j={}));var X;(function(e){e.Parent="#_parent",e.Internal="#_internal"})(X||(X={}));var Pt=j.Start,Ut=j.Stop,K=j.Raise,Z=j.Send,Ht=j.Cancel,de=j.NullEvent,Ct=j.Assign,He=j.After,Ke=j.DoneState,kt=j.Log,ve=j.Init,Lt=j.Invoke,Ze=j.ErrorExecution,Gt=j.ErrorPlatform,Kt=j.ErrorCustom,zt=j.Update,pe=j.Choose,ye=j.Pure;const tr=Object.freeze(Object.defineProperty({__proto__:null,after:He,assign:Ct,cancel:Ht,choose:pe,doneState:Ke,error:Kt,errorExecution:Ze,errorPlatform:Gt,init:ve,invoke:Lt,log:kt,nullEvent:de,pure:ye,raise:K,send:Z,start:Pt,stop:Ut,update:zt},Symbol.toStringTag,{value:"Module"}));var ge=".",ae={},Xt="xstate.guard",er="",Et;function xt(e,t,r){r===void 0&&(r=ge);var n=gt(e,r),i=gt(t,r);return A(i)?A(n)?i===n:!1:A(n)?n in i:Object.keys(n).every(function(a){return a in i?xt(n[a],i[a]):!1})}function me(e){try{return A(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Yt(e,t){try{return lt(e)?e:e.toString().split(t)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function rr(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function gt(e,t){if(rr(e))return e.value;if(lt(e))return It(e);if(typeof e!="string")return e;var r=Yt(e,t);return It(r)}function It(e){if(e.length===1)return e[0];for(var t={},r=t,n=0;n<e.length-1;n++)n===e.length-2?r[e[n]]=e[n+1]:(r[e[n]]={},r=r[e[n]]);return t}function vt(e,t){for(var r={},n=Object.keys(e),i=0;i<n.length;i++){var a=n[i];r[a]=t(e[a],a,e,i)}return r}function oe(e,t,r){var n,i,a={};try{for(var o=b(Object.keys(e)),s=o.next();!s.done;s=o.next()){var u=s.value,c=e[u];r(c)&&(a[u]=t(c,u,e))}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}var nr=function(e){return function(t){var r,n,i=t;try{for(var a=b(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=i[s]}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}};function ir(e,t){return function(r){var n,i,a=r;try{for(var o=b(e),s=o.next();!s.done;s=o.next()){var u=s.value;a=a[t][u]}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}}function Nt(e){if(!e)return[[]];if(A(e))return[[e]];var t=$(Object.keys(e).map(function(r){var n=e[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:Nt(e[r]).map(function(i){return[r].concat(i)})}));return t}function $(e){var t;return(t=[]).concat.apply(t,R([],E(e),!1))}function we(e){return lt(e)?e:[e]}function G(e){return e===void 0?[]:we(e)}function Rt(e,t,r){var n,i;if(L(e))return e(t,r.data);var a={};try{for(var o=b(Object.keys(e)),s=o.next();!s.done;s=o.next()){var u=s.value,c=e[u];L(c)?a[u]=c(t,r.data):a[u]=c}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}function ar(e){return/^(done|error)\./.test(e)}function se(e){return!!(e instanceof Promise||e!==null&&(L(e)||typeof e=="object")&&L(e.then))}function or(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function sr(e,t){var r,n,i=E([[],[]],2),a=i[0],o=i[1];try{for(var s=b(e),u=s.next();!u.done;u=s.next()){var c=u.value;t(c)?a.push(c):o.push(c)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return[a,o]}function Se(e,t){return vt(e.states,function(r,n){if(r){var i=(A(t)?void 0:t[n])||(r?r.current:void 0);if(i)return{current:i,states:Se(r,i)}}})}function ur(e,t){return{current:t,states:Se(e,t)}}function ue(e,t,r,n){k(!!e,"Attempting to update undefined context");var i=e&&r.reduce(function(a,o){var s,u,c=o.assignment,f={state:n,action:o,_event:t},d={};if(L(c))d=c(a,t.data,f);else try{for(var h=b(Object.keys(c)),v=h.next();!v.done;v=h.next()){var p=v.value,y=c[p];d[p]=L(y)?y(a,t.data,f):y}}catch(m){s={error:m}}finally{try{v&&!v.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return Object.assign({},a,d)},e);return i}var k=function(){};k=function(e,t){var r=e instanceof Error?e:void 0;if(!(!r&&e)&&console!==void 0){var n=["Warning: ".concat(t)];r&&n.push(r),console.warn.apply(console,n)}};function lt(e){return Array.isArray(e)}function L(e){return typeof e=="function"}function A(e){return typeof e=="string"}function xe(e,t){if(e)return A(e)?{type:Xt,name:e,predicate:t?t[e]:void 0}:L(e)?{type:Xt,name:e.name,predicate:e}:e}function cr(e){try{return"subscribe"in e&&L(e.subscribe)}catch{return!1}}var W=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();Et={},Et[W]=function(){return this},Et[Symbol.observable]=function(){return this};function Q(e){return!!e&&"__xstatenode"in e}function fr(e){return!!e&&typeof e.send=="function"}var hr=function(){var e=0;return function(){return e++,e.toString(16)}}();function Ft(e,t){return A(e)||typeof e=="number"?l({type:e},t):e}function C(e,t){if(!A(e)&&"$$type"in e&&e.$$type==="scxml")return e;var r=Ft(e);return l({name:r.type,data:r,$$type:"scxml",type:"external"},t)}function nt(e,t){var r=we(t).map(function(n){return typeof n>"u"||typeof n=="string"||Q(n)?{target:n,event:e}:l(l({},n),{event:e})});return r}function lr(e){if(!(e===void 0||e===er))return G(e)}function dr(e,t,r){{var n=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";if(e===t)console.error("Missing onError handler for invocation '".concat(r,"', error was '").concat(e,"'.").concat(n));else{var i=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(r,"'. ")+"Original error: '".concat(e,"'. ").concat(n," Current error is '").concat(t,"'.").concat(i))}}}function be(e,t,r,n,i){var a=e.options.guards,o={state:i,cond:t,_event:n};if(t.type===Xt)return((a==null?void 0:a[t.name])||t.predicate)(r,n.data,o);var s=a==null?void 0:a[t.type];if(!s)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return s(r,n.data,o)}function Ee(e){return typeof e=="string"?{type:e}:e}function mt(e,t,r){var n=function(){},i=typeof e=="object",a=i?e:null;return{next:((i?e.next:e)||n).bind(a),error:((i?e.error:t)||n).bind(a),complete:((i?e.complete:r)||n).bind(a)}}function Ot(e,t){return"".concat(e,":invocation[").concat(t,"]")}var H=C({type:ve});function Dt(e,t){return t&&t[e]||void 0}function ht(e,t){var r;if(A(e)||typeof e=="number"){var n=Dt(e,t);L(n)?r={type:e,exec:n}:n?r=n:r={type:e,exec:void 0}}else if(L(e))r={type:e.name||e.toString(),exec:e};else{var n=Dt(e.type,t);if(L(n))r=l(l({},e),{exec:n});else if(n){var i=n.type||e.type;r=l(l(l({},n),e),{type:i})}else r=e}return r}var B=function(e,t){if(!e)return[];var r=lt(e)?e:[e];return r.map(function(n){return ht(n,t)})};function Jt(e){var t=ht(e);return l(l({id:A(e)?e:t.id},t),{type:t.type})}function Zt(e){return A(e)?{type:K,event:e}:V(e,{to:X.Internal})}function Oe(e){return{type:K,_event:C(e.event)}}function V(e,t){return{to:t?t.to:void 0,type:Z,event:L(e)?e:Ft(e),delay:t?t.delay:void 0,id:t&&t.id!==void 0?t.id:L(e)?e.name:me(e)}}function Te(e,t,r,n){var i={_event:r},a=C(L(e.event)?e.event(t,r.data,i):e.event),o;if(A(e.delay)){var s=n&&n[e.delay];o=L(s)?s(t,r.data,i):s}else o=L(e.delay)?e.delay(t,r.data,i):e.delay;var u=L(e.to)?e.to(t,r.data,i):e.to;return l(l({},e),{to:u,_event:a,event:a.data,delay:o})}function _t(e,t){return V(e,l(l({},t),{to:X.Parent}))}function Ae(e,t,r){return V(t,l(l({},r),{to:e}))}function Ne(){return _t(zt)}function vr(e,t){return V(e,l(l({},t),{to:function(r,n,i){var a=i._event;return a.origin}}))}var pr=function(e,t){return{context:e,event:t}};function yr(e,t){return e===void 0&&(e=pr),{type:kt,label:t,expr:e}}var je=function(e,t,r){return l(l({},e),{value:A(e.expr)?e.expr:e.expr(t,r.data,{_event:r})})},Pe=function(e){return{type:Ht,sendId:e}};function Le(e){var t=Jt(e);return{type:j.Start,activity:t,exec:void 0}}function Ie(e){var t=L(e)?e:Jt(e);return{type:j.Stop,activity:t,exec:void 0}}function Re(e,t,r){var n=L(e.activity)?e.activity(t,r.data):e.activity,i=typeof n=="string"?{id:n}:n,a={type:j.Stop,activity:i};return a}var De=function(e){return{type:Ct,assignment:e}};function gr(e){return typeof e=="object"&&"type"in e}function Me(e,t){var r=t?"#".concat(t):"";return"".concat(j.After,"(").concat(e,")").concat(r)}function pt(e,t){var r="".concat(j.DoneState,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function ft(e,t){var r="".concat(j.DoneInvoke,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function ct(e,t){var r="".concat(j.ErrorPlatform,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function mr(e){return{type:j.Pure,get:e}}function $e(e,t){if(!e||typeof e=="function"){var r=e;e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=typeof r=="function"?r.apply(void 0,R([],E(n),!1)):r;if(!a)throw new Error("Attempted to forward event to undefined actor. This risks an infinite loop in the sender.");return a}}return V(function(n,i){return i},l(l({},t),{to:e}))}function wr(e,t){return _t(function(r,n,i){return{type:Kt,data:L(e)?e(r,n,i):e}},l(l({},t),{to:X.Parent}))}function Sr(e){return{type:j.Choose,conds:e}}var xr=function(e){var t,r,n=[];try{for(var i=b(e),a=i.next();!a.done;a=i.next())for(var o=a.value,s=0;s<o.length;){if(o[s].type===Ct){n.push(o[s]),o.splice(s,1);continue}s++}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n};function wt(e,t,r,n,i,a,o){o===void 0&&(o=!1);var s=o?[]:xr(i),u=s.length?ue(r,n,s,t):r,c=o?[r]:void 0,f=[];function d(p){var y;switch(p.type){case K:return Oe(p);case Z:var m=Te(p,u,n,e.options.delays);return k(!A(p.delay)||typeof m.delay=="number","No delay reference for delay expression '".concat(p.delay,"' was found on machine '").concat(e.id,"'")),a&&m.to!==X.Internal&&f.push(m),m;case kt:{var S=je(p,u,n);return a==null||a(S,u,n),S}case pe:{var g=p,w=(y=g.conds.find(function(_){var Y=xe(_.cond,e.options.guards);return!Y||be(e,Y,u,n,a?void 0:t)}))===null||y===void 0?void 0:y.actions;if(!w)return[];var P=E(wt(e,t,u,n,[B(G(w),e.options.actions)],a,o),2),O=P[0],M=P[1];return u=M,c==null||c.push(u),O}case ye:{var w=p.get(u,n.data);if(!w)return[];var T=E(wt(e,t,u,n,[B(G(w),e.options.actions)],a,o),2),N=T[0],I=T[1];return u=I,c==null||c.push(u),N}case Ut:{var S=Re(p,u,n);return a==null||a(S,r,n),S}case Ct:{u=ue(u,n,[p],a?void 0:t),c==null||c.push(u);break}default:var x=ht(p,e.options.actions),D=x.exec;if(a)a(x,u,n);else if(D&&c){var F=c.length-1;x=l(l({},x),{exec:function(_){for(var Y=[],tt=1;tt<arguments.length;tt++)Y[tt-1]=arguments[tt];D.apply(void 0,R([c[F]],E(Y),!1))}})}return x}}function h(p){var y,m,S=[];try{for(var g=b(p),w=g.next();!w.done;w=g.next()){var P=w.value,O=d(P);O&&(S=S.concat(O))}}catch(M){y={error:M}}finally{try{w&&!w.done&&(m=g.return)&&m.call(g)}finally{if(y)throw y.error}}return f.forEach(function(M){a(M,u,n)}),f.length=0,S}var v=$(i.map(h));return[v,u]}const br=Object.freeze(Object.defineProperty({__proto__:null,actionTypes:tr,after:Me,assign:De,cancel:Pe,choose:Sr,done:pt,doneInvoke:ft,error:ct,escalate:wr,forwardTo:$e,getActionFunction:Dt,initEvent:H,isActionObject:gr,log:yr,pure:mr,raise:Zt,resolveActions:wt,resolveLog:je,resolveRaise:Oe,resolveSend:Te,resolveStop:Re,respond:vr,send:V,sendParent:_t,sendTo:Ae,sendUpdate:Ne,start:Le,stop:Ie,toActionObject:ht,toActionObjects:B,toActivityDefinition:Jt},Symbol.toStringTag,{value:"Module"}));var Mt=[],ot=function(e,t){Mt.push(e);var r=t(e);return Mt.pop(),r},Er=function(e){return e(Mt[Mt.length-1])};function Ue(e){var t;return t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},t[W]=function(){return this},t}function Or(e,t,r,n){var i,a=Ee(e.src),o=(i=t==null?void 0:t.options.services)===null||i===void 0?void 0:i[a.type],s=e.data?Rt(e.data,r,n):void 0,u=o?te(o,e.id,s):Ue(e.id);return u.meta=e,u}function te(e,t,r){var n=Ue(t);if(n.deferred=!0,Q(e)){var i=n.state=ot(void 0,function(){return(r?e.withContext(r):e).initialState});n.getSnapshot=function(){return i}}return n}function Tr(e){try{return typeof e.send=="function"}catch{return!1}}function Ar(e){return Tr(e)&&"id"in e}function Ce(e){var t;return l((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},t[W]=function(){return this},t),e)}var $t=function(e){return e.type==="atomic"||e.type==="final"};function ke(e){return Object.keys(e.states).map(function(t){return e.states[t]})}function St(e){return ke(e).filter(function(t){return t.type!=="history"})}function ze(e){var t=[e];return $t(e)?t:t.concat($(St(e).map(ze)))}function yt(e,t){var r,n,i,a,o,s,u,c,f=new Set(e),d=Bt(f),h=new Set(t);try{for(var v=b(h),p=v.next();!p.done;p=v.next())for(var y=p.value,m=y.parent;m&&!h.has(m);)h.add(m),m=m.parent}catch(I){r={error:I}}finally{try{p&&!p.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}var S=Bt(h);try{for(var g=b(h),w=g.next();!w.done;w=g.next()){var y=w.value;if(y.type==="compound"&&(!S.get(y)||!S.get(y).length))d.get(y)?d.get(y).forEach(function(x){return h.add(x)}):y.initialStateNodes.forEach(function(x){return h.add(x)});else if(y.type==="parallel")try{for(var P=(o=void 0,b(St(y))),O=P.next();!O.done;O=P.next()){var M=O.value;h.has(M)||(h.add(M),d.get(M)?d.get(M).forEach(function(x){return h.add(x)}):M.initialStateNodes.forEach(function(x){return h.add(x)}))}}catch(x){o={error:x}}finally{try{O&&!O.done&&(s=P.return)&&s.call(P)}finally{if(o)throw o.error}}}}catch(I){i={error:I}}finally{try{w&&!w.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}try{for(var T=b(h),N=T.next();!N.done;N=T.next())for(var y=N.value,m=y.parent;m&&!h.has(m);)h.add(m),m=m.parent}catch(I){u={error:I}}finally{try{N&&!N.done&&(c=T.return)&&c.call(T)}finally{if(u)throw u.error}}return h}function Fe(e,t){var r=t.get(e);if(!r)return{};if(e.type==="compound"){var n=r[0];if(n){if($t(n))return n.key}else return{}}var i={};return r.forEach(function(a){i[a.key]=Fe(a,t)}),i}function Bt(e){var t,r,n=new Map;try{for(var i=b(e),a=i.next();!a.done;a=i.next()){var o=a.value;n.has(o)||n.set(o,[]),o.parent&&(n.has(o.parent)||n.set(o.parent,[]),n.get(o.parent).push(o))}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}function Nr(e,t){var r=yt([e],t);return Fe(e,Bt(r))}function st(e,t){return Array.isArray(e)?e.some(function(r){return r===t}):e instanceof Set?e.has(t):!1}function jr(e){return R([],E(new Set($(R([],E(e.map(function(t){return t.ownEvents})),!1)))),!1)}function jt(e,t){return t.type==="compound"?St(t).some(function(r){return r.type==="final"&&st(e,r)}):t.type==="parallel"?St(t).every(function(r){return jt(e,r)}):!1}function Pr(e){return e===void 0&&(e=[]),e.reduce(function(t,r){return r.meta!==void 0&&(t[r.id]=r.meta),t},{})}function ce(e){return new Set($(e.map(function(t){return t.tags})))}function Je(e,t){if(e===t)return!0;if(e===void 0||t===void 0)return!1;if(A(e)||A(t))return e===t;var r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every(function(i){return Je(e[i],t[i])})}function Lr(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}function Ir(e,t){var r=e.exec,n=l(l({},e),{exec:r!==void 0?function(){return r(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0});return n}var J=function(){function e(t){var r=this,n;this.actions=[],this.activities=ae,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||ae,this.meta=Pr(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=(n=Array.isArray(t.tags)?new Set(t.tags):t.tags)!==null&&n!==void 0?n:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return jr(r.configuration)}})}return e.from=function(t,r){if(t instanceof e)return t.context!==r?new e({value:t.value,context:r,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t;var n=H;return new e({value:t,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,r){if(t instanceof e){if(!t.actions.length)return t;var n=H;return new e({value:t.value,context:r,_event:n,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,r)},e.prototype.toStrings=function(t,r){var n=this;if(t===void 0&&(t=this.value),r===void 0&&(r="."),A(t))return[t];var i=Object.keys(t);return i.concat.apply(i,R([],E(i.map(function(a){return n.toStrings(t[a],r).map(function(o){return a+r+o})})),!1))},e.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var r=t.tags;t.machine;var n=Vt(t,["configuration","transitions","tags","machine"]);return l(l({},n),{tags:Array.from(r)})},e.prototype.matches=function(t){return xt(t,this.value)},e.prototype.hasTag=function(t){return this.tags.has(t)},e.prototype.can=function(t){var r,n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,t);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},e}(),Rr={deferEvents:!1},fe=function(){function e(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=l(l({},Rr),t)}return e.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents){this.schedule(t);return}this.process(t)}this.flushEvents()},e.prototype.schedule=function(t){if(!this.initialized||this.processingEvent){this.queue.push(t);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},e.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},e}(),qt=new Map,Dr=0,Tt={bookId:function(){return"x:".concat(Dr++)},register:function(e,t){return qt.set(e,t),e},get:function(e){return qt.get(e)},free:function(e){qt.delete(e)}},he={};function ee(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof he<"u")return he;console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues")}function Mr(){var e=ee();if(e&&"__xstate__"in e)return e.__xstate__}function $r(e){if(ee()){var t=Mr();t&&t.register(e)}}function _e(e,t){t===void 0&&(t={});var r=e.initialState,n=new Set,i=[],a=!1,o=function(){if(!a){for(a=!0;i.length>0;){var c=i.shift();r=e.transition(r,c,u),n.forEach(function(f){return f.next(r)})}a=!1}},s=Ce({id:t.id,send:function(c){i.push(c),o()},getSnapshot:function(){return r},subscribe:function(c,f,d){var h=mt(c,f,d);return n.add(h),h.next(r),{unsubscribe:function(){n.delete(h)}}}}),u={parent:t.parent,self:s,id:t.id||"anonymous",observers:n};return r=e.start?e.start(u):r,s}var Qt={sync:!1,autoForward:!1},U;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(U||(U={}));var qe=function(){function e(t,r){r===void 0&&(r=e.defaultOptions);var n=this;this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=U.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(f,d){if(lt(f))return n.batch(f),n.state;var h=C(Ft(f,d));if(n.status===U.Stopped)return k(!1,'Event "'.concat(h.name,'" was sent to stopped service "').concat(n.machine.id,`". This service has already reached its final state, and will not transition.
Event: `).concat(JSON.stringify(h.data))),n.state;if(n.status!==U.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(h.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(h.data)));return n.scheduler.schedule(function(){n.forward(h);var v=n._nextState(h);n.update(v,h)}),n._state},this.sendTo=function(f,d,h){var v=n.parent&&(d===X.Parent||n.parent.id===d),p=v?n.parent:A(d)?n.children.get(d)||Tt.get(d):fr(d)?d:void 0;if(!p){if(!v)throw new Error("Unable to send event to child '".concat(d,"' from service '").concat(n.id,"'."));k(!1,"Service '".concat(n.id,"' has no parent: unable to send event ").concat(f.type));return}if("machine"in p){if(n.status!==U.Stopped||n.parent!==p||n.state.done){var y=l(l({},f),{name:f.name===Kt?"".concat(ct(n.id)):f.name,origin:n.sessionId});!h&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([p,y]):p.send(y)}}else!h&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([p,f.data]):p.send(f.data)},this._exec=function(f,d,h,v){v===void 0&&(v=n.machine.options.actions);var p=f.exec||Dt(f.type,v),y=L(p)?p:p?p.exec:f.exec;if(y)try{return y(d,h.data,n.machine.config.predictableActionArguments?{action:f,_event:h}:{action:f,state:n.state,_event:h})}catch(F){throw n.parent&&n.parent.send({type:"xstate.error",data:F}),F}switch(f.type){case Z:var m=f;if(typeof m.delay=="number"){n.defer(m);return}else m.to?n.sendTo(m._event,m.to,h===H):n.send(m._event);break;case Ht:n.cancel(f.sendId);break;case Pt:{if(n.status!==U.Running)return;var S=f.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[S.id||S.type])break;if(S.type===j.Invoke){var g=Ee(S.src),w=n.machine.options.services?n.machine.options.services[g.type]:void 0,P=S.id,O=S.data;k(!("forward"in S),"`forward` property is deprecated (found in invocation of '".concat(S.src,"' in in machine '").concat(n.machine.id,"'). ")+"Please use `autoForward` instead.");var M="autoForward"in S?S.autoForward:!!S.forward;if(!w){k(!1,"No service found for invocation '".concat(S.src,"' in machine '").concat(n.machine.id,"'."));return}var T=O?Rt(O,d,h):void 0;if(typeof w=="string")return;var N=L(w)?w(d,h.data,{data:T,src:g,meta:S.meta}):w;if(!N)return;var I=void 0;Q(N)&&(N=T?N.withContext(T):N,I={autoForward:M}),n.spawn(N,P,I)}else n.spawnActivity(S);break}case Ut:{n.stopChild(f.activity.id);break}case kt:var x=f.label,D=f.value;x?n.logger(x,D):n.logger(D);break;default:k(!1,"No implementation found for action type '".concat(f.type,"'"));break}};var i=l(l({},e.defaultOptions),r),a=i.clock,o=i.logger,s=i.parent,u=i.id,c=u!==void 0?u:t.id;this.id=c,this.logger=o,this.clock=a,this.parent=s,this.options=i,this.scheduler=new fe({deferEvents:this.options.deferEvents}),this.sessionId=Tt.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:ot(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return k(this.status!==U.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,r){var n,i;try{for(var a=b(t.actions),o=a.next();!o.done;o=a.next()){var s=o.value;this.exec(s,t,r)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.update=function(t,r){var n,i,a,o,s,u,c,f,d=this;if(t._sessionid=this.sessionId,this._state=t,(!this.machine.config.predictableActionArguments||r===H)&&this.options.execute)this.execute(this.state);else for(var h=void 0;h=this._outgoingQueue.shift();)h[0].send(h[1]);if(this.children.forEach(function(I){d.state.children[I.id]=I}),this.devTools&&this.devTools.send(r.data,t),t.event)try{for(var v=b(this.eventListeners),p=v.next();!p.done;p=v.next()){var y=p.value;y(t.event)}}catch(I){n={error:I}}finally{try{p&&!p.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}try{for(var m=b(this.listeners),S=m.next();!S.done;S=m.next()){var y=S.value;y(t,t.event)}}catch(I){a={error:I}}finally{try{S&&!S.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}try{for(var g=b(this.contextListeners),w=g.next();!w.done;w=g.next()){var P=w.value;P(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(I){s={error:I}}finally{try{w&&!w.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}if(this.state.done){var O=t.configuration.find(function(I){return I.type==="final"&&I.parent===d.machine}),M=O&&O.doneData?Rt(O.doneData,t.context,r):void 0;try{for(var T=b(this.doneListeners),N=T.next();!N.done;N=T.next()){var y=N.value;y(ft(this.id,M))}}catch(I){c={error:I}}finally{try{N&&!N.done&&(f=T.return)&&f.call(T)}finally{if(c)throw c.error}}this._stop(),this._stopChildren()}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===U.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,r,n){var i=this,a=mt(t,r,n);this.listeners.add(a.next),this.status!==U.NotStarted&&a.next(this.state);var o=function(){i.doneListeners.delete(o),i.stopListeners.delete(o),a.complete()};return this.status===U.Stopped?a.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){i.listeners.delete(a.next),i.doneListeners.delete(o),i.stopListeners.delete(o)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var r=this;if(this.status===U.Running)return this;this.machine._init(),Tt.register(this.sessionId,this),this.initialized=!0,this.status=U.Running;var n=t===void 0?this.initialState:ot(this,function(){return Lr(t)?r.machine.resolveState(t):r.machine.resolveState(J.from(t,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,H)}),this},e.prototype._stopChildren=function(){this.children.forEach(function(t){L(t.stop)&&t.stop()}),this.children.clear()},e.prototype._stop=function(){var t,r,n,i,a,o,s,u,c,f;try{for(var d=b(this.listeners),h=d.next();!h.done;h=d.next()){var v=h.value;this.listeners.delete(v)}}catch(T){t={error:T}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}try{for(var p=b(this.stopListeners),y=p.next();!y.done;y=p.next()){var v=y.value;v(),this.stopListeners.delete(v)}}catch(T){n={error:T}}finally{try{y&&!y.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}try{for(var m=b(this.contextListeners),S=m.next();!S.done;S=m.next()){var v=S.value;this.contextListeners.delete(v)}}catch(T){a={error:T}}finally{try{S&&!S.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}try{for(var g=b(this.doneListeners),w=g.next();!w.done;w=g.next()){var v=w.value;this.doneListeners.delete(v)}}catch(T){s={error:T}}finally{try{w&&!w.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}if(!this.initialized)return this;this.initialized=!1,this.status=U.Stopped,this._initialState=void 0;try{for(var P=b(Object.keys(this.delayedEventsMap)),O=P.next();!O.done;O=P.next()){var M=O.value;this.clock.clearTimeout(this.delayedEventsMap[M])}}catch(T){c={error:T}}finally{try{O&&!O.done&&(f=P.return)&&f.call(P)}finally{if(c)throw c.error}}this.scheduler.clear(),this.scheduler=new fe({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var t=this,r=this.scheduler;return this._stop(),r.schedule(function(){var n=C({type:"xstate.stop"}),i=ot(t,function(){var a=$(R([],E(t.state.configuration),!1).sort(function(f,d){return d.order-f.order}).map(function(f){return B(f.onExit,t.machine.options.actions)})),o=E(wt(t.machine,t.state,t.state.context,n,[a],t.machine.config.predictableActionArguments?t._exec:void 0,t.machine.config.predictableActionArguments||t.machine.config.preserveActionOrder),2),s=o[0],u=o[1],c=new J({value:t.state.value,context:u,_event:n,_sessionid:t.sessionId,historyValue:void 0,history:t.state,actions:s.filter(function(f){return f.type!==K&&(f.type!==Z||!!f.to&&f.to!==X.Internal)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:t.state.done,tags:t.state.tags,machine:t.machine});return c.changed=!0,c});t.update(i,n),t._stopChildren(),Tt.free(t.sessionId)}),this},e.prototype.batch=function(t){var r=this;if(this.status===U.NotStarted&&this.options.deferEvents)k(!1,"".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,`" and are deferred. Make sure .start() is called for this service.
Event: `).concat(JSON.stringify(event)));else if(this.status!==U.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(t.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,a,o=r.state,s=!1,u=[],c=function(v){var p=C(v);r.forward(p),o=ot(r,function(){return r.machine.transition(o,p,void 0,n||void 0)}),u.push.apply(u,R([],E(r.machine.config.predictableActionArguments?o.actions:o.actions.map(function(y){return Ir(y,o)})),!1)),s=s||!!o.changed};try{for(var f=b(t),d=f.next();!d.done;d=f.next()){var h=d.value;c(h)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}o.changed=s,o.actions=u,r.update(o,C(t[t.length-1]))})}},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype._nextState=function(t,r){var n=this;r===void 0&&(r=!!this.machine.config.predictableActionArguments&&this._exec);var i=C(t);if(i.name.indexOf(Gt)===0&&!this.state.nextEvents.some(function(o){return o.indexOf(Gt)===0}))throw i.data.data;var a=ot(this,function(){return n.machine.transition(n.state,i,void 0,r||void 0)});return a},e.prototype.nextState=function(t){return this._nextState(t,!1)},e.prototype.forward=function(t){var r,n;try{for(var i=b(this.forwardTo),a=i.next();!a.done;a=i.next()){var o=a.value,s=this.children.get(o);if(!s)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));s.send(t)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.defer=function(t){var r=this;this.delayedEventsMap[t.id]=this.clock.setTimeout(function(){t.to?r.sendTo(t._event,t.to,!0):r.send(t._event)},t.delay)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,r,n){n===void 0&&(n=this.machine.options.actions),this._exec(t,r.context,r._event,n)},e.prototype.removeChild=function(t){var r;this.children.delete(t),this.forwardTo.delete(t),(r=this.state)===null||r===void 0||delete r.children[t]},e.prototype.stopChild=function(t){var r=this.children.get(t);r&&(this.removeChild(t),L(r.stop)&&r.stop())},e.prototype.spawn=function(t,r,n){if(this.status!==U.Running)return te(t,r);if(se(t))return this.spawnPromise(Promise.resolve(t),r);if(L(t))return this.spawnCallback(t,r);if(Ar(t))return this.spawnActor(t,r);if(cr(t))return this.spawnObservable(t,r);if(Q(t))return this.spawnMachine(t,l(l({},n),{id:r}));if(or(t))return this.spawnBehavior(t,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,r){var n=this;r===void 0&&(r={});var i=new e(t,l(l({},this.options),{parent:this,id:r.id||t.id})),a=l(l({},Qt),r);a.sync&&i.onTransition(function(s){n.send(zt,{state:s,id:i.id})});var o=i;return this.children.set(i.id,o),a.autoForward&&this.forwardTo.add(i.id),i.onDone(function(s){n.removeChild(i.id),n.send(C(s,{origin:i.id}))}).start(),o},e.prototype.spawnBehavior=function(t,r){var n=_e(t,{id:r,parent:this});return this.children.set(r,n),n},e.prototype.spawnPromise=function(t,r){var n,i=this,a=!1,o;t.then(function(u){a||(o=u,i.removeChild(r),i.send(C(ft(r,u),{origin:r})))},function(u){if(!a){i.removeChild(r);var c=ct(r,u);try{i.send(C(c,{origin:r}))}catch(f){dr(u,f,r),i.devTools&&i.devTools.send(c,i.state),i.machine.strict&&i.stop()}}});var s=(n={id:r,send:function(){},subscribe:function(u,c,f){var d=mt(u,c,f),h=!1;return t.then(function(v){h||(d.next(v),!h&&d.complete())},function(v){h||d.error(v)}),{unsubscribe:function(){return h=!0}}},stop:function(){a=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return o}},n[W]=function(){return this},n);return this.children.set(r,s),s},e.prototype.spawnCallback=function(t,r){var n,i=this,a=!1,o=new Set,s=new Set,u,c=function(h){u=h,s.forEach(function(v){return v(h)}),!a&&i.send(C(h,{origin:r}))},f;try{f=t(c,function(h){o.add(h)})}catch(h){this.send(ct(r,h))}if(se(f))return this.spawnPromise(f,r);var d=(n={id:r,send:function(h){return o.forEach(function(v){return v(h)})},subscribe:function(h){var v=mt(h);return s.add(v.next),{unsubscribe:function(){s.delete(v.next)}}},stop:function(){a=!0,L(f)&&f()},toJSON:function(){return{id:r}},getSnapshot:function(){return u}},n[W]=function(){return this},n);return this.children.set(r,d),d},e.prototype.spawnObservable=function(t,r){var n,i=this,a,o=t.subscribe(function(u){a=u,i.send(C(u,{origin:r}))},function(u){i.removeChild(r),i.send(C(ct(r,u),{origin:r}))},function(){i.removeChild(r),i.send(C(ft(r),{origin:r}))}),s=(n={id:r,send:function(){},subscribe:function(u,c,f){return t.subscribe(u,c,f)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:r}}},n[W]=function(){return this},n);return this.children.set(r,s),s},e.prototype.spawnActor=function(t,r){return this.children.set(r,t),t},e.prototype.spawnActivity=function(t){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(!r){k(!1,"No implementation found for activity '".concat(t.type,"'"));return}var n=r(this.state.context,t);this.spawnEffect(t.id,n)},e.prototype.spawnEffect=function(t,r){var n;this.children.set(t,(n={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},n[W]=function(){return this},n))},e.prototype.attachDev=function(){var t=ee();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(l(l({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:l({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}$r(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[W]=function(){return this},e.prototype.getSnapshot=function(){return this.status===U.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,r){return setTimeout(t,r)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},e.interpret=Ge,e}(),Ur=function(e){return A(e)?l(l({},Qt),{name:e}):l(l(l({},Qt),{name:hr()}),e)};function Cr(e,t){var r=Ur(t);return Er(function(n){{var i=Q(e)||L(e);k(!!n||i,'Attempted to spawn an Actor (ID: "'.concat(Q(e)?e.id:"undefined",'") outside of a service. This will have no effect.'))}return n?n.spawn(e,r.name,r):te(e,r.name)})}function Ge(e,t){var r=new qe(e,t);return r}function kr(e){if(typeof e=="string"){var t={type:e};return t.toString=function(){return e},t}return e}function At(e){return l(l({type:Lt},e),{toJSON:function(){e.onDone,e.onError;var t=Vt(e,["onDone","onError"]);return l(l({},t),{type:Lt,src:kr(e.src)})}})}var ut="",Wt="#",dt="*",it={},at=function(e){return e[0]===Wt},zr=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Fr=function(e,t,r){var n=r.slice(0,-1).some(function(a){return!("cond"in a)&&!("in"in a)&&(A(a.target)||Q(a.target))}),i=t===ut?"the transient event":"event '".concat(t,"'");k(!n,"One or more transitions for ".concat(i," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},re=function(){function e(t,r,n,i){n===void 0&&(n="context"in t?t.context:void 0);var a=this,o;this.config=t,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(zr(),r),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:ge),this.id=this.config.id||R([this.machine.key],E(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,k(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?vt(this.config.states,function(c,f){var d,h=new e(c,{},void 0,{parent:a,key:f});return Object.assign(a.idMap,l((d={},d[h.id]=h,d),h.idMap)),h}):it;var s=0;function u(c){var f,d;c.order=s++;try{for(var h=b(ke(c)),v=h.next();!v.done;v=h.next()){var p=v.value;u(p)}}catch(y){f={error:y}}finally{try{v&&!v.done&&(d=h.return)&&d.call(h)}finally{if(f)throw f.error}}}u(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(c){var f=c.event;return f===ut}):ut in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=G(this.config.entry||this.config.onEntry).map(function(c){return ht(c)}),this.onExit=G(this.config.exit||this.config.onExit).map(function(c){return ht(c)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=G(this.config.invoke).map(function(c,f){var d,h;if(Q(c)){var v=Ot(a.id,f);return a.machine.options.services=l((d={},d[v]=c,d),a.machine.options.services),At({src:v,id:v})}else if(A(c.src)){var v=c.id||Ot(a.id,f);return At(l(l({},c),{id:v,src:c.src}))}else if(Q(c.src)||L(c.src)){var v=c.id||Ot(a.id,f);return a.machine.options.services=l((h={},h[v]=c.src,h),a.machine.options.services),At(l(l({id:v},c),{src:v}))}else{var p=c.src;return At(l(l({id:Ot(a.id,f)},c),{src:p}))}}),this.activities=G(this.config.activities).concat(this.invoke).map(function(c){return Jt(c)}),this.transition=this.transition.bind(this),this.tags=G(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||ze(this).forEach(function(t){return t.on})},e.prototype.withConfig=function(t,r){var n=this.options,i=n.actions,a=n.activities,o=n.guards,s=n.services,u=n.delays;return new e(this.config,{actions:l(l({},i),t.actions),activities:l(l({},a),t.activities),guards:l(l({},o),t.guards),services:l(l({},s),t.services),delays:l(l({},u),t.delays)},r??this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return L(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:vt(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var r=t===ut,n=this.transitions.filter(function(i){var a=i.eventType===t;return r?a:a||i.eventType===dt});return this.__cache.candidates[t]=n,n},e.prototype.getDelayedTransitions=function(){var t=this,r=this.config.after;if(!r)return[];var n=function(a,o){var s=L(a)?"".concat(t.id,":delay[").concat(o,"]"):a,u=Me(s,t.id);return t.onEntry.push(V(u,{delay:a})),t.onExit.push(Pe(u)),u},i=lt(r)?r.map(function(a,o){var s=n(a.delay,o);return l(l({},a),{event:s})}):$(Object.keys(r).map(function(a,o){var s=r[a],u=A(s)?{target:s}:s,c=isNaN(+a)?a:+a,f=n(c,o);return G(u).map(function(d){return l(l({},d),{event:f,delay:c})})}));return i.map(function(a){var o=a.delay;return l(l({},t.formatTransition(a)),{delay:o})})},e.prototype.getStateNodes=function(t){var r,n=this;if(!t)return[];var i=t instanceof J?t.value:gt(t,this.delimiter);if(A(i)){var a=this.getStateNode(i).initial;return a!==void 0?this.getStateNodes((r={},r[i]=a,r)):[this,this.states[i]]}var o=Object.keys(i),s=[this];return s.push.apply(s,R([],E($(o.map(function(u){return n.getStateNode(u).getStateNodes(i[u])}))),!1)),s},e.prototype.handles=function(t){var r=me(t);return this.events.includes(r)},e.prototype.resolveState=function(t){var r=t instanceof J?t:J.create(t),n=Array.from(yt([],this.getStateNodes(r.value)));return new J(l(l({},r),{value:this.resolve(r.value),configuration:n,done:jt(n,this),tags:ce(n),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,r,n){var i=this.getStateNode(t),a=i.next(r,n);return!a||!a.transitions.length?this.next(r,n):a},e.prototype.transitionCompoundNode=function(t,r,n){var i=Object.keys(t),a=this.getStateNode(i[0]),o=a._transition(t[i[0]],r,n);return!o||!o.transitions.length?this.next(r,n):o},e.prototype.transitionParallelNode=function(t,r,n){var i,a,o={};try{for(var s=b(Object.keys(t)),u=s.next();!u.done;u=s.next()){var c=u.value,f=t[c];if(f){var d=this.getStateNode(c),h=d._transition(f,r,n);h&&(o[c]=h)}}}catch(g){i={error:g}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}var v=Object.keys(o).map(function(g){return o[g]}),p=$(v.map(function(g){return g.transitions})),y=v.some(function(g){return g.transitions.length>0});if(!y)return this.next(r,n);var m=$(v.map(function(g){return g.entrySet})),S=$(Object.keys(o).map(function(g){return o[g].configuration}));return{transitions:p,entrySet:m,exitSet:$(v.map(function(g){return g.exitSet})),configuration:S,source:r,actions:$(Object.keys(o).map(function(g){return o[g].actions}))}},e.prototype._transition=function(t,r,n){return A(t)?this.transitionLeafNode(t,r,n):Object.keys(t).length===1?this.transitionCompoundNode(t,r,n):this.transitionParallelNode(t,r,n)},e.prototype.getTransitionData=function(t,r){return this._transition(t.value,t,C(r))},e.prototype.next=function(t,r){var n,i,a=this,o=r.name,s=[],u=[],c;try{for(var f=b(this.getCandidates(o)),d=f.next();!d.done;d=f.next()){var h=d.value,v=h.cond,p=h.in,y=t.context,m=p?A(p)&&at(p)?t.matches(gt(this.getStateNodeById(p).path,this.delimiter)):xt(gt(p,this.delimiter),nr(this.path.slice(0,-2))(t.value)):!0,S=!1;try{S=!v||be(this.machine,v,y,r,t)}catch(O){throw new Error("Unable to evaluate guard '".concat(v.name||v.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(O.message))}if(S&&m){h.target!==void 0&&(u=h.target),s.push.apply(s,R([],E(h.actions),!1)),c=h;break}}}catch(O){n={error:O}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}if(c){if(!u.length)return{transitions:[c],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:s};var g=$(u.map(function(O){return a.getRelativeStateNodes(O,t.historyValue)})),w=!!c.internal,P=[];return w||u.forEach(function(O){P.push.apply(P,R([],E(a.getExternalReentryNodes(O)),!1))}),{transitions:[c],entrySet:P,exitSet:w?[]:[this],configuration:g,source:t,actions:s}}},e.prototype.getExternalReentryNodes=function(t){for(var r=[],n=E(t.order>this.order?[t,this]:[this,t],2),i=n[0],a=n[1];i&&i!==a;)r.push(i),i=i.parent;return i!==a?[]:(r.push(a),r)},e.prototype.getActions=function(t,r,n,i,a,o,s){var u,c,f,d,h=this,v=yt([],o?this.getStateNodes(o.value):[this]);try{for(var p=b(t),y=p.next();!y.done;y=p.next()){var m=y.value;(!st(v,m)||st(n.entrySet,m.parent)&&!st(n.entrySet,m))&&n.entrySet.push(m)}}catch(x){u={error:x}}finally{try{y&&!y.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}try{for(var S=b(v),g=S.next();!g.done;g=S.next()){var m=g.value;(!st(t,m)||st(n.exitSet,m.parent))&&n.exitSet.push(m)}}catch(x){f={error:x}}finally{try{g&&!g.done&&(d=S.return)&&d.call(S)}finally{if(f)throw f.error}}var w=$(n.entrySet.map(function(x){var D=[];if(x.type!=="final")return D;var F=x.parent;if(!F.parent)return D;D.push(pt(x.id,x.doneData),pt(F.id,x.doneData?Rt(x.doneData,i,a):void 0));var _=F.parent;return _.type==="parallel"&&St(_).every(function(Y){return jt(n.configuration,Y)})&&D.push(pt(_.id)),D}));n.exitSet.sort(function(x,D){return D.order-x.order}),n.entrySet.sort(function(x,D){return x.order-D.order});var P=new Set(n.entrySet),O=new Set(n.exitSet),M=Array.from(P).map(function(x){var D=x.onEntry,F=x.activities.map(function(_){return Le(_)});return B(s?R(R([],E(D),!1),E(F),!1):R(R([],E(F),!1),E(D),!1),h.machine.options.actions)}).concat([w.map(Zt)]),T=Array.from(O).map(function(x){return B(R(R([],E(x.onExit),!1),E(x.activities.map(function(D){return Ie(D)})),!1),h.machine.options.actions)}),N=T.concat([B(n.actions,this.machine.options.actions)]).concat(M);if(r){var I=B($(R([],E(t),!1).sort(function(x,D){return D.order-x.order}).map(function(x){return x.onExit})),this.machine.options.actions).filter(function(x){return x.type!==K&&(x.type!==Z||!!x.to&&x.to!==X.Internal)});return N.concat([I])}return N},e.prototype.transition=function(t,r,n,i){t===void 0&&(t=this.initialState);var a=C(r),o;if(t instanceof J)o=n===void 0?t:this.resolveState(J.from(t,n));else{var s=A(t)?this.resolve(It(this.getResolvedPath(t))):this.resolve(t),u=n??this.machine.context;o=this.resolveState(J.from(s,u))}if(a.name===dt)throw new Error("An event cannot have the wildcard type ('".concat(dt,"')"));if(this.strict&&!this.events.includes(a.name)&&!ar(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var c=this._transition(o.value,o,a)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:o,actions:[]},f=yt([],this.getStateNodes(o.value)),d=c.configuration.length?yt(f,c.configuration):f;return c.configuration=R([],E(d),!1),this.resolveTransition(c,o,o.context,i,a)},e.prototype.resolveRaisedTransition=function(t,r,n,i){var a,o=t.actions;return t=this.transition(t,r,void 0,i),t._event=n,t.event=n.data,(a=t.actions).unshift.apply(a,R([],E(o),!1)),t},e.prototype.resolveTransition=function(t,r,n,i,a){var o,s,u,c,f=this;a===void 0&&(a=H);var d=t.configuration,h=!r||t.transitions.length>0,v=h?t.configuration:r?r.configuration:[],p=jt(v,this),y=h?Nr(this.machine,d):void 0,m=r?r.historyValue?r.historyValue:t.source?this.machine.historyValue(r.value):void 0:void 0,S=this.getActions(new Set(v),p,t,n,a,r,i),g=r?l({},r.activities):{};try{for(var w=b(S),P=w.next();!P.done;P=w.next()){var O=P.value;try{for(var M=(u=void 0,b(O)),T=M.next();!T.done;T=M.next()){var N=T.value;N.type===Pt?g[N.activity.id||N.activity.type]=N:N.type===Ut&&(g[N.activity.id||N.activity.type]=!1)}}catch(z){u={error:z}}finally{try{T&&!T.done&&(c=M.return)&&c.call(M)}finally{if(u)throw u.error}}}}catch(z){o={error:z}}finally{try{P&&!P.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}var I=E(wt(this,r,n,a,S,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),x=I[0],D=I[1],F=E(sr(x,function(z){return z.type===K||z.type===Z&&z.to===X.Internal}),2),_=F[0],Y=F[1],tt=x.filter(function(z){var rt;return z.type===Pt&&((rt=z.activity)===null||rt===void 0?void 0:rt.type)===Lt}),Ye=tt.reduce(function(z,rt){return z[rt.activity.id]=Or(rt.activity,f.machine,D,a),z},r?l({},r.children):{}),bt=new J({value:y||r.value,context:D,_event:a,_sessionid:r?r._sessionid:null,historyValue:y?m?ur(m,y):void 0:r?r.historyValue:void 0,history:!y||t.source?r:void 0,actions:y?Y:[],activities:y?g:r?r.activities:{},events:[],configuration:v,transitions:t.transitions,children:Ye,done:p,tags:ce(v),machine:this}),ne=n!==D;bt.changed=a.name===zt||ne;var et=bt.history;et&&delete et.history;var ie=!p&&(this._transient||d.some(function(z){return z._transient}));if(!h&&(!ie||a.name===ut))return bt;var q=bt;if(!p)for(ie&&(q=this.resolveRaisedTransition(q,{type:de},a,i));_.length;){var Be=_.shift();q=this.resolveRaisedTransition(q,Be._event,a,i)}var Qe=q.changed||(et?!!q.actions.length||ne||typeof et.value!=typeof q.value||!Je(q.value,et.value):void 0);return q.changed=Qe,q.history=et,q},e.prototype.getStateNode=function(t){if(at(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[t];if(!r)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return r},e.prototype.getStateNodeById=function(t){var r=at(t)?t.slice(Wt.length):t;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},e.prototype.getStateNodeByPath=function(t){if(typeof t=="string"&&at(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var r=Yt(t,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},e.prototype.resolve=function(t){var r,n=this;if(!t)return this.initialStateValue||it;switch(this.type){case"parallel":return vt(this.initialStateValue,function(a,o){return a?n.getStateNode(o).resolve(t[o]||a):it});case"compound":if(A(t)){var i=this.getStateNode(t);return i.type==="parallel"||i.type==="compound"?(r={},r[t]=i.initialStateValue,r):t}return Object.keys(t).length?vt(t,function(a,o){return a?n.getStateNode(o).resolve(a):it}):this.initialStateValue||{};default:return t||it}},e.prototype.getResolvedPath=function(t){if(at(t)){var r=this.machine.idMap[t.slice(Wt.length)];if(!r)throw new Error("Unable to find state node '".concat(t,"'"));return r.path}return Yt(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=oe(this.states,function(n){return n.initialStateValue||it},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=$t(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,r){this._init();var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r??this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if(this.type==="history"){var r=this.config;A(r.target)?t=at(r.target)?It(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:t=r.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,r,n){return n===void 0&&(n=!0),n?t.type==="history"?t.resolveHistory(r):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;if($t(this))return[this];if(this.type==="compound"&&!this.initial)return k(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var r=Nt(this.initialStateValue);return $(r.map(function(n){return t.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var r=E(t),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var a=this.getStateNode(n);if(a.type==="history")return a.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},e.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:oe(this.states,function(r,n){if(!t)return r.historyValue();var i=A(t)?void 0:t[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},e.prototype.resolveHistory=function(t){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!t){var i=this.target;return i?$(Nt(i).map(function(o){return n.getFromRelativePath(o)})):n.initialStateNodes}var a=ir(n.path,"states")(t).current;return A(a)?[n.getStateNode(a)]:$(Nt(a).map(function(o){return r.history==="deep"?n.getFromRelativePath(o):[n.states[o[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,r=$(Object.keys(this.states).map(function(n){return t.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,r,n,i;if(this.__cache.events)return this.__cache.events;var a=this.states,o=new Set(this.ownEvents);if(a)try{for(var s=b(Object.keys(a)),u=s.next();!u.done;u=s.next()){var c=u.value,f=a[c];if(f.states)try{for(var d=(n=void 0,b(f.events)),h=d.next();!h.done;h=d.next()){var v=h.value;o.add("".concat(v))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var r=this;if(t!==void 0)return t.map(function(n){if(!A(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var a=i?r.key+n:n;if(r.parent)try{var o=r.parent.getStateNodeByPath(a);return o}catch(s){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(s.message))}else return r.getStateNodeByPath(a)})},e.prototype.formatTransition=function(t){var r=this,n=lr(t.target),i="internal"in t?t.internal:n?n.some(function(u){return A(u)&&u[0]===r.delimiter}):!0,a=this.machine.options.guards,o=this.resolveTarget(n),s=l(l({},t),{actions:B(G(t.actions)),cond:xe(t.cond,a),target:o,source:this,internal:i,eventType:t.event,toJSON:function(){return l(l({},s),{target:s.target?s.target.map(function(u){return"#".concat(u.id)}):void 0,source:"#".concat(r.id)})}});return s},e.prototype.formatTransitions=function(){var t,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var a=this.config.on,o=dt,s=a[o],u=s===void 0?[]:s,c=Vt(a,[typeof o=="symbol"?o:o+""]);i=$(Object.keys(c).map(function(g){g===ut&&k(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(n.id,'".'));var w=nt(g,c[g]);return Fr(n,g,w),w}).concat(nt(dt,u)))}var f=this.config.always?nt("",this.config.always):[],d=this.config.onDone?nt(String(pt(this.id)),this.config.onDone):[];k(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var h=$(this.invoke.map(function(g){var w=[];return g.onDone&&w.push.apply(w,R([],E(nt(String(ft(g.id)),g.onDone)),!1)),g.onError&&w.push.apply(w,R([],E(nt(String(ct(g.id)),g.onError)),!1)),w})),v=this.after,p=$(R(R(R(R([],E(d),!1),E(h),!1),E(i),!1),E(f),!1).map(function(g){return G(g).map(function(w){return n.formatTransition(w)})}));try{for(var y=b(v),m=y.next();!m.done;m=y.next()){var S=m.value;p.push(S)}}catch(g){t={error:g}}finally{try{m&&!m.done&&(r=y.return)&&r.call(y)}finally{if(t)throw t.error}}return p},e}(),le=!1;function Jr(e,t,r){return r===void 0&&(r=e.context),new re(e,t,r)}function _r(e,t){return!e.predictableActionArguments&&!le&&(le=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new re(e,t)}function qr(e,t){var r,n,i;try{for(var a=b(Object.keys(e)),o=a.next();!o.done;o=a.next()){var s=o.value;xt(s,t)&&(!i||t.length>i.length)&&(i=s)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return e[i]}function Gr(e,t,r){var n,i,a=J.from(e,e instanceof J?e.context:void 0);try{for(var o=b(t),s=o.next();!s.done;s=o.next()){var u=E(s.value,2),c=u[0],f=u[1];if(a.matches(c))return f(a)}}catch(d){n={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r(a)}function Xe(e){return e}var Xr=Xe,Yr=De,Br=V,Qr=Ae,Wr=_t,Vr=Ne,Hr=$e,Kr=ft,Zr=Zt;const nn=Object.freeze(Object.defineProperty({__proto__:null,get ActionTypes(){return j},Interpreter:qe,get InterpreterStatus(){return U},Machine:Jr,get SpecialTargets(){return X},State:J,StateNode:re,actions:br,assign:Yr,createMachine:_r,createSchema:Xe,doneInvoke:Kr,forwardTo:Hr,interpret:Ge,mapState:qr,matchState:Gr,matchesState:xt,raise:Zr,send:Br,sendParent:Wr,sendTo:Qr,sendUpdate:Vr,spawn:Cr,spawnBehavior:_e,t:Xr,toActorRef:Ce,toEventObject:Ft,toObserver:mt,toSCXMLEvent:C},Symbol.toStringTag,{value:"Module"}));export{J as S,Yr as a,_r as c,nn as e,Ge as i,rn as u};
