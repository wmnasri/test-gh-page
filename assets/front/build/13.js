(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[13],{

/***/ "./assets/img/alert-disabled.svg":
/*!***************************************!*\
  !*** ./assets/img/alert-disabled.svg ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/alert-disabled.svg");

/***/ }),

/***/ "./assets/img/alert.svg":
/*!******************************!*\
  !*** ./assets/img/alert.svg ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/alert.svg");

/***/ }),

/***/ "./assets/img/consumption-history/ConsoUnavailable.svg":
/*!*************************************************************!*\
  !*** ./assets/img/consumption-history/ConsoUnavailable.svg ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/ConsoUnavailable.svg");

/***/ }),

/***/ "./assets/img/consumption-history/alertes-fuite-gray.svg":
/*!***************************************************************!*\
  !*** ./assets/img/consumption-history/alertes-fuite-gray.svg ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/alertes-fuite-gray.svg");

/***/ }),

/***/ "./assets/img/consumption-history/alertes-fuite-green.svg":
/*!****************************************************************!*\
  !*** ./assets/img/consumption-history/alertes-fuite-green.svg ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/alertes-fuite-green.svg");

/***/ }),

/***/ "./assets/img/consumption-history/alertes-fuite-red.svg":
/*!**************************************************************!*\
  !*** ./assets/img/consumption-history/alertes-fuite-red.svg ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/alertes-fuite-red.svg");

/***/ }),

/***/ "./assets/img/consumption-history/back-histoconso.png":
/*!************************************************************!*\
  !*** ./assets/img/consumption-history/back-histoconso.png ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/back-histoconso.png");

/***/ }),

/***/ "./assets/img/consumption-history/minus-button.svg":
/*!*********************************************************!*\
  !*** ./assets/img/consumption-history/minus-button.svg ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/minus-button.svg");

/***/ }),

/***/ "./assets/img/consumption-history/plus-button.svg":
/*!********************************************************!*\
  !*** ./assets/img/consumption-history/plus-button.svg ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/plus-button.svg");

/***/ }),

/***/ "./assets/img/icons/bathroom-shower.svg":
/*!**********************************************!*\
  !*** ./assets/img/icons/bathroom-shower.svg ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/bathroom-shower.svg");

/***/ }),

/***/ "./assets/img/icons/bathroom-tub-towel.svg":
/*!*************************************************!*\
  !*** ./assets/img/icons/bathroom-tub-towel.svg ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/bathroom-tub-towel.svg");

/***/ }),

/***/ "./assets/img/icons/euros.svg":
/*!************************************!*\
  !*** ./assets/img/icons/euros.svg ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/euros.svg");

/***/ }),

/***/ "./assets/img/icons/info-circle.png":
/*!******************************************!*\
  !*** ./assets/img/icons/info-circle.png ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/info-circle.png");

/***/ }),

/***/ "./assets/img/icons/pack-eau.svg":
/*!***************************************!*\
  !*** ./assets/img/icons/pack-eau.svg ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/pack-eau.svg");

/***/ }),

/***/ "./assets/img/icons/person.svg":
/*!*************************************!*\
  !*** ./assets/img/icons/person.svg ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/person.svg");

/***/ }),

/***/ "./assets/img/icons/shuffle.svg":
/*!**************************************!*\
  !*** ./assets/img/icons/shuffle.svg ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/shuffle.svg");

/***/ }),

/***/ "./assets/img/icons/sz-Calendar.png":
/*!******************************************!*\
  !*** ./assets/img/icons/sz-Calendar.png ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/assets/front/build/sz-Calendar.png");

/***/ }),

/***/ "./assets/js/components/BlockEquivalences/block-equivalences.scss":
/*!************************************************************************!*\
  !*** ./assets/js/components/BlockEquivalences/block-equivalences.scss ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/components/BlockEquivalences/index.tsx":
/*!**********************************************************!*\
  !*** ./assets/js/components/BlockEquivalences/index.tsx ***!
  \**********************************************************/
/*! exports provided: BlockEquivalences */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BlockEquivalences", function() { return BlockEquivalences; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _img_icons_shuffle_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @img/icons/shuffle.svg */ "./assets/img/icons/shuffle.svg");
/* harmony import */ var _img_icons_bathroom_shower_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @img/icons/bathroom-shower.svg */ "./assets/img/icons/bathroom-shower.svg");
/* harmony import */ var _img_icons_bathroom_tub_towel_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @img/icons/bathroom-tub-towel.svg */ "./assets/img/icons/bathroom-tub-towel.svg");
/* harmony import */ var _img_icons_pack_eau_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @img/icons/pack-eau.svg */ "./assets/img/icons/pack-eau.svg");
/* harmony import */ var _img_icons_person_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @img/icons/person.svg */ "./assets/img/icons/person.svg");
/* harmony import */ var _img_icons_euros_svg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @img/icons/euros.svg */ "./assets/img/icons/euros.svg");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var _app_components_Links_Link__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @app/components/Links/Link */ "./assets/js/components/Links/Link.jsx");
/* harmony import */ var _app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @app/pages/consumption-history */ "./assets/js/pages/consumption-history/index.tsx");
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @app/services/AxiosInstance */ "./assets/js/services/AxiosInstance.jsx");
/* harmony import */ var _app_pages_pedago_facture_PedagoModalContent__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @app/pages/pedago-facture/PedagoModalContent */ "./assets/js/pages/pedago-facture/PedagoModalContent.tsx");
/* harmony import */ var react_loading_skeleton__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-loading-skeleton */ "./node_modules/react-loading-skeleton/lib/index.js");
/* harmony import */ var react_loading_skeleton__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _app_pages_personal_infos_modals_OnConnectCoachContent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @app/pages/personal-infos/modals/OnConnectCoachContent */ "./assets/js/pages/personal-infos/modals/OnConnectCoachContent.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var _app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @app/hooks/useQueryObserver */ "./assets/js/hooks/useQueryObserver.ts");
/* harmony import */ var _block_equivalences_scss__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./block-equivalences.scss */ "./assets/js/components/BlockEquivalences/block-equivalences.scss");
/* harmony import */ var _block_equivalences_scss__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_block_equivalences_scss__WEBPACK_IMPORTED_MODULE_20__);
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }






















var BlockEquivalences = function BlockEquivalences() {
  var _a, _b, _c;
  var history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_18__["useHistory"])();
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),
    _useState2 = _slicedToArray(_useState, 2),
    isShowModal = _useState2[0],
    setisShowModal = _useState2[1];
  var _useLocation = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_18__["useLocation"])(),
    pathname = _useLocation.pathname;
  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),
    _useState4 = _slicedToArray(_useState3, 2),
    hideCloseModal = _useState4[0],
    setHideCloseModal = _useState4[1];
  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null),
    _useState6 = _slicedToArray(_useState5, 2),
    modalContent = _useState6[0],
    setModalContent = _useState6[1];
  var _useQueryObserver = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_19__["default"])("getServicesStatus"),
    dataServicesStatus = _useQueryObserver.data;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_8__["useTranslation"])(),
    t = _useTranslation.t;
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_12__["ConsumptionHistoryContext"]),
    dataEquivalences = _useContext.dataEquivalences,
    checkIsTR = _useContext.checkIsTR,
    dataPrice = _useContext.dataPrice;
  var view = dataEquivalences.view,
    date = dataEquivalences.date,
    value = dataEquivalences.value,
    period = dataEquivalences.period,
    first_date = dataEquivalences.first_date,
    last_date = dataEquivalences.last_date,
    type = dataEquivalences.type;
  var daysPeriod = view === 'MONTH' ? period : 1;
  var formattedDataPrice = dataPrice ? parseFloat(dataPrice) : 0;
  var getTRPrice = Math.round(value * formattedDataPrice / 1000);
  var getNonTRPrice = Math.round(value * formattedDataPrice * 30 / 1000 / period);
  var getNumberOfPersons = function getNumberOfPersons(value, period) {
    if (!period) {
      return 0;
    }
    var result = Math.round((value / daysPeriod - 70) / 65 * 2) / 2;
    return result <= 0 ? 0 : result > 15 ? 15 : result;
  };
  var otherEquivalences = [{
    type: 'house',
    count: getNumberOfPersons(value, period),
    icon: _img_icons_person_svg__WEBPACK_IMPORTED_MODULE_6__["default"]
  }, {
    type: checkIsTR ? 'euro_tr' : 'euro_non_tr',
    count: checkIsTR ? getTRPrice : getNonTRPrice,
    icon: _img_icons_euros_svg__WEBPACK_IMPORTED_MODULE_7__["default"]
  }];
  var getTitleContext = function getTitleContext() {
    if (!checkIsTR) {
      if (type === _app_constants__WEBPACK_IMPORTED_MODULE_10__["ESTIMATE"]) {
        return period && period > 1 ? 'non_tr_estimate' : 'non_tr_estimate_first_index';
      }
      return period && period > 1 ? 'non_tr' : 'non_tr_first_index';
    }
    return view === 'MONTH' ? 'month' : 'day';
  };
  var _useQuery = Object(react_query__WEBPACK_IMPORTED_MODULE_13__["useQuery"])('invoiceExplanation', function () {
      return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_14__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_10__["API"].INVOICE_EXPLANATION);
    }),
    data = _useQuery.data,
    isLoadingModalContent = _useQuery.isLoading,
    isErrorModalContent = _useQuery.isError;
  var content = ((_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.content) || {};
  var pf_card_cmf = content.pf_card_cmf;
  var getModalContent = function getModalContent(pfCardCmfArray, modalContentType) {
    var card = pfCardCmfArray.find(function (item) {
      var _a;
      return item.type === 'pf_card_cmf' && ((_a = item.modalContent) === null || _a === void 0 ? void 0 : _a.type) === modalContentType;
    });
    return (card === null || card === void 0 ? void 0 : card.modalContent) || {};
  };
  var handleCloseModal = function handleCloseModal() {
    setisShowModal(false);
  };
  var handleOpenModal = function handleOpenModal(modalType) {
    var content = getModalContent(pf_card_cmf, modalType);
    setModalContent({
      title: (content === null || content === void 0 ? void 0 : content.title) || '',
      modalContent: content
    });
    setisShowModal(true);
  };
  var handleCloseModalSmartCoach = function handleCloseModalSmartCoach() {
    history.push(Object(react_router_dom__WEBPACK_IMPORTED_MODULE_18__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_10__["ROUTES"].ACCOUNT_CONSUMPTION_TR));
  };
  var routeSmartCoach = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_18__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_10__["ROUTES"].ACCOUNT_CONSUMPTION_TR, {
    modal: 'activation-on-connect-coach'
  });
  var statusSmartCoach = ((_c = (_b = dataServicesStatus === null || dataServicesStatus === void 0 ? void 0 : dataServicesStatus.data) === null || _b === void 0 ? void 0 : _b.content) === null || _c === void 0 ? void 0 : _c.smartcoach) || '';
  var isSmartCoach = checkIsTR && _app_constants__WEBPACK_IMPORTED_MODULE_10__["SERVICES_STATUS"].ELIGIBLE === statusSmartCoach;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "block-equivalences w-100 bg-gray-100 rounded-2",
    "data-cy": "block-equivalences"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "equivalences-content p-3 p-lg-4 d-flex flex-column justify-content-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "H4",
    size: "L",
    weight: "medium",
    className: 'mb-3 new-line'
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_8__["Trans"], {
    i18nKey: "histoConso.equivalence.title_".concat(getTitleContext()),
    values: {
      date: date,
      first_date: first_date,
      last_date: last_date
    },
    components: {
      item: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
        variant: "body",
        size: "M",
        weight: "bold",
        className: "text-blue-electric",
        tag: "span"
      })
    }
  })), period && (value < 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "bg-white rounded-2 shadow-sm",
    "data-cy": "block-negative-conso"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "p-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "body",
    weight: "medium",
    size: "S",
    className: "text-gray-600 mb-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_8__["Trans"], {
    i18nKey: 'histoConso.equivalence.negative_conso',
    components: {
      boldText: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
        variant: "body",
        weight: "bold",
        size: "M",
        className: "text-black",
        tag: "span"
      })
    }
  })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(BlockWithShuffle, null), otherEquivalences.map(function (equivalence, index) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      key: index,
      className: Object(clsx__WEBPACK_IMPORTED_MODULE_9__["default"])('shadow-sm bg-white rounded-2', {
        'mb-3': index !== otherEquivalences.length - 1
      })
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EquivalenceItem, {
      currentEquivalence: equivalence
    }));
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "mt-auto d-flex flex-column"
  }, isLoadingModalContent ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-10 mx-auto py-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_16___default.a, {
    count: 1,
    height: 18,
    width: "100%"
  })) : !isErrorModalContent && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzButton"], {
    id: "histo-conso-open-modal",
    variant: "text",
    onClick: function onClick() {
      return handleOpenModal('pf_modale_ma_conso');
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "caption",
    weight: "regular",
    size: "M",
    tag: "span"
  }, t('histoConso.equivalence.pedago_link'))), isSmartCoach && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    id: "connectcoach-eligible",
    variant: "caption",
    weight: "regular",
    size: "M",
    className: "mt-3 pt-2 text-dark border-top border-1 border-gray-200"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzIcon"], {
    variant: "line",
    icon: "information-circle",
    className: " sz-typo-body md text-dark font-family-regular mr-2"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_8__["Trans"], {
    i18nKey: 'histoConso.equivalence.on-connect-link',
    components: {
      redirect: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Links_Link__WEBPACK_IMPORTED_MODULE_11__["default"], {
        className: "text-dark font-family-regular",
        decorate: true,
        to: _app_constants__WEBPACK_IMPORTED_MODULE_10__["ROUTES"].CONNECT_COACH_LANDING
      })
    }
  })))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzModal"], {
    show: isShowModal,
    handleClose: handleCloseModal,
    size: "xl",
    backdrop: true,
    centered: true,
    scrollable: true,
    border: "smooth",
    fullscreen: "md",
    title: ""
  }, modalContent && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_pages_pedago_facture_PedagoModalContent__WEBPACK_IMPORTED_MODULE_15__["PedagoModalContent"], {
    title: modalContent.title,
    modalContent: modalContent.modalContent
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "text-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzButton"], {
    variant: "contained",
    border: "soft",
    onClick: handleCloseModal,
    id: "close-pedago-modal"
  }, t('pedagoFacture.board.modal.btn')))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzModal"], {
    show: pathname === routeSmartCoach && (isSmartCoach || false),
    handleClose: handleCloseModalSmartCoach,
    size: "lg",
    backdrop: true,
    centered: true,
    scrollable: true,
    border: "smooth",
    fullscreen: "md",
    title: "",
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_9__["default"])('modal-consent sds-legacy-layout', {
      'hide-btn-close': hideCloseModal
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_pages_personal_infos_modals_OnConnectCoachContent__WEBPACK_IMPORTED_MODULE_17__["OnConnectCoachContent"], {
    handleClose: handleCloseModalSmartCoach,
    source: "histoConso",
    onHideCloseModal: setHideCloseModal
  })));
};
var BlockWithShuffle = function BlockWithShuffle() {
  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(0),
    _useState8 = _slicedToArray(_useState7, 2),
    currentIndex = _useState8[0],
    setCurrentIndex = _useState8[1];
  var _useTranslation2 = Object(react_i18next__WEBPACK_IMPORTED_MODULE_8__["useTranslation"])(),
    t = _useTranslation2.t;
  var _useContext2 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_12__["ConsumptionHistoryContext"]),
    dataEquivalences = _useContext2.dataEquivalences;
  var value = dataEquivalences.value,
    period = dataEquivalences.period;
  var calculateWithPeriod = function calculateWithPeriod(calculation) {
    if (!period) {
      return 0;
    }
    return calculation();
  };
  var getNumberOfShowers = function getNumberOfShowers() {
    return calculateWithPeriod(function () {
      return Math.round(value / period / 50 * 2) / 2;
    });
  };
  var getNumberOfBaths = function getNumberOfBaths() {
    return calculateWithPeriod(function () {
      return Math.round(value / period / 120 * 2) / 2;
    });
  };
  var getNumberOfWaterPacks = function getNumberOfWaterPacks() {
    return calculateWithPeriod(function () {
      return Math.round(value / period / 9);
    });
  };
  var equivalences = [{
    type: 'shower',
    count: getNumberOfShowers(),
    icon: _img_icons_bathroom_shower_svg__WEBPACK_IMPORTED_MODULE_3__["default"]
  }, {
    type: 'bath',
    count: getNumberOfBaths(),
    icon: _img_icons_bathroom_tub_towel_svg__WEBPACK_IMPORTED_MODULE_4__["default"]
  }, {
    type: 'water_pack',
    count: getNumberOfWaterPacks(),
    icon: _img_icons_pack_eau_svg__WEBPACK_IMPORTED_MODULE_5__["default"]
  }];
  var handleClick = function handleClick() {
    var nextIndex = (currentIndex + 1) % equivalences.length;
    setCurrentIndex(nextIndex);
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "shadow-sm bg-white rounded-2 mb-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(EquivalenceItem, {
    currentEquivalence: equivalences[currentIndex]
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "p-3 border-top border-1 border-gray-100 cursor-pointer",
    onClick: handleClick,
    onKeyDown: handleClick,
    role: "button",
    tabIndex: 0
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "row no-gutters align-items-center justify-content-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "body",
    size: "S",
    weight: "medium",
    className: "mb-0 mr-2"
  }, t('histoConso.equivalence.show_other'), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    src: _img_icons_shuffle_svg__WEBPACK_IMPORTED_MODULE_2__["default"],
    alt: "",
    className: "ml-2"
  })))));
};
var EquivalenceItem = function EquivalenceItem(_ref) {
  var currentEquivalence = _ref.currentEquivalence;
  var _useTranslation3 = Object(react_i18next__WEBPACK_IMPORTED_MODULE_8__["useTranslation"])(),
    t = _useTranslation3.t;
  var type = currentEquivalence.type,
    count = currentEquivalence.count,
    icon = currentEquivalence.icon;
  var displayCount = Intl.NumberFormat('fr-FR').format(count);
  var numberPeople = type === 'house' && count > 15 ? '+15' : displayCount;
  var _useContext3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_12__["ConsumptionHistoryContext"]),
    dataEquivalences = _useContext3.dataEquivalences;
  var view = dataEquivalences.view;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "p-3 w-100 d-flex flex-row align-items-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    src: icon,
    alt: ""
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "body",
    size: "S",
    weight: "medium",
    className: "text-gray-600 pl-3 mb-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_8__["Trans"], {
    i18nKey: "histoConso.equivalence.".concat(type),
    values: {
      count: count === 0 ? 1 : Math.ceil(count),
      numberPeople: numberPeople,
      displayCount: displayCount,
      period: view === 'MONTH' ? t('histoConso.equivalence.by_day') : ''
    },
    components: {
      boldText: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
        weight: "bold",
        tag: "span",
        className: "text-expert-blue"
      })
    }
  })));
};

/***/ }),

/***/ "./assets/js/components/CardAlert/card-alert.scss":
/*!********************************************************!*\
  !*** ./assets/js/components/CardAlert/card-alert.scss ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/components/CardAlert/index.tsx":
/*!**************************************************!*\
  !*** ./assets/js/components/CardAlert/index.tsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CardAlert; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _app_components_Badge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/components/Badge */ "./assets/js/components/Badge/index.tsx");
/* harmony import */ var _app_components_Links_LinkBtn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/components/Links/LinkBtn */ "./assets/js/components/Links/LinkBtn.jsx");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var _card_alert_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./card-alert.scss */ "./assets/js/components/CardAlert/card-alert.scss");
/* harmony import */ var _card_alert_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_card_alert_scss__WEBPACK_IMPORTED_MODULE_5__);






function CardAlert(_ref) {
  var title = _ref.title,
    badgeLabel = _ref.badgeLabel,
    badgeColor = _ref.badgeColor,
    description = _ref.description,
    isEditable = _ref.isEditable,
    onClickEdit = _ref.onClickEdit,
    editBtnId = _ref.editBtnId,
    btnLabel = _ref.btnLabel,
    _ref$btnId = _ref.btnId,
    btnId = _ref$btnId === void 0 ? 'button-card-alert' : _ref$btnId,
    ctaLabel = _ref.ctaLabel,
    ctaLink = _ref.ctaLink,
    onClickBtn = _ref.onClickBtn,
    onClickCta = _ref.onClickCta,
    errorDescription = _ref.errorDescription,
    className = _ref.className,
    dataCy = _ref.dataCy,
    children = _ref.children;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('bg-white rounded-3 d-flex flex-column', className),
    "data-cy": dataCy
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "alert-title border-1 border-bottom"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "p-3 px-lg-4 py-lg-3 d-flex align-items-center justify-content-between"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "d-flex align-items-end w-100"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "H4",
    size: "L",
    weight: "medium",
    className: "mb-0"
  }, title), badgeLabel && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Badge__WEBPACK_IMPORTED_MODULE_2__["default"], {
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('ml-2', {
      'ml-auto': !isEditable
    }),
    color: badgeColor,
    textWeight: "bold",
    textSize: "S",
    textVariant: "caption",
    textClassName: "text-white"
  }, badgeLabel)), isEditable && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzButton"], {
    variant: "text",
    icon: "cog",
    onClick: onClickEdit,
    id: editBtnId
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "alert-content px-3 px-lg-4 pb-3 pt-3 d-flex flex-column align-items-center justify-content-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "my-2 text-center"
  }, children, description && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "body",
    size: "M",
    weight: "regular",
    className: "mb-0"
  }, description)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "mt-auto"
  }, errorDescription && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "body",
    size: "M",
    weight: "medium",
    className: "mb-2 pb-1"
  }, errorDescription), btnLabel && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzButton"], {
    variant: "contained",
    id: btnId,
    border: "soft",
    onClick: onClickBtn
  }, btnLabel), ctaLabel && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Links_LinkBtn__WEBPACK_IMPORTED_MODULE_3__["default"], {
    variant: "text",
    icon: "keyboard-arrow-right",
    alignIcon: "right",
    to: ctaLink,
    "data-cy": "cta-card-alert",
    onClick: onClickCta ? onClickCta : null
  }, ctaLabel))));
}

/***/ }),

/***/ "./assets/js/components/Highchart/AlertGauge/gauge.scss":
/*!**************************************************************!*\
  !*** ./assets/js/components/Highchart/AlertGauge/gauge.scss ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/components/Highchart/AlertGauge/index.tsx":
/*!*************************************************************!*\
  !*** ./assets/js/components/Highchart/AlertGauge/index.tsx ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AlertGauge; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var highcharts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! highcharts */ "./node_modules/highcharts/highcharts.js");
/* harmony import */ var highcharts__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(highcharts__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var highcharts_react_official__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! highcharts-react-official */ "./node_modules/highcharts-react-official/dist/highcharts-react.min.js");
/* harmony import */ var highcharts_react_official__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(highcharts_react_official__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var highcharts_highcharts_more__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! highcharts/highcharts-more */ "./node_modules/highcharts/highcharts-more.js");
/* harmony import */ var highcharts_highcharts_more__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(highcharts_highcharts_more__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var highcharts_modules_solid_gauge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! highcharts/modules/solid-gauge */ "./node_modules/highcharts/modules/solid-gauge.js");
/* harmony import */ var highcharts_modules_solid_gauge__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_solid_gauge__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _img_alert_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @img/alert.svg */ "./assets/img/alert.svg");
/* harmony import */ var _img_alert_disabled_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @img/alert-disabled.svg */ "./assets/img/alert-disabled.svg");
/* harmony import */ var _img_consumption_history_plus_button_svg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @img/consumption-history/plus-button.svg */ "./assets/img/consumption-history/plus-button.svg");
/* harmony import */ var _img_consumption_history_minus_button_svg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @img/consumption-history/minus-button.svg */ "./assets/img/consumption-history/minus-button.svg");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var _app_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @app/utils */ "./assets/js/utils/index.ts");
/* harmony import */ var _gauge_scss__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./gauge.scss */ "./assets/js/components/Highchart/AlertGauge/gauge.scss");
/* harmony import */ var _gauge_scss__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_gauge_scss__WEBPACK_IMPORTED_MODULE_12__);
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }













highcharts_highcharts_more__WEBPACK_IMPORTED_MODULE_3___default()(highcharts__WEBPACK_IMPORTED_MODULE_1__);
highcharts_modules_solid_gauge__WEBPACK_IMPORTED_MODULE_4___default()(highcharts__WEBPACK_IMPORTED_MODULE_1__);
function useOptions(_ref) {
  var imageId = _ref.imageId,
    _ref$seuil = _ref.seuil,
    seuil = _ref$seuil === void 0 ? 0 : _ref$seuil,
    chartRef = _ref.chartRef,
    _ref$currentConso = _ref.currentConso,
    currentConso = _ref$currentConso === void 0 ? 0 : _ref$currentConso,
    _ref$range = _ref.range,
    range = _ref$range === void 0 ? 1 : _ref$range,
    onChange = _ref.onChange,
    _ref$editable = _ref.editable,
    editable = _ref$editable === void 0 ? false : _ref$editable,
    _ref$inactive = _ref.inactive,
    inactive = _ref$inactive === void 0 ? false : _ref$inactive,
    _ref$maxValue = _ref.maxValue,
    MAX = _ref$maxValue === void 0 ? 999 : _ref$maxValue;
  var MIN = 0;
  var MIN_ANGLE = -135;
  var MAX_ANGLE = 135;
  var input = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])({});
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_9__["useTranslation"])(),
    t = _useTranslation.t;
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_10__["useIsMobile"])();
  function getStartAngle(cleanValue) {
    var effectiveValue = Math.min(cleanValue || seuil, MAX);
    var toDivideWith = MAX / effectiveValue;
    return (MAX_ANGLE - MIN_ANGLE) / toDivideWith - 135;
  }
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(getStartAngle),
    _useState2 = _slicedToArray(_useState, 2),
    startAngle = _useState2[0],
    setStartAngle = _useState2[1];
  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(true),
    _useState4 = _slicedToArray(_useState3, 2),
    isFirstRender = _useState4[0],
    setIsFirstRender = _useState4[1];
  function updateImagePos() {
    var image = document.getElementById(imageId);
    if ((image === null || image === void 0 ? void 0 : image.style.opacity) === '0') {
      var display = setTimeout(function () {
        image.style.opacity = '1';
        clearTimeout(display);
      }, 750);
    }
    var position = setTimeout(function () {
      var _a, _b;
      var _ref2 = (_a = chartRef.current) === null || _a === void 0 ? void 0 : _a.chart.series[2].group,
        element = _ref2.element;
      var rect = element.getBoundingClientRect();
      var svg = (_b = chartRef.current) === null || _b === void 0 ? void 0 : _b.chart.renderer.box.getBoundingClientRect();
      var x = rect.left - svg.left - 17;
      var y = rect.top - svg.top - 8;
      image.style.transform = 'translate(' + x + 'px, ' + y + 'px)';
      clearTimeout(position);
    }, 500);
  }
  var onClickAdd = function onClickAdd() {
    var rawValue = Object(_app_utils__WEBPACK_IMPORTED_MODULE_11__["cleanUpNumericInputValue"])(input.current.value, 999) + range;
    var clampedValue = Math.min(rawValue, 999);
    input.current.value = String(clampedValue);
    input.current.setAttribute('value', input.current.value);
    onChange(clampedValue);
    setStartAngle(getStartAngle(clampedValue));
    updateImagePos();
  };
  var onClickDel = function onClickDel() {
    var rawValue = Object(_app_utils__WEBPACK_IMPORTED_MODULE_11__["cleanUpNumericInputValue"])(input.current.value, 999) - range;
    var clampedValue = Math.max(0, rawValue);
    input.current.value = String(clampedValue);
    input.current.setAttribute('value', input.current.value);
    onChange(clampedValue);
    setStartAngle(clampedValue === 0 ? MIN_ANGLE : getStartAngle(clampedValue));
    updateImagePos();
  };
  function createInput() {
    var _a;
    var SVG_NS = 'http://www.w3.org/2000/svg';
    var inputId = 'gaugeValue';
    var group = document.createElementNS(SVG_NS, 'g');
    (_a = chartRef.current) === null || _a === void 0 ? void 0 : _a.chart.renderer.box.appendChild(group);
    group.style.filter = 'drop-shadow(1px 1px 5px rgba(0, 0, 0, 0.075))';
    var foreigner = document.createElementNS(SVG_NS, 'foreignObject');
    foreigner.setAttribute('id', 'foreignObject');
    foreigner.setAttribute('width', '140px');
    foreigner.setAttribute('height', '65px');
    group.appendChild(foreigner);
    input.current = document.createElement('input');
    input.current.type = 'number';
    input.current.min = '0';
    input.current.max = '999';
    input.current.step = '1';
    input.current.value = "".concat(seuil);
    input.current.setAttribute('value', input.current.value);
    input.current.id = inputId;
    input.current.name = inputId;
    input.current.onclick = function () {
      input.current.focus();
    };
    input.current.addEventListener('input', function (e) {
      var value = e.target.value;
      var sanitizedValue = value.replace(/[^0-9]/g, '');
      var numericValue = parseInt(sanitizedValue || '0', 10);
      numericValue = Math.min(999, Math.max(0, numericValue));
      input.current.value = String(numericValue);
      onChange(input.current.value);
      input.current.setAttribute('value', input.current.value);
    });
    input.current.addEventListener('blur', function (e) {
      var cleanValue = Object(_app_utils__WEBPACK_IMPORTED_MODULE_11__["cleanUpNumericInputValue"])(e.target.value, 999);
      var clampedValue = Math.min(999, Math.max(0, cleanValue));
      input.current.value = String(clampedValue);
      input.current.setAttribute('value', input.current.value);
      onChange(clampedValue);
      var newAngle = clampedValue === 0 ? MIN_ANGLE : getStartAngle(clampedValue);
      setStartAngle(newAngle);
      updateImagePos();
    });
    var label = document.createElement('label');
    label.className = 'gauge-label';
    label.htmlFor = inputId;
    label.innerHTML = t('histoConso.chart.gauge.label.unit');
    foreigner.appendChild(input.current);
    foreigner.appendChild(label);
  }
  function createLabel() {
    var _a, _b, _c, _d;
    if (((_a = chartRef.current) === null || _a === void 0 ? void 0 : _a.chart.series[1].yData[0]) === null) {
      (_b = chartRef.current) === null || _b === void 0 ? void 0 : _b.chart.renderer.text('--').attr({
        x: '50%',
        y: '50%',
        'dominant-baseline': 'middle',
        'text-anchor': 'middle'
      }).css({
        color: 'var(--primary-dark)',
        fontSize: '20px',
        fontFamily: 'DINPro-Bold'
      }).add();
    }
    (_c = chartRef.current) === null || _c === void 0 ? void 0 : _c.chart.renderer.text(t('histoConso.chart.gauge.label.text')).attr({
      x: '50%',
      y: '71%',
      'dominant-baseline': 'middle',
      'text-anchor': 'middle'
    }).css({
      color: 'var(--primary-dark)',
      fontSize: '12px',
      fontFamily: 'DINPro-Light'
    }).add();
    var text = (_d = chartRef.current) === null || _d === void 0 ? void 0 : _d.chart.renderer.text('').attr({
      x: '50%',
      y: '80%',
      'dominant-baseline': 'middle',
      'text-anchor': 'middle'
    }).css({
      color: 'var(--primary-dark)',
      fontSize: '16px',
      fontFamily: 'DINPro-Bold'
    }).add();
    text.element.innerHTML = t('histoConso.chart.gauge.label.value', {
      seuil: seuil
    });
  }
  function createAlertImage() {
    var _a;
    (_a = chartRef.current) === null || _a === void 0 ? void 0 : _a.chart.renderer.image(inactive ? _img_alert_disabled_svg__WEBPACK_IMPORTED_MODULE_6__["default"] : _img_alert_svg__WEBPACK_IMPORTED_MODULE_5__["default"]).attr({
      id: imageId,
      zIndex: 10,
      x: 0,
      y: 0,
      width: 55,
      height: 55
    }).css({
      filter: 'drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.075))',
      opacity: 0,
      transition: 'opacity 0.5s ease'
    }).add();
    updateImagePos();
  }
  function createPlusIcon() {
    var _a;
    var image = (_a = chartRef.current) === null || _a === void 0 ? void 0 : _a.chart.renderer.image(_img_consumption_history_plus_button_svg__WEBPACK_IMPORTED_MODULE_7__["default"]).attr({
      "class": 'plus-icon',
      zIndex: 20,
      id: 'plus-button'
    }).add();
    image.element.addEventListener('click', onClickAdd);
  }
  function createMinusIcon() {
    var _a;
    var image = (_a = chartRef.current) === null || _a === void 0 ? void 0 : _a.chart.renderer.image(_img_consumption_history_minus_button_svg__WEBPACK_IMPORTED_MODULE_8__["default"]).attr({
      "class": 'minus-icon',
      zIndex: 20,
      id: 'minus-button'
    }).add();
    image.element.addEventListener('click', onClickDel);
  }
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    createAlertImage();
    if (editable) {
      createPlusIcon();
      createMinusIcon();
      createInput();
    } else if (!inactive) {
      createLabel();
    }
  }, []);
  return {
    updateImagePos: updateImagePos,
    options: {
      chart: {
        events: {
          // Disable animation after the first render
          load: function load() {
            setIsFirstRender(false);
          }
        },
        type: 'solidgauge',
        height: !editable ? 210 : isMobile ? 220 : 300,
        width: inactive ? null : editable ? isMobile ? 260 : 350 : 210,
        margin: [0, 0, 0, 0],
        backgroundColor: editable ? '#e9ecef' : '#ffffff'
      },
      title: null,
      exporting: {
        enabled: false
      },
      tooltip: {
        enabled: false
      },
      pane: [{
        startAngle: -135,
        endAngle: 135,
        background: null
      }, {
        background: null
      }, {
        // Pas besoin de endAngle
        // Range de -135 à 135 pour placer l'icone
        startAngle: startAngle,
        background: null
      }],
      yAxis: [{
        name: 'fond',
        pane: 0,
        min: MIN,
        max: MAX,
        labels: {
          enabled: false
        },
        lineWidth: 0,
        tickWidth: 0,
        minorTickInterval: null
      }, {
        name: 'currentValue',
        pane: 1,
        min: MIN,
        max: MAX,
        labels: {
          enabled: false
        },
        lineWidth: 0,
        tickWidth: 0,
        minorTickInterval: null
      }, {
        name: 'alerte',
        pane: 2,
        min: MIN,
        max: MAX,
        labels: {
          enabled: false
        },
        lineWidth: 0,
        tickWidth: 0,
        minorTickInterval: null
      }],
      plotOptions: {
        solidgauge: {
          innerRadius: '90%',
          rounded: true
        }
      },
      series: [{
        animation: isFirstRender && editable ? {
          defer: 500
        } : false,
        name: 'fond',
        enableMouseTracking: false,
        data: [{
          dataLabels: {
            enabled: false
          },
          y: MAX,
          color: '#fbfbfb'
        }]
      }, {
        animation: isFirstRender && editable ? {
          defer: 500
        } : false,
        name: 'currentValue',
        enableMouseTracking: false,
        data: [{
          dataLabels: {
            enabled: !editable,
            useHTML: true,
            borderWidth: 0,
            padding: -30,
            formatter: function formatter() {
              var y = this.y;
              var formattedNumber = new Intl.NumberFormat('fr-FR').format(y);
              return "".concat(formattedNumber, " <span class=\"gauge-current-value font-family-light\">m<sup class=\"font-family-regular gauge-sup\">3</sup><span>");
            },
            style: {
              fontFamily: 'DINPro-Medium',
              fontSize: '36px',
              color: inactive ? '#e3e3e3' : 'rgba(0, 0, 0)',
              backgroundColor: 'rgba(252, 255, 197, 0.7)'
            }
          },
          color: inactive ? '#e3e3e3' : {
            linearGradient: {
              x1: 0,
              x2: 0.7,
              y1: 0,
              y2: 0
            },
            stops: [[0, '#DAD1FF'], [0.5, '#a893fd'], [1, '#7452ff']]
          },
          y: currentConso
        }]
      }, {
        name: 'alerte',
        yAxis: 2,
        animation: false,
        enableMouseTracking: false,
        className: 'alerte-id',
        id: 'alerte-id',
        data: [{
          dataLabels: {
            enabled: false
          },
          radius: '110%',
          innerRadius: '80%',
          y: 0.0001,
          color: 'transparent'
        }]
      }]
    }
  };
}
function AlertGauge(_ref3) {
  var imageId = _ref3.imageId,
    currentConso = _ref3.currentConso,
    _ref3$consoMax = _ref3.consoMax,
    consoMax = _ref3$consoMax === void 0 ? 999 : _ref3$consoMax,
    _ref3$editable = _ref3.editable,
    editable = _ref3$editable === void 0 ? false : _ref3$editable,
    _ref3$inactive = _ref3.inactive,
    inactive = _ref3$inactive === void 0 ? false : _ref3$inactive,
    seuil = _ref3.seuil,
    onChange = _ref3.onChange;
  var chartRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
  var _useOptions = useOptions({
      imageId: imageId,
      seuil: seuil,
      chartRef: chartRef,
      currentConso: currentConso,
      onChange: onChange,
      range: 1,
      editable: editable,
      inactive: inactive,
      maxValue: consoMax
    }),
    options = _useOptions.options;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(highcharts_react_official__WEBPACK_IMPORTED_MODULE_2___default.a, {
    containerProps: {
      className: 'alerte-gauge'
    },
    highcharts: highcharts__WEBPACK_IMPORTED_MODULE_1__,
    ref: chartRef,
    options: options
  });
}

/***/ }),

/***/ "./assets/js/components/SelectorItems/SelectorItems.scss":
/*!***************************************************************!*\
  !*** ./assets/js/components/SelectorItems/SelectorItems.scss ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/components/SelectorItems/hooks/SelectorItem.ts":
/*!******************************************************************!*\
  !*** ./assets/js/components/SelectorItems/hooks/SelectorItem.ts ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useSelectorItem; });
function useSelectorItem(_ref) {
  var listRef = _ref.listRef,
    setIsHovered = _ref.setIsHovered,
    scroll = _ref.scroll,
    isOpen = _ref.isOpen,
    setIsOpen = _ref.setIsOpen;
  var makeScrollList = function makeScrollList(index) {
    var itemList = document.querySelectorAll('.list-contract-item');
    var elementTop = itemList[index].offsetTop;
    scroll(elementTop, listRef.current);
  };
  var onMouseOver = function onMouseOver(type, key) {
    var isEntering = type === 'enter';
    setIsHovered(isEntering ? key : null);
  };
  var selectPrevItem = function selectPrevItem(items) {
    setIsHovered(function (prev) {
      var index;
      if (!prev) {
        index = items.length - 1;
      } else if (prev === items.length - 1) {
        index = prev - 1;
      } else {
        index = prev - 1;
      }
      makeScrollList(index);
      return index;
    });
  };
  var selectNextItem = function selectNextItem(items) {
    setIsHovered(function (prev) {
      var index;
      if (prev === null) {
        index = 0;
      } else if (prev + 1 === items.length) {
        index = 0;
      } else {
        index = prev + 1;
      }
      makeScrollList(index);
      return index;
    });
  };
  var eventHandler = function eventHandler(e, items) {
    var keyCode = e.keyCode;
    if (isOpen) {
      // Escape
      if (keyCode === 27) {
        setIsOpen(false);
      }
      // Arrow down
      if (keyCode === 40) {
        selectNextItem(items);
      }
      // Arrow up
      if (keyCode === 38) {
        selectPrevItem(items);
      }
      if (keyCode === 9) {
        e.preventDefault();
        selectNextItem(items);
      }
    }
  };
  return {
    eventHandler: eventHandler,
    onMouseOver: onMouseOver
  };
}

/***/ }),

/***/ "./assets/js/components/SelectorItems/index.tsx":
/*!******************************************************!*\
  !*** ./assets/js/components/SelectorItems/index.tsx ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SelectorItems; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ahooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ahooks */ "./node_modules/ahooks/es/index.js");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _app_hooks_useScrollTo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @app/hooks/useScrollTo */ "./assets/js/hooks/useScrollTo.js");
/* harmony import */ var _img_check_circle_1_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @img/check-circle-1.svg */ "./assets/img/check-circle-1.svg");
/* harmony import */ var _app_ez_components_ContractSelector_ContractSelector_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @app/ez-components/ContractSelector/ContractSelector.scss */ "./assets/js/ez-components/ContractSelector/ContractSelector.scss");
/* harmony import */ var _app_ez_components_ContractSelector_ContractSelector_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_app_ez_components_ContractSelector_ContractSelector_scss__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _SelectorItems_scss__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./SelectorItems.scss */ "./assets/js/components/SelectorItems/SelectorItems.scss");
/* harmony import */ var _SelectorItems_scss__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_SelectorItems_scss__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _hooks_SelectorItem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./hooks/SelectorItem */ "./assets/js/components/SelectorItems/hooks/SelectorItem.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }









function SelectorItems(_ref) {
  var className = _ref.className,
    btnId = _ref.btnId,
    displayItems = _ref.displayItems,
    items = _ref.items,
    getTitle = _ref.getTitle,
    actionItem = _ref.actionItem,
    loader = _ref.loader;
  var contractSelectorClassName = Object(clsx__WEBPACK_IMPORTED_MODULE_2__["default"])('selector-contract position-relative', className);
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),
    _useState2 = _slicedToArray(_useState, 2),
    isOpen = _useState2[0],
    setIsOpen = _useState2[1];
  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null),
    _useState4 = _slicedToArray(_useState3, 2),
    isHovered = _useState4[0],
    setIsHovered = _useState4[1];
  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null),
    _useState6 = _slicedToArray(_useState5, 2),
    isSelected = _useState6[0],
    setIsSelected = _useState6[1];
  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(items),
    _useState8 = _slicedToArray(_useState7, 1),
    currentItems = _useState8[0];
  var listRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
  var scroll = Object(_app_hooks_useScrollTo__WEBPACK_IMPORTED_MODULE_4__["default"])();
  var _useSelectorItem = Object(_hooks_SelectorItem__WEBPACK_IMPORTED_MODULE_8__["default"])({
      listRef: listRef,
      setIsHovered: setIsHovered,
      scroll: scroll,
      isOpen: isOpen,
      setIsOpen: setIsOpen
    }),
    eventHandler = _useSelectorItem.eventHandler,
    onMouseOver = _useSelectorItem.onMouseOver;
  var btnElement = document.getElementById(btnId);
  var onClickAway = function onClickAway() {
    setIsOpen(false);
  };
  Object(ahooks__WEBPACK_IMPORTED_MODULE_1__["useClickAway"])(onClickAway, [btnElement, listRef]);
  var eventHand = function eventHand(e) {
    eventHandler(e, currentItems);
  };
  Object(ahooks__WEBPACK_IMPORTED_MODULE_1__["useKeyPress"])(['uparrow', 'downarrow', 'esc', 'tab'], eventHand);
  var openList = function openList() {
    setIsOpen(function (prev) {
      return !prev;
    });
  };
  var _selectItem = function selectItem(key, item) {
    setIsSelected(key);
    actionItem(item);
  };
  var updateItems = function updateItems(itemKey, itemSelected) {
    currentItems.splice(itemKey, 1);
    currentItems.unshift(itemSelected);
    setIsOpen(false);
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: contractSelectorClassName
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__["SzButton"], {
    icon: "arrow-down-1",
    onClick: openList,
    variant: "outlined",
    border: "rounded",
    alignIcon: "right",
    className: "contract-btn text-white ",
    "data-cy": "contract-selector-btn",
    id: btnId
  }, getTitle(currentItems[0])), isOpen && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    ref: listRef,
    className: "selector-contract-modal bg-white shadow rounded-1 position-absolute"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "list-contract rounded-1 position-relative"
  }, currentItems.map(function (item, key) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ListItems, {
      key: "list-item-".concat(key),
      itemKey: key,
      isCurrentItem: key === 0,
      onMouseOver: onMouseOver,
      updateItems: updateItems,
      item: item,
      isHovered: isHovered,
      selectItem: function selectItem() {
        _selectItem(key, item);
      },
      isLoading: loader && isSelected === key,
      displayItems: displayItems
    });
  }))));
}
function ListItems(_ref2) {
  var itemKey = _ref2.itemKey,
    onMouseOver = _ref2.onMouseOver,
    isCurrentItem = _ref2.isCurrentItem,
    item = _ref2.item,
    updateItems = _ref2.updateItems,
    selectItem = _ref2.selectItem,
    isHovered = _ref2.isHovered,
    isLoading = _ref2.isLoading,
    displayItems = _ref2.displayItems;
  var itemClasses = Object(clsx__WEBPACK_IMPORTED_MODULE_2__["default"])('list-contract-item position-relative border-bottom sz-border-1 d-flex p-3', {
    hovered: isHovered === itemKey,
    active: true
  });
  var onClick = function onClick() {
    if (!isCurrentItem) {
      updateItems(itemKey, item);
      selectItem(itemKey, item);
    }
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: itemClasses,
    onClick: onClick,
    role: "button",
    onKeyPress: onClick,
    onMouseEnter: function onMouseEnter() {
      return onMouseOver('enter', itemKey);
    },
    onMouseLeave: function onMouseLeave() {
      return onMouseOver('leave', itemKey);
    }
  }, displayItems(item), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "list-contract-item-status d-flex flex-column ml-auto"
  }, isLoading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__["SzSpinner"], {
    className: "list-contract-item-spinner align-self-end"
  }), isCurrentItem && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "list-contract-item-selected align-self-end"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    src: _img_check_circle_1_svg__WEBPACK_IMPORTED_MODULE_5__["default"],
    alt: ""
  }))));
}

/***/ }),

/***/ "./assets/js/components/SzChartConso/ToolTipConso.jsx":
/*!************************************************************!*\
  !*** ./assets/js/components/SzChartConso/ToolTipConso.jsx ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");





/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function ToolTipConso(_ref, ref) {
  var dataToolTip = _ref.dataToolTip,
    desc = _ref.desc;
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_1__["useIsMobile"])();
  var toolTipClasses = Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('tooltip-high row p-4', {
    'w-100': isMobile
  });
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    ref: ref,
    className: toolTipClasses
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__["SzTypographie"], {
    variant: "body",
    weight: "bold",
    className: "text-blue-electric mb-0"
  }, dataToolTip !== null && dataToolTip !== void 0 && dataToolTip.name ? Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(new Date(dataToolTip === null || dataToolTip === void 0 ? void 0 : dataToolTip.name), 'd MMMM yyyy') : 'NA'), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__["SzTypographie"], {
    variant: "H1",
    tag: "p",
    size: "XL",
    className: "mb-0"
  }, desc, "\u20AC"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__["SzTypographie"], {
    weight: "regular",
    size: "M",
    variant: "caption",
    className: "text-dark mb-0"
  }, dataToolTip === null || dataToolTip === void 0 ? void 0 : dataToolTip.type));
}));

/***/ }),

/***/ "./assets/js/components/SzChartHistoConso/CalendarConso.jsx":
/*!******************************************************************!*\
  !*** ./assets/js/components/SzChartHistoConso/CalendarConso.jsx ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CalendarConso; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_calendar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-calendar */ "./node_modules/react-calendar/dist/esm/index.js");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
/* harmony import */ var _img_icons_sz_Calendar_png__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @img/icons/sz-Calendar.png */ "./assets/img/icons/sz-Calendar.png");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }






function CalendarConso(_ref) {
  var selectedMonth = _ref.selectedMonth,
    onChangeDate = _ref.onChangeDate;
  var today = selectedMonth !== null && selectedMonth !== void 0 ? selectedMonth : new Date();
  var isFirstDay = selectedMonth ? false : today.getDate() - 2 < 1;
  var lastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(isFirstDay ? lastMonth : today),
    _useState2 = _slicedToArray(_useState, 2),
    valueDate = _useState2[0],
    setvalueDate = _useState2[1];
  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),
    _useState4 = _slicedToArray(_useState3, 2),
    isOpenViewMonth = _useState4[0],
    setIsOpenViewMonth = _useState4[1];
  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(isFirstDay ? lastMonth : today),
    _useState6 = _slicedToArray(_useState5, 2),
    activeDate = _useState6[0],
    setActiveStartDate = _useState6[1];
  var customMonthTitle = function customMonthTitle(locale, date) {
    var formatDate = Object(date_fns__WEBPACK_IMPORTED_MODULE_4__["format"])(date, 'MMM');
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__["SzTypographie"], {
      weight: "medium",
      className: "mb-0"
    }, formatDate);
  };
  var disableSpecificMonth = function disableSpecificMonth(_ref2) {
    var date = _ref2.date,
      view = _ref2.view;
    var day = new Date();
    var endDate = isFirstDay ? new Date(day.getFullYear(), day.getMonth() - 1) : new Date();
    var dateTwoYearAgo = new Date(day.getFullYear() - 2, day.getMonth() + 1);
    if (view === 'year') {
      return date < dateTwoYearAgo || date > endDate;
    }
    return false;
  };
  var checkPrevDate = function checkPrevDate() {
    if (isOpenViewMonth) {
      var day = new Date();
      var dateTwoYearAgo = new Date(day.getFullYear() - 2, day.getMonth());
      return activeDate > dateTwoYearAgo;
    }
    return true;
  };
  var checkNextDate = function checkNextDate() {
    var day = new Date();
    if (isOpenViewMonth) {
      var nextYear = new Date(day.getFullYear() + 1, day.getMonth(), 1);
      var currentYear = new Date(activeDate.getFullYear() + 1, activeDate.getMonth(), 1);
      return currentYear < nextYear;
    }
    var nextMonth = new Date(day.getFullYear(), day.getMonth() + 1, 1);
    var currentMonth = new Date(activeDate.getFullYear(), activeDate.getMonth() + 1, 1);
    return currentMonth < nextMonth;
  };
  var onDrillUp = function onDrillUp() {
    setIsOpenViewMonth(!isOpenViewMonth);
    if (isOpenViewMonth) {
      setActiveStartDate(valueDate);
    }
  };
  var filterDaysByMonth = function filterDaysByMonth(monthSelected) {
    onChangeDate(monthSelected);
  };
  var updateDateMonth = function updateDateMonth(activeStartDate) {
    filterDaysByMonth(activeStartDate);
    setIsOpenViewMonth(false);
    setActiveStartDate(activeStartDate);
    setvalueDate(activeStartDate);
  };
  var onActiveStartDateChange = function onActiveStartDateChange(props) {
    var activeStartDate = props.activeStartDate,
      view = props.view;
    if (view === 'month') {
      updateDateMonth(activeStartDate);
    } else if (view === 'year') {
      var currentYear = Object(date_fns__WEBPACK_IMPORTED_MODULE_4__["format"])(activeDate, 'yyyy');
      var updateYear = Object(date_fns__WEBPACK_IMPORTED_MODULE_4__["format"])(activeStartDate, 'yyyy');
      var valueDateYear = Object(date_fns__WEBPACK_IMPORTED_MODULE_4__["format"])(valueDate, 'yyyy');
      if (currentYear !== updateYear) {
        var updateDate = valueDateYear === updateYear ? valueDate : activeStartDate;
        setActiveStartDate(updateDate);
      }
    } else if (view !== 'decade') {
      setActiveStartDate(activeStartDate);
      setvalueDate(activeStartDate);
    }
  };
  var navigationLabel = function navigationLabel(props) {
    var date = props.date;
    var monthYear = Object(date_fns__WEBPACK_IMPORTED_MODULE_4__["format"])(date, 'LLLL yyyy');
    var year = Object(date_fns__WEBPACK_IMPORTED_MODULE_4__["format"])(date, 'yyyy');
    return isOpenViewMonth ? year : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__["SzTypographie"], {
      weight: "medium",
      tag: "span",
      className: "mb-0 text-expert-blue"
    }, monthYear.replace(/\b(\w)/, function (_char) {
      return _char.toUpperCase();
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
      src: _img_icons_sz_Calendar_png__WEBPACK_IMPORTED_MODULE_5__["default"],
      alt: "",
      className: "ml-3"
    }));
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_calendar__WEBPACK_IMPORTED_MODULE_1__["default"], {
    onClickMonth: function onClickMonth(month) {
      var selectedYear = month.getFullYear();
      var selectedMonth = month.getMonth();
      var currentActiveYear = valueDate.getFullYear();
      if (selectedYear !== currentActiveYear && selectedMonth === 0) {
        updateDateMonth(month);
      }
    },
    value: valueDate,
    view: isOpenViewMonth ? 'year' : 'month',
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_2__["default"])('ml-lg-3', {
      'react-calendar-selected': !isOpenViewMonth
    }),
    activeStartDate: activeDate,
    tileDisabled: disableSpecificMonth,
    formatMonth: customMonthTitle,
    onDrillUp: onDrillUp,
    onActiveStartDateChange: onActiveStartDateChange,
    navigationLabel: navigationLabel,
    prevLabel: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__["SzIcon"], {
      variant: "line",
      icon: "arrow-left-1",
      className: Object(clsx__WEBPACK_IMPORTED_MODULE_2__["default"])({
        disabled: !checkPrevDate()
      })
    }),
    nextLabel: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_3__["SzIcon"], {
      variant: "line",
      icon: "arrow-right-1",
      className: Object(clsx__WEBPACK_IMPORTED_MODULE_2__["default"])({
        disabled: !checkNextDate()
      })
    })
  });
}

/***/ }),

/***/ "./assets/js/components/SzChartHistoConso/ChartHistoConsoNoTr.jsx":
/*!************************************************************************!*\
  !*** ./assets/js/components/SzChartHistoConso/ChartHistoConsoNoTr.jsx ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ChartHistoConsoNoTr; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var highcharts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! highcharts */ "./node_modules/highcharts/highcharts.js");
/* harmony import */ var highcharts__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(highcharts__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var _app_components_BlockEquivalences__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @app/components/BlockEquivalences */ "./assets/js/components/BlockEquivalences/index.tsx");
/* harmony import */ var highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! highcharts/modules/exporting */ "./node_modules/highcharts/modules/exporting.js");
/* harmony import */ var highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var highcharts_export_csv__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! highcharts-export-csv */ "./node_modules/highcharts-export-csv/export-csv.js");
/* harmony import */ var highcharts_export_csv__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(highcharts_export_csv__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var _app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @app/hooks/histoConso/useGetTelemetry */ "./assets/js/hooks/histoConso/useGetTelemetry.ts");
/* harmony import */ var _SzHighChart__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../SzHighChart */ "./assets/js/components/SzHighChart/index.jsx");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./style.scss */ "./assets/js/components/SzChartHistoConso/style.scss");
/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_style_scss__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @app/pages/consumption-history */ "./assets/js/pages/consumption-history/index.tsx");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
/* harmony import */ var _CsvConso__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./CsvConso */ "./assets/js/components/SzChartHistoConso/CsvConso.jsx");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
















if (_typeof(highcharts__WEBPACK_IMPORTED_MODULE_1___default.a) === 'object') {
  highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_5___default()(highcharts__WEBPACK_IMPORTED_MODULE_1___default.a);
  highcharts_export_csv__WEBPACK_IMPORTED_MODULE_6___default()(highcharts__WEBPACK_IMPORTED_MODULE_1___default.a);
}
function ChartHistoConsoNoTr(_ref) {
  var data = _ref.data;
  var KEY_CUBIC_METER = 'CUBIC_METER';
  var KEY_LITERS = 'LITERS';
  var MAX_RANGE_DATA = 6;
  var MAX_RANGE_DATA_MOBILE = 6;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_12__["useTranslation"])(),
    t = _useTranslation.t;
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_7__["useIsMobile"])();
  var chartRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_13__["ConsumptionHistoryContext"]),
    setDataEquivalences = _useContext.setDataEquivalences;
  var _useGetTelemetry = Object(_app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_8__["default"])(),
    getDataNoEmpty = _useGetTelemetry.getDataNoEmpty;
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(data === null || data === void 0 ? void 0 : data.defaultUnit),
    _useState2 = _slicedToArray(_useState, 2),
    valueUnit = _useState2[0],
    setValueUnit = _useState2[1];
  var confToolTip = {
    addPlotY: 10,
    addTop: 27
  };
  var optionsUnit = [{
    label: t('histoConso.chart.optionsUnit.liter'),
    value: KEY_LITERS
  }, {
    label: t('histoConso.chart.optionsUnit.meter'),
    value: KEY_CUBIC_METER
  }];
  var initData = function initData() {
    return data === null || data === void 0 ? void 0 : data.data;
  };
  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({
      data: initData(),
      unit: data === null || data === void 0 ? void 0 : data.defaultUnit
    }),
    _useState4 = _slicedToArray(_useState3, 2),
    dataHisto = _useState4[0],
    setDataHisto = _useState4[1];

  // 1er index = 0
  var getStartIndex = function getStartIndex() {
    var _ref2 = dataHisto || {},
      data = _ref2.data;
    var index = data.length - MAX_RANGE_DATA;
    return index < 0 ? 0 : index;
  };

  // index comprit entre 0 et NUMBER_DATA_MAX_CHART
  var getIndexToolTip = function getIndexToolTip(currentData) {
    var startIndex = getStartIndex();
    var data = currentData !== null && currentData !== void 0 ? currentData : dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.data;
    var filteredData = getDataNoEmpty(data);
    if (isMobile && filteredData.length >= MAX_RANGE_DATA_MOBILE) {
      return MAX_RANGE_DATA_MOBILE - 1;
    }
    var index = currentData ? filteredData.length - 1 : filteredData.length - startIndex - 1;
    if (index < 0) {
      return 0;
    }
    return index;
  };
  var initColor = function initColor(initData) {
    if (initData.length === 0) {
      return [];
    }
    return initData === null || initData === void 0 ? void 0 : initData.map(function (obj) {
      var colorOperation = {
        linearGradient: {
          x1: 0,
          x2: 0,
          y1: 0,
          y2: 1
        },
        stops: [[0, '#1A7DD2'],
        // Start color
        [1, '#37DDFF'] // End color
        ]
      };

      return _objectSpread(_objectSpread({}, obj), {}, {
        color: (obj === null || obj === void 0 ? void 0 : obj.type) === 'E' ? '#E9ECEF' : colorOperation
      });
    });
  };
  var formatDataLabel = function formatDataLabel(props) {
    if (!props || Object.keys(props).length === 0) {
      return null;
    }
    var y = props.y,
      noData = props.noData;
    var currentValue = y;
    if (!Number.isInteger(currentValue)) {
      currentValue = currentValue.toFixed(2);
    }
    var formattedNumber = new Intl.NumberFormat('fr-FR').format(currentValue);
    var desc = noData ? 0 : formattedNumber === null || formattedNumber === void 0 ? void 0 : formattedNumber.toString().replace('.', ',');
    var unit = dataHisto['unit'] || KEY_CUBIC_METER;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_10__["SzTypographie"], {
      variant: "H1",
      size: "XL",
      className: "mb-0",
      weight: "bold"
    }, desc, unit === KEY_CUBIC_METER && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("sup", {
      className: "text-expo"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("sup", null, "3")), unit === KEY_LITERS && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("sup", {
      className: "ml-2 liter-expo"
    }));
  };
  var formaterXAxis = function formaterXAxis(value) {
    var _chartRef$current;
    var xValue = value;
    var chart = chartRef === null || chartRef === void 0 ? void 0 : (_chartRef$current = chartRef.current) === null || _chartRef$current === void 0 ? void 0 : _chartRef$current.chart;
    var series = (chart === null || chart === void 0 ? void 0 : chart.series[0]) || [];
    var _ref3 = series || {},
      data = _ref3.data;
    var point = data === null || data === void 0 ? void 0 : data.find(function (point) {
      return point.name === xValue;
    });
    var _ref4 = point || {},
      yValue = _ref4.y;
    return yValue !== null ? highcharts__WEBPACK_IMPORTED_MODULE_1___default.a.dateFormat('%d/%m<br/>%Y', new Date(value)) : '';
  };
  var options = {
    pointWidth: isMobile ? 28 : 84,
    legend: {
      enabled: true,
      symbolRadius: 0
    },
    xAxis: {
      crosshair: false,
      type: 'category',
      labels: {
        style: {
          fontSize: '12px'
        },
        formatter: function formatter(props) {
          var regex = /^\d{4}-\d{2}-\d{2}$/;
          var value = regex.test(props) ? props : this.value;
          return formaterXAxis(value);
        }
      }
    },
    plotOptions: {
      column: {
        minPointLength: 10,
        dataLabels: {
          enabled: true
        },
        borderWidth: 3,
        pointWidth: 20
      }
    },
    series: [{
      name: '',
      showInLegend: false,
      dataLabels: {
        enabled: true,
        allowOverlap: true,
        formatter: function formatter() {
          return '';
        },
        style: {
          fontSize: 11
        }
      }
    }]
  };
  var updateDataUnit = function updateDataUnit(value) {
    var tempData = _objectSpread({}, dataHisto);
    tempData === null || tempData === void 0 ? void 0 : tempData.data.forEach(function (item) {
      if (KEY_LITERS === value) {
        item.y = item.litre;
      } else if (KEY_CUBIC_METER === value) {
        item.y = item.m3;
      }
    });
    tempData['unit'] = value;
    tempData['isUpdateToolTip'] = "SUCCESS-UPDATE-UNIT-".concat(Math.random());
    setDataHisto(tempData);
  };
  var getDataTooltip = function getDataTooltip(values) {
    var startDate = values.startDate,
      endDate = values.endDate,
      litre = values.litre,
      type = values.type;
    var start = startDate ? new Date(startDate) : 0;
    var end = endDate ? new Date(endDate) : 0;
    var formattedStartDate = start instanceof Date && !isNaN(start) ? Object(date_fns__WEBPACK_IMPORTED_MODULE_14__["format"])(start, 'dd/MM/yy') : '0';
    var formattedEndDate = end ? Object(date_fns__WEBPACK_IMPORTED_MODULE_14__["format"])(end, 'dd/MM/yy') : '';
    setDataEquivalences({
      view: 'MONTH',
      value: litre,
      first_date: formattedStartDate,
      last_date: formattedEndDate,
      type: type,
      period: values === null || values === void 0 ? void 0 : values.numberOfDays
    });
  };
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    if (dataHisto !== null && dataHisto !== void 0 && dataHisto.data && (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.data) !== (data === null || data === void 0 ? void 0 : data.data)) {
      var tempData = _objectSpread(_objectSpread({}, dataHisto), {}, {
        data: data === null || data === void 0 ? void 0 : data.data,
        unit: data === null || data === void 0 ? void 0 : data.defaultUnit,
        isUpdateToolTip: "SUCCESS-".concat(Math.random())
      });
      if (valueUnit !== (data === null || data === void 0 ? void 0 : data.defaultUnit)) {
        setValueUnit(data === null || data === void 0 ? void 0 : data.defaultUnit);
      }
      setDataHisto(tempData);
    }
  }, [data]);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-8 px-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_10__["SzTypographie"], {
    variant: "H4",
    size: "L",
    weight: "medium",
    className: "mb-3"
  }, t('histoConso.subtitle_histoconso')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "row no-gutters histo-conso-no-tr control-chart align-items-baseline"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_10__["SzRadioButton"], {
    value: valueUnit,
    onChange: function onChange(value) {
      setValueUnit(value);
      updateDataUnit(value);
    },
    name: 'radioUnit',
    choices: optionsUnit,
    className: "p-1 font-14-label"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-lg-9 text-right"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CsvConso__WEBPACK_IMPORTED_MODULE_15__["default"], {
    data: dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.data
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SzHighChart__WEBPACK_IMPORTED_MODULE_9__["default"], {
    type: _app_constants__WEBPACK_IMPORTED_MODULE_3__["TYPE_CHART_HISTO_CONSO_NO_TR"],
    chartRef: chartRef,
    data: dataHisto,
    seriesData: [],
    maxRangeData: MAX_RANGE_DATA,
    maxRangeDataMobile: MAX_RANGE_DATA_MOBILE,
    classNameBtnPagination: Object(clsx__WEBPACK_IMPORTED_MODULE_2__["default"])('col-12 px-0'),
    options: options,
    confToolTip: confToolTip,
    isUpdateToolTip: dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.isUpdateToolTip,
    getStartIndex: getStartIndex,
    getIndexToolTip: getIndexToolTip,
    initColor: initColor,
    formatDataLabel: formatDataLabel,
    getDataTooltip: getDataTooltip
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "legend  mt-2 row no-gutters"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-3 mb-2 mb-lg-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "legend-item justify-content-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    className: "box estimated"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_10__["SzTypographie"], {
    variant: "caption",
    weight: "regular",
    size: "lg"
  }, t('histoConso.chart.noTr.legend1')))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "legend-item justify-content-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", {
    className: "box actual"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_10__["SzTypographie"], {
    variant: "caption",
    weight: "regular"
  }, t('histoConso.chart.noTr.legend2'))))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-4 px-0 px-lg-4 pt-3 pt-lg-0 ml-lg-4 mt-lg-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_BlockEquivalences__WEBPACK_IMPORTED_MODULE_4__["BlockEquivalences"], null)));
}

/***/ }),

/***/ "./assets/js/components/SzChartHistoConso/CompareMonth.jsx":
/*!*****************************************************************!*\
  !*** ./assets/js/components/SzChartHistoConso/CompareMonth.jsx ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CompareMonth; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var _SzHighChart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../SzHighChart */ "./assets/js/components/SzHighChart/index.jsx");



function CompareMonth(_ref) {
  var type = _ref.type,
    chartRef = _ref.chartRef,
    _ref$seriesData = _ref.seriesData,
    seriesData = _ref$seriesData === void 0 ? [] : _ref$seriesData,
    maxRangeData = _ref.maxRangeData,
    maxRangeDataMobile = _ref.maxRangeDataMobile,
    _ref$options = _ref.options,
    options = _ref$options === void 0 ? {} : _ref$options,
    _ref$confToolTip = _ref.confToolTip,
    confToolTip = _ref$confToolTip === void 0 ? {} : _ref$confToolTip,
    _ref$isUpdateToolTip = _ref.isUpdateToolTip,
    isUpdateToolTip = _ref$isUpdateToolTip === void 0 ? false : _ref$isUpdateToolTip,
    getStartIndex = _ref.getStartIndex,
    getIndexToolTip = _ref.getIndexToolTip,
    initColor = _ref.initColor,
    formatDataLabel = _ref.formatDataLabel,
    _ref$getDataTooltip = _ref.getDataTooltip,
    getDataTooltip = _ref$getDataTooltip === void 0 ? function () {} : _ref$getDataTooltip;
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_1__["useIsMobile"])();
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SzHighChart__WEBPACK_IMPORTED_MODULE_2__["default"], {
    type: type,
    chartRef: chartRef,
    seriesData: seriesData,
    disabledEventLegend: true,
    maxRangeData: maxRangeData,
    maxRangeDataMobile: maxRangeDataMobile,
    showNextPrev: isMobile,
    options: options,
    confToolTip: confToolTip,
    isUpdateToolTip: isUpdateToolTip,
    getStartIndex: getStartIndex,
    getIndexToolTip: getIndexToolTip,
    initColor: initColor,
    formatDataLabel: formatDataLabel,
    getDataTooltip: getDataTooltip
  });
}

/***/ }),

/***/ "./assets/js/components/SzChartHistoConso/CsvConso.jsx":
/*!*************************************************************!*\
  !*** ./assets/js/components/SzChartHistoConso/CsvConso.jsx ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return CsvConso; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_csv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-csv */ "./node_modules/react-csv/index.js");
/* harmony import */ var react_csv__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_csv__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__);



function CsvConso(_ref) {
  var data = _ref.data;
  var headersCsv = [{
    label: 'Date',
    key: 'name'
  }, {
    label: 'Consommation',
    key: 'y'
  }, {
    label: 'Index',
    key: 'indexConso'
  }];
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_csv__WEBPACK_IMPORTED_MODULE_1__["CSVLink"], {
    data: data,
    headers: headersCsv,
    filename: "Extraction_consommation_eau.csv",
    className: "btn-text text-decoration-none",
    separator: ";"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__["SzIcon"], {
    variant: "line",
    icon: "download-bottom"
  }));
}

/***/ }),

/***/ "./assets/js/components/SzChartHistoConso/ToolTipHistoConso.jsx":
/*!**********************************************************************!*\
  !*** ./assets/js/components/SzChartHistoConso/ToolTipHistoConso.jsx ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");





/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function ToolTipHistoConso(_ref, ref) {
  var dataToolTip = _ref.dataToolTip,
    desc = _ref.desc;
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_1__["useIsMobile"])();
  var toolTipClasses = Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('tooltip-high row py-3 px-4', {
    'w-100': isMobile
  });
  var title = dataToolTip !== null && dataToolTip !== void 0 && dataToolTip.name ? Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(new Date(dataToolTip === null || dataToolTip === void 0 ? void 0 : dataToolTip.name), 'MMMM yyyy').replace(/\b(\w)/, function (_char) {
    return _char.toUpperCase();
  }) : 'NA';
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    ref: ref,
    className: toolTipClasses
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__["SzTypographie"], {
    variant: "body",
    weight: "bold",
    className: "text-blue-electric mb-0"
  }, title), desc);
}));

/***/ }),

/***/ "./assets/js/components/SzChartHistoConso/ToolTipHistoConsoNoTr.jsx":
/*!**************************************************************************!*\
  !*** ./assets/js/components/SzChartHistoConso/ToolTipHistoConsoNoTr.jsx ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");






/* harmony default export */ __webpack_exports__["default"] = (/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function ToolTipHistoConsoNoTr(_ref, ref) {
  var dataToolTip = _ref.dataToolTip,
    desc = _ref.desc;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_5__["useTranslation"])(),
    t = _useTranslation.t;
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_1__["useIsMobile"])();
  var _ref2 = dataToolTip || {},
    startDate = _ref2.startDate,
    endDate = _ref2.endDate,
    valueIndex = _ref2.valueIndex;
  var toolTipClasses = Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('tooltip-high tooltip-high-no-tr row py-3 px-4', {
    'w-100': isMobile
  });
  var start = startDate ? Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(new Date(startDate), 'dd/MM/yy') : '';
  var end = endDate ? Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(new Date(endDate), 'dd/MM/yy') : '';
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    ref: ref,
    className: toolTipClasses
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__["SzTypographie"], {
    variant: "body",
    weight: "bold",
    className: "text-blue-electric mb-0"
  }, !start ? end : t('histoConso.chart.noTr.toolTip.title', {
    start: start,
    end: end
  })), desc, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_2__["SzTypographie"], {
    weight: "regular",
    size: "M",
    variant: "caption",
    className: "text-dark mb-0"
  }, t('histoConso.chart.noTr.toolTip.index', {
    index: valueIndex
  })));
}));

/***/ }),

/***/ "./assets/js/components/SzChartHistoConso/index.jsx":
/*!**********************************************************!*\
  !*** ./assets/js/components/SzChartHistoConso/index.jsx ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SzChartHistoConso; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var highcharts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! highcharts */ "./node_modules/highcharts/highcharts.js");
/* harmony import */ var highcharts__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(highcharts__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _app_components_BlockEquivalences__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/components/BlockEquivalences */ "./assets/js/components/BlockEquivalences/index.tsx");
/* harmony import */ var react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap/OverlayTrigger */ "./node_modules/react-bootstrap/esm/OverlayTrigger.js");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap/Tooltip */ "./node_modules/react-bootstrap/esm/Tooltip.js");
/* harmony import */ var _app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @app/hooks/histoConso/useGetTelemetry */ "./assets/js/hooks/histoConso/useGetTelemetry.ts");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var _img_icons_info_circle_png__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @img/icons/info-circle.png */ "./assets/img/icons/info-circle.png");
/* harmony import */ var highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! highcharts/modules/exporting */ "./node_modules/highcharts/modules/exporting.js");
/* harmony import */ var highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var highcharts_export_csv__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! highcharts-export-csv */ "./node_modules/highcharts-export-csv/export-csv.js");
/* harmony import */ var highcharts_export_csv__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(highcharts_export_csv__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
/* harmony import */ var _SzHighChart__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../SzHighChart */ "./assets/js/components/SzHighChart/index.jsx");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./style.scss */ "./assets/js/components/SzChartHistoConso/style.scss");
/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_style_scss__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _CalendarConso__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./CalendarConso */ "./assets/js/components/SzChartHistoConso/CalendarConso.jsx");
/* harmony import */ var _app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @app/pages/consumption-history */ "./assets/js/pages/consumption-history/index.tsx");
/* harmony import */ var react_loading_skeleton__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! react-loading-skeleton */ "./node_modules/react-loading-skeleton/lib/index.js");
/* harmony import */ var react_loading_skeleton__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _CompareMonth__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./CompareMonth */ "./assets/js/components/SzChartHistoConso/CompareMonth.jsx");
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var _CsvConso__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./CsvConso */ "./assets/js/components/SzChartHistoConso/CsvConso.jsx");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
























if (_typeof(highcharts__WEBPACK_IMPORTED_MODULE_1___default.a) === 'object') {
  highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_9___default()(highcharts__WEBPACK_IMPORTED_MODULE_1___default.a);
  highcharts_export_csv__WEBPACK_IMPORTED_MODULE_10___default()(highcharts__WEBPACK_IMPORTED_MODULE_1___default.a);
}
function SzChartHistoConso(_ref) {
  var _dataHisto$data;
  var data = _ref.data,
    idPDS = _ref.idPDS,
    apiDayTelemetry = _ref.apiDayTelemetry;
  var KEY_CUBIC_METER = 'CUBIC_METER';
  var KEY_LITERS = 'LITERS';
  var KEY_DAY = 'DAY';
  var KEY_MONTH = 'MONTH';
  var MAX_RANGE_DATA = 31;
  var MAX_RANGE_DATA_MOBILE = 6;
  var MAX_RANGE_DATA_MULTI_MOBILE = 4;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_16__["useTranslation"])(),
    t = _useTranslation.t;
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_11__["useIsMobile"])();
  var isDesktop = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_11__["useIsDesktop"])();
  var chartRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
  var chartRefSeries = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
  var queryClient = Object(react_query__WEBPACK_IMPORTED_MODULE_21__["useQueryClient"])();
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(data === null || data === void 0 ? void 0 : data.defaultUnit),
    _useState2 = _slicedToArray(_useState, 2),
    valueUnit = _useState2[0],
    setValueUnit = _useState2[1];
  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(data === null || data === void 0 ? void 0 : data.defaultPeriod),
    _useState4 = _slicedToArray(_useState3, 2),
    valuePeriod = _useState4[0],
    setValuePeriod = _useState4[1];
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_18__["ConsumptionHistoryContext"]),
    setDataEquivalences = _useContext.setDataEquivalences,
    showToolTipContext = _useContext.showToolTip,
    setShowToolTipContext = _useContext.setShowToolTip;
  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),
    _useState6 = _slicedToArray(_useState5, 2),
    checkedCompareMonth = _useState6[0],
    setCheckedCompareMonth = _useState6[1];
  var confToolTip = {
    addPlotY: 10,
    addTop: 45
  };
  var optionsUnit = [{
    label: t('histoConso.chart.optionsUnit.liter'),
    value: KEY_LITERS
  }, {
    label: t('histoConso.chart.optionsUnit.meter'),
    value: KEY_CUBIC_METER
  }];
  var optionsPeriod = [{
    label: t('histoConso.chart.optionsPeriod.day'),
    value: KEY_DAY
  }, {
    label: t('histoConso.chart.optionsPeriod.month'),
    value: KEY_MONTH
  }];
  var defaultPeriod = {
    DAY: data === null || data === void 0 ? void 0 : data.dataDay,
    MONTH: data === null || data === void 0 ? void 0 : data.dataMonth
  };
  var _useGetTelemetry = Object(_app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_6__["default"])(),
    initDataTelemetry = _useGetTelemetry.initDataTelemetry,
    getStartEndDate = _useGetTelemetry.getStartEndDate,
    initDataCompareMonth = _useGetTelemetry.initDataCompareMonth,
    getDataNoEmpty = _useGetTelemetry.getDataNoEmpty;
  var initData = function initData(period) {
    var currentPeriod = period !== null && period !== void 0 ? period : data === null || data === void 0 ? void 0 : data.defaultPeriod;
    if (currentPeriod === KEY_DAY) {
      var _getStartEndDate = getStartEndDate(KEY_DAY),
        startDate = _getStartEndDate.startDate,
        endDate = _getStartEndDate.endDate;
      var params = {
        id_PDS: idPDS,
        mode: 'daily',
        start_date: startDate,
        end_date: endDate
      };
      setDataHisto(_objectSpread(_objectSpread({}, dataHisto), {}, {
        isUpdateToolTip: "loading-".concat(Math.random())
      }));
      apiDayTelemetry.mutate(params);
    }
    return defaultPeriod[data === null || data === void 0 ? void 0 : data.defaultPeriod];
  };
  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({
      data: initData(),
      unit: data === null || data === void 0 ? void 0 : data.defaultUnit,
      period: data === null || data === void 0 ? void 0 : data.defaultPeriod,
      isUpdateToolTip: false
    }),
    _useState8 = _slicedToArray(_useState7, 2),
    dataHisto = _useState8[0],
    setDataHisto = _useState8[1];

  // 1er index = 0
  var getStartIndex = function getStartIndex() {
    if (isMobile) {
      if (checkedCompareMonth) {
        var _dataCompareMonth = initDataCompareMonth(data === null || data === void 0 ? void 0 : data.dataMonth);
        var _seriesData = (_dataCompareMonth === null || _dataCompareMonth === void 0 ? void 0 : _dataCompareMonth.seriesData) || [];
        if (_seriesData.length === 0) {
          return 0;
        }
        var longuestSerie = _seriesData.reduce(function (maxArray, serie) {
          var data = serie.data;
          return data.length > maxArray.length ? data : maxArray;
        }, []);
        var index = longuestSerie.length - MAX_RANGE_DATA_MULTI_MOBILE;
        return index < 0 ? 0 : index;
      } else {
        var _ref2 = dataHisto || {},
          _data = _ref2.data;
        var filteredData = getDataNoEmpty(_data, false);
        var _index = filteredData.length - MAX_RANGE_DATA_MOBILE;
        return _index < 0 ? 0 : _index;
      }
    }
    return 0;
  };

  // index comprit entre 0 et NUMBER_DATA_MAX_CHART
  var getIndexToolTip = function getIndexToolTip(currentData) {
    if (checkedCompareMonth) {
      var _seriesData2$;
      var _dataCompareMonth2 = initDataCompareMonth(data === null || data === void 0 ? void 0 : data.dataMonth);
      var _seriesData2 = (_dataCompareMonth2 === null || _dataCompareMonth2 === void 0 ? void 0 : _dataCompareMonth2.seriesData) || [];
      if (_seriesData2.length === 0) {
        return 0;
      }
      var newData = currentData !== null && currentData !== void 0 ? currentData : (_seriesData2$ = _seriesData2[1]) === null || _seriesData2$ === void 0 ? void 0 : _seriesData2$.data;
      var filteredData = getDataNoEmpty(newData, true);
      var index = isMobile ? MAX_RANGE_DATA_MULTI_MOBILE - 1 : filteredData.length - 1;
      if (index < 0) {
        return 0;
      }
      return index;
    } else {
      var _data2 = currentData !== null && currentData !== void 0 ? currentData : dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.data;
      var _filteredData = getDataNoEmpty(_data2, false);
      if (isMobile && _filteredData.length >= MAX_RANGE_DATA_MOBILE) {
        return MAX_RANGE_DATA_MOBILE - 1;
      }
      var _index2 = _filteredData.length - 1;
      if (_index2 < 0) {
        return 0;
      }
      return _index2;
    }
  };
  var initColor = function initColor(initData) {
    if (initData === undefined || initData.length === 0) {
      return [];
    }
    return initData === null || initData === void 0 ? void 0 : initData.map(function (obj) {
      var colorOperation = {
        linearGradient: {
          x1: 0,
          x2: 0,
          y1: 0,
          y2: 1
        },
        stops: [[0, '#1A7DD2'],
        // Start color
        [1, '#37DDFF'] // End color
        ]
      };

      if (checkedCompareMonth) {
        return _objectSpread(_objectSpread({}, obj), {}, {
          color: (obj === null || obj === void 0 ? void 0 : obj.type) === 'yearConso' ? colorOperation : '#E9ECEF'
        });
      }
      return _objectSpread(_objectSpread({}, obj), {}, {
        color: colorOperation
      });
    });
  };
  var formatDataLabel = function formatDataLabel(props) {
    if (!props || Object.keys(props).length === 0) {
      return null;
    }
    var y = props.y,
      noData = props.noData;
    if (y === null) {
      return;
    }
    var currentValue = y;
    if (!Number.isInteger(currentValue)) {
      currentValue = currentValue.toFixed(2);
    }
    var formattedNumber = new Intl.NumberFormat('fr-FR').format(currentValue);
    var desc = noData ? 0 : formattedNumber === null || formattedNumber === void 0 ? void 0 : formattedNumber.toString().replace('.', ',');
    var unit = dataHisto['unit'] || KEY_CUBIC_METER;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__["SzTypographie"], {
      variant: "H1",
      size: "XL",
      className: "mb-0",
      weight: "bold"
    }, desc, unit === KEY_CUBIC_METER && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("sup", {
      className: "text-expo"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("sup", null, "3")), unit === KEY_LITERS && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("sup", {
      className: "ml-2 liter-expo"
    }));
  };
  var formaterXAxis = function formaterXAxis(value) {
    var _chartRef$current;
    var xValue = value;
    if (checkedCompareMonth) {
      return xValue;
    }
    var chart = chartRef === null || chartRef === void 0 ? void 0 : (_chartRef$current = chartRef.current) === null || _chartRef$current === void 0 ? void 0 : _chartRef$current.chart;
    var series = (chart === null || chart === void 0 ? void 0 : chart.series[0]) || [];
    var _ref3 = series || {},
      data = _ref3.data;
    var point = data === null || data === void 0 ? void 0 : data.find(function (point) {
      return point.name === xValue;
    });
    var _ref4 = point || {},
      yValue = _ref4.y;
    var _ref5 = dataHisto || KEY_DAY,
      period = _ref5.period;
    var formats = {
      DAY: 'dd',
      MONTH: 'MMM yyyy'
    };
    var title = Object(date_fns__WEBPACK_IMPORTED_MODULE_12__["format"])(new Date(value), formats[period]);
    var titleMonth = title.replace(/\b(\w)/, function (_char) {
      return _char.toUpperCase();
    }).replace(' ', '<br/>');
    return yValue !== null ? period === KEY_DAY ? title : titleMonth : '';
  };
  var options = {
    pointWidth: checkedCompareMonth ? 20 : isMobile ? 28 : 16,
    legend: {
      enabled: checkedCompareMonth,
      symbolRadius: 0,
      itemStyle: {
        fontSize: '12px',
        color: '#030F40',
        fontFamily: 'DINPro-Regular '
      }
    },
    xAxis: {
      crosshair: false,
      type: 'category',
      labels: {
        style: {
          fontSize: '12px'
        },
        formatter: function formatter(props) {
          var regex = /^\d{4}-\d{2}-\d{2}$/;
          var _ref6 = props || '',
            value = _ref6.value;
          var currentValue = '';
          if (checkedCompareMonth) {
            currentValue = value !== null && value !== void 0 ? value : props;
          } else {
            currentValue = regex.test(props) ? props : this.value;
          }
          return formaterXAxis(currentValue);
        }
      }
    },
    plotOptions: {
      column: {
        minPointLength: 10,
        dataLabels: {
          enabled: true
        },
        borderWidth: 3,
        pointWidth: 20
      }
    },
    series: [{
      dataLabels: {
        enabled: true,
        allowOverlap: true,
        formatter: function formatter() {
          return '';
        },
        style: {
          fontSize: 11
        }
      }
    }]
  };
  var updateDataUnit = function updateDataUnit(value) {
    var tempData = _objectSpread({}, dataHisto);
    tempData === null || tempData === void 0 ? void 0 : tempData.data.forEach(function (item) {
      if (KEY_LITERS === value) {
        item.y = item.litre;
      } else if (KEY_CUBIC_METER === value) {
        item.y = item.m3;
      }
    });
    tempData['unit'] = value;
    tempData['isUpdateToolTip'] = "SUCCESS-UPDATE-UNIT-".concat(Math.random());
    setDataHisto(tempData);
  };
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var isSuccess = apiDayTelemetry.isSuccess,
      data = apiDayTelemetry.data;
    if (isSuccess && data && valuePeriod === KEY_DAY) {
      var _data$data, _data$data$content;
      var measures = (data === null || data === void 0 ? void 0 : (_data$data = data.data) === null || _data$data === void 0 ? void 0 : (_data$data$content = _data$data.content) === null || _data$data$content === void 0 ? void 0 : _data$data$content.measures) || [];
      var _ref7 = dataHisto || {},
        unit = _ref7.unit;
      var dataTelemetry = initDataTelemetry(measures, unit, KEY_DAY);
      var tempData = _objectSpread(_objectSpread({}, dataHisto), {}, {
        data: dataTelemetry,
        period: KEY_DAY,
        isUpdateToolTip: "SUCCESS-".concat(Math.random())
      });
      setDataHisto(tempData);
    }
  }, [apiDayTelemetry === null || apiDayTelemetry === void 0 ? void 0 : apiDayTelemetry.data]);
  var updatePeriod = function updatePeriod(value) {
    if (KEY_DAY === value) {
      initData(KEY_DAY);
      if (checkedCompareMonth) {
        setDataHisto(_objectSpread(_objectSpread({}, dataHisto), {}, {
          isUpdateToolTip: "SUCCESS-".concat(Math.random())
        }));
        setCheckedCompareMonth(false);
      }
    } else if (KEY_MONTH === value) {
      var tempData = {
        data: data === null || data === void 0 ? void 0 : data.dataMonth,
        unit: dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.unit,
        period: KEY_MONTH,
        isUpdateToolTip: "SUCCESS-".concat(Math.random())
      };
      setCurrentMonthSelected(new Date());
      if (data !== null && data !== void 0 && data.dataMonth && (data === null || data === void 0 ? void 0 : data.dataMonth.length) > 0) {
        tempData === null || tempData === void 0 ? void 0 : tempData.data.forEach(function (item) {
          if (KEY_LITERS === (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.unit)) {
            item.y = item.litre;
          } else if (KEY_CUBIC_METER === (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.unit)) {
            item.y = item.m3;
          }
        });
        setDataHisto(tempData);
      } else {
        setShowToolTipContext(_objectSpread(_objectSpread({}, showToolTipContext), {}, {
          TYPE_CHART_HISTO_CONSO: true
        }));
        queryClient.resetQueries('getTelemetryMonthQuery');
      }
    }
  };
  var getDataTooltip = function getDataTooltip(values) {
    var name = values.name,
      litre = values.litre;
    var viewDay = dataHisto['period'] === KEY_DAY;
    var date = new Date(name);
    var formattedDate = Object(date_fns__WEBPACK_IMPORTED_MODULE_12__["format"])(date, viewDay ? 'EEEE d MMMM yyyy' : 'MMMM yyyy');
    setDataEquivalences({
      view: dataHisto['period'],
      value: litre,
      date: formattedDate,
      period: values === null || values === void 0 ? void 0 : values.numberOfDays
    });
  };
  var onChange = function onChange(_ref8) {
    var target = _ref8.target;
    setCheckedCompareMonth(target.checked);
    if (!target.checked) {
      setDataHisto(_objectSpread(_objectSpread({}, dataHisto), {}, {
        isUpdateToolTip: 'RESET'
      }));
    }
  };
  var dataCompareMonth = initDataCompareMonth(data === null || data === void 0 ? void 0 : data.dataMonth);
  var categories = (dataCompareMonth === null || dataCompareMonth === void 0 ? void 0 : dataCompareMonth.categories) || [];
  var seriesData = (dataCompareMonth === null || dataCompareMonth === void 0 ? void 0 : dataCompareMonth.seriesData) || [];
  options['xAxis']['categories'] = checkedCompareMonth && categories.length > 0 ? categories : null;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    if (dataHisto !== null && dataHisto !== void 0 && dataHisto.data && (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.data) !== (data === null || data === void 0 ? void 0 : data.dataMonth)) {
      var tempData = _objectSpread(_objectSpread({}, dataHisto), {}, {
        data: data === null || data === void 0 ? void 0 : data.dataMonth,
        unit: data === null || data === void 0 ? void 0 : data.defaultUnit,
        period: data === null || data === void 0 ? void 0 : data.defaultPeriod,
        isUpdateToolTip: "SUCCESS-".concat(Math.random())
      });
      if (valueUnit !== (data === null || data === void 0 ? void 0 : data.defaultUnit)) {
        setValueUnit(data === null || data === void 0 ? void 0 : data.defaultUnit);
      }
      if (valuePeriod !== (data === null || data === void 0 ? void 0 : data.defaultPeriod)) {
        setValuePeriod(data === null || data === void 0 ? void 0 : data.defaultPeriod);
      }
      setDataHisto(tempData);
    }
  }, [data]);
  var isDisplayCompareMonth = (dataHisto === null || dataHisto === void 0 ? void 0 : (_dataHisto$data = dataHisto.data) === null || _dataHisto$data === void 0 ? void 0 : _dataHisto$data.length) > 12;
  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(),
    _useState10 = _slicedToArray(_useState9, 2),
    currentMonthSelected = _useState10[0],
    setCurrentMonthSelected = _useState10[1];
  var onChangeDate = function onChangeDate(monthSelected) {
    var today = new Date();
    var firstDay = new Date(monthSelected.getFullYear(), monthSelected.getMonth(), 1);
    var lastDay = new Date(monthSelected.getFullYear(), monthSelected.getMonth() + 1, 0);
    if (today.getMonth() === monthSelected.getMonth()) {
      lastDay = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 1);
    }
    var formatFirstDay = Object(date_fns__WEBPACK_IMPORTED_MODULE_12__["format"])(firstDay, 'yyyy-MM-dd');
    var formatLastDay = Object(date_fns__WEBPACK_IMPORTED_MODULE_12__["format"])(lastDay, 'yyyy-MM-dd');
    var params = {
      id_PDS: idPDS,
      mode: 'daily',
      start_date: formatFirstDay,
      end_date: formatLastDay
    };
    setCurrentMonthSelected(monthSelected);
    apiDayTelemetry.mutate(params);
  };
  if (apiDayTelemetry.isLoading) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__["SzCard"], {
      className: "col-12 my-5 px-0 px-lg-4 bg-white align-items-center"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_19___default.a, {
      count: 1,
      width: '100%',
      height: 500
    }));
  }
  var hasNoData = (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.data) === null || (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.data.length) === 0 || apiDayTelemetry.isError && valuePeriod === KEY_DAY;
  if (hasNoData) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: "row no-gutters control-chart histo-nodata"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: "col-12 col-lg-3",
      "data-cy": "btn-period"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__["SzRadioButton"], {
      value: valuePeriod,
      onChange: function onChange(value) {
        setValuePeriod(value);
        updatePeriod(value);
      },
      name: 'radioPeriod',
      choices: optionsPeriod,
      className: "p-1"
    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: "bg-white col-12 px-0"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__["SzTypographie"], {
      variant: "body",
      weight: "regular",
      className: "text-dark mb-0 text-center"
    }, t('histoConso.empty'))));
  }
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-8 px-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__["SzTypographie"], {
    variant: "H4",
    size: "L",
    weight: "medium",
    className: "mb-3"
  }, t('histoConso.subtitle_histoconso')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "row no-gutters control-chart align-items-baseline"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-3 px-lg-3",
    "data-cy": "btn-unit"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__["SzRadioButton"], {
    value: valueUnit,
    onChange: function onChange(value) {
      setValueUnit(value);
      updateDataUnit(value);
    },
    name: 'radioUnit',
    choices: optionsUnit,
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('p-1 font-14-label', {
      'button-unit': isDesktop
    })
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-3",
    "data-cy": "btn-period"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__["SzRadioButton"], {
    value: valuePeriod,
    onChange: function onChange(value) {
      setValuePeriod(value);
      updatePeriod(value);
    },
    name: 'radioPeriod',
    choices: optionsPeriod,
    className: "p-1 font-14-label"
  })), (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.period) === KEY_DAY && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-5 position-relative"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CalendarConso__WEBPACK_IMPORTED_MODULE_17__["default"], {
    onChangeDate: onChangeDate,
    selectedMonth: currentMonthSelected
  })), (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.period) === KEY_MONTH && isDisplayCompareMonth && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-10 col-lg-5 pl-lg-4 position-relative"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__["SzCheckbox"], {
    id: "compareMonth",
    name: "compareMonth",
    label: t('histoConso.chart.labelCompareMonth'),
    type: "checkbox",
    checked: checkedCompareMonth,
    onChange: onChange,
    className: "pt-2 inline-block"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_3__["default"], {
    key: "top",
    placement: "top",
    overlay: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_5__["default"], {
      id: 'tooltip-top'
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_14__["SzTypographie"], {
      variant: "caption",
      size: "M",
      weight: "light",
      className: "text-dark"
    }, t('histoConso.chart.toolTipHelp')))
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    src: _img_icons_info_circle_png__WEBPACK_IMPORTED_MODULE_8__["default"],
    alt: "",
    className: "ml-3"
  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('text-right', {
      'col-12 col-lg-1': (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.period) === KEY_DAY,
      'col-1 col-lg-1': (dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.period) === KEY_MONTH && isDisplayCompareMonth,
      'col-12 col-lg-6': valuePeriod === KEY_MONTH && !isDisplayCompareMonth
    })
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CsvConso__WEBPACK_IMPORTED_MODULE_22__["default"], {
    data: dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.data
  }))), checkedCompareMonth ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CompareMonth__WEBPACK_IMPORTED_MODULE_20__["default"], {
    type: _app_constants__WEBPACK_IMPORTED_MODULE_7__["TYPE_CHART_HISTO_CONSO"],
    chartRef: chartRefSeries,
    seriesData: seriesData,
    maxRangeData: MAX_RANGE_DATA,
    maxRangeDataMobile: MAX_RANGE_DATA_MULTI_MOBILE,
    options: options,
    confToolTip: confToolTip,
    isUpdateToolTip: dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.isUpdateToolTip,
    getStartIndex: getStartIndex,
    getIndexToolTip: getIndexToolTip,
    initColor: initColor,
    formatDataLabel: formatDataLabel,
    getDataTooltip: getDataTooltip
  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SzHighChart__WEBPACK_IMPORTED_MODULE_13__["default"], {
    type: _app_constants__WEBPACK_IMPORTED_MODULE_7__["TYPE_CHART_HISTO_CONSO"],
    chartRef: chartRef,
    data: dataHisto,
    seriesData: [],
    disabledEventLegend: checkedCompareMonth,
    maxRangeData: MAX_RANGE_DATA,
    maxRangeDataMobile: MAX_RANGE_DATA_MOBILE,
    showNextPrev: isMobile,
    options: options,
    confToolTip: confToolTip,
    isUpdateToolTip: dataHisto === null || dataHisto === void 0 ? void 0 : dataHisto.isUpdateToolTip,
    getStartIndex: getStartIndex,
    getIndexToolTip: getIndexToolTip,
    initColor: initColor,
    formatDataLabel: formatDataLabel,
    getDataTooltip: getDataTooltip
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 col-lg-4 px-0 px-lg-4 pt-3 pt-lg-0 ml-lg-4 mt-lg-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_BlockEquivalences__WEBPACK_IMPORTED_MODULE_2__["BlockEquivalences"], null)));
}

/***/ }),

/***/ "./assets/js/components/SzChartHistoConso/style.scss":
/*!***********************************************************!*\
  !*** ./assets/js/components/SzChartHistoConso/style.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/components/SzHighChart/index.jsx":
/*!****************************************************!*\
  !*** ./assets/js/components/SzHighChart/index.jsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SzHighChart; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var highcharts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! highcharts */ "./node_modules/highcharts/highcharts.js");
/* harmony import */ var highcharts__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(highcharts__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var highcharts_react_official__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! highcharts-react-official */ "./node_modules/highcharts-react-official/dist/highcharts-react.min.js");
/* harmony import */ var highcharts_react_official__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(highcharts_react_official__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! highcharts/modules/exporting */ "./node_modules/highcharts/modules/exporting.js");
/* harmony import */ var highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var highcharts_modules_export_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! highcharts/modules/export-data */ "./node_modules/highcharts/modules/export-data.js");
/* harmony import */ var highcharts_modules_export_data__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(highcharts_modules_export_data__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var _app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @app/hooks/histoConso/useGetTelemetry */ "./assets/js/hooks/histoConso/useGetTelemetry.ts");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./style.scss */ "./assets/js/components/SzHighChart/style.scss");
/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_style_scss__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var ahooks__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ahooks */ "./node_modules/ahooks/es/index.js");
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var _app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @app/pages/consumption-history */ "./assets/js/pages/consumption-history/index.tsx");
/* harmony import */ var _SzChartConso_ToolTipConso__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../SzChartConso/ToolTipConso */ "./assets/js/components/SzChartConso/ToolTipConso.jsx");
/* harmony import */ var _SzChartHistoConso_ToolTipHistoConso__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../SzChartHistoConso/ToolTipHistoConso */ "./assets/js/components/SzChartHistoConso/ToolTipHistoConso.jsx");
/* harmony import */ var _SzChartHistoConso_ToolTipHistoConsoNoTr__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../SzChartHistoConso/ToolTipHistoConsoNoTr */ "./assets/js/components/SzChartHistoConso/ToolTipHistoConsoNoTr.jsx");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
















if (_typeof(highcharts__WEBPACK_IMPORTED_MODULE_1___default.a) === 'object') {
  highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_3___default()(highcharts__WEBPACK_IMPORTED_MODULE_1___default.a);
  highcharts_modules_export_data__WEBPACK_IMPORTED_MODULE_4___default()(highcharts__WEBPACK_IMPORTED_MODULE_1___default.a);
}
var tooltipEnabled = true;
var lastId = null;
function SzHighChart(_ref) {
  var _data$data;
  var type = _ref.type,
    chartRef = _ref.chartRef,
    data = _ref.data,
    _ref$seriesData = _ref.seriesData,
    seriesData = _ref$seriesData === void 0 ? [] : _ref$seriesData,
    maxRangeData = _ref.maxRangeData,
    maxRangeDataMobile = _ref.maxRangeDataMobile,
    className = _ref.className,
    classNameBtnPagination = _ref.classNameBtnPagination,
    _ref$disabledEventLeg = _ref.disabledEventLegend,
    disabledEventLegend = _ref$disabledEventLeg === void 0 ? false : _ref$disabledEventLeg,
    _ref$showNextPrev = _ref.showNextPrev,
    showNextPrev = _ref$showNextPrev === void 0 ? true : _ref$showNextPrev,
    _ref$options = _ref.options,
    options = _ref$options === void 0 ? {} : _ref$options,
    _ref$confToolTip = _ref.confToolTip,
    confToolTip = _ref$confToolTip === void 0 ? {} : _ref$confToolTip,
    _ref$isUpdateToolTip = _ref.isUpdateToolTip,
    isUpdateToolTip = _ref$isUpdateToolTip === void 0 ? false : _ref$isUpdateToolTip,
    getStartIndex = _ref.getStartIndex,
    getIndexToolTip = _ref.getIndexToolTip,
    initColor = _ref.initColor,
    formatDataLabel = _ref.formatDataLabel,
    _ref$getDataTooltip = _ref.getDataTooltip,
    getDataTooltip = _ref$getDataTooltip === void 0 ? function () {} : _ref$getDataTooltip;
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_11__["useIsMobile"])();
  var isDesktop = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_11__["useIsDesktop"])();
  var SUCCESS_UPDATE_UNIT = 'SUCCESS-UPDATE-UNIT';
  var _useGetTelemetry = Object(_app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_6__["default"])(),
    getDataNoEmpty = _useGetTelemetry.getDataNoEmpty;
  var NUMBER_DATA_MAX_CHART = isDesktop ? maxRangeData : maxRangeDataMobile;
  var toolTiptRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
  var containerChartRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({}),
    _useState2 = _slicedToArray(_useState, 2),
    dataToolTip = _useState2[0],
    setDataToolTip = _useState2[1];
  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({
      columnSelected: null,
      serieSelected: seriesData.length > 0 ? seriesData.length - 1 : null
    }),
    _useState4 = _slicedToArray(_useState3, 2),
    posSelected = _useState4[0],
    setPosSelected = _useState4[1];
  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(isUpdateToolTip),
    _useState6 = _slicedToArray(_useState5, 1),
    prevIsUpdateToolTip = _useState6[0];
  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(),
    _useState8 = _slicedToArray(_useState7, 2),
    lastSize = _useState8[0],
    setLastSize = _useState8[1];
  var typesDataEmptyAllowed = ['TYPE_CHART_HISTO_CONSO', 'TYPE_CHART_HISTO_CONSO_NO_TR'];
  var isDataEmptyAllowed = typesDataEmptyAllowed.includes(type);
  var getLonguestSerie = function getLonguestSerie() {
    if (seriesData.length > 0) {
      return seriesData.reduce(function (maxArray, serie) {
        var data = serie.data;
        return data.length > maxArray.length ? data : maxArray;
      }, []);
    }
    return [];
  };
  var isDisableNextBtn = function isDisableNextBtn() {
    if (seriesData.length > 0) {
      var longuestSerie = getLonguestSerie();
      return getStartIndex() + NUMBER_DATA_MAX_CHART + 1 > longuestSerie.length;
    }
    return getStartIndex() + NUMBER_DATA_MAX_CHART + 1 > getDataNoEmpty(data === null || data === void 0 ? void 0 : data.data, false, isDataEmptyAllowed).length;
  };
  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({
      prevBtn: getStartIndex() === 0,
      nextBtn: isDisableNextBtn()
    }),
    _useState10 = _slicedToArray(_useState9, 2),
    disabledBtn = _useState10[0],
    setDisabledBtn = _useState10[1];
  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(getStartIndex() + NUMBER_DATA_MAX_CHART),
    _useState12 = _slicedToArray(_useState11, 2),
    currentIndex = _useState12[0],
    setCurrentIndex = _useState12[1];
  var startIndex = getStartIndex();
  var initXAxis = function initXAxis() {
    var _options$xAxis, _options$xAxis2;
    return {
      crosshair: false,
      type: 'category',
      categories: options === null || options === void 0 ? void 0 : (_options$xAxis = options.xAxis) === null || _options$xAxis === void 0 ? void 0 : _options$xAxis.categories,
      labels: {
        style: _objectSpread({}, options === null || options === void 0 ? void 0 : (_options$xAxis2 = options.xAxis) === null || _options$xAxis2 === void 0 ? void 0 : _options$xAxis2.style),
        rotation: 0
      }
    };
  };
  var addValueEmpty = function addValueEmpty(array) {
    var max = NUMBER_DATA_MAX_CHART - array.length;
    for (var index = 0; index < max; index++) {
      array.push({
        y: 0,
        m3: 0,
        litre: 0,
        isDisplayData: false
      });
    }
    return array;
  };
  var initData = function initData() {
    var _checkData2, _checkData3, _initData;
    var checkData = data === null || data === void 0 ? void 0 : data.data;
    if (isMobile) {
      var _checkData;
      checkData = getDataNoEmpty(data === null || data === void 0 ? void 0 : data.data, false, isDataEmptyAllowed);
      checkData = ((_checkData = checkData) === null || _checkData === void 0 ? void 0 : _checkData.length) < NUMBER_DATA_MAX_CHART ? addValueEmpty(checkData) : checkData;
    }
    if (((_checkData2 = checkData) === null || _checkData2 === void 0 ? void 0 : _checkData2.length) === 0) {
      return [];
    }
    var initData = (_checkData3 = checkData) === null || _checkData3 === void 0 ? void 0 : _checkData3.slice(startIndex, startIndex + NUMBER_DATA_MAX_CHART);
    if (isUpdateToolTip && isUpdateToolTip !== null && isUpdateToolTip !== void 0 && isUpdateToolTip.includes(SUCCESS_UPDATE_UNIT)) {
      var _checkData4;
      initData = (_checkData4 = checkData) === null || _checkData4 === void 0 ? void 0 : _checkData4.slice(currentIndex - NUMBER_DATA_MAX_CHART, currentIndex);
    }
    if (((_initData = initData) === null || _initData === void 0 ? void 0 : _initData.length) === 0) {
      return [];
    }
    var updatedData = getDataNoEmpty(initData, true, isDataEmptyAllowed);
    return initColor(updatedData);
  };
  var initSeries = function initSeries() {
    if (seriesData.length === 0) {
      return [defaultOptSerie];
    }
    var series = [];
    seriesData.forEach(function (serie) {
      var dataSlice = serie === null || serie === void 0 ? void 0 : serie.data.slice(startIndex, startIndex + NUMBER_DATA_MAX_CHART);
      var newData = initColor(dataSlice);
      series.push(_objectSpread(_objectSpread({}, defaultOptSerie), {}, {
        data: newData,
        name: serie.name,
        color: serie.color
      }));
    });
    return series;
  };
  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initXAxis()),
    _useState14 = _slicedToArray(_useState13, 2),
    currentXAxis = _useState14[0],
    setCurrentXAxis = _useState14[1];
  var _useState15 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initData()),
    _useState16 = _slicedToArray(_useState15, 2),
    currentRange = _useState16[0],
    setCurrentRange = _useState16[1];
  var _useState17 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(),
    _useState18 = _slicedToArray(_useState17, 2),
    currentSerie = _useState18[0],
    setCurrentSerie = _useState18[1];
  var resetChart = function resetChart() {
    var newData = initData();
    if (isUpdateToolTip && isUpdateToolTip !== null && isUpdateToolTip !== void 0 && isUpdateToolTip.includes(SUCCESS_UPDATE_UNIT)) {
      setPosSelected(null);
    } else {
      setCurrentIndex(getStartIndex() + NUMBER_DATA_MAX_CHART);
      setDisabledBtn({
        prevBtn: getStartIndex() === 0,
        nextBtn: isDisableNextBtn()
      });
      setCurrentXAxis(initXAxis());
      setCurrentSerie(null);
    }
    setCurrentRange(newData);
  };
  var maxValueM3 = data === null || data === void 0 ? void 0 : (_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.reduce(function (max, item) {
    return Math.abs(item.y) > max ? Math.abs(item.y) : max;
  }, data === null || data === void 0 ? void 0 : data.data[0].y);
  var size = Object(ahooks__WEBPACK_IMPORTED_MODULE_10__["useSize"])(document.querySelector('#container-chart'));
  var seriesOptions = (options === null || options === void 0 ? void 0 : options.series.length) > 0 ? options === null || options === void 0 ? void 0 : options.series[0] : {};
  var defaultOptSerie = _objectSpread({
    name: 'conso',
    pointWidth: options !== null && options !== void 0 && options.pointWidth ? options === null || options === void 0 ? void 0 : options.pointWidth : 22,
    data: currentRange,
    states: {
      select: {
        color: function color() {
          return false;
        },
        borderColor: '#3C77F0'
      }
    },
    allowPointSelect: true,
    dataLabels: {
      enabled: true,
      crop: false,
      overflow: 'none',
      allowOverlap: true,
      formatter: function formatter() {
        var value = formatDataLabel(this);
        return "".concat(value, "\u20AC");
      },
      style: {
        fontSize: 11
      }
    },
    borderRadius: 5,
    pointPadding: 0.2,
    // Espacement entre les colonnes
    groupPadding: 0.1
  }, seriesOptions);
  var defaultOptions = {
    chart: {
      type: 'column'
    },
    exporting: {
      buttons: {
        contextButton: {
          enabled: false
        }
      }
    },
    title: {
      text: ''
    },
    xAxis: currentXAxis,
    yAxis: {
      max: maxValueM3 === 0 ? 1 : undefined,
      title: {
        text: '',
        useHTML: true
      },
      labels: {
        enabled: false
      }
    },
    legend: _objectSpread({
      enabled: false
    }, options === null || options === void 0 ? void 0 : options.legend),
    tooltip: {
      enabled: false
    },
    plotOptions: _objectSpread({
      series: {
        events: {
          legendItemClick: function legendItemClick() {
            return !disabledEventLegend;
          }
        },
        cursor: 'pointer',
        states: {
          hover: {
            enabled: false
          },
          inactive: {
            opacity: disabledEventLegend ? 1 : 0 // Disable dimming of other series
          }
        },

        point: {
          events: {
            click: function click() {
              var _confToolTip$addTop,
                _chartRef$current,
                _this = this;
              var addTop = (_confToolTip$addTop = confToolTip === null || confToolTip === void 0 ? void 0 : confToolTip.addTop) !== null && _confToolTip$addTop !== void 0 ? _confToolTip$addTop : 0;
              tooltipEnabled = lastId ? lastId !== this.id : true;
              var chart = chartRef === null || chartRef === void 0 ? void 0 : (_chartRef$current = chartRef.current) === null || _chartRef$current === void 0 ? void 0 : _chartRef$current.chart;
              var toolTip = toolTiptRef === null || toolTiptRef === void 0 ? void 0 : toolTiptRef.current;
              if (lastId === this.id) {
                toolTip === null || toolTip === void 0 ? void 0 : toolTip.classList.remove('d-block');
                toolTip === null || toolTip === void 0 ? void 0 : toolTip.classList.add('d-none');
              }
              var posCrossAirX = this.plotX + 10;
              if (chart.customCrossAir) {
                chart.customCrossAir.destroy();
                delete chart.customCrossAir;
              }
              if (tooltipEnabled) {
                if ((seriesData === null || seriesData === void 0 ? void 0 : seriesData.length) > 0) {
                  posCrossAirX = this.tooltipPos[0] + 10;
                }
                setTimeout(function () {
                  var _this$shapeArgs;
                  var posCrossAirY = (_this === null || _this === void 0 ? void 0 : (_this$shapeArgs = _this.shapeArgs) === null || _this$shapeArgs === void 0 ? void 0 : _this$shapeArgs.y) + 10;
                  chart.customCrossAir = chart.renderer.path(['M', posCrossAirX, 0, 'L', posCrossAirX, posCrossAirY]).attr({
                    'stroke-width': 3,
                    stroke: '#3C77F0'
                  }).add();
                }, '100');
              }
              if (lastId !== this.id && toolTip) {
                toolTip.style.position = 'absolute';
                toolTip.classList.add('d-block');
                toolTip.style.top = addTop ? "".concat(addTop, "px") : 0;
                var posToolTipMiddle = toolTip.offsetWidth / 2 - 24;
                var containerHisto = chartRef.current.container.current.getBoundingClientRect();
                var overflowRight = this.plotX + posToolTipMiddle - containerHisto.width;
                var posLeft = overflowRight > 0 ? this.plotX - posToolTipMiddle - overflowRight : this.plotX - posToolTipMiddle;
                var styleLeft = posLeft > 0 ? posLeft : this.plotX;
                toolTip.style.left = isMobile ? '15px' : "".concat(styleLeft, "px");
              }
              if (tooltipEnabled) {
                lastId = this.id;
              } else {
                lastId = null;
              }
              setDataToolTip(this === null || this === void 0 ? void 0 : this.options);
              getDataTooltip(this === null || this === void 0 ? void 0 : this.options);
              setPosSelected({
                columnSelected: this.index,
                serieSelected: this.series.index
              });
            },
            mouseOver: function mouseOver() {
              return null;
            }
          }
        }
      }
    }, options === null || options === void 0 ? void 0 : options.plotOptions),
    series: currentSerie ? currentSerie : initSeries()
  };
  var removeToolTip = function removeToolTip() {
    var _chartRef$current2;
    var chart = chartRef === null || chartRef === void 0 ? void 0 : (_chartRef$current2 = chartRef.current) === null || _chartRef$current2 === void 0 ? void 0 : _chartRef$current2.chart;
    if (chart.series[0].points.length === 0) {
      return;
    }
    var toolTip = toolTiptRef === null || toolTiptRef === void 0 ? void 0 : toolTiptRef.current;
    lastId = null;
    setDataToolTip(null);
    if (chart.customCrossAir) {
      chart.customCrossAir.destroy();
      delete chart.customCrossAir;
    }
    toolTip === null || toolTip === void 0 ? void 0 : toolTip.classList.remove('d-block');
    toolTip === null || toolTip === void 0 ? void 0 : toolTip.classList.add('d-none');
    chart.series[0].points[0].select(false);
  };
  var disabledBtnNextPrev = function disabledBtnNextPrev(values, startIndex, endIndex) {
    var prevBtn = disabledBtn.prevBtn,
      nextBtn = disabledBtn.nextBtn;
    var newData = getDataNoEmpty(values, false, isDataEmptyAllowed);
    if (endIndex < (values === null || values === void 0 ? void 0 : values.length)) {
      nextBtn = false;
    }
    if (endIndex >= (values === null || values === void 0 ? void 0 : values.length)) {
      endIndex = values === null || values === void 0 ? void 0 : values.length;
    }
    if (endIndex >= newData.length) {
      nextBtn = true;
    }
    if (startIndex > 0) {
      prevBtn = false;
    }
    if (startIndex <= 0) {
      startIndex = 0;
      prevBtn = true;
    }
    setDisabledBtn({
      prevBtn: prevBtn,
      nextBtn: nextBtn
    });
    return {
      start: startIndex,
      end: endIndex
    };
  };
  var manageMultiSeriesNextPrev = function manageMultiSeriesNextPrev(startIndex, endIndex) {
    var _options$xAxis3;
    var longuestSerie = getLonguestSerie();
    var series = [];
    if (endIndex >= (longuestSerie === null || longuestSerie === void 0 ? void 0 : longuestSerie.length)) {
      endIndex = longuestSerie === null || longuestSerie === void 0 ? void 0 : longuestSerie.length;
    }
    if (startIndex <= 0) {
      startIndex = 0;
    }
    seriesData === null || seriesData === void 0 ? void 0 : seriesData.forEach(function (serie) {
      var dataSlice = serie === null || serie === void 0 ? void 0 : serie.data.slice(startIndex, endIndex);
      var newData = initColor(dataSlice);
      series.push(_objectSpread(_objectSpread({}, defaultOptSerie), {}, {
        data: newData,
        name: serie.name
      }));
    });
    setCurrentSerie(series);
    disabledBtnNextPrev(longuestSerie, startIndex, endIndex);
    var categories = (options === null || options === void 0 ? void 0 : (_options$xAxis3 = options.xAxis) === null || _options$xAxis3 === void 0 ? void 0 : _options$xAxis3.categories) || [];
    var categoriesSlice = categories.slice(startIndex, endIndex);
    setCurrentXAxis(_objectSpread(_objectSpread({}, options === null || options === void 0 ? void 0 : options.xAxis), {}, {
      categories: categoriesSlice
    }));
    showToolType(longuestSerie);
  };
  var manageNextPrevious = function manageNextPrevious(startIndex, endIndex) {
    setCurrentIndex(endIndex);
    if (seriesData.length > 0) {
      return manageMultiSeriesNextPrev(startIndex, endIndex);
    }
    var _disabledBtnNextPrev = disabledBtnNextPrev(data === null || data === void 0 ? void 0 : data.data, startIndex, endIndex),
      start = _disabledBtnNextPrev.start,
      end = _disabledBtnNextPrev.end;
    var currentData = data === null || data === void 0 ? void 0 : data.data.slice(start, end);
    var updatedData = getDataNoEmpty(currentData, false, isDataEmptyAllowed);
    var mappingColor = initColor(updatedData);
    setCurrentRange(mappingColor);
    if (type !== _app_constants__WEBPACK_IMPORTED_MODULE_5__["TYPE_CHART_CONSO"]) {
      showToolType(updatedData, true);
    } else {
      removeToolTip();
    }
  };
  var previous = function previous() {
    var endIndex = currentIndex - NUMBER_DATA_MAX_CHART;
    var startIndex = endIndex - NUMBER_DATA_MAX_CHART;
    if ((disabledBtn === null || disabledBtn === void 0 ? void 0 : disabledBtn.nextBtn) === true) {
      setDisabledBtn({
        prevBtn: null,
        nextBtn: false
      });
    }
    manageNextPrevious(startIndex, endIndex);
  };
  var next = function next() {
    var endIndex = currentIndex + NUMBER_DATA_MAX_CHART;
    if ((disabledBtn === null || disabledBtn === void 0 ? void 0 : disabledBtn.prevBtn) === true) {
      setDisabledBtn({
        prevBtn: false,
        nextBtn: null
      });
    }
    manageNextPrevious(currentIndex, endIndex);
  };
  var formatLabelXaxis = function formatLabelXaxis() {
    var _chartRef$current3, _options$xAxis4, _options$xAxis4$label;
    var chart = chartRef === null || chartRef === void 0 ? void 0 : (_chartRef$current3 = chartRef.current) === null || _chartRef$current3 === void 0 ? void 0 : _chartRef$current3.chart;
    chart.xAxis[0].update({
      labels: {
        style: options === null || options === void 0 ? void 0 : (_options$xAxis4 = options.xAxis) === null || _options$xAxis4 === void 0 ? void 0 : (_options$xAxis4$label = _options$xAxis4.labels) === null || _options$xAxis4$label === void 0 ? void 0 : _options$xAxis4$label.style,
        formatter: function formatter() {
          var formatValue = options === null || options === void 0 ? void 0 : options.xAxis.labels.formatter(this.value);
          if ((posSelected === null || posSelected === void 0 ? void 0 : posSelected.columnSelected) === this.pos) {
            return "<b>".concat(formatValue, "</b>");
          }
          return formatValue;
        }
      }
    });
  };
  var showToolType = function showToolType(currentData) {
    var _chartRef$current4;
    var isResetPosSelected = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    removeToolTip();
    var chart = chartRef === null || chartRef === void 0 ? void 0 : (_chartRef$current4 = chartRef.current) === null || _chartRef$current4 === void 0 ? void 0 : _chartRef$current4.chart;
    setTimeout(function () {
      var _chart$series$indexSe;
      var indexSerie = seriesData.length > 0 ? posSelected === null || posSelected === void 0 ? void 0 : posSelected.serieSelected : 0;
      var data = currentData !== null && currentData !== void 0 ? currentData : null;
      var currentPosSelected = getIndexToolTip(data);
      if (!isResetPosSelected && isUpdateToolTip && isUpdateToolTip !== null && isUpdateToolTip !== void 0 && isUpdateToolTip.includes(SUCCESS_UPDATE_UNIT)) {
        currentPosSelected = posSelected === null || posSelected === void 0 ? void 0 : posSelected.columnSelected;
      }
      if ((chart === null || chart === void 0 ? void 0 : chart.series) === undefined) {
        return;
      }
      var firstPoint = chart === null || chart === void 0 ? void 0 : (_chart$series$indexSe = chart.series[indexSerie]) === null || _chart$series$indexSe === void 0 ? void 0 : _chart$series$indexSe.points[currentPosSelected];
      if (firstPoint) {
        firstPoint.firePointEvent('click');
      }
    }, '200');
  };
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    if (lastSize && size && JSON.stringify(lastSize) !== JSON.stringify(size)) {
      removeToolTip();
    }
    setLastSize(size);
  }, [size]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var isReset = seriesData.length > 0;
    if (isUpdateToolTip) {
      if (isUpdateToolTip !== null && isUpdateToolTip !== void 0 && isUpdateToolTip.includes('SUCCESS') && prevIsUpdateToolTip !== isUpdateToolTip) {
        isReset = true;
      } else if (isUpdateToolTip === 'RESET') {
        isReset = true;
      }
    }
    if (isReset) {
      resetChart();
      showToolType();
    }
    if (type === 'TYPE_CHART_CONSO' && !isUpdateToolTip) {
      showToolType();
    }
  }, [isUpdateToolTip]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    if (posSelected !== null && posSelected !== void 0 && posSelected.columnSelected) {
      formatLabelXaxis();
    }
  }, [posSelected]);
  var getCurrentSizeRange = function getCurrentSizeRange() {
    var _data$data2;
    if (seriesData.length > 0) {
      var longuestSerie = getLonguestSerie();
      return longuestSerie.length;
    }
    return data === null || data === void 0 ? void 0 : (_data$data2 = data.data) === null || _data$data2 === void 0 ? void 0 : _data$data2.length;
  };
  var containerBtnClasses = Object(clsx__WEBPACK_IMPORTED_MODULE_7__["default"])({
    'd-flex': isDesktop && getCurrentSizeRange() > maxRangeData
  }, {
    'd-none': isDesktop && getCurrentSizeRange() <= maxRangeData
  }, {
    'd-flex': isMobile
  }, {
    'desk-container-btn justify-content-between': isDesktop,
    'justify-content-center': isMobile
  }, classNameBtnPagination);
  var toolTypeByType = {
    TYPE_CHART_CONSO: _SzChartConso_ToolTipConso__WEBPACK_IMPORTED_MODULE_13__["default"],
    TYPE_CHART_HISTO_CONSO: _SzChartHistoConso_ToolTipHistoConso__WEBPACK_IMPORTED_MODULE_14__["default"],
    TYPE_CHART_HISTO_CONSO_NO_TR: _SzChartHistoConso_ToolTipHistoConsoNoTr__WEBPACK_IMPORTED_MODULE_15__["default"]
  };
  var ComponentToolType = toolTypeByType[type];
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_app_pages_consumption_history__WEBPACK_IMPORTED_MODULE_12__["ConsumptionHistoryContext"]),
    showToolTipContext = _useContext.showToolTip,
    setShowToolTip = _useContext.setShowToolTip;
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var allowedType = ['TYPE_CHART_HISTO_CONSO', 'TYPE_CHART_HISTO_CONSO_NO_TR'];
    if (allowedType.includes(type)) {
      var show = showToolTipContext[type];
      if (show) {
        var _objectSpread2;
        showToolType();
        var prevKeyType = '';
        if (type === 'TYPE_CHART_HISTO_CONSO' && !showToolTipContext['TYPE_CHART_HISTO_CONSO_NO_TR']) {
          prevKeyType = 'TYPE_CHART_HISTO_CONSO_NO_TR';
        } else if (type === 'TYPE_CHART_HISTO_CONSO_NO_TR' && !showToolTipContext['TYPE_CHART_HISTO_CONSO']) {
          prevKeyType = 'TYPE_CHART_HISTO_CONSO';
        }
        var newData = _objectSpread(_objectSpread({}, showToolTipContext), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, type, false), _defineProperty(_objectSpread2, prevKeyType, true), _objectSpread2));
        setShowToolTip(newData);
      }
    }
  }, [showToolTipContext]);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    ref: containerChartRef,
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_7__["default"])('bg-white col-12 px-0', className)
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    id: "container-chart"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ComponentToolType, {
    ref: toolTiptRef,
    dataToolTip: dataToolTip,
    desc: formatDataLabel(dataToolTip)
  }), defaultOptions && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(highcharts_react_official__WEBPACK_IMPORTED_MODULE_2___default.a, {
    highcharts: highcharts__WEBPACK_IMPORTED_MODULE_1___default.a,
    options: defaultOptions,
    ref: chartRef
  }))), showNextPrev && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    id: "container-btn",
    className: containerBtnClasses
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_9__["SzButton"], {
    variant: "contained",
    className: "mr-3 mr-lg-0",
    icon: "arrow-left-1",
    small: true,
    iconVariant: "bold",
    disabled: disabledBtn.prevBtn,
    border: "rounded",
    onClick: function onClick() {
      return previous();
    }
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_9__["SzButton"], {
    variant: "contained",
    icon: "arrow-right-1",
    small: true,
    iconVariant: "bold",
    border: "rounded",
    disabled: disabledBtn.nextBtn,
    onClick: function onClick() {
      return next();
    }
  })));
}

/***/ }),

/***/ "./assets/js/components/SzHighChart/style.scss":
/*!*****************************************************!*\
  !*** ./assets/js/components/SzHighChart/style.scss ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/ez-components/PushItem/index.tsx":
/*!****************************************************!*\
  !*** ./assets/js/ez-components/PushItem/index.tsx ***!
  \****************************************************/
/*! exports provided: PushItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushItem", function() { return PushItem; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _app_hooks_useResponsive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/hooks/useResponsive */ "./assets/js/hooks/useResponsive.ts");
/* harmony import */ var _app_hooks_useToRedirect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/hooks/useToRedirect */ "./assets/js/hooks/useToRedirect.ts");
/* harmony import */ var _push_item_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./push-item.scss */ "./assets/js/ez-components/PushItem/push-item.scss");
/* harmony import */ var _push_item_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_push_item_scss__WEBPACK_IMPORTED_MODULE_4__);





var PushItem = function PushItem(_ref) {
  var style = _ref.style,
    data = _ref.data;
  var isDesktop = Object(_app_hooks_useResponsive__WEBPACK_IMPORTED_MODULE_2__["useIsDesktop"])();
  var title = data.title,
    description = data.description,
    cta = data.cta,
    img_desktop = data.img_desktop,
    img_mobile = data.img_mobile;
  var _ref2 = isDesktop ? img_desktop : img_mobile,
    src = _ref2.src,
    alt = _ref2.alt;
  var _useToRedirect = Object(_app_hooks_useToRedirect__WEBPACK_IMPORTED_MODULE_3__["default"])(),
    toRedirect = _useToRedirect.toRedirect;
  var handleClick = function handleClick() {
    toRedirect(cta.url);
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: style,
    onClick: handleClick,
    "data-cy": "push-item"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "push-img"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    src: src,
    alt: alt,
    className: "h-100"
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "push-desc d-flex flex-column justify-content-between align-items-start p-2 p-lg-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "H4",
    weight: "medium",
    size: "L"
  }, title), isDesktop && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "body",
    weight: "regular",
    className: "text-dark mb-2",
    tag: "span"
  }, description), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "d-flex align-items-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "body",
    size: "M",
    weight: "medium",
    className: "mb-0"
  }, cta.label), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzIcon"], {
    icon: "keyboard-arrow-right",
    variant: "line",
    className: "ml-2"
  }))));
};

/***/ }),

/***/ "./assets/js/ez-components/PushItem/push-item.scss":
/*!*********************************************************!*\
  !*** ./assets/js/ez-components/PushItem/push-item.scss ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/hooks/histoConso/useGetMeterList.ts":
/*!*******************************************************!*\
  !*** ./assets/js/hooks/histoConso/useGetMeterList.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useGetMeterList; });
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/services/AxiosInstance */ "./assets/js/services/AxiosInstance.jsx");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");




function useGetMeterList() {
  var history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_3__["useHistory"])();
  var ROLE_CONSULT_CONSO = 'CONSULT_CONSO';
  var ROLE_TELERELEVE = 'TELERELEVE';
  var CODE_TR = 'TR';
  var getMeterList = function getMeterList(_ref) {
    var params = _ref.params,
      options = _ref.options,
      _ref$queryName = _ref.queryName,
      queryName = _ref$queryName === void 0 ? 'getMeterListQuery' : _ref$queryName;
    var fetchTelemetry = function fetchTelemetry() {
      return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_1__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_2__["API"].CONSUMPTION.GET_CONSO_METER_LIST, {
        params: params
      });
    };
    return Object(react_query__WEBPACK_IMPORTED_MODULE_0__["useQuery"])(queryName, fetchTelemetry, options);
  };
  var isRoleConso = function isRoleConso(data) {
    var _a, _b;
    var meters = ((_b = (_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.clientCompteursPro) || [];
    if (meters.length === 0) {
      history.push(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].DASHBOARD);
      return;
    }
    var roles = meters[0].roles;
    if (roles.length === 0) {
      history.push(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].DASHBOARD);
      return;
    }
    var roleConso = roles.find(function (item) {
      return item.role === ROLE_CONSULT_CONSO;
    });
    if (!roleConso || Object.keys(roleConso).length === 0) {
      history.push(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].DASHBOARD);
      return;
    }
    var enabled = roleConso.enabled;
    if (!enabled) {
      history.push(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].DASHBOARD);
      return;
    }
    return true;
  };
  var getMeters = function getMeters(data) {
    var _a, _b;
    var meters = ((_b = (_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.clientCompteursPro) || [];
    var _meters$ = meters[0],
      compteursPro = _meters$.compteursPro,
      nbCompteurTotal = _meters$.nbCompteurTotal;
    if (nbCompteurTotal === 0) {
      history.push(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].DASHBOARD);
    }
    return compteursPro[0];
  };
  var getMetersNumber = function getMetersNumber(data) {
    var _a, _b;
    var meters = ((_b = (_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.clientCompteursPro) || [];
    var compteursPro = meters[0].compteursPro;
    return compteursPro || [];
  };
  var isTRMeter = function isTRMeter(data, meter) {
    var _a, _b;
    var meters = ((_b = (_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.clientCompteursPro) || [];
    if (meters.length === 0) {
      return false;
    }
    var roles = meters[0].roles;
    var _ref2 = meter || {},
      codeEquipement = _ref2.codeEquipement;
    if (codeEquipement === CODE_TR) {
      if (roles.length === 0) {
        return false;
      }
      var roleTR = roles.find(function (item) {
        return item.role === ROLE_TELERELEVE;
      });
      if (!roleTR || Object.keys(roleTR).length === 0) {
        return false;
      }
      var enabled = roleTR.enabled;
      if (!enabled) {
        return false;
      }
      return true;
    }
    return false;
  };
  return {
    getMeterList: getMeterList,
    isRoleConso: isRoleConso,
    getMeters: getMeters,
    getMetersNumber: getMetersNumber,
    isTRMeter: isTRMeter
  };
}

/***/ }),

/***/ "./assets/js/hooks/histoConso/useGetNoTelemetry.ts":
/*!*********************************************************!*\
  !*** ./assets/js/hooks/histoConso/useGetNoTelemetry.ts ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useGetNoTelemetry; });
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/services/AxiosInstance */ "./assets/js/services/AxiosInstance.jsx");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");




function useGetNoTelemetry() {
  var getNoTelemetry = function getNoTelemetry(_ref) {
    var params = _ref.params,
      options = _ref.options,
      _ref$queryName = _ref.queryName,
      queryName = _ref$queryName === void 0 ? 'getNoTelemetryQuery' : _ref$queryName;
    var fetchTelemetry = function fetchTelemetry() {
      return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_1__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_2__["API"].CONSUMPTION.GET_CONSO_NO_TELEMETRY, {
        params: params
      });
    };
    return Object(react_query__WEBPACK_IMPORTED_MODULE_0__["useQuery"])(queryName, fetchTelemetry, options);
  };
  var hasDataNoTelemetry = function hasDataNoTelemetry(data) {
    var _a, _b;
    var measures = ((_b = (_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.measures) || [];
    return measures.length > 0;
  };
  var mutationNoTelemetry = function mutationNoTelemetry() {
    return Object(react_query__WEBPACK_IMPORTED_MODULE_0__["useMutation"])(function (params) {
      return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_1__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_2__["API"].CONSUMPTION.GET_CONSO_NO_TELEMETRY, {
        params: params
      });
    });
  };
  var initDataNoTelemetry = function initDataNoTelemetry(measures) {
    var dataConso = [];
    if (measures.length === 0) {
      return [];
    }
    measures.sort(function (a, b) {
      var dateA = new Date(a.date.split('/').reverse().join('-'));
      var dateB = new Date(b.date.split('/').reverse().join('-'));
      return Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["compareAsc"])(dateA, dateB);
    });
    measures.forEach(function (element) {
      var date = element.date,
        previousDateMeasure = element.previousDateMeasure;
      var endDate = date ? Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(new Date(date.split('/').reverse().join('-')), 'yyyy-MM-dd') : null;
      var startDate = previousDateMeasure ? Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(new Date(previousDateMeasure.split('/').reverse().join('-')), 'yyyy-MM-dd') : null;
      var volume = element.volume;
      var values = {
        y: volume,
        m3: volume,
        valueIndex: element.index,
        litre: volume * 1000,
        indexConso: element === null || element === void 0 ? void 0 : element.index,
        startDate: startDate,
        endDate: endDate,
        name: endDate,
        type: element.type,
        noData: element.volume === 0,
        numberOfDays: element === null || element === void 0 ? void 0 : element.numberOfDays,
        isDisplayData: true
      };
      if (element.index !== null) {
        dataConso.push(values);
      }
    });
    return dataConso;
  };
  var getStartEndDateNoTelemetry = function getStartEndDateNoTelemetry() {
    var today = new Date();
    var firstDayYear = new Date(today.getFullYear(), 0, 1);
    firstDayYear.setFullYear(firstDayYear.getFullYear() - 2);
    return {
      startDate: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(firstDayYear, 'yyyy-MM-dd'),
      endDate: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(today, 'yyyy-MM-dd')
    };
  };
  return {
    getNoTelemetry: getNoTelemetry,
    hasDataNoTelemetry: hasDataNoTelemetry,
    mutationNoTelemetry: mutationNoTelemetry,
    initDataNoTelemetry: initDataNoTelemetry,
    getStartEndDateNoTelemetry: getStartEndDateNoTelemetry
  };
}

/***/ }),

/***/ "./assets/js/hooks/histoConso/useGetTelemetry.ts":
/*!*******************************************************!*\
  !*** ./assets/js/hooks/histoConso/useGetTelemetry.ts ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useGetTelemetry; });
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/services/AxiosInstance */ "./assets/js/services/AxiosInstance.jsx");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = "function" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || "@@iterator", asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator", toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, ""); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: "normal", arg: fn.call(obj, arg) }; } catch (err) { return { type: "throw", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { ["next", "throw", "return"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if ("throw" !== record.type) { var result = record.arg, value = result.value; return value && "object" == _typeof(value) && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke("next", value, resolve, reject); }, function (err) { invoke("throw", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke("throw", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, "_invoke", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = "suspendedStart"; return function (method, arg) { if ("executing" === state) throw new Error("Generator is already running"); if ("completed" === state) { if ("throw" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) { if ("suspendedStart" === state) throw state = "completed", context.arg; context.dispatchException(context.arg); } else "return" === context.method && context.abrupt("return", context.arg); state = "executing"; var record = tryCatch(innerFn, self, context); if ("normal" === record.type) { if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, "throw" === methodName && delegate.iterator["return"] && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method) || "return" !== methodName && (context.method = "throw", context.arg = new TypeError("The iterator does not provide a '" + methodName + "' method")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = "normal", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: "root" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if ("function" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) { var ctor = "function" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, "toString", function () { return "[object Generator]"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if ("throw" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if ("root" === entry.tryLoc) return handle("end"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, "catchLoc"), hasFinally = hasOwn.call(entry, "finallyLoc"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error("try statement without catch or finally"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if ("throw" === record.type) throw record.arg; return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, "catch": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if ("throw" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, "next" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};




function useGetTelemetry() {
  var _this = this;
  var KEY_DAY = 'DAY';
  var KEY_MONTH = 'MONTH';
  var KEY_LITERS = 'LITERS';
  var queryClient = Object(react_query__WEBPACK_IMPORTED_MODULE_0__["useQueryClient"])();
  var fetchTelemetry = function fetchTelemetry(params) {
    return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
      var _a, _b, _c;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            _context.prev = 0;
            _context.next = 3;
            return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_1__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_2__["API"].CONSUMPTION.GET_CONSO_TELEMETRY, {
              params: params
            });
          case 3:
            return _context.abrupt("return", _context.sent);
          case 6:
            _context.prev = 6;
            _context.t0 = _context["catch"](0);
            if (!(((_a = _context.t0.response) === null || _a === void 0 ? void 0 : _a.status) === 400 && ((_c = (_b = _context.t0.response) === null || _b === void 0 ? void 0 : _b.data) === null || _c === void 0 ? void 0 : _c.code) === '02')) {
              _context.next = 10;
              break;
            }
            return _context.abrupt("return", {
              content: {
                measures: []
              },
              code: '00',
              message: 'OK'
            });
          case 10:
            throw _context.t0;
          case 11:
          case "end":
            return _context.stop();
        }
      }, _callee, null, [[0, 6]]);
    }));
  };
  var getTelemetry = function getTelemetry(_ref) {
    var params = _ref.params,
      options = _ref.options,
      _ref$queryName = _ref.queryName,
      queryName = _ref$queryName === void 0 ? 'getTelemetryQuery' : _ref$queryName;
    return Object(react_query__WEBPACK_IMPORTED_MODULE_0__["useQuery"])(queryName, function () {
      return fetchTelemetry(params);
    }, options);
  };
  var hasDataTelemetry = function hasDataTelemetry(data) {
    var _a, _b;
    var measures = ((_b = (_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.measures) || [];
    return measures.length > 0;
  };
  var mutationTelemetry = function mutationTelemetry(queryName) {
    var responseMutate = Object(react_query__WEBPACK_IMPORTED_MODULE_0__["useMutation"])(function (params) {
      return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var resp;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return fetchTelemetry(params);
            case 2:
              resp = _context2.sent;
              queryClient.setQueryData([queryName], resp);
              return _context2.abrupt("return", resp);
            case 5:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }));
    });
    return responseMutate;
  };
  var initDataTelemetry = function initDataTelemetry(measures, unit) {
    var period = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    if (measures.length === 0) {
      return [];
    }
    var firstDate = new Date(measures[0].date);
    var daysInMonth = Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["getDaysInMonth"])(firstDate);
    var dataConso = measures.filter(function (element) {
      return element.index !== null;
    }).map(function (element) {
      var _a;
      var date = new Date(element.date);
      var formatDate = Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(date, 'yyyy-MM-dd');
      var volume = element.volume;
      var yValue = unit === KEY_LITERS ? volume * 1000 : volume;
      var values = {
        y: yValue,
        m3: volume,
        litre: volume * 1000,
        indexConso: element === null || element === void 0 ? void 0 : element.index,
        name: formatDate,
        noData: (element === null || element === void 0 ? void 0 : element.volume) === 0,
        isDisplayData: true,
        numberOfDays: (_a = element === null || element === void 0 ? void 0 : element.numberOfDays) !== null && _a !== void 0 ? _a : 1
      };
      return values;
    });
    var lasyDay = dataConso[dataConso.length - 1].name;
    var dateLastDay = new Date(lasyDay).getDate();
    if (period === KEY_DAY && daysInMonth !== dataConso.length) {
      var newDate = new Date(lasyDay);
      var lastNumberDay = daysInMonth - dateLastDay;
      for (var index = 1; index <= lastNumberDay; index++) {
        newDate.setDate(newDate.getDate() + 1);
        var name = Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(new Date(newDate), 'yyyy-MM-dd');
        dataConso.push({
          y: 0,
          m3: 0,
          litre: 0,
          name: name,
          isDisplayData: false
        });
      }
    }
    return dataConso;
  };
  var getStartEndDate = function getStartEndDate(typePeriod) {
    if (typePeriod === KEY_DAY) {
      var today = new Date();
      var lastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
      var isFirstDay = today.getDate() - 2 < 1;
      var startDate = isFirstDay ? Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["startOfMonth"])(lastMonth) : Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["startOfMonth"])(today);
      var endDate = isFirstDay ? lastMonth : new Date(today.getFullYear(), today.getMonth(), today.getDate() - 1);
      return {
        startDate: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(startDate, 'yyyy-MM-dd'),
        endDate: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(endDate, 'yyyy-MM-dd')
      };
    }
    if (typePeriod === KEY_MONTH) {
      var _today = new Date();
      var _isFirstDay = _today.getDate() - 2 < 1;
      var _lastMonth = new Date(_today.getFullYear(), _today.getMonth(), 0);
      var _startDate = new Date(_today.getFullYear() - 2, _isFirstDay ? _today.getMonth() : _today.getMonth() + 1, _today.getDate());
      var _endDate = new Date(_today.getFullYear(), _isFirstDay ? _today.getMonth() - 1 : _today.getMonth(), _isFirstDay ? _lastMonth.getDate() : _today.getDate());
      return {
        startDate: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(_startDate, 'yyyy-MM-dd'),
        endDate: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(_endDate, 'yyyy-MM-dd')
      };
    }
    return {
      startDate: '',
      endDate: ''
    };
  };
  var getFormatStartEndDate = function getFormatStartEndDate(startDate, endDate) {
    return {
      startDate: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(startDate, 'yyyy-MM-dd'),
      endDate: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(endDate, 'yyyy-MM-dd')
    };
  };
  var initDataCompareMonth = function initDataCompareMonth(dataDate) {
    if ((dataDate === null || dataDate === void 0 ? void 0 : dataDate.length) === 0) {
      return [];
    }
    var data = getDataNoEmpty(dataDate);
    if (data === undefined) {
      return [];
    }
    var lastDate = data[(data === null || data === void 0 ? void 0 : data.length) - 1];
    var newDataCurrentYear = [lastDate];
    var dataLastYear = [];
    var _loop = function _loop() {
      var currentDate = data[data.length - index];
      if (currentDate === undefined) {
        return "break";
      }
      if (index < 12) {
        var date = new Date(lastDate === null || lastDate === void 0 ? void 0 : lastDate.name);
        var lastMonth = new Date(date.getFullYear(), date.getMonth() - index);
        var checkDate = data.find(function (itemDate) {
          var date1 = new Date(itemDate === null || itemDate === void 0 ? void 0 : itemDate.name);
          return date1.getMonth() === lastMonth.getMonth() && date1.getFullYear() === lastMonth.getFullYear();
        });
        if (checkDate) {
          newDataCurrentYear.unshift(checkDate);
        } else {
          newDataCurrentYear.unshift({
            y: 0,
            m3: 0,
            litre: 0,
            indexConso: 0,
            name: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(lastMonth, 'yyyy-MM-dd'),
            isDisplayData: false
          });
        }
      } else {
        var _checkDate = newDataCurrentYear.find(function (itemDate) {
          var date1 = new Date(itemDate === null || itemDate === void 0 ? void 0 : itemDate.name);
          var date2 = new Date(currentDate === null || currentDate === void 0 ? void 0 : currentDate.name);
          return date1.getMonth() === date2.getMonth() && date1.getFullYear() === date2.getFullYear();
        });
        if (_checkDate === undefined) {
          dataLastYear.push(currentDate);
        }
      }
    };
    for (var index = 1; index < 25; index++) {
      var _ret = _loop();
      if (_ret === "break") break;
    }
    var newDataLastYear = [];
    newDataCurrentYear.map(function (dateCurrentYear) {
      var date = dataLastYear.find(function (dateLastYear) {
        var date1 = new Date(dateCurrentYear === null || dateCurrentYear === void 0 ? void 0 : dateCurrentYear.name);
        var date2 = new Date(dateLastYear === null || dateLastYear === void 0 ? void 0 : dateLastYear.name);
        return date1.getMonth() === date2.getMonth();
      });
      if (date) {
        newDataLastYear.push(date);
      } else {
        var date1 = new Date(dateCurrentYear === null || dateCurrentYear === void 0 ? void 0 : dateCurrentYear.name);
        var newDateLastYear = new Date(date1.getFullYear() - 1, date1.getMonth());
        newDataLastYear.push({
          y: 0,
          m3: 0,
          litre: 0,
          name: Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(newDateLastYear, 'yyyy-MM-dd'),
          isDisplayData: false
        });
      }
    });
    var dataCurrentYear = newDataCurrentYear === null || newDataCurrentYear === void 0 ? void 0 : newDataCurrentYear.map(function (entry) {
      return Object.assign(Object.assign({}, entry), {
        type: 'yearConso'
      });
    });
    var categories = newDataCurrentYear === null || newDataCurrentYear === void 0 ? void 0 : newDataCurrentYear.map(function (entry) {
      var date = new Date(entry.name);
      return Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["format"])(date, 'MMM');
    });
    return {
      categories: categories,
      seriesData: [{
        name: "Consommation de l'année précèdente",
        color: '#E9ECEF',
        data: newDataLastYear
      }, {
        name: "Consommation de l'année",
        color: '#49b4f8',
        data: dataCurrentYear
      }]
    };
  };
  var getDataNoEmpty = function getDataNoEmpty(items) {
    var isDataEmpty = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    var isCheckData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
    if ((items === null || items === void 0 ? void 0 : items.length) === 0) {
      return [];
    }
    if (!isCheckData) {
      return items;
    }
    var filterItems = items;
    if (!isDataEmpty) {
      filterItems = items === null || items === void 0 ? void 0 : items.filter(function (item) {
        return (item === null || item === void 0 ? void 0 : item.isDisplayData) === true;
      });
    }
    return filterItems === null || filterItems === void 0 ? void 0 : filterItems.map(function (item) {
      if (!(item === null || item === void 0 ? void 0 : item.isDisplayData)) {
        return Object.assign(Object.assign({}, item), {
          y: null
        });
      }
      return Object.assign(Object.assign({}, item), {
        y: item === null || item === void 0 ? void 0 : item.y
      });
    });
  };
  return {
    getTelemetry: getTelemetry,
    hasDataTelemetry: hasDataTelemetry,
    mutationTelemetry: mutationTelemetry,
    initDataTelemetry: initDataTelemetry,
    initDataCompareMonth: initDataCompareMonth,
    getStartEndDate: getStartEndDate,
    getFormatStartEndDate: getFormatStartEndDate,
    getDataNoEmpty: getDataNoEmpty
  };
}

/***/ }),

/***/ "./assets/js/hooks/useConnectCoach.ts":
/*!********************************************!*\
  !*** ./assets/js/hooks/useConnectCoach.ts ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useConnectCoach; });
/* harmony import */ var ahooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ahooks */ "./node_modules/ahooks/es/index.js");

function useConnectCoach() {
  var _window$tsme_data = window.tsme_data,
    hostSmartCoach = _window$tsme_data.hostSmartCoach,
    smartCoachEnv = _window$tsme_data.smartCoachEnv,
    smartCoachTimestamp = _window$tsme_data.smartCoachTimestamp;
  window._babelPolyfill = false; // set false to avoid error : Uncaught Error: only one instance of babel-polyfill is allowed
  var jsScriptChunk = Object(ahooks__WEBPACK_IMPORTED_MODULE_0__["useExternal"])("".concat(hostSmartCoach, "/").concat(smartCoachEnv, "/").concat(smartCoachTimestamp, "/chunk-vendors.js"), {
    js: {
      async: true
    }
  });
  var jsScriptLatestApp = Object(ahooks__WEBPACK_IMPORTED_MODULE_0__["useExternal"])("".concat(hostSmartCoach, "/").concat(smartCoachEnv, "/").concat(smartCoachTimestamp, "/app.js"), {
    js: {
      async: true
    }
  });
  var cssChunk = Object(ahooks__WEBPACK_IMPORTED_MODULE_0__["useExternal"])("".concat(hostSmartCoach, "/").concat(smartCoachEnv, "/").concat(smartCoachTimestamp, "/chunk-vendors.css"), {
    type: "css"
  });
  var cssLatestApp = Object(ahooks__WEBPACK_IMPORTED_MODULE_0__["useExternal"])("".concat(hostSmartCoach, "/").concat(smartCoachEnv, "/").concat(smartCoachTimestamp, "/app.css"), {
    type: "css"
  });
  return {
    jsScriptChunk: jsScriptChunk,
    jsScriptLatestApp: jsScriptLatestApp,
    cssChunk: cssChunk,
    cssLatestApp: cssLatestApp
  };
}

/***/ }),

/***/ "./assets/js/hooks/useToRedirect.ts":
/*!******************************************!*\
  !*** ./assets/js/hooks/useToRedirect.ts ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useToRedirect; });
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! . */ "./assets/js/hooks/index.ts");


function useToRedirect() {
  var history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_0__["useHistory"])();
  var toRedirect = function toRedirect(to) {
    var isMixedPage = window.tsme_data.isMixedPage;
    var route = Object(___WEBPACK_IMPORTED_MODULE_1__["useGetRoute"])(to);
    var isLinkExternal = route.isLinkExternal,
      isReactRoute = route.isReactRoute,
      pathname = route.pathname;
    if (!isLinkExternal && !isMixedPage && isReactRoute) {
      history.push(pathname);
    } else {
      window.location.href = pathname;
    }
  };
  return {
    toRedirect: toRedirect
  };
}

/***/ }),

/***/ "./assets/js/models/consumptionHistory/index.ts":
/*!******************************************************!*\
  !*** ./assets/js/models/consumptionHistory/index.ts ***!
  \******************************************************/
/*! exports provided: SubscribeAlertFormSchema */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubscribeAlertFormSchema", function() { return SubscribeAlertFormSchema; });
/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! yup */ "./node_modules/yup/es/index.js");
/* harmony import */ var _app_models__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/models */ "./assets/js/models/index.ts");


var SubscribeAlertFormSchema = yup__WEBPACK_IMPORTED_MODULE_0__["object"]().shape({
  gaugeValue: yup__WEBPACK_IMPORTED_MODULE_0__["number"](),
  checkboxSms: yup__WEBPACK_IMPORTED_MODULE_0__["boolean"]().when('checkBoxEmail', {
    is: false,
    then: function then() {
      return Object(_app_models__WEBPACK_IMPORTED_MODULE_1__["checkBoxValidation"])('histoConso.modalesAlert.one_checked_mandatory');
    }
  }),
  checkboxEmail: yup__WEBPACK_IMPORTED_MODULE_0__["boolean"]().when('checkboxSms', {
    is: false,
    then: function then() {
      return Object(_app_models__WEBPACK_IMPORTED_MODULE_1__["checkBoxValidation"])('histoConso.modalesAlert.one_checked_mandatory');
    }
  }),
  smsContact: yup__WEBPACK_IMPORTED_MODULE_0__["string"]().matches(_app_models__WEBPACK_IMPORTED_MODULE_1__["mobileMatch"], 'errors.mobilePhone.invalid').when('checkboxSms', {
    is: true,
    then: function then(schema) {
      return schema.required('histoConso.modalesAlert.mobile_required').matches(_app_models__WEBPACK_IMPORTED_MODULE_1__["mobileMatch"], 'errors.mobilePhone.invalid');
    }
  }),
  emailContact: yup__WEBPACK_IMPORTED_MODULE_0__["string"]().email('histoConso.modalesAlert.email_invalid').when('checkboxEmail', {
    is: true,
    then: function then(schema) {
      return schema.required('histoConso.modalesAlert.email_required').email('histoConso.modalesAlert.email_invalid');
    }
  })
});

/***/ }),

/***/ "./assets/js/pages/consumption-history/AlertBlock.tsx":
/*!************************************************************!*\
  !*** ./assets/js/pages/consumption-history/AlertBlock.tsx ***!
  \************************************************************/
/*! exports provided: AlertModalContext, AlertBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlertModalContext", function() { return AlertModalContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlertBlock", function() { return AlertBlock; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var _img_consumption_history_ConsoUnavailable_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @img/consumption-history/ConsoUnavailable.svg */ "./assets/img/consumption-history/ConsoUnavailable.svg");
/* harmony import */ var _img_consumption_history_alertes_fuite_gray_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @img/consumption-history/alertes-fuite-gray.svg */ "./assets/img/consumption-history/alertes-fuite-gray.svg");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _app_components_CardAlert__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @app/components/CardAlert */ "./assets/js/components/CardAlert/index.tsx");
/* harmony import */ var _PushHorizontalBlock__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./PushHorizontalBlock */ "./assets/js/pages/consumption-history/PushHorizontalBlock.tsx");
/* harmony import */ var react_loading_skeleton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-loading-skeleton */ "./node_modules/react-loading-skeleton/lib/index.js");
/* harmony import */ var react_loading_skeleton__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @app/hooks/useQueryObserver */ "./assets/js/hooks/useQueryObserver.ts");
/* harmony import */ var _hooks_useWaterleakAlert__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./hooks/useWaterleakAlert */ "./assets/js/pages/consumption-history/hooks/useWaterleakAlert.ts");
/* harmony import */ var _app_components_Highchart_AlertGauge__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @app/components/Highchart/AlertGauge */ "./assets/js/components/Highchart/AlertGauge/index.tsx");
/* harmony import */ var _hooks_useConsoAlert__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hooks/useConsoAlert */ "./assets/js/pages/consumption-history/hooks/useConsoAlert.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var _app_pages_consumption_history_index__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @app/pages/consumption-history/index */ "./assets/js/pages/consumption-history/index.tsx");
/* harmony import */ var _app_pages_consumption_history_UnsubscribeAlertModalContent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @app/pages/consumption-history/UnsubscribeAlertModalContent */ "./assets/js/pages/consumption-history/UnsubscribeAlertModalContent.tsx");
/* harmony import */ var _app_pages_consumption_history_alert_block_scss__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @app/pages/consumption-history/alert-block.scss */ "./assets/js/pages/consumption-history/alert-block.scss");
/* harmony import */ var _app_pages_consumption_history_alert_block_scss__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_app_pages_consumption_history_alert_block_scss__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var _AlertForm__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./AlertForm */ "./assets/js/pages/consumption-history/AlertForm.tsx");
/* harmony import */ var _hooks_useAlert__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./hooks/useAlert */ "./assets/js/pages/consumption-history/hooks/useAlert.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }






















var AlertModalContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({
  idPDS: '',
  handleCloseEditModal: function handleCloseEditModal() {},
  emailContactChannel: {
    active: false,
    value: ''
  },
  smsContactChannel: {
    active: false,
    value: ''
  },
  modalContentType: 'subscribe',
  setModalContentType: function setModalContentType() {},
  isWaterLeakSubscribe: false,
  isConsumptionSubscribe: false
});
var AlertBlock = function AlertBlock(_ref) {
  var idPDS = _ref.idPDS,
    className = _ref.className,
    displayAlertCards = _ref.displayAlertCards,
    displayPushBlock = _ref.displayPushBlock,
    hasConsumptionAlert = _ref.hasConsumptionAlert,
    hasWaterleakAlert = _ref.hasWaterleakAlert;
  var _a, _b;
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),
    _useState2 = _slicedToArray(_useState, 2),
    isOpenEditModal = _useState2[0],
    setIsOpenEditModal = _useState2[1];
  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])('subscribe'),
    _useState4 = _slicedToArray(_useState3, 2),
    modalContentType = _useState4[0],
    setModalContentType = _useState4[1];
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_3__["useIsMobile"])();
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_7__["useTranslation"])(),
    t = _useTranslation.t;
  var history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_15__["useHistory"])();
  var _useLocation = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_15__["useLocation"])(),
    pathname = _useLocation.pathname;
  var _useAlert = Object(_hooks_useAlert__WEBPACK_IMPORTED_MODULE_20__["default"])(),
    getPathModal = _useAlert.getPathModal;
  var isAlertPage = pathname.includes(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].MY_ALERTS);
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_app_pages_consumption_history_index__WEBPACK_IMPORTED_MODULE_16__["ConsumptionHistoryContext"]),
    checkIsTR = _useContext.checkIsTR;
  var _useConsoAlert = Object(_hooks_useConsoAlert__WEBPACK_IMPORTED_MODULE_14__["default"])({
      idPDS: idPDS
    }),
    getDataGauge = _useConsoAlert.getDataGauge,
    getColorBadge = _useConsoAlert.getColorBadge,
    getMessageBadge = _useConsoAlert.getMessageBadge;
  var _useQueryObserver = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_11__["default"])("GetMeterAlerts-".concat(idPDS)),
    dataMeterAlert = _useQueryObserver.data,
    isLoadingMeterAlert = _useQueryObserver.isLoading,
    isFetchingMeterAlert = _useQueryObserver.isFetching,
    isSuccessMeterAlert = _useQueryObserver.isSuccess;
  var _useQueryObserver2 = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_11__["default"])("getTelemetryMonthQuery"),
    isLoadingTelemetry = _useQueryObserver2.isLoading;
  var _useQueryObserver3 = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_11__["default"])("GetDataPushHorizontalConsumption"),
    dataPush = _useQueryObserver3.data,
    isLoadingDataPush = _useQueryObserver3.isLoading;
  var _useQueryObserver4 = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_11__["default"])("ContractListQuery"),
    dataPushContractListQuery = _useQueryObserver4.data;
  var _useQueryObserver5 = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_11__["default"])("getMeterListQuery"),
    isSuccessMeterListQuery = _useQueryObserver5.isSuccess;
  var contracts = (dataPushContractListQuery === null || dataPushContractListQuery === void 0 ? void 0 : dataPushContractListQuery.data) || [];
  var _ref2 = contracts[0] || {},
    fullRefFormat = _ref2.fullRefFormat;
  var content = ((_a = dataMeterAlert === null || dataMeterAlert === void 0 ? void 0 : dataMeterAlert.data) === null || _a === void 0 ? void 0 : _a.content.length) > 0 ? (_b = dataMeterAlert === null || dataMeterAlert === void 0 ? void 0 : dataMeterAlert.data) === null || _b === void 0 ? void 0 : _b.content[0] : [];
  var dataWaterleakAlert = (content === null || content === void 0 ? void 0 : content.waterLeakAlert) || {};
  var _ref3 = dataWaterleakAlert || {},
    subscriptionStatus = _ref3.subscriptionStatus;
  var _ref4 = content || {},
    emailContactChannel = _ref4.emailContactChannel;
  var _ref5 = content || {},
    smsContactChannel = _ref5.smsContactChannel;
  var _getDataGauge = getDataGauge(),
    conso = _getDataGauge.conso,
    consoMax = _getDataGauge.consoMax,
    threshold = _getDataGauge.threshold,
    isDisplayGauge = _getDataGauge.isDisplay,
    typeDisplayGauge = _getDataGauge.typeDisplay,
    typeAlertConso = _getDataGauge.typeAlert;
  var handleCloseEditModal = function handleCloseEditModal() {
    setIsOpenEditModal(false);
    var routeTR = pathname.includes(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].MY_ALERTS) ? Object(react_router_dom__WEBPACK_IMPORTED_MODULE_15__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].MY_ALERTS) : Object(react_router_dom__WEBPACK_IMPORTED_MODULE_15__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].ACCOUNT_CONSUMPTION_TR);
    var routeHistory = checkIsTR ? routeTR : _app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].ACCOUNT_CONSUMPTION;
    history.push(routeHistory);
  };
  var waterleakAlertProps = Object(_hooks_useWaterleakAlert__WEBPACK_IMPORTED_MODULE_12__["default"])({
    dataWaterleakAlert: dataWaterleakAlert,
    setIsOpenEditModal: setIsOpenEditModal,
    setModalContentType: setModalContentType
  });
  var enabledConso = typeDisplayGauge !== _app_constants__WEBPACK_IMPORTED_MODULE_2__["ALERTS_CONSO"].NO_SUBSCRIBED;
  var isConsumptionSubscribe = typeAlertConso === _app_constants__WEBPACK_IMPORTED_MODULE_2__["METER_ALERTS_STATUS"].ELIGIBLE;
  var isWaterLeakSubscribe = subscriptionStatus === _app_constants__WEBPACK_IMPORTED_MODULE_2__["METER_ALERTS_STATUS"].ELIGIBLE;
  var handleConsumptionAlertBtnClick = function handleConsumptionAlertBtnClick() {
    setModalContentType('parameter');
    setIsOpenEditModal(true);
    var _getPathModal = getPathModal('parametrer'),
      pathModalConso = _getPathModal.pathModalConso;
    history.push(pathModalConso);
  };
  var handleConsumptionAlertEditClick = function handleConsumptionAlertEditClick() {
    setModalContentType('update');
    setIsOpenEditModal(true);
    var _getPathModal2 = getPathModal('modifier'),
      pathModalConso = _getPathModal2.pathModalConso;
    history.push(pathModalConso);
  };
  var handleConsumptionAlertParameterClick = function handleConsumptionAlertParameterClick() {
    setModalContentType('parameter');
    setIsOpenEditModal(true);
    var _getPathModal3 = getPathModal('parametrer'),
      pathModalConso = _getPathModal3.pathModalConso;
    history.push(pathModalConso);
  };
  var getMessageConso = function getMessageConso(type) {
    var typesMessages = {
      description: {
        SUBSCRIBED: '',
        ELIGIBLE: t('histoConso.cardAlert.threshold.description_inactive'),
        NO_DATA_SUB: t('histoConso.cardAlert.threshold.description_inactive'),
        NO_DATA_ELIGIBLE: t('histoConso.cardAlert.threshold.description_inactive')
      },
      errorDescription: {
        SUBSCRIBED: '',
        ELIGIBLE: '',
        NO_DATA_SUB: t('histoConso.cardAlert.threshold.description_unavailable'),
        NO_DATA_ELIGIBLE: ''
      },
      ctaLabel: {
        SUBSCRIBED: t('histoConso.cardAlert.threshold.cta'),
        ELIGIBLE: '',
        NO_DATA_SUB: '',
        NO_DATA_ELIGIBLE: ''
      },
      btnLabel: {
        SUBSCRIBED: '',
        ELIGIBLE: t('histoConso.cardAlert.btn'),
        NO_DATA_SUB: '',
        NO_DATA_ELIGIBLE: t('histoConso.cardAlert.btn')
      }
    };
    var _typesMessages$type = typesMessages[type],
      SUBSCRIBED = _typesMessages$type.SUBSCRIBED,
      ELIGIBLE = _typesMessages$type.ELIGIBLE,
      NO_DATA_SUB = _typesMessages$type.NO_DATA_SUB,
      NO_DATA_ELIGIBLE = _typesMessages$type.NO_DATA_ELIGIBLE;
    switch (typeAlertConso) {
      case _app_constants__WEBPACK_IMPORTED_MODULE_2__["METER_ALERTS_STATUS"].NON_ELIGIBLE:
        if (typeDisplayGauge === _app_constants__WEBPACK_IMPORTED_MODULE_2__["ALERTS_CONSO"].NO_DATA) {
          return NO_DATA_SUB;
        }
      case _app_constants__WEBPACK_IMPORTED_MODULE_2__["METER_ALERTS_STATUS"].ELIGIBLE:
        if (typeDisplayGauge === _app_constants__WEBPACK_IMPORTED_MODULE_2__["ALERTS_CONSO"].NO_DATA) {
          return NO_DATA_ELIGIBLE;
        }
        return ELIGIBLE;
      case _app_constants__WEBPACK_IMPORTED_MODULE_2__["METER_ALERTS_STATUS"].SUBSCRIBED:
        if (typeDisplayGauge === _app_constants__WEBPACK_IMPORTED_MODULE_2__["ALERTS_CONSO"].NO_DATA) {
          return NO_DATA_SUB;
        }
        return SUBSCRIBED;
    }
  };
  var CardDisplayNoData = function CardDisplayNoData(_ref6) {
    var typeCard = _ref6.typeCard;
    var srcImg = {
      ALERTCONSO: _img_consumption_history_ConsoUnavailable_svg__WEBPACK_IMPORTED_MODULE_5__["default"],
      ALERTWATERLEAK: _img_consumption_history_alertes_fuite_gray_svg__WEBPACK_IMPORTED_MODULE_6__["default"]
    };
    var titlesCard = {
      ALERTCONSO: t('histoConso.cardAlert.threshold.title'),
      ALERTWATERLEAK: t('histoConso.cardAlert.waterleak.title')
    };
    var datasCy = {
      ALERTCONSO: 'conso-alert-card',
      ALERTWATERLEAK: 'waterleak-alert-card-active-no-data'
    };
    var descriptionsCard = {
      ALERTCONSO: t('histoConso.cardAlert.threshold.description_inactive'),
      ALERTWATERLEAK: t('histoConso.cardAlert.waterleak.description_inactive')
    };
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('mr-lg-4 mb-3 mb-lg-0', {
        'w-50': !isMobile
      })
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_CardAlert__WEBPACK_IMPORTED_MODULE_8__["default"], {
      dataCy: datasCy[typeCard],
      className: Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('h-100', {
        consoAlertDisabled: !enabledConso
      }),
      title: titlesCard[typeCard],
      description: descriptionsCard[typeCard],
      errorDescription: t('histoConso.cardAlert.threshold.description_unavailable')
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: "container-alert-img"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
      src: srcImg[typeCard],
      alt: "",
      className: ""
    }))));
  };
  var defaultClassName = Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('alert-block row no-gutters d-flex mb-4 mb-lg-6 position-relative', className);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: defaultClassName,
    "data-cy": "container-alert-block"
  }, displayAlertCards && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "alert-cards-container d-flex flex-column flex-lg-row col-12 col-lg-8"
  }, hasConsumptionAlert ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('mr-lg-4 mb-3 mb-lg-0', {
      'w-50': !isMobile
    })
  }, isLoadingTelemetry || isLoadingMeterAlert || isFetchingMeterAlert ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_10___default.a, {
    width: "100%",
    height: "387px"
  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_CardAlert__WEBPACK_IMPORTED_MODULE_8__["default"], {
    dataCy: "conso-alert-card",
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('h-100', {
      consoAlertDisabled: !enabledConso
    }),
    title: t('histoConso.cardAlert.threshold.title'),
    description: getMessageConso('description'),
    errorDescription: getMessageConso('errorDescription'),
    isEditable: isDisplayGauge && enabledConso,
    editBtnId: "edit-conso-alert",
    btnId: "subscribe-conso-alert",
    ctaLabel: getMessageConso('ctaLabel'),
    btnLabel: getMessageConso('btnLabel'),
    badgeColor: getColorBadge(),
    badgeLabel: getMessageBadge(enabledConso),
    onClickEdit: handleConsumptionAlertEditClick,
    onClickBtn: handleConsumptionAlertBtnClick,
    onClickCta: handleConsumptionAlertParameterClick
  }, isDisplayGauge ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Highchart_AlertGauge__WEBPACK_IMPORTED_MODULE_13__["default"], {
    imageId: "alert-img",
    currentConso: conso,
    consoMax: consoMax,
    seuil: threshold,
    inactive: !enabledConso
  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "container-alert-img"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    src: _img_consumption_history_ConsoUnavailable_svg__WEBPACK_IMPORTED_MODULE_5__["default"],
    alt: "",
    className: ""
  })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CardDisplayNoData, {
    typeCard: "ALERTCONSO"
  }), hasWaterleakAlert && waterleakAlertProps ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_4__["default"])('mr-lg-4 mb-3 mb-lg-0', {
      'w-50': !isMobile
    })
  }, isLoadingTelemetry || isLoadingMeterAlert || isFetchingMeterAlert ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_10___default.a, {
    width: "100%",
    height: "387px"
  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_CardAlert__WEBPACK_IMPORTED_MODULE_8__["default"], Object.assign({}, waterleakAlertProps, {
    title: t('histoConso.cardAlert.waterleak.title'),
    className: "h-100"
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "container-alert-img"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img", {
    src: waterleakAlertProps === null || waterleakAlertProps === void 0 ? void 0 : waterleakAlertProps.imgSrc,
    alt: "",
    className: "mt-2"
  })))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(CardDisplayNoData, {
    typeCard: "ALERTWATERLEAK"
  })), isAlertPage && isSuccessMeterListQuery && isSuccessMeterAlert && !displayAlertCards && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzCard"], {
    className: "col-12 my-5 px-0 px-md-4 bg-white align-items-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "d-flex flex-column flex-lg-row "
  }, t('histoConso.cardAlert.noData', {
    reference: fullRefFormat
  }))), displayPushBlock && (isLoadingDataPush ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "d-flex flex-column col-12 col-lg-4 px-0 pl-lg-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_10___default.a, {
    className: "d-flex mb-3 mb-lg-4",
    height: 150
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_10___default.a, {
    className: "d-flex",
    height: 150
  })) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PushHorizontalBlock__WEBPACK_IMPORTED_MODULE_9__["PushHorizontalBlock"], {
    dataPush: dataPush,
    displayAlertCards: displayAlertCards
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AlertModalContext.Provider, {
    value: {
      idPDS: idPDS !== null && idPDS !== void 0 ? idPDS : '',
      handleCloseEditModal: handleCloseEditModal,
      emailContactChannel: emailContactChannel !== null && emailContactChannel !== void 0 ? emailContactChannel : '',
      smsContactChannel: smsContactChannel !== null && smsContactChannel !== void 0 ? smsContactChannel : '',
      modalContentType: modalContentType,
      setModalContentType: setModalContentType,
      isWaterLeakSubscribe: isWaterLeakSubscribe,
      isConsumptionSubscribe: isConsumptionSubscribe
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzModal"], {
    show: isOpenEditModal,
    handleClose: handleCloseEditModal,
    size: "lg",
    backdrop: true,
    centered: true,
    scrollable: true,
    border: "smooth",
    fullscreen: "md",
    title: "",
    id: "modal-alert-".concat(modalContentType)
  }, isOpenEditModal ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AlertForm__WEBPACK_IMPORTED_MODULE_19__["AlertForm"], null), modalContentType === 'unsubscribe' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_pages_consumption_history_UnsubscribeAlertModalContent__WEBPACK_IMPORTED_MODULE_17__["UnsubscribeAlertModalContent"], null)) : null)));
};

/***/ }),

/***/ "./assets/js/pages/consumption-history/AlertForm.tsx":
/*!***********************************************************!*\
  !*** ./assets/js/pages/consumption-history/AlertForm.tsx ***!
  \***********************************************************/
/*! exports provided: AlertForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlertForm", function() { return AlertForm; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! formik */ "./node_modules/formik/dist/formik.esm.js");
/* harmony import */ var _SubscribeEditAlertModalContent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SubscribeEditAlertModalContent */ "./assets/js/pages/consumption-history/SubscribeEditAlertModalContent.tsx");
/* harmony import */ var _ConsumptionAlertModalContent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConsumptionAlertModalContent */ "./assets/js/pages/consumption-history/ConsumptionAlertModalContent.tsx");
/* harmony import */ var _app_models_consumptionHistory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @app/models/consumptionHistory */ "./assets/js/models/consumptionHistory/index.ts");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _AlertBlock__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AlertBlock */ "./assets/js/pages/consumption-history/AlertBlock.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var _app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @app/hooks/useQueryObserver */ "./assets/js/hooks/useQueryObserver.ts");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @app/services/AxiosInstance */ "./assets/js/services/AxiosInstance.jsx");
/* harmony import */ var _ValidationErrorModalContent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ValidationErrorModalContent */ "./assets/js/pages/consumption-history/ValidationErrorModalContent.tsx");
/* harmony import */ var _hooks_useConsoAlert__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./hooks/useConsoAlert */ "./assets/js/pages/consumption-history/hooks/useConsoAlert.ts");
/* harmony import */ var _hooks_useAlert__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./hooks/useAlert */ "./assets/js/pages/consumption-history/hooks/useAlert.ts");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = "function" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || "@@iterator", asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator", toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, ""); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: "normal", arg: fn.call(obj, arg) }; } catch (err) { return { type: "throw", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { ["next", "throw", "return"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if ("throw" !== record.type) { var result = record.arg, value = result.value; return value && "object" == _typeof(value) && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke("next", value, resolve, reject); }, function (err) { invoke("throw", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke("throw", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, "_invoke", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = "suspendedStart"; return function (method, arg) { if ("executing" === state) throw new Error("Generator is already running"); if ("completed" === state) { if ("throw" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) { if ("suspendedStart" === state) throw state = "completed", context.arg; context.dispatchException(context.arg); } else "return" === context.method && context.abrupt("return", context.arg); state = "executing"; var record = tryCatch(innerFn, self, context); if ("normal" === record.type) { if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, "throw" === methodName && delegate.iterator["return"] && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method) || "return" !== methodName && (context.method = "throw", context.arg = new TypeError("The iterator does not provide a '" + methodName + "' method")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = "normal", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: "root" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if ("function" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) { var ctor = "function" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, "toString", function () { return "[object Generator]"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if ("throw" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if ("root" === entry.tryLoc) return handle("end"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, "catchLoc"), hasFinally = hasOwn.call(entry, "finallyLoc"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error("try statement without catch or finally"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if ("throw" === record.type) throw record.arg; return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, "catch": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if ("throw" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, "next" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __rest = undefined && undefined.__rest || function (s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
  }
  return t;
};















var AlertForm = function AlertForm() {
  var _a, _b, _c, _d;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_5__["useTranslation"])(),
    t = _useTranslation.t;
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_AlertBlock__WEBPACK_IMPORTED_MODULE_6__["AlertModalContext"]),
    handleCloseEditModal = _useContext.handleCloseEditModal,
    idPDS = _useContext.idPDS,
    emailContactChannel = _useContext.emailContactChannel,
    smsContactChannel = _useContext.smsContactChannel,
    modalContentType = _useContext.modalContentType,
    setModalContentType = _useContext.setModalContentType,
    isConsumptionSubscribe = _useContext.isConsumptionSubscribe,
    isWaterLeakSubscribe = _useContext.isWaterLeakSubscribe;
  var _useQueryObserver = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_8__["default"])("GetMeterAlerts-".concat(idPDS)),
    refetch = _useQueryObserver.refetch;
  var history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_7__["useHistory"])();
  var _useLocation = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_7__["useLocation"])(),
    state = _useLocation.state,
    pathname = _useLocation.pathname;
  var _useAlert = Object(_hooks_useAlert__WEBPACK_IMPORTED_MODULE_14__["default"])(),
    getPathModal = _useAlert.getPathModal,
    isPathConso = _useAlert.isPathConso;
  var isConsumption = isPathConso();
  var _useConsoAlert = Object(_hooks_useConsoAlert__WEBPACK_IMPORTED_MODULE_13__["default"])({
      idPDS: idPDS
    }),
    getDataGaugeEdit = _useConsoAlert.getDataGaugeEdit;
  var _getDataGaugeEdit = getDataGaugeEdit(),
    threshold = _getDataGaugeEdit.threshold;
  var isGaugeParameterModal = modalContentType === 'parameter';
  var _e = Object(react_query__WEBPACK_IMPORTED_MODULE_10__["useMutation"])(function (params) {
      return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var formattedData;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              formattedData = Object.assign({}, params);
              return _context.abrupt("return", _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_11__["default"].post(_app_constants__WEBPACK_IMPORTED_MODULE_9__["API"].CONSUMPTION.METER_ALERTS, formattedData, {
                headers: {
                  post: {
                    'Content-Type': _app_constants__WEBPACK_IMPORTED_MODULE_9__["CONTENT_TYPE_JSON"]
                  }
                }
              }));
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
    }, {
      onSuccess: function onSuccess() {
        refetch();
        var getModalContentType = isGaugeParameterModal ? 'parametrer' : 'modifier';
        var _getPathModal = getPathModal(getModalContentType, 'succes'),
          pathModalConso = _getPathModal.pathModalConso,
          pathModalWaterLeak = _getPathModal.pathModalWaterLeak;
        if (isConsumptionSubscribe && isConsumption || isWaterLeakSubscribe && !isConsumption) {
          handleCloseEditModal();
          var path = pathname.includes(_app_constants__WEBPACK_IMPORTED_MODULE_9__["ROUTES"].MY_ALERTS) ? Object(react_router_dom__WEBPACK_IMPORTED_MODULE_7__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_9__["ROUTES"].MY_ALERTS) : Object(react_router_dom__WEBPACK_IMPORTED_MODULE_7__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_9__["ROUTES"].ACCOUNT_CONSUMPTION_TR);
          history.push(path);
        } else {
          history.push(isConsumption ? pathModalConso : pathModalWaterLeak);
        }
      },
      onError: function onError() {
        var variant = isGaugeParameterModal ? 'parametrer' : isConsumptionSubscribe || isWaterLeakSubscribe ? 'activer' : 'modifier';
        var _getPathModal2 = getPathModal(variant, 'erreur'),
          pathModalConso = _getPathModal2.pathModalConso,
          pathModalWaterLeak = _getPathModal2.pathModalWaterLeak;
        history.push(isConsumption ? pathModalConso : pathModalWaterLeak);
      }
    }),
    isError = _e.isError,
    error = _e.error,
    reset = _e.reset,
    isLoading = _e.isLoading,
    isSuccess = _e.isSuccess,
    postMeterAlerts = __rest(_e, ["isError", "error", "reset", "isLoading", "isSuccess"]);
  var subscribeInitialValues = {
    checkboxSms: (_a = smsContactChannel === null || smsContactChannel === void 0 ? void 0 : smsContactChannel.active) !== null && _a !== void 0 ? _a : false,
    smsContact: (_b = smsContactChannel === null || smsContactChannel === void 0 ? void 0 : smsContactChannel.value) !== null && _b !== void 0 ? _b : '',
    checkboxEmail: (_c = emailContactChannel === null || emailContactChannel === void 0 ? void 0 : emailContactChannel.active) !== null && _c !== void 0 ? _c : false,
    emailContact: (_d = emailContactChannel === null || emailContactChannel === void 0 ? void 0 : emailContactChannel.value) !== null && _d !== void 0 ? _d : ''
  };
  var consumptionAlertInitialValues = Object.assign(Object.assign({}, subscribeInitialValues), {
    gaugeValue: threshold
  });
  var onSubmit = function onSubmit(values) {
    var baseValues = {
      meterNumber: idPDS,
      emailContactChannel: {
        active: values.checkboxEmail,
        value: values.checkboxEmail ? values.emailContact : ''
      },
      smsContactChannel: {
        active: values.checkboxSms,
        value: values.checkboxSms ? values.smsContact : ''
      }
    };
    var getAlertValues = function getAlertValues(isConsumptionAlert, gaugeValue) {
      return isConsumptionAlert ? {
        consumptionAlert: {
          active: true,
          threshold: gaugeValue
        }
      } : {
        waterLeakAlert: {
          active: true
        }
      };
    };
    if (isGaugeParameterModal) {
      if (isConsumptionSubscribe) {
        setModalContentType('subscribe');
        var _getPathModal3 = getPathModal('activer'),
          pathModalConso = _getPathModal3.pathModalConso;
        history.push({
          pathname: pathModalConso
        }, {
          gaugeValue: values.gaugeValue
        });
      } else {
        var formattedEditValues = Object.assign(Object.assign({}, baseValues), {
          consumptionAlert: {
            active: true,
            threshold: values.gaugeValue
          },
          emailContactChannel: {
            active: subscribeInitialValues.checkboxEmail,
            value: subscribeInitialValues.checkboxEmail ? subscribeInitialValues.emailContact : ''
          },
          smsContactChannel: {
            active: subscribeInitialValues.checkboxSms,
            value: subscribeInitialValues.checkboxSms ? subscribeInitialValues.smsContact : ''
          }
        });
        postMeterAlerts.mutate(formattedEditValues);
      }
    } else if (modalContentType === 'subscribe' || modalContentType === 'update') {
      var isConsumptionAlert = modalContentType === 'subscribe' ? isConsumption && isConsumptionSubscribe : isConsumption;
      var formattedValues = Object.assign(Object.assign({}, baseValues), getAlertValues(isConsumptionAlert, modalContentType === 'subscribe' ? (state === null || state === void 0 ? void 0 : state.gaugeValue) || 0 : threshold));
      postMeterAlerts.mutate(formattedValues);
    }
  };
  var displayValidationErrorModal = location.pathname.includes('/succes');
  if (isError) {
    var _getPathModal4 = getPathModal('parametrer', 'erreur'),
      pathModalConso = _getPathModal4.pathModalConso;
    var isConsumptionEditError = pathname.includes(pathModalConso);
    var alertFormErrorDescription = isConsumptionSubscribe || isWaterLeakSubscribe ? t('histoConso.modalesAlert.error_subscribe') : isConsumptionEditError ? t('histoConso.modalesAlert.threshold.update_threshold_error') : t('histoConso.modalesAlert.error_edit');
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ValidationErrorModalContent__WEBPACK_IMPORTED_MODULE_12__["ValidationErrorModalContent"], {
      title: t('histoConso.modalesAlert.error_technical'),
      description: alertFormErrorDescription,
      btnLabel: t('errors.tryAgain'),
      handleCloseModal: handleCloseEditModal
    });
  }
  if (isSuccess && displayValidationErrorModal) {
    var _getPathModal5 = getPathModal('parametrer', 'succes'),
      _pathModalConso = _getPathModal5.pathModalConso;
    var isConsumptionEditSuccess = pathname.includes(_pathModalConso);
    var alertFormValidTitle = isConsumptionEditSuccess ? t('histoConso.modalesAlert.threshold.title_gauge') : t('histoConso.modalesAlert.waterleak.title_edit');
    var descriptionKey = isConsumptionEditSuccess ? 'histoConso.modalesAlert.threshold.update_threshold_valid' : 'histoConso.modalesAlert.update_coordinates_valid';
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ValidationErrorModalContent__WEBPACK_IMPORTED_MODULE_12__["ValidationErrorModalContent"], {
      success: true,
      title: alertFormValidTitle,
      description: t(descriptionKey),
      btnLabel: t('close'),
      handleCloseModal: handleCloseEditModal
    });
  }
  var getInitialValues = function getInitialValues() {
    if (isGaugeParameterModal) {
      return {
        gaugeValue: threshold
      };
    } else if (isConsumptionSubscribe) {
      return consumptionAlertInitialValues;
    } else {
      return subscribeInitialValues;
    }
  };
  if (modalContentType === 'parameter' || modalContentType === 'subscribe' || modalContentType === 'update') {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_1__["Formik"], {
      initialValues: getInitialValues(),
      validationSchema: _app_models_consumptionHistory__WEBPACK_IMPORTED_MODULE_4__["SubscribeAlertFormSchema"],
      onSubmit: onSubmit,
      enableReinitialize: true
    }, function (_ref) {
      var handleSubmit = _ref.handleSubmit;
      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("form", {
        onSubmit: handleSubmit,
        "data-cy": "".concat(isConsumptionSubscribe && isConsumption || isWaterLeakSubscribe && !isConsumption ? 'subscribe' : 'edit', "-form")
      }, isGaugeParameterModal && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ConsumptionAlertModalContent__WEBPACK_IMPORTED_MODULE_3__["ConsumptionAlertModalContent"], {
        isSubscribe: isConsumptionSubscribe,
        isLoading: isLoading
      }), (modalContentType === 'subscribe' || modalContentType === 'update') && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_SubscribeEditAlertModalContent__WEBPACK_IMPORTED_MODULE_2__["SubscribeEditAlertModalContent"], {
        isLoading: isLoading
      }));
    });
  }
  return null;
};

/***/ }),

/***/ "./assets/js/pages/consumption-history/ConnectCoach.tsx":
/*!**************************************************************!*\
  !*** ./assets/js/pages/consumption-history/ConnectCoach.tsx ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ConnectCoach; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_components_Container__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/components/Container */ "./assets/js/components/Container/index.tsx");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var _app_components_background_BackgroundEllipse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/components/background/BackgroundEllipse */ "./assets/js/components/background/BackgroundEllipse/index.jsx");
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var _app_hooks_useConnectCoach__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @app/hooks/useConnectCoach */ "./assets/js/hooks/useConnectCoach.ts");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _img_consumption_history_back_histoconso_png__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @img/consumption-history/back-histoconso.png */ "./assets/img/consumption-history/back-histoconso.png");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");










function ConnectCoach(_ref) {
  var jwtToken = _ref.jwtToken,
    useCommunityHotWater = _ref.useCommunityHotWater,
    peopleCount = _ref.peopleCount,
    price = _ref.price,
    housingType = _ref.housingType;
  Object(_app_hooks_useConnectCoach__WEBPACK_IMPORTED_MODULE_5__["default"])();
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_4__["useIsMobile"])();
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_8__["useTranslation"])(),
    t = _useTranslation.t;
  var _useLocation = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_9__["useLocation"])(),
    pathname = _useLocation.pathname;
  var isAlertPage = pathname.includes(_app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].MY_ALERTS);
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Container__WEBPACK_IMPORTED_MODULE_1__["default"], {
    fullscreen: true,
    className: "p-0",
    tag: "main"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_background_BackgroundEllipse__WEBPACK_IMPORTED_MODULE_3__["default"], {
    ellipseImg: _img_consumption_history_back_histoconso_png__WEBPACK_IMPORTED_MODULE_7__["default"],
    zIndex: true,
    tag: "div"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    "data-cy": "container-histo-conso"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "pt-5 pt-md-3 pt-lg-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 mt-5 "
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_6__["SzTypographie"], {
    variant: "H1",
    size: isMobile ? 'L' : 'XL',
    color: "light",
    className: "text-uppercase",
    weight: "black"
  }, t('histoConso.title', {
    context: isAlertPage ? 'alert' : 'histoconso'
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "d-flex pt-4 flex-column flex-lg-row align-items-lg-start justify-content-lg-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "smartcoach-app",
    "data-authentication-token": jwtToken,
    "data-collective-hot-water": useCommunityHotWater,
    "data-people": peopleCount,
    "data-water-price": price,
    "data-outside-use": housingType,
    "data-alerts-url": _app_constants__WEBPACK_IMPORTED_MODULE_2__["ROUTES"].MY_ALERTS
  })))));
}

/***/ }),

/***/ "./assets/js/pages/consumption-history/ConsumptionAlertModalContent.tsx":
/*!******************************************************************************!*\
  !*** ./assets/js/pages/consumption-history/ConsumptionAlertModalContent.tsx ***!
  \******************************************************************************/
/*! exports provided: ConsumptionAlertModalContent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConsumptionAlertModalContent", function() { return ConsumptionAlertModalContent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _app_components_FormButtons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/components/FormButtons */ "./assets/js/components/FormButtons/index.tsx");
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! formik */ "./node_modules/formik/dist/formik.esm.js");
/* harmony import */ var _AlertBlock__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AlertBlock */ "./assets/js/pages/consumption-history/AlertBlock.tsx");
/* harmony import */ var _hooks_useConsoAlert__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hooks/useConsoAlert */ "./assets/js/pages/consumption-history/hooks/useConsoAlert.ts");
/* harmony import */ var _app_components_Highchart_AlertGauge__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @app/components/Highchart/AlertGauge */ "./assets/js/components/Highchart/AlertGauge/index.tsx");








var ConsumptionAlertModalContent = function ConsumptionAlertModalContent(_ref) {
  var isSubscribe = _ref.isSubscribe,
    isLoading = _ref.isLoading;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_2__["useTranslation"])(),
    t = _useTranslation.t;
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_AlertBlock__WEBPACK_IMPORTED_MODULE_5__["AlertModalContext"]),
    handleCloseEditModal = _useContext.handleCloseEditModal,
    idPDS = _useContext.idPDS;
  var _useConsoAlert = Object(_hooks_useConsoAlert__WEBPACK_IMPORTED_MODULE_6__["default"])({
      idPDS: idPDS
    }),
    getDataGaugeEdit = _useConsoAlert.getDataGaugeEdit;
  var _ref2 = getDataGaugeEdit() || {},
    conso = _ref2.conso,
    consoMax = _ref2.consoMax;
  var _useFormikContext = Object(formik__WEBPACK_IMPORTED_MODULE_4__["useFormikContext"])(),
    values = _useFormikContext.values,
    setFieldValue = _useFormikContext.setFieldValue;
  var onChangeValue = function onChangeValue(value) {
    setFieldValue('gaugeValue', value, true);
  };
  var previousButton = {
    label: t('cancel'),
    align: 'left',
    enabled: true,
    onClick: handleCloseEditModal
  };
  var nextButton = {
    label: t(isSubscribe ? 'next' : 'save'),
    align: 'right',
    loader: isLoading
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "H3",
    size: "L",
    weight: "medium",
    className: "mb-4"
  }, t('histoConso.modalesAlert.threshold.title_gauge')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "bg-gray-200 rounded-3 p-3 p-lg-4 d-flex flex-column align-items-center justify-content-center mb-4 mb-lg-5"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Highchart_AlertGauge__WEBPACK_IMPORTED_MODULE_7__["default"], {
    imageId: "alert-edit-img",
    currentConso: conso,
    consoMax: consoMax,
    seuil: values.gaugeValue,
    editable: true,
    onChange: onChangeValue
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 text-center p-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "body",
    size: "XL",
    weight: "regular",
    className: "mb-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__["Trans"], {
    i18nKey: 'histoConso.modalesAlert.threshold.description',
    context: isSubscribe ? 'subscribe' : 'edit',
    components: {
      bold: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
        variant: "body",
        size: "XL",
        weight: "bold",
        className: "mb-0",
        tag: "span"
      })
    }
  })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_FormButtons__WEBPACK_IMPORTED_MODULE_3__["default"], {
    previous: previousButton,
    next: nextButton
  }));
};

/***/ }),

/***/ "./assets/js/pages/consumption-history/PushHorizontalBlock.tsx":
/*!*********************************************************************!*\
  !*** ./assets/js/pages/consumption-history/PushHorizontalBlock.tsx ***!
  \*********************************************************************/
/*! exports provided: PushHorizontalBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PushHorizontalBlock", function() { return PushHorizontalBlock; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var _app_ez_components_PushItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/ez-components/PushItem */ "./assets/js/ez-components/PushItem/index.tsx");




var PushHorizontalBlock = function PushHorizontalBlock(_ref) {
  var displayAlertCards = _ref.displayAlertCards,
    dataPush = _ref.dataPush;
  var _a, _b;
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_1__["useIsMobile"])();
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: Object(clsx__WEBPACK_IMPORTED_MODULE_2__["default"])('data-push-container d-flex flex-column col-12 ', {
      'col-lg-4': displayAlertCards,
      'flex-lg-row col-12': !displayAlertCards
    })
  }, (_b = (_a = dataPush === null || dataPush === void 0 ? void 0 : dataPush.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.dataPush.map(function (item, index) {
    var pushItemClasses = Object(clsx__WEBPACK_IMPORTED_MODULE_2__["default"])('d-flex bg-white rounded-3 cursor-pointer overflow-hidden', {
      'mb-3 mb-lg-4': displayAlertCards,
      'w-50 ': !displayAlertCards && !isMobile,
      'w-100': !displayAlertCards && isMobile,
      'mb-3': isMobile,
      'mr-4': !displayAlertCards && !isMobile && index === 0
    });
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_ez_components_PushItem__WEBPACK_IMPORTED_MODULE_3__["PushItem"], {
      data: item,
      key: index,
      style: pushItemClasses
    });
  }));
};

/***/ }),

/***/ "./assets/js/pages/consumption-history/SubscribeEditAlertModalContent.tsx":
/*!********************************************************************************!*\
  !*** ./assets/js/pages/consumption-history/SubscribeEditAlertModalContent.tsx ***!
  \********************************************************************************/
/*! exports provided: SubscribeEditAlertModalContent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubscribeEditAlertModalContent", function() { return SubscribeEditAlertModalContent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _app_components_Links_Link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/components/Links/Link */ "./assets/js/components/Links/Link.jsx");
/* harmony import */ var _app_components_FormButtons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @app/components/FormButtons */ "./assets/js/components/FormButtons/index.tsx");
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! formik */ "./node_modules/formik/dist/formik.esm.js");
/* harmony import */ var _app_form_FormError__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @app/form/FormError */ "./assets/js/form/FormError.tsx");
/* harmony import */ var _AlertBlock__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./AlertBlock */ "./assets/js/pages/consumption-history/AlertBlock.tsx");
/* harmony import */ var _hooks_useAlert__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./hooks/useAlert */ "./assets/js/pages/consumption-history/hooks/useAlert.ts");









var SubscribeEditAlertModalContent = function SubscribeEditAlertModalContent(_ref) {
  var isLoading = _ref.isLoading;
  var _a, _b, _c;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_2__["useTranslation"])(),
    t = _useTranslation.t;
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_AlertBlock__WEBPACK_IMPORTED_MODULE_7__["AlertModalContext"]),
    handleCloseEditModal = _useContext.handleCloseEditModal,
    setModalContentType = _useContext.setModalContentType,
    isWaterLeakSubscribe = _useContext.isWaterLeakSubscribe,
    isConsumptionSubscribe = _useContext.isConsumptionSubscribe;
  var _useAlert = Object(_hooks_useAlert__WEBPACK_IMPORTED_MODULE_8__["default"])(),
    isPathConso = _useAlert.isPathConso,
    getPathModal = _useAlert.getPathModal;
  var isConsumption = isPathConso();
  var _ref2 = (_c = (_b = (_a = window.tsme_data) === null || _a === void 0 ? void 0 : _a.footer) === null || _b === void 0 ? void 0 : _b.links_bottom) === null || _c === void 0 ? void 0 : _c.privacy_policy,
    link = _ref2.link;
  var _useFormikContext = Object(formik__WEBPACK_IMPORTED_MODULE_5__["useFormikContext"])(),
    values = _useFormikContext.values,
    isValid = _useFormikContext.isValid,
    touched = _useFormikContext.touched,
    handleChange = _useFormikContext.handleChange,
    errors = _useFormikContext.errors,
    handleBlur = _useFormikContext.handleBlur;
  var previousButton = {
    label: t('cancel'),
    align: 'left',
    enabled: true,
    onClick: handleCloseEditModal
  };
  var getNextButtonText = function getNextButtonText() {
    if (isConsumptionSubscribe && isConsumption) {
      return t('histoConso.modalesAlert.threshold.validate');
    }
    if (isWaterLeakSubscribe && !isConsumption) {
      return t('histoConso.modalesAlert.waterleak.validate');
    }
    return t('save');
  };
  var nextButton = {
    label: getNextButtonText(),
    align: 'right',
    disabled: !isValid,
    loader: isLoading
  };
  var _getPathModal = getPathModal('desactiver'),
    pathModalConso = _getPathModal.pathModalConso,
    pathModalWaterLeak = _getPathModal.pathModalWaterLeak;
  var unSubscribeUrl = isConsumption ? pathModalConso : pathModalWaterLeak;
  var getSubscribeAlertModalTitle = function getSubscribeAlertModalTitle() {
    if (isConsumptionSubscribe && isConsumption) {
      return t('histoConso.modalesAlert.threshold.title_coordinates_subscribe');
    }
    if (!isConsumptionSubscribe && isConsumption) {
      return t('histoConso.modalesAlert.threshold.title_coordinates_edit');
    }
    if (isWaterLeakSubscribe && !isConsumption) {
      return t('histoConso.modalesAlert.waterleak.title_subscribe');
    }
    if (!isWaterLeakSubscribe && !isConsumption) {
      return t('histoConso.modalesAlert.waterleak.title_edit');
    }
    return;
  };
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "H3",
    size: "L",
    weight: "medium"
  }, getSubscribeAlertModalTitle()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "body",
    size: "M",
    weight: "regular",
    className: "text-dark"
  }, t('histoConso.modalesAlert.description')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "d-flex"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzCheckbox"], {
    id: "checkboxSms",
    name: "checkboxSms",
    label: "",
    type: "checkbox",
    checked: values.checkboxSms || false,
    onChange: handleChange
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzInput"], {
    name: "smsContact",
    id: "smsContact",
    value: values.smsContact || '',
    onChange: handleChange,
    onBlur: handleBlur,
    label: t('histoConso.modalesAlert.input_mobile'),
    placeholder: t('loginReset.login.step4.form.mobilePhone.placeholder'),
    variant: "outlined",
    disabled: !values.checkboxSms
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_form_FormError__WEBPACK_IMPORTED_MODULE_6__["default"], {
    field: "smsContact",
    customDisplay: touched.smsContact && errors.smsContact
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_form_FormError__WEBPACK_IMPORTED_MODULE_6__["default"], {
    field: "checkboxSms",
    customDisplay: touched.checkboxSms && errors.checkboxSms
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "d-flex"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzCheckbox"], {
    id: "checkboxEmail",
    name: "checkboxEmail",
    label: "",
    type: "checkbox",
    checked: values.checkboxEmail || false,
    onChange: handleChange
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzInput"], {
    name: "emailContact",
    id: "emailContact",
    value: values.emailContact || '',
    onChange: handleChange,
    onBlur: handleBlur,
    label: t('histoConso.modalesAlert.input_email'),
    placeholder: t('loginReset.password.index.email_label'),
    variant: "outlined",
    disabled: !values.checkboxEmail
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_form_FormError__WEBPACK_IMPORTED_MODULE_6__["default"], {
    field: "emailContact",
    customDisplay: touched.emailContact && errors.emailContact
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_form_FormError__WEBPACK_IMPORTED_MODULE_6__["default"], {
    field: "checkboxEmail",
    customDisplay: touched.checkboxEmail && errors.checkboxEmail
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "caption",
    weight: "regular",
    size: "M",
    className: "mt-3"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__["Trans"], {
    i18nKey: 'loginReset.login.step4.form.mobilePhone.privacy_policy',
    components: {
      redirect: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Links_Link__WEBPACK_IMPORTED_MODULE_3__["default"], {
        className: "font-family-medium",
        decorate: true,
        target: "_blank",
        to: link
      })
    }
  })), (!isWaterLeakSubscribe || isConsumption) && (!isConsumptionSubscribe || !isConsumption) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "caption",
    weight: "regular",
    size: "M",
    className: "mt-4"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_i18next__WEBPACK_IMPORTED_MODULE_2__["Trans"], {
    i18nKey: 'histoConso.modalesAlert.unsubscribe',
    context: isConsumption ? 'threshold' : 'waterleak',
    components: {
      redirect: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Links_Link__WEBPACK_IMPORTED_MODULE_3__["default"], {
        id: "unsubscribe-btn",
        decorate: true,
        onClick: function onClick() {
          return setModalContentType('unsubscribe');
        },
        to: unSubscribeUrl
      })
    }
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_FormButtons__WEBPACK_IMPORTED_MODULE_4__["default"], {
    previous: previousButton,
    next: nextButton
  }));
};

/***/ }),

/***/ "./assets/js/pages/consumption-history/UnsubscribeAlertModalContent.tsx":
/*!******************************************************************************!*\
  !*** ./assets/js/pages/consumption-history/UnsubscribeAlertModalContent.tsx ***!
  \******************************************************************************/
/*! exports provided: UnsubscribeAlertModalContent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UnsubscribeAlertModalContent", function() { return UnsubscribeAlertModalContent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @app/services/AxiosInstance */ "./assets/js/services/AxiosInstance.jsx");
/* harmony import */ var _app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @app/hooks/useQueryObserver */ "./assets/js/hooks/useQueryObserver.ts");
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var _app_components_FormButtons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @app/components/FormButtons */ "./assets/js/components/FormButtons/index.tsx");
/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! formik */ "./node_modules/formik/dist/formik.esm.js");
/* harmony import */ var _AlertBlock__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AlertBlock */ "./assets/js/pages/consumption-history/AlertBlock.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var _ValidationErrorModalContent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ValidationErrorModalContent */ "./assets/js/pages/consumption-history/ValidationErrorModalContent.tsx");
/* harmony import */ var _hooks_useAlert__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./hooks/useAlert */ "./assets/js/pages/consumption-history/hooks/useAlert.ts");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = "function" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || "@@iterator", asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator", toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, ""); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: "normal", arg: fn.call(obj, arg) }; } catch (err) { return { type: "throw", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { ["next", "throw", "return"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if ("throw" !== record.type) { var result = record.arg, value = result.value; return value && "object" == _typeof(value) && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke("next", value, resolve, reject); }, function (err) { invoke("throw", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke("throw", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, "_invoke", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = "suspendedStart"; return function (method, arg) { if ("executing" === state) throw new Error("Generator is already running"); if ("completed" === state) { if ("throw" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) { if ("suspendedStart" === state) throw state = "completed", context.arg; context.dispatchException(context.arg); } else "return" === context.method && context.abrupt("return", context.arg); state = "executing"; var record = tryCatch(innerFn, self, context); if ("normal" === record.type) { if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, "throw" === methodName && delegate.iterator["return"] && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method) || "return" !== methodName && (context.method = "throw", context.arg = new TypeError("The iterator does not provide a '" + methodName + "' method")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = "normal", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: "root" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if ("function" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) { var ctor = "function" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, "toString", function () { return "[object Generator]"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if ("throw" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if ("root" === entry.tryLoc) return handle("end"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, "catchLoc"), hasFinally = hasOwn.call(entry, "finallyLoc"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error("try statement without catch or finally"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if ("throw" === record.type) throw record.arg; return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, "catch": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if ("throw" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, "next" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }
var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function (resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function (resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __rest = undefined && undefined.__rest || function (s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
  }
  return t;
};













var UnsubscribeAlertModalContent = function UnsubscribeAlertModalContent() {
  var _a, _b, _c, _d;
  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(_AlertBlock__WEBPACK_IMPORTED_MODULE_9__["AlertModalContext"]),
    handleCloseEditModal = _useContext.handleCloseEditModal,
    idPDS = _useContext.idPDS,
    emailContactChannel = _useContext.emailContactChannel,
    smsContactChannel = _useContext.smsContactChannel;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_3__["useTranslation"])(),
    t = _useTranslation.t;
  var _useQueryObserver = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_5__["default"])("GetMeterAlerts-".concat(idPDS)),
    refetch = _useQueryObserver.refetch;
  var history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_10__["useHistory"])();
  var _useAlert = Object(_hooks_useAlert__WEBPACK_IMPORTED_MODULE_12__["default"])(),
    isPathConso = _useAlert.isPathConso,
    getPathModal = _useAlert.getPathModal;
  var isConsumption = isPathConso();
  var _e = Object(react_query__WEBPACK_IMPORTED_MODULE_6__["useMutation"])(function (params) {
      return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var formattedData;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              formattedData = Object.assign({}, params);
              return _context.abrupt("return", _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_4__["default"].post(_app_constants__WEBPACK_IMPORTED_MODULE_2__["API"].CONSUMPTION.METER_ALERTS, formattedData, {
                headers: {
                  post: {
                    'Content-Type': _app_constants__WEBPACK_IMPORTED_MODULE_2__["CONTENT_TYPE_JSON"]
                  }
                }
              }));
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
    }, {
      onSuccess: function onSuccess() {
        refetch();
        var _getPathModal = getPathModal('desactiver', 'succes'),
          pathModalConso = _getPathModal.pathModalConso,
          pathModalWaterLeak = _getPathModal.pathModalWaterLeak;
        history.push(isConsumption ? pathModalConso : pathModalWaterLeak);
      },
      onError: function onError() {
        var _getPathModal2 = getPathModal('desactiver', 'erreur'),
          pathModalConso = _getPathModal2.pathModalConso,
          pathModalWaterLeak = _getPathModal2.pathModalWaterLeak;
        history.push(isConsumption ? pathModalConso : pathModalWaterLeak);
      }
    }),
    isError = _e.isError,
    error = _e.error,
    reset = _e.reset,
    isLoading = _e.isLoading,
    isSuccess = _e.isSuccess,
    postMeterAlerts = __rest(_e, ["isError", "error", "reset", "isLoading", "isSuccess"]);
  var initialValues = {
    waterLeakAlert: true,
    consumptionAlert: true,
    checkboxSms: (_a = smsContactChannel === null || smsContactChannel === void 0 ? void 0 : smsContactChannel.active) !== null && _a !== void 0 ? _a : false,
    smsContact: (_b = smsContactChannel === null || smsContactChannel === void 0 ? void 0 : smsContactChannel.value) !== null && _b !== void 0 ? _b : '',
    checkboxEmail: (_c = emailContactChannel === null || emailContactChannel === void 0 ? void 0 : emailContactChannel.active) !== null && _c !== void 0 ? _c : false,
    emailContact: (_d = emailContactChannel === null || emailContactChannel === void 0 ? void 0 : emailContactChannel.value) !== null && _d !== void 0 ? _d : ''
  };
  var onSubmit = function onSubmit() {
    var formattedValues = Object.assign(Object.assign({
      meterNumber: idPDS
    }, isConsumption ? {
      consumptionAlert: {
        active: false,
        threshold: null
      }
    } : {
      waterLeakAlert: {
        active: false
      }
    }), {
      emailContactChannel: {
        active: initialValues.checkboxEmail,
        value: initialValues.checkboxEmail ? initialValues.emailContact : ''
      },
      smsContactChannel: {
        active: initialValues.checkboxSms,
        value: initialValues.checkboxSms ? initialValues.smsContact : ''
      }
    });
    postMeterAlerts.mutate(formattedValues);
  };
  var previousButton = {
    label: t('no'),
    align: 'left',
    prevArrow: false,
    enabled: true,
    variant: 'outlined',
    onClick: handleCloseEditModal,
    className: 'pl-3'
  };
  var nextButton = {
    label: t('yes'),
    align: 'right',
    loader: isLoading
  };
  if (isSuccess) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ValidationErrorModalContent__WEBPACK_IMPORTED_MODULE_11__["ValidationErrorModalContent"], {
      success: true,
      title: t(isConsumption ? 'histoConso.modalesAlert.threshold.title_unsubscribe' : 'histoConso.modalesAlert.waterleak.title_unsubscribe'),
      description: t(isConsumption ? 'histoConso.modalesAlert.threshold.valid_unsubscribe' : 'histoConso.modalesAlert.waterleak.valid_unsubscribe'),
      btnLabel: t('close'),
      handleCloseModal: handleCloseEditModal
    });
  }
  if (isError) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ValidationErrorModalContent__WEBPACK_IMPORTED_MODULE_11__["ValidationErrorModalContent"], {
      title: t('histoConso.modalesAlert.error_technical'),
      description: t('histoConso.modalesAlert.error_unsubscribe'),
      btnLabel: t('errors.tryAgain'),
      handleCloseModal: handleCloseEditModal
    });
  }
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_8__["Formik"], {
    initialValues: initialValues,
    onSubmit: onSubmit
  }, function (_ref) {
    var handleSubmit = _ref.handleSubmit;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("form", {
      onSubmit: handleSubmit,
      "data-cy": "unsubscribe-form"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
      variant: "H3",
      size: "L",
      weight: "medium"
    }, t(isConsumption ? 'histoConso.modalesAlert.threshold.title_unsubscribe' : 'histoConso.modalesAlert.waterleak.title_unsubscribe')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
      variant: "body",
      size: "L",
      weight: "regular",
      className: "text-dark"
    }, t(isConsumption ? 'histoConso.modalesAlert.threshold.description_unsubscribe' : 'histoConso.modalesAlert.waterleak.description_unsubscribe')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_FormButtons__WEBPACK_IMPORTED_MODULE_7__["default"], {
      previous: previousButton,
      next: nextButton
    })));
  });
};

/***/ }),

/***/ "./assets/js/pages/consumption-history/ValidationErrorModalContent.tsx":
/*!*****************************************************************************!*\
  !*** ./assets/js/pages/consumption-history/ValidationErrorModalContent.tsx ***!
  \*****************************************************************************/
/*! exports provided: ValidationErrorModalContent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValidationErrorModalContent", function() { return ValidationErrorModalContent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var interweave__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! interweave */ "./node_modules/interweave/esm/index.js");
/* harmony import */ var _app_hooks_useInterweave__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/hooks/useInterweave */ "./assets/js/hooks/useInterweave.jsx");
/* harmony import */ var _app_components_AlertBox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @app/components/AlertBox */ "./assets/js/components/AlertBox/index.tsx");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }







var ValidationErrorModalContent = function ValidationErrorModalContent(_ref) {
  var title = _ref.title,
    description = _ref.description,
    success = _ref.success,
    btnLabel = _ref.btnLabel,
    handleCloseModal = _ref.handleCloseModal;
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),
    _useState2 = _slicedToArray(_useState, 2),
    isModalClosing = _useState2[0],
    setModalClosing = _useState2[1];
  var _useLocation = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["useLocation"])(),
    pathname = _useLocation.pathname;
  var history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["useHistory"])();
  var _useInterweave = Object(_app_hooks_useInterweave__WEBPACK_IMPORTED_MODULE_3__["default"])(),
    transform = _useInterweave.transform;
  var variant = success ? _app_components_AlertBox__WEBPACK_IMPORTED_MODULE_4__["ALERT_SUCCESS"] : _app_components_AlertBox__WEBPACK_IMPORTED_MODULE_4__["ALERT_ALERT"];
  var handleClick = function handleClick() {
    setModalClosing(true);
    handleCloseModal();
    var routeTR = pathname.includes(_app_constants__WEBPACK_IMPORTED_MODULE_6__["ROUTES"].MY_ALERTS) ? Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_6__["ROUTES"].MY_ALERTS) : Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_6__["ROUTES"].ACCOUNT_CONSUMPTION_TR);
    history.push(routeTR);
  };
  return !isModalClosing ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_5__["SzTypographie"], {
    variant: "H3",
    size: "L",
    weight: "medium"
  }, title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_AlertBox__WEBPACK_IMPORTED_MODULE_4__["AlertBox"], {
    className: "my-3 my-lg-4",
    variant: variant
  }, description && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(interweave__WEBPACK_IMPORTED_MODULE_2__["Markup"], {
    content: description,
    transform: transform
  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "text-lg-right mt-4 mt-lg-5"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_5__["SzButton"], {
    id: "closeBtn",
    variant: "contained",
    border: "soft",
    onClick: handleClick
  }, btnLabel))) : null;
};

/***/ }),

/***/ "./assets/js/pages/consumption-history/alert-block.scss":
/*!**************************************************************!*\
  !*** ./assets/js/pages/consumption-history/alert-block.scss ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "./assets/js/pages/consumption-history/hooks/useAlert.ts":
/*!***************************************************************!*\
  !*** ./assets/js/pages/consumption-history/hooks/useAlert.ts ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useAlert; });
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");


function useAlert() {
  var _useLocation = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["useLocation"])(),
    pathname = _useLocation.pathname;
  var getPathModal = function getPathModal() {
    var variant = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    var params = {
      variant: variant.length > 0 ? variant : undefined,
      result: result.length > 0 ? result : undefined
    };
    var pathModalConso = pathname.includes(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].MY_ALERTS) ? Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].MY_ALERTS_MODAL_CONSUMPTION, params) : Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].ACCOUNT_CONSUMPTION_MODAL_CONSUMPTION, params);
    var pathModalWaterLeak = pathname.includes(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].MY_ALERTS) ? Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].MY_ALERTS_MODAL_WATERLEAK, params) : Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].ACCOUNT_CONSUMPTION_MODAL_WATERLEAK, params);
    return {
      pathModalConso: pathModalConso,
      pathModalWaterLeak: pathModalWaterLeak
    };
  };
  var isPathConso = function isPathConso() {
    return pathname.includes(Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].ACCOUNT_CONSUMPTION_MODAL_CONSUMPTION)) || pathname.includes(Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].MY_ALERTS_MODAL_CONSUMPTION));
  };
  return {
    getPathModal: getPathModal,
    isPathConso: isPathConso
  };
}

/***/ }),

/***/ "./assets/js/pages/consumption-history/hooks/useConsoAlert.ts":
/*!********************************************************************!*\
  !*** ./assets/js/pages/consumption-history/hooks/useConsoAlert.ts ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useConsoAlert; });
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var _app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @app/hooks/histoConso/useGetTelemetry */ "./assets/js/hooks/histoConso/useGetTelemetry.ts");
/* harmony import */ var _app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @app/hooks/useQueryObserver */ "./assets/js/hooks/useQueryObserver.ts");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");





function useConsoAlert(_ref) {
  var idPDS = _ref.idPDS;
  var _a, _b, _c, _d;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_4__["useTranslation"])(),
    t = _useTranslation.t;
  var _useGetTelemetry = Object(_app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_1__["default"])(),
    getFormatStartEndDate = _useGetTelemetry.getFormatStartEndDate;
  var _useQueryObserver = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_2__["default"])("GetMeterAlerts-".concat(idPDS)),
    dataMeterAlerts = _useQueryObserver.data;
  var _useQueryObserver2 = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_2__["default"])("getTelemetryMonthQuery"),
    dataTelemetry = _useQueryObserver2.data;
  var contentMeterAlerts = ((_a = dataMeterAlerts === null || dataMeterAlerts === void 0 ? void 0 : dataMeterAlerts.data) === null || _a === void 0 ? void 0 : _a.content.length) > 0 ? (_b = dataMeterAlerts === null || dataMeterAlerts === void 0 ? void 0 : dataMeterAlerts.data) === null || _b === void 0 ? void 0 : _b.content[0] : [];
  var isSubscribed = function isSubscribed() {
    var _ref2 = (contentMeterAlerts === null || contentMeterAlerts === void 0 ? void 0 : contentMeterAlerts.consumptionAlert) || {},
      subscriptionStatus = _ref2.subscriptionStatus,
      alertState = _ref2.alertState;
    return subscriptionStatus === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].SUBSCRIBED && (alertState === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATES"].INACTIVE || alertState === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATES"].ACTIVE);
  };
  var measures = ((_d = (_c = dataTelemetry === null || dataTelemetry === void 0 ? void 0 : dataTelemetry.data) === null || _c === void 0 ? void 0 : _c.content) === null || _d === void 0 ? void 0 : _d.measures) || [];
  var measuresCurrentMonth = measures.length > 0 ? measures[measures.length - 1] : null;
  var measuresLastMonth = measures.length > 1 ? measures[measures.length - 2] : null;
  var isMeasuresLastMonthUnderZero = (measuresLastMonth === null || measuresLastMonth === void 0 ? void 0 : measuresLastMonth.volume) <= 0;
  var _ref3 = (contentMeterAlerts === null || contentMeterAlerts === void 0 ? void 0 : contentMeterAlerts.consumptionAlert) || {},
    subscriptionStatus = _ref3.subscriptionStatus,
    threshold = _ref3.threshold;
  var getDataGauge = function getDataGauge() {
    if (subscriptionStatus === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].ELIGIBLE) {
      var volume = (measuresLastMonth === null || measuresLastMonth === void 0 ? void 0 : measuresLastMonth.volume) > 0 ? parseFloat(measuresLastMonth === null || measuresLastMonth === void 0 ? void 0 : measuresLastMonth.volume.toFixed(2)) : 0;
      if (measuresLastMonth === null || isMeasuresLastMonthUnderZero) {
        return {
          isDisplay: false,
          typeDisplay: _app_constants__WEBPACK_IMPORTED_MODULE_0__["ALERTS_CONSO"].NO_DATA,
          typeAlert: _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].ELIGIBLE,
          conso: 0,
          consoMax: 0,
          threshold: 0
        };
      }
      return {
        isDisplay: true,
        typeDisplay: _app_constants__WEBPACK_IMPORTED_MODULE_0__["ALERTS_CONSO"].NO_SUBSCRIBED,
        typeAlert: _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].ELIGIBLE,
        conso: volume,
        consoMax: volume / 0.8,
        threshold: volume / 0.9
      };
    } else if (isSubscribed()) {
      if (measuresCurrentMonth === null) {
        return {
          isDisplay: false,
          typeDisplay: _app_constants__WEBPACK_IMPORTED_MODULE_0__["ALERTS_CONSO"].NO_DATA,
          typeAlert: _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].SUBSCRIBED,
          conso: 0,
          consoMax: 0,
          threshold: 0
        };
      }
      var conso = (measuresCurrentMonth === null || measuresCurrentMonth === void 0 ? void 0 : measuresCurrentMonth.volume) > 0 ? parseFloat(measuresCurrentMonth === null || measuresCurrentMonth === void 0 ? void 0 : measuresCurrentMonth.volume.toFixed(2)) : 0;
      var consoMax = conso > threshold / 0.9 ? conso : threshold / 0.9;
      return {
        isDisplay: true,
        typeDisplay: _app_constants__WEBPACK_IMPORTED_MODULE_0__["ALERTS_CONSO"].SUBSCRIBED_OVER_CONSO,
        typeAlert: _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].SUBSCRIBED,
        conso: conso,
        consoMax: consoMax,
        threshold: threshold
      };
    }
    return {
      isDisplay: false,
      typeDisplay: _app_constants__WEBPACK_IMPORTED_MODULE_0__["ALERTS_CONSO"].NO_DATA,
      typeAlert: _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].NON_ELIGIBLE,
      conso: 0,
      consoMax: 0,
      threshold: 0
    };
  };
  var getDataGaugeEdit = function getDataGaugeEdit() {
    var isConsumptionSubscribed = subscriptionStatus === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].SUBSCRIBED;
    var conso = (measuresCurrentMonth === null || measuresCurrentMonth === void 0 ? void 0 : measuresCurrentMonth.volume) > 0 ? parseFloat(measuresCurrentMonth === null || measuresCurrentMonth === void 0 ? void 0 : measuresCurrentMonth.volume.toFixed(2)) : 0;
    if (measuresLastMonth === null || isMeasuresLastMonthUnderZero) {
      // Default values if no data on previous month or conso last month 0 or less
      return {
        conso: 10,
        consoMax: 15,
        threshold: 8
      };
    } else if (isConsumptionSubscribed) {
      // values when consumption alert is subscribed
      return {
        conso: conso,
        consoMax: conso * 1.5,
        threshold: threshold
      };
    } else {
      var volume = (measuresLastMonth === null || measuresLastMonth === void 0 ? void 0 : measuresLastMonth.volume) > 0 ? parseFloat(measuresLastMonth === null || measuresLastMonth === void 0 ? void 0 : measuresLastMonth.volume.toFixed(2)) : 0;
      return {
        // default values when consumption alert is not subscribed
        conso: volume,
        consoMax: volume * 1.5,
        threshold: Math.round(volume * 0.8)
      };
    }
  };
  var getPropsTelemetry = function getPropsTelemetry() {
    var _ref4 = (contentMeterAlerts === null || contentMeterAlerts === void 0 ? void 0 : contentMeterAlerts.consumptionAlert) || {},
      subscriptionStatus = _ref4.subscriptionStatus;
    var lastMonth = Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["endOfMonth"])(Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["subMonths"])(new Date(), 1));
    var _getFormatStartEndDat = getFormatStartEndDate(new Date(lastMonth.getFullYear(), lastMonth.getMonth(), 1), lastMonth),
      startDateLastMonth = _getFormatStartEndDat.startDate,
      endDateLastMonth = _getFormatStartEndDat.endDate;
    if (subscriptionStatus === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].ELIGIBLE) {
      return {
        startDateLastMonth: startDateLastMonth,
        endDateLastMonth: endDateLastMonth,
        startDate: '',
        endDate: ''
      };
    } else if (isSubscribed()) {
      var today = new Date();
      var start = new Date();
      var end = new Date();
      var firstDayMonth = new Date(today.getFullYear(), today.getMonth(), 1);
      if (today.getDate() <= 3) {
        start = Object(date_fns__WEBPACK_IMPORTED_MODULE_3__["subMonths"])(new Date(firstDayMonth), 1);
        end = lastMonth;
      } else {
        start = new Date(firstDayMonth);
        end = new Date(today.getFullYear(), today.getMonth(), today.getDate());
      }
      var _getFormatStartEndDat2 = getFormatStartEndDate(start, end),
        startDate = _getFormatStartEndDat2.startDate,
        endDate = _getFormatStartEndDat2.endDate;
      return {
        startDateLastMonth: startDateLastMonth,
        endDateLastMonth: endDateLastMonth,
        startDate: startDate,
        endDate: endDate
      };
    }
    return {};
  };
  var getMessageBadge = function getMessageBadge(enabledConso) {
    var _a, _b;
    var _ref5 = (contentMeterAlerts === null || contentMeterAlerts === void 0 ? void 0 : contentMeterAlerts.consumptionAlert) || {},
      subscriptionStatus = _ref5.subscriptionStatus,
      threshold = _ref5.threshold;
    var measures = ((_b = (_a = dataTelemetry === null || dataTelemetry === void 0 ? void 0 : dataTelemetry.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.measures) || [];
    var measuresCurrentMonth = measures.length > 0 ? measures[measures.length - 1] : null;
    if (subscriptionStatus == _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].ELIGIBLE) {
      return t('histoConso.cardAlert.badge_inactive');
    }
    if (subscriptionStatus == _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].SUBSCRIBED && threshold && (measuresCurrentMonth === null || measuresCurrentMonth === void 0 ? void 0 : measuresCurrentMonth.volume) > threshold) {
      return t('histoConso.cardAlert.badge_exceeded');
    }
    if (!enabledConso) {
      return t('histoConso.cardAlert.badge_inactive');
    }
    return '';
  };
  var getColorBadge = function getColorBadge() {
    var _ref6 = (contentMeterAlerts === null || contentMeterAlerts === void 0 ? void 0 : contentMeterAlerts.consumptionAlert) || {},
      subscriptionStatus = _ref6.subscriptionStatus,
      alertState = _ref6.alertState;
    if (subscriptionStatus == _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].SUBSCRIBED && alertState === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATES"].ACTIVE) {
      return 'purple';
    }
    return 'gray-01';
  };
  return {
    getDataGauge: getDataGauge,
    getDataGaugeEdit: getDataGaugeEdit,
    getMessageBadge: getMessageBadge,
    getColorBadge: getColorBadge,
    getPropsTelemetry: getPropsTelemetry
  };
}

/***/ }),

/***/ "./assets/js/pages/consumption-history/hooks/useWaterleakAlert.ts":
/*!************************************************************************!*\
  !*** ./assets/js/pages/consumption-history/hooks/useWaterleakAlert.ts ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var _img_consumption_history_alertes_fuite_green_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @img/consumption-history/alertes-fuite-green.svg */ "./assets/img/consumption-history/alertes-fuite-green.svg");
/* harmony import */ var _img_consumption_history_alertes_fuite_red_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @img/consumption-history/alertes-fuite-red.svg */ "./assets/img/consumption-history/alertes-fuite-red.svg");
/* harmony import */ var _img_consumption_history_alertes_fuite_gray_svg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @img/consumption-history/alertes-fuite-gray.svg */ "./assets/img/consumption-history/alertes-fuite-gray.svg");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/esm/index.js");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _useAlert__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useAlert */ "./assets/js/pages/consumption-history/hooks/useAlert.ts");










var useWaterleakAlert = function useWaterleakAlert(_ref) {
  var dataWaterleakAlert = _ref.dataWaterleakAlert,
    setIsOpenEditModal = _ref.setIsOpenEditModal,
    setModalContentType = _ref.setModalContentType;
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_6__["useTranslation"])(),
    t = _useTranslation.t;
  var history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["useHistory"])();
  var _useAlert = Object(_useAlert__WEBPACK_IMPORTED_MODULE_7__["default"])(),
    getPathModal = _useAlert.getPathModal;
  if (!dataWaterleakAlert) return null;
  var subscriptionStatus = dataWaterleakAlert.subscriptionStatus,
    alertState = dataWaterleakAlert.alertState,
    alertDate = dataWaterleakAlert.alertDate;
  if (subscriptionStatus === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].ELIGIBLE) {
    return {
      dataCy: 'waterleak-alert-card-inactive',
      description: t('histoConso.cardAlert.waterleak.description_inactive'),
      btnLabel: t('histoConso.cardAlert.btn'),
      badgeLabel: t('histoConso.cardAlert.badge_inactive'),
      badgeColor: 'gray-01',
      imgSrc: _img_consumption_history_alertes_fuite_gray_svg__WEBPACK_IMPORTED_MODULE_4__["default"],
      btnId: 'subscribe-waterleak-alert',
      onClickBtn: function onClickBtn() {
        setModalContentType('subscribe');
        setIsOpenEditModal(true);
        var _getPathModal = getPathModal('activer'),
          pathModalWaterLeak = _getPathModal.pathModalWaterLeak;
        history.push(pathModalWaterLeak);
      }
    };
  }
  if (subscriptionStatus === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATUS"].SUBSCRIBED) {
    if (alertState === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATES"].INACTIVE) {
      return {
        dataCy: 'waterleak-alert-card-active-no-alert',
        description: t('histoConso.cardAlert.waterleak.description_no_alert'),
        ctaLabel: t('histoConso.cardAlert.waterleak.cta'),
        ctaLink: Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].EDITO, {
          slug: 'gerer-fuite'
        }),
        imgSrc: _img_consumption_history_alertes_fuite_green_svg__WEBPACK_IMPORTED_MODULE_2__["default"],
        isEditable: true,
        editBtnId: 'edit-waterleak-alert-success',
        onClickEdit: function onClickEdit() {
          setModalContentType('update');
          setIsOpenEditModal(true);
          var _getPathModal2 = getPathModal('modifier'),
            pathModalWaterLeak = _getPathModal2.pathModalWaterLeak;
          history.push(pathModalWaterLeak);
        }
      };
    }
    if (alertState === _app_constants__WEBPACK_IMPORTED_MODULE_0__["METER_ALERTS_STATES"].ACTIVE) {
      var date = alertDate ? Object(date_fns__WEBPACK_IMPORTED_MODULE_5__["parse"])(alertDate, 'dd/MM/yyyy', new Date()) : null;
      return {
        dataCy: 'waterleak-alert-card-active-alert',
        badgeLabel: t('histoConso.cardAlert.badge_alert'),
        badgeColor: 'red',
        description: t('histoConso.cardAlert.waterleak.description_alert', {
          date: date ? Object(date_fns__WEBPACK_IMPORTED_MODULE_5__["format"])(date, 'dd MMMM yyyy') : ''
        }),
        ctaLabel: t('histoConso.cardAlert.waterleak.cta'),
        ctaLink: Object(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_0__["ROUTES"].EDITO, {
          slug: 'gerer-fuite'
        }),
        imgSrc: _img_consumption_history_alertes_fuite_red_svg__WEBPACK_IMPORTED_MODULE_3__["default"],
        isEditable: true,
        editBtnId: 'edit-waterleak-alert',
        onClickEdit: function onClickEdit() {
          setModalContentType('update');
          setIsOpenEditModal(true);
          var _getPathModal3 = getPathModal('modifier'),
            pathModalWaterLeak = _getPathModal3.pathModalWaterLeak;
          history.push(pathModalWaterLeak);
        }
      };
    }
  }
  return null;
};
/* harmony default export */ __webpack_exports__["default"] = (useWaterleakAlert);

/***/ }),

/***/ "./assets/js/pages/consumption-history/index.tsx":
/*!*******************************************************!*\
  !*** ./assets/js/pages/consumption-history/index.tsx ***!
  \*******************************************************/
/*! exports provided: ConsumptionHistoryContext, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConsumptionHistoryContext", function() { return ConsumptionHistoryContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return ConsumptionHistory; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @suezenv/react-theme-components */ "./node_modules/@suezenv/react-theme-components/build/index.js");
/* harmony import */ var _suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _img_consumption_history_back_histoconso_png__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @img/consumption-history/back-histoconso.png */ "./assets/img/consumption-history/back-histoconso.png");
/* harmony import */ var _app_components_background_BackgroundEllipse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @app/components/background/BackgroundEllipse */ "./assets/js/components/background/BackgroundEllipse/index.jsx");
/* harmony import */ var _app_components_SzChartHistoConso__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @app/components/SzChartHistoConso */ "./assets/js/components/SzChartHistoConso/index.jsx");
/* harmony import */ var _app_components_SzChartHistoConso_ChartHistoConsoNoTr__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @app/components/SzChartHistoConso/ChartHistoConsoNoTr */ "./assets/js/components/SzChartHistoConso/ChartHistoConsoNoTr.jsx");
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @app/services/AxiosInstance */ "./assets/js/services/AxiosInstance.jsx");
/* harmony import */ var _app_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @app/constants */ "./assets/js/constants/index.ts");
/* harmony import */ var react_loading_skeleton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-loading-skeleton */ "./node_modules/react-loading-skeleton/lib/index.js");
/* harmony import */ var react_loading_skeleton__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! clsx */ "./node_modules/clsx/dist/clsx.m.js");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/esm/react-router-dom.js");
/* harmony import */ var _app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @app/hooks/histoConso/useGetTelemetry */ "./assets/js/hooks/histoConso/useGetTelemetry.ts");
/* harmony import */ var _app_hooks_histoConso_useGetNoTelemetry__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @app/hooks/histoConso/useGetNoTelemetry */ "./assets/js/hooks/histoConso/useGetNoTelemetry.ts");
/* harmony import */ var _app_hooks_histoConso_useGetMeterList__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @app/hooks/histoConso/useGetMeterList */ "./assets/js/hooks/histoConso/useGetMeterList.ts");
/* harmony import */ var _app_components_Container__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @app/components/Container */ "./assets/js/components/Container/index.tsx");
/* harmony import */ var _app_hooks__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @app/hooks */ "./assets/js/hooks/index.ts");
/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! react-i18next */ "./node_modules/react-i18next/dist/es/index.js");
/* harmony import */ var _app_components_SelectorItems__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @app/components/SelectorItems */ "./assets/js/components/SelectorItems/index.tsx");
/* harmony import */ var _app_components_background_BackgroundWave__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @app/components/background/BackgroundWave */ "./assets/js/components/background/BackgroundWave/index.tsx");
/* harmony import */ var _app_ez_components_ModuleCardFaq__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @app/ez-components/ModuleCardFaq */ "./assets/js/ez-components/ModuleCardFaq/index.tsx");
/* harmony import */ var _app_components_Links_LinkBtn__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @app/components/Links/LinkBtn */ "./assets/js/components/Links/LinkBtn.jsx");
/* harmony import */ var _AlertBlock__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./AlertBlock */ "./assets/js/pages/consumption-history/AlertBlock.tsx");
/* harmony import */ var _personal_infos_hooks_useGetServicesStatus__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../personal-infos/hooks/useGetServicesStatus */ "./assets/js/pages/personal-infos/hooks/useGetServicesStatus.ts");
/* harmony import */ var _app_pages_consumption_history_ConnectCoach__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @app/pages/consumption-history/ConnectCoach */ "./assets/js/pages/consumption-history/ConnectCoach.tsx");
/* harmony import */ var _app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @app/hooks/useQueryObserver */ "./assets/js/hooks/useQueryObserver.ts");
/* harmony import */ var ahooks__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ahooks */ "./node_modules/ahooks/es/index.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }
function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }




























var ConsumptionHistoryContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({
  checkIsTR: null,
  currentSelectedMeter: {},
  showToolTip: {
    TYPE_CHART_HISTO_CONSO: true,
    TYPE_CHART_HISTO_CONSO_NO_TR: true
  },
  dataEquivalences: {},
  setDataEquivalences: function setDataEquivalences() {},
  dataPrice: null,
  setDataPrice: function setDataPrice() {},
  setShowToolTip: function setShowToolTip() {}
});
function ConsumptionHistory() {
  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
  var history = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["useHistory"])();
  var isMobile = Object(_app_hooks__WEBPACK_IMPORTED_MODULE_16__["useIsMobile"])();
  var _useTranslation = Object(react_i18next__WEBPACK_IMPORTED_MODULE_17__["useTranslation"])(),
    t = _useTranslation.t;
  var _useLocation = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["useLocation"])(),
    pathname = _useLocation.pathname;
  var isAlertPage = pathname.includes(_app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].MY_ALERTS);
  var classNameAlertBlock = Object(clsx__WEBPACK_IMPORTED_MODULE_10__["default"])({
    'my-5': isAlertPage
  });
  var _useQueryObserver = Object(_app_hooks_useQueryObserver__WEBPACK_IMPORTED_MODULE_25__["default"])("postSmartCoachAddInfoHistoConso"),
    isFetchedSubConnectCoach = _useQueryObserver.isFetched;
  var queryClient = Object(react_query__WEBPACK_IMPORTED_MODULE_6__["useQueryClient"])();
  var KEY_MONTH = 'MONTH';
  var KEY_CUBIC_METER = 'CUBIC_METER';
  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({}),
    _useState2 = _slicedToArray(_useState, 2),
    dataEquivalences = _useState2[0],
    setDataEquivalences = _useState2[1];
  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null),
    _useState4 = _slicedToArray(_useState3, 2),
    isTR = _useState4[0],
    setisTR = _useState4[1];
  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({
      TYPE_CHART_HISTO_CONSO: true,
      TYPE_CHART_HISTO_CONSO_NO_TR: true
    }),
    _useState6 = _slicedToArray(_useState5, 2),
    showToolTip = _useState6[0],
    setShowToolTip = _useState6[1];
  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null),
    _useState8 = _slicedToArray(_useState7, 2),
    dataPrice = _useState8[0],
    setDataPrice = _useState8[1];
  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({
      defaultUnit: KEY_CUBIC_METER,
      defaultPeriod: KEY_MONTH,
      updated: '',
      dataMonth: null,
      data: null
    }),
    _useState10 = _slicedToArray(_useState9, 2),
    histoConsoData = _useState10[0],
    setHistoConsoData = _useState10[1];
  var prevDataHisto = Object(ahooks__WEBPACK_IMPORTED_MODULE_26__["usePrevious"])(histoConsoData);
  var defaultPrice = '4.3';
  var _useQuery = Object(react_query__WEBPACK_IMPORTED_MODULE_6__["useQuery"])('GetContractPrice', function () {
      return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_7__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_8__["API"].CONSUMPTION_HISTORY.PRICE);
    }, {
      onSuccess: function onSuccess(response) {
        var _a, _b;
        var price = (_b = (_a = response === null || response === void 0 ? void 0 : response.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.price;
        setDataPrice(!price ? defaultPrice : price);
      },
      onError: function onError() {
        setDataPrice(defaultPrice);
      }
    }),
    isLoadingContractPrice = _useQuery.isLoading;
  var _useGetTelemetry = Object(_app_hooks_histoConso_useGetTelemetry__WEBPACK_IMPORTED_MODULE_12__["default"])(),
    getTelemetry = _useGetTelemetry.getTelemetry,
    initDataTelemetry = _useGetTelemetry.initDataTelemetry,
    getStartEndDate = _useGetTelemetry.getStartEndDate,
    mutationTelemetry = _useGetTelemetry.mutationTelemetry;
  var _useGetMeterList = Object(_app_hooks_histoConso_useGetMeterList__WEBPACK_IMPORTED_MODULE_14__["default"])(),
    getMeterList = _useGetMeterList.getMeterList,
    isRoleConso = _useGetMeterList.isRoleConso,
    getMeters = _useGetMeterList.getMeters,
    getMetersNumber = _useGetMeterList.getMetersNumber,
    isTRMeter = _useGetMeterList.isTRMeter;
  var apiDayTelemetry = mutationTelemetry('getTelemetryDayQuery');
  var apiMonthTelemetry = mutationTelemetry('getTelemetryMonthQuery');
  var _getStartEndDate = getStartEndDate(KEY_MONTH),
    startDate = _getStartEndDate.startDate,
    endDate = _getStartEndDate.endDate;
  var _getMeterList = getMeterList({
      params: {},
      options: {
        onError: function onError() {
          history.push(_app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].DASHBOARD);
        }
      }
    }),
    isSuccessMeterList = _getMeterList.isSuccess,
    dataMeterList = _getMeterList.data,
    isLoadingMeterList = _getMeterList.isLoading;
  var idPDS = '';
  var initMeter = {};
  var metersNumber = [];
  var defaultHasTr = null;
  var roleConsoAllowed = isSuccessMeterList && isRoleConso(dataMeterList);
  if (isSuccessMeterList && roleConsoAllowed && defaultHasTr === null) {
    var meter = getMeters(dataMeterList);
    initMeter = meter;
    metersNumber = getMetersNumber(dataMeterList);
    defaultHasTr = isTRMeter(dataMeterList, meter);
    idPDS = meter === null || meter === void 0 ? void 0 : meter.idPDS;
  }
  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initMeter),
    _useState12 = _slicedToArray(_useState11, 2),
    currentMeter = _useState12[0],
    setCurrentMeter = _useState12[1];
  var checkIsTR = isTR !== null && isTR !== void 0 ? isTR : defaultHasTr;
  var _useGetServicesStatus = Object(_personal_infos_hooks_useGetServicesStatus__WEBPACK_IMPORTED_MODULE_23__["default"])({
      enabled: checkIsTR || false
    }, '?services[]=smartcoach'),
    dataServicesStatus = _useGetServicesStatus.data,
    isFetchedServicesStatus = _useGetServicesStatus.isFetched,
    isFetchingServicesStatus = _useGetServicesStatus.isFetching;
  var statusSmartCoach = ((_b = (_a = dataServicesStatus === null || dataServicesStatus === void 0 ? void 0 : dataServicesStatus.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.smartcoach) || '';
  var isEligibleSmartCoach = _app_constants__WEBPACK_IMPORTED_MODULE_8__["SERVICES_STATUS"].ELIGIBLE === statusSmartCoach && checkIsTR;
  var showConnectCoach = _app_constants__WEBPACK_IMPORTED_MODULE_8__["SERVICES_STATUS"].SUBSCRIBED === statusSmartCoach && checkIsTR && !isAlertPage;
  var routeTRSmartCoach = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].ACCOUNT_CONSUMPTION_TR, {
    modal: 'activation-on-connect-coach'
  });
  var routeLandingConnectCoach = _app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].CONNECT_COACH_LANDING;
  var routeTR = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["generatePath"])(_app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].ACCOUNT_CONSUMPTION_TR);
  var routeTrAllowed = [routeTR, routeTRSmartCoach, routeLandingConnectCoach];
  if (isFetchedServicesStatus && !isEligibleSmartCoach && (pathname == routeTRSmartCoach || pathname == routeLandingConnectCoach)) {
    history.push(routeTR);
  }
  var _useQuery2 = Object(react_query__WEBPACK_IMPORTED_MODULE_6__["useQuery"])('GetCustomerAddInfos', function () {
      return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_7__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_8__["API"].SMARTCOACH.CUSTOMER_ADDITIONAL_INFOS, {
        params: {
          token: true
        }
      });
    }, {
      enabled: !!showConnectCoach
    }),
    dataAddInfos = _useQuery2.data,
    isLoadingCustomerAddInfos = _useQuery2.isLoading;
  var _ref = ((_c = dataAddInfos === null || dataAddInfos === void 0 ? void 0 : dataAddInfos.data) === null || _c === void 0 ? void 0 : _c.content) || {},
    peopleCount = _ref.peopleCount,
    housingType = _ref.housingType,
    price = _ref.price,
    jwtToken = _ref.jwtToken,
    useCommunityHotWater = _ref.useCommunityHotWater;
  var successTelemetry = function successTelemetry(data, isTr) {
    var _a, _b;
    var measures = ((_b = (_a = data === null || data === void 0 ? void 0 : data.data) === null || _a === void 0 ? void 0 : _a.content) === null || _b === void 0 ? void 0 : _b.measures) || [];
    var newData = Object.assign({}, histoConsoData);
    if (isTr) {
      newData = Object.assign(Object.assign({}, histoConsoData), {
        dataMonth: initDataTelemetry(measures, KEY_CUBIC_METER)
      });
    } else {
      newData = Object.assign(Object.assign({}, histoConsoData), {
        data: initDataNoTelemetry(measures)
      });
    }
    setHistoConsoData(newData);
  };
  var getTelemetryQuery = getTelemetry({
    queryName: 'getTelemetryMonthQuery',
    params: {
      id_PDS: idPDS,
      mode: 'monthly',
      start_date: startDate,
      end_date: endDate
    },
    options: {
      enabled: roleConsoAllowed && checkIsTR && !showConnectCoach && isFetchedServicesStatus
    }
  });
  var _useGetNoTelemetry = Object(_app_hooks_histoConso_useGetNoTelemetry__WEBPACK_IMPORTED_MODULE_13__["default"])(),
    getNoTelemetry = _useGetNoTelemetry.getNoTelemetry,
    mutationNoTelemetry = _useGetNoTelemetry.mutationNoTelemetry,
    getStartEndDateNoTelemetry = _useGetNoTelemetry.getStartEndDateNoTelemetry,
    initDataNoTelemetry = _useGetNoTelemetry.initDataNoTelemetry;
  var apiMonthNoTelemetry = mutationNoTelemetry();
  var _getStartEndDateNoTel = getStartEndDateNoTelemetry(),
    startDateNoTr = _getStartEndDateNoTel.startDate,
    endDateNoTr = _getStartEndDateNoTel.endDate;
  var getNoTelemetryQuery = getNoTelemetry({
    params: {
      id_PDS: idPDS,
      start_date: startDateNoTr,
      end_date: endDateNoTr
    },
    options: {
      enabled: roleConsoAllowed && checkIsTR === false
    }
  });
  var displaySelectorMeter = function displaySelectorMeter(meter) {
    var _ref2 = meter || {},
      matriculeCompteur = _ref2.matriculeCompteur;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: "list-contract-item-content mr-2"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
      variant: "button",
      size: "M",
      className: "list-contract-item-title"
    }, t('histoConso.titleSelector', {
      numberMeter: matriculeCompteur
    })));
  };
  var selectItem = function selectItem(meter) {
    setCurrentMeter(meter);
    var checkTRMeterSlected = isTRMeter(dataMeterList, meter);
    var _ref3 = meter || {},
      currentIdPDS = _ref3.idPDS;
    if (checkIsTR !== checkTRMeterSlected) {
      setisTR(checkTRMeterSlected);
    } else if (checkTRMeterSlected) {
      var params = {
        id_PDS: currentIdPDS,
        mode: 'monthly',
        start_date: startDate,
        end_date: endDate
      };
      apiMonthTelemetry.mutate(params);
    } else {
      var _params = {
        id_PDS: currentIdPDS,
        start_date: startDateNoTr,
        end_date: endDateNoTr
      };
      apiMonthNoTelemetry.mutate(_params);
    }
  };
  var getTitleSelectoMeter = function getTitleSelectoMeter(meter) {
    var _ref4 = meter || {},
      matriculeCompteur = _ref4.matriculeCompteur;
    return t('histoConso.titleSelector', {
      numberMeter: matriculeCompteur
    });
  };
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var isSuccess = apiMonthTelemetry.isSuccess;
    if (isSuccess && checkIsTR) {
      successTelemetry(apiMonthTelemetry === null || apiMonthTelemetry === void 0 ? void 0 : apiMonthTelemetry.data, true);
    }
  }, [apiMonthTelemetry === null || apiMonthTelemetry === void 0 ? void 0 : apiMonthTelemetry.isSuccess]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var isSuccess = apiMonthNoTelemetry.isSuccess;
    if (isSuccess && !checkIsTR) {
      successTelemetry(apiMonthNoTelemetry === null || apiMonthNoTelemetry === void 0 ? void 0 : apiMonthNoTelemetry.data, false);
    }
  }, [apiMonthNoTelemetry === null || apiMonthNoTelemetry === void 0 ? void 0 : apiMonthNoTelemetry.isSuccess]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    if (isFetchedSubConnectCoach) {
      queryClient.invalidateQueries('getServicesStatus');
    }
  }, [isFetchedSubConnectCoach]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var isSuccess = getTelemetryQuery.isSuccess,
      data = getTelemetryQuery.data;
    if (isSuccess && checkIsTR) {
      successTelemetry(data, true);
      if (isTR === null) {
        setisTR(true);
      }
    }
  }, [getTelemetryQuery === null || getTelemetryQuery === void 0 ? void 0 : getTelemetryQuery.isSuccess]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var data = getTelemetryQuery.data,
      isRefetching = getTelemetryQuery.isRefetching;
    if (checkIsTR && isRefetching) {
      successTelemetry(data, true);
    }
  }, [getTelemetryQuery === null || getTelemetryQuery === void 0 ? void 0 : getTelemetryQuery.isRefetching]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var isSuccess = getNoTelemetryQuery.isSuccess,
      data = getNoTelemetryQuery.data;
    if (isSuccess && !checkIsTR) {
      successTelemetry(data, false);
      if (isTR === null) {
        setisTR(false);
      }
    }
  }, [getNoTelemetryQuery === null || getNoTelemetryQuery === void 0 ? void 0 : getNoTelemetryQuery.isSuccess]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    var data = getNoTelemetryQuery.data,
      isRefetching = getNoTelemetryQuery.isRefetching;
    if (!checkIsTR && isRefetching) {
      successTelemetry(data, false);
      if (isTR === null) {
        setisTR(false);
      }
    }
  }, [getNoTelemetryQuery === null || getNoTelemetryQuery === void 0 ? void 0 : getNoTelemetryQuery.isRefetching]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    if (checkIsTR === null) {
      return;
    }
    if (checkIsTR && !routeTrAllowed.includes(pathname) && !isAlertPage) {
      history.push(routeTR);
    } else if (!checkIsTR && pathname !== _app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].ACCOUNT_CONSUMPTION && pathname !== _app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].MY_ALERTS) {
      history.push(_app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].ACCOUNT_CONSUMPTION);
    }
  }, [checkIsTR]);
  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
    if (showConnectCoach) {
      history.push(_app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].CONNECT_COACH);
    }
  }, [showConnectCoach]);
  var currentSelectedMeter = Object.keys(currentMeter).length > 0 ? currentMeter : initMeter;
  var currentIdPDS = currentSelectedMeter === null || currentSelectedMeter === void 0 ? void 0 : currentSelectedMeter.idPDS;
  var isCallApiAlert = false;
  if (checkIsTR !== null) {
    isCallApiAlert = checkIsTR ? !showConnectCoach && isFetchedServicesStatus : true;
  }
  var alertBlockQueries = Object(react_query__WEBPACK_IMPORTED_MODULE_6__["useQueries"])([{
    queryKey: ["GetMeterAlerts-".concat(currentIdPDS)],
    queryFn: function queryFn() {
      return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_7__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_8__["API"].CONSUMPTION.METER_ALERTS, {
        params: {
          meterNumber: currentIdPDS
        }
      });
    },
    enabled: !!currentIdPDS && isCallApiAlert
  }, {
    queryKey: ['GetDataPushHorizontalConsumption'],
    queryFn: function queryFn() {
      return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_7__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_8__["API"].CONSUMPTION.PUSH, {
        params: {
          type: 'horizontal'
        }
      });
    },
    enabled: !showConnectCoach && isCallApiAlert && !isAlertPage
  }, {
    queryKey: ['GetDataPushMoreConsumption'],
    queryFn: function queryFn() {
      return _app_services_AxiosInstance__WEBPACK_IMPORTED_MODULE_7__["default"].get(_app_constants__WEBPACK_IMPORTED_MODULE_8__["API"].CONSUMPTION.PUSH, {
        params: {
          type: 'more'
        }
      });
    },
    enabled: !showConnectCoach && isCallApiAlert && !isAlertPage
  }]);
  var _alertBlockQueries = _slicedToArray(alertBlockQueries, 3),
    _alertBlockQueries$ = _alertBlockQueries[0],
    dataMeterAlert = _alertBlockQueries$.data,
    isErrorMeterAlert = _alertBlockQueries$.isError,
    errorMeterAlert = _alertBlockQueries$.error,
    _alertBlockQueries$2 = _alertBlockQueries[1],
    dataPush = _alertBlockQueries$2.data,
    isSuccessDataPush = _alertBlockQueries$2.isSuccess,
    _alertBlockQueries$3 = _alertBlockQueries[2],
    dataPushMore = _alertBlockQueries$3.data,
    isLoadingDataPushMore = _alertBlockQueries$3.isLoading,
    isSuccessDataPushMore = _alertBlockQueries$3.isSuccess,
    isErrorDataPushMore = _alertBlockQueries$3.isError;
  var content = ((_d = dataMeterAlert === null || dataMeterAlert === void 0 ? void 0 : dataMeterAlert.data) === null || _d === void 0 ? void 0 : _d.content.length) > 0 ? (_e = dataMeterAlert === null || dataMeterAlert === void 0 ? void 0 : dataMeterAlert.data) === null || _e === void 0 ? void 0 : _e.content[0] : [];
  var dataConsoAlert = (content === null || content === void 0 ? void 0 : content.consumptionAlert) || {};
  var dataWaterleakAlert = (content === null || content === void 0 ? void 0 : content.waterLeakAlert) || {};
  var subscriptionStatusConso = (dataConsoAlert === null || dataConsoAlert === void 0 ? void 0 : dataConsoAlert.subscriptionStatus) || '';
  var subscriptionStatusWaterleak = (dataWaterleakAlert === null || dataWaterleakAlert === void 0 ? void 0 : dataWaterleakAlert.subscriptionStatus) || '';
  var hasConsumptionAlert = !!subscriptionStatusConso && subscriptionStatusConso !== _app_constants__WEBPACK_IMPORTED_MODULE_8__["METER_ALERTS_STATUS"].NON_ELIGIBLE;
  var hasWaterleakAlert = !!subscriptionStatusWaterleak && subscriptionStatusWaterleak !== _app_constants__WEBPACK_IMPORTED_MODULE_8__["METER_ALERTS_STATUS"].NON_ELIGIBLE;
  var checkSuccessMeterAlert = function checkSuccessMeterAlert() {
    var _a, _b;
    var messageError = ((_b = (_a = errorMeterAlert === null || errorMeterAlert === void 0 ? void 0 : errorMeterAlert.response) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.message) || '';
    var keysNoDisplay = [_app_constants__WEBPACK_IMPORTED_MODULE_8__["METER_ALERTS_MESSAGES"].TERMINATED_CONTRACT, _app_constants__WEBPACK_IMPORTED_MODULE_8__["METER_ALERTS_MESSAGES"].WRONG_METER_OWNER];
    if (isErrorMeterAlert && keysNoDisplay.includes(messageError)) {
      return false;
    }
    if (isErrorMeterAlert && messageError === _app_constants__WEBPACK_IMPORTED_MODULE_8__["METER_ALERTS_MESSAGES"].API_GETALERTS_KO) {
      return true;
    }
    return hasConsumptionAlert || hasWaterleakAlert;
  };
  var displayAlertCards = checkIsTR && checkSuccessMeterAlert() || false;
  var dataPushMoreLength = ((_h = (_g = (_f = dataPush === null || dataPush === void 0 ? void 0 : dataPush.data) === null || _f === void 0 ? void 0 : _f.content) === null || _g === void 0 ? void 0 : _g.dataPush) === null || _h === void 0 ? void 0 : _h.length) || 0;
  var isPushMoreNotEmpty = dataPushMoreLength > 0;
  var displayPushBlock = isSuccessDataPush && isPushMoreNotEmpty && !isAlertPage;
  var displayPushMoreBlock = isSuccessDataPushMore && isPushMoreNotEmpty;
  var otherQuestionContainerClasses = Object(clsx__WEBPACK_IMPORTED_MODULE_10__["default"])('tsme-container pt-0 pb-6 text-center', {
    'pt-0': dataPushMore && isPushMoreNotEmpty,
    'pt-4': dataPushMore && dataPushMoreLength <= 0 || isErrorDataPushMore
  });
  var NoDataNoTR = function NoDataNoTR() {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: "row no-gutters control-chart histo-nodata"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
      className: "bg-white col-12 px-0 d-flex align-items-center text-center"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
      variant: "body",
      weight: "regular",
      className: "text-dark m-auto"
    }, t('histoConso.empty'))));
  };
  if (isFetchingServicesStatus || isLoadingCustomerAddInfos || isLoadingContractPrice || getTelemetryQuery.isLoading || getNoTelemetryQuery.isLoading || isLoadingMeterList || apiMonthTelemetry.isLoading || apiMonthNoTelemetry.isLoading) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzCard"], {
      className: "col-12 my-5 px-0 px-md-4 bg-white align-items-center"
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_9___default.a, {
      count: 1,
      width: '100%',
      height: 500
    }));
  }
  if (showConnectCoach) {
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_pages_consumption_history_ConnectCoach__WEBPACK_IMPORTED_MODULE_24__["default"], {
      jwtToken: jwtToken,
      useCommunityHotWater: useCommunityHotWater,
      peopleCount: peopleCount,
      price: price,
      housingType: housingType
    });
  }
  var apiTelemetryError = getTelemetryQuery.isError || getNoTelemetryQuery.isError || apiMonthTelemetry.isError || apiMonthNoTelemetry.isError;
  var showChartHisto = prevDataHisto || apiTelemetryError;
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Container__WEBPACK_IMPORTED_MODULE_15__["default"], {
    fullscreen: true,
    className: "p-0",
    tag: "main"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ConsumptionHistoryContext.Provider, {
    value: {
      currentSelectedMeter: Object.keys(currentMeter).length > 0 ? currentMeter : initMeter,
      checkIsTR: checkIsTR,
      dataEquivalences: dataEquivalences,
      setDataEquivalences: setDataEquivalences,
      dataPrice: dataPrice,
      setDataPrice: setDataPrice,
      setShowToolTip: setShowToolTip,
      showToolTip: showToolTip
    }
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_background_BackgroundEllipse__WEBPACK_IMPORTED_MODULE_3__["default"], {
    ellipseImg: _img_consumption_history_back_histoconso_png__WEBPACK_IMPORTED_MODULE_2__["default"],
    zIndex: true,
    tag: "div"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    "data-cy": "container-histo-conso"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "pt-5 pt-md-3 pt-lg-0"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 mt-5"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzTypographie"], {
    variant: "H1",
    size: isMobile ? 'L' : 'XL',
    color: "light",
    className: "text-uppercase",
    weight: "black"
  }, t('histoConso.title', {
    context: isAlertPage ? 'alert' : 'histoconso'
  }))), metersNumber.length > 1 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_SelectorItems__WEBPACK_IMPORTED_MODULE_18__["default"], {
    btnId: "items-selector",
    className: "pr-3",
    getTitle: getTitleSelectoMeter,
    items: metersNumber,
    loader: false,
    displayItems: displaySelectorMeter,
    actionItem: selectItem
  })), !isAlertPage && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "d-flex flex-column flex-lg-row align-items-lg-start justify-content-lg-center"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_suezenv_react_theme_components__WEBPACK_IMPORTED_MODULE_1__["SzCard"], {
    className: "col-12 my-5 px-0 px-md-4 bg-white align-items-center histo-container"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "d-flex flex-column flex-lg-row mt-3"
  }, checkIsTR && showChartHisto && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_SzChartHistoConso__WEBPACK_IMPORTED_MODULE_4__["default"], {
    data: histoConsoData,
    idPDS: idPDS,
    apiDayTelemetry: apiDayTelemetry
  }), !checkIsTR && ((histoConsoData === null || histoConsoData === void 0 ? void 0 : histoConsoData.data) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_SzChartHistoConso_ChartHistoConsoNoTr__WEBPACK_IMPORTED_MODULE_5__["default"], {
    data: histoConsoData
  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(NoDataNoTR, null)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AlertBlock__WEBPACK_IMPORTED_MODULE_22__["AlertBlock"], {
    className: classNameAlertBlock,
    idPDS: currentIdPDS,
    displayAlertCards: displayAlertCards,
    displayPushBlock: displayPushBlock,
    hasConsumptionAlert: hasConsumptionAlert,
    hasWaterleakAlert: hasWaterleakAlert
  })), !isAlertPage && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_background_BackgroundWave__WEBPACK_IMPORTED_MODULE_19__["default"], null, isLoadingDataPushMore ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: "col-12 px-0 mt-4 rounded-2"
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_loading_skeleton__WEBPACK_IMPORTED_MODULE_9___default.a, {
    width: "100%",
    height: 200
  })) : displayPushMoreBlock && dataPushMore ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_ez_components_ModuleCardFaq__WEBPACK_IMPORTED_MODULE_20__["default"], {
    title: t('pedagoFacture.board.card_contract_module_title'),
    items: Array.isArray((_k = (_j = dataPushMore === null || dataPushMore === void 0 ? void 0 : dataPushMore.data) === null || _j === void 0 ? void 0 : _j.content) === null || _k === void 0 ? void 0 : _k.dataPush) ? (_l = dataPushMore.data.content) === null || _l === void 0 ? void 0 : _l.dataPush : ((_o = (_m = dataPushMore === null || dataPushMore === void 0 ? void 0 : dataPushMore.data) === null || _m === void 0 ? void 0 : _m.content) === null || _o === void 0 ? void 0 : _o.dataPush) ? [(_p = dataPushMore.data.content) === null || _p === void 0 ? void 0 : _p.dataPush] : []
  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {
    className: otherQuestionContainerClasses
  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_app_components_Links_LinkBtn__WEBPACK_IMPORTED_MODULE_21__["default"], {
    variant: "outlined",
    border: "soft",
    className: "border-white bg-transparent mb-1 mb-lg-0 text-white",
    to: _app_constants__WEBPACK_IMPORTED_MODULE_8__["ROUTES"].HELP_AND_CONTACT,
    id: "invoice-explanation-other-question-btn"
  }, t('pedagoFacture.board.otherQuestionBtn')))) : null)));
}

/***/ })

}]);