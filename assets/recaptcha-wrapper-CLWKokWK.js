import{R as U,r as b}from"./index-0X8QCd_i.js";import{P as d}from"./index-BoI371yk.js";import{h as T}from"./index-BzhTyqaY.js";function E(){return E=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}return r},E.apply(this,arguments)}function H(r,n){if(r==null)return{};var i={},e=Object.keys(r),t,c;for(c=0;c<e.length;c++)t=e[c],!(n.indexOf(t)>=0)&&(i[t]=r[t]);return i}function x(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function z(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var w=function(r){z(n,r);function n(){var e;return e=r.call(this)||this,e.handleExpired=e.handleExpired.bind(x(e)),e.handleErrored=e.handleErrored.bind(x(e)),e.handleChange=e.handleChange.bind(x(e)),e.handleRecaptchaRef=e.handleRecaptchaRef.bind(x(e)),e}var i=n.prototype;return i.getValue=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this.props.grecaptcha.getResponse(this._widgetId):null},i.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},i.execute=function(){var t=this.props.grecaptcha;if(t&&this._widgetId!==void 0)return t.execute(this._widgetId);this._executeRequested=!0},i.executeAsync=function(){var t=this;return new Promise(function(c,g){t.executionResolve=c,t.executionReject=g,t.execute()})},i.reset=function(){this.props.grecaptcha&&this._widgetId!==void 0&&this.props.grecaptcha.reset(this._widgetId)},i.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},i.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},i.handleChange=function(t){this.props.onChange&&this.props.onChange(t),this.executionResolve&&(this.executionResolve(t),delete this.executionReject,delete this.executionResolve)},i.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&this._widgetId===void 0){var t=document.createElement("div");this._widgetId=this.props.grecaptcha.render(t,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(t)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},i.componentDidMount=function(){this.explicitRender()},i.componentDidUpdate=function(){this.explicitRender()},i.componentWillUnmount=function(){this._widgetId!==void 0&&(this.delayOfCaptchaIframeRemoving(),this.reset())},i.delayOfCaptchaIframeRemoving=function(){var t=document.createElement("div");for(document.body.appendChild(t),t.style.display="none";this.captcha.firstChild;)t.appendChild(this.captcha.firstChild);setTimeout(function(){document.body.removeChild(t)},5e3)},i.handleRecaptchaRef=function(t){this.captcha=t},i.render=function(){var t=this.props;t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl;var c=H(t,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]);return U.createElement("div",E({},c,{ref:this.handleRecaptchaRef}))},n}(U.Component);w.displayName="ReCAPTCHA";w.propTypes={sitekey:d.string.isRequired,onChange:d.func,grecaptcha:d.object,theme:d.oneOf(["dark","light"]),type:d.oneOf(["image","audio"]),tabindex:d.number,onExpired:d.func,onErrored:d.func,size:d.oneOf(["compact","normal","invisible"]),stoken:d.string,hl:d.string,badge:d.oneOf(["bottomright","bottomleft","inline"])};w.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};function S(){return S=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}return r},S.apply(this,arguments)}function W(r,n){if(r==null)return{};var i={},e=Object.keys(r),t,c;for(c=0;c<e.length;c++)t=e[c],!(n.indexOf(t)>=0)&&(i[t]=r[t]);return i}function q(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var h={},G=0;function $(r,n){return n=n||{},function(e){var t=e.displayName||e.name||"Component",c=function(_){q(v,_);function v(f,a){var o;return o=_.call(this,f,a)||this,o.state={},o.__scriptURL="",o}var l=v.prototype;return l.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+G++),this.__scriptLoaderID},l.setupScriptURL=function(){return this.__scriptURL=typeof r=="function"?r():r,this.__scriptURL},l.asyncScriptLoaderHandleLoad=function(a){var o=this;this.setState(a,function(){return o.props.asyncScriptOnLoad&&o.props.asyncScriptOnLoad(o.state)})},l.asyncScriptLoaderTriggerOnScriptLoaded=function(){var a=h[this.__scriptURL];if(!a||!a.loaded)throw new Error("Script is not loaded.");for(var o in a.observers)a.observers[o](a);delete window[n.callbackName]},l.componentDidMount=function(){var a=this,o=this.setupScriptURL(),p=this.asyncScriptLoaderGetScriptLoaderID(),u=n,I=u.globalName,L=u.callbackName,C=u.scriptId;if(I&&typeof window[I]<"u"&&(h[o]={loaded:!0,observers:{}}),h[o]){var y=h[o];if(y&&(y.loaded||y.errored)){this.asyncScriptLoaderHandleLoad(y);return}y.observers[p]=function(s){return a.asyncScriptLoaderHandleLoad(s)};return}var k={};k[p]=function(s){return a.asyncScriptLoaderHandleLoad(s)},h[o]={loaded:!1,observers:k};var m=document.createElement("script");m.src=o,m.async=!0;for(var N in n.attributes)m.setAttribute(N,n.attributes[N]);C&&(m.id=C);var j=function(R){if(h[o]){var D=h[o],O=D.observers;for(var A in O)R(O[A])&&delete O[A]}};L&&typeof window<"u"&&(window[L]=function(){return a.asyncScriptLoaderTriggerOnScriptLoaded()}),m.onload=function(){var s=h[o];s&&(s.loaded=!0,j(function(R){return L?!1:(R(s),!0)}))},m.onerror=function(){var s=h[o];s&&(s.errored=!0,j(function(R){return R(s),!0}))},document.body.appendChild(m)},l.componentWillUnmount=function(){var a=this.__scriptURL;if(n.removeOnUnmount===!0)for(var o=document.getElementsByTagName("script"),p=0;p<o.length;p+=1)o[p].src.indexOf(a)>-1&&o[p].parentNode&&o[p].parentNode.removeChild(o[p]);var u=h[a];u&&(delete u.observers[this.asyncScriptLoaderGetScriptLoaderID()],n.removeOnUnmount===!0&&delete h[a])},l.render=function(){var a=n.globalName,o=this.props;o.asyncScriptOnLoad;var p=o.forwardedRef,u=W(o,["asyncScriptOnLoad","forwardedRef"]);return a&&typeof window<"u"&&(u[a]=typeof window[a]<"u"?window[a]:void 0),u.ref=p,b.createElement(e,u)},v}(b.Component),g=b.forwardRef(function(_,v){return b.createElement(c,S({},_,{forwardedRef:v}))});return g.displayName="AsyncScriptLoader("+t+")",g.propTypes={asyncScriptOnLoad:d.func},T(g,e)}}var P="onloadcallback",F="grecaptcha";function M(){return typeof window<"u"&&window.recaptchaOptions||{}}function V(){var r=M(),n=r.useRecaptchaNet?"recaptcha.net":"www.google.com";return"https://"+n+"/recaptcha/api.js?onload="+P+"&render=explicit"}const Q=$(V,{callbackName:P,globalName:F})(w);export{Q as R};
