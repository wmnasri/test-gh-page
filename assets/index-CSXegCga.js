import{a as ee,f as ge,g as Ce,j as e,b as d,c as De}from"./index-BzhTyqaY.js";import{r as p,R as Ne}from"./index-0X8QCd_i.js";import{u as F,ak as Ee,al as Ve,am as ye,an as z,ao as Se,ap as ke,aq as _e,R as Y}from"./main-BbuvrTKi.js";import{u as R}from"./useIsFetching-B7nv8BYd.js";import{Q as O,u as L}from"./useQuery-DDRZMcvI.js";import{a as T,A as M,C as U,u as ze,g as Le}from"./AxiosInstance-BZZbXQ8a.js";import{c as S,G as he,H as Te,L as Me,l as Ae,I as Z,J as se,K as Ie,d as Fe,P as Re,W as Oe,v as He,F as Be}from"./react-spring-web.esm-DsMzZgQq.js";import{M as qe}from"./index-kwWzU9du.js";import{S as ae,l as Pe}from"./index-R4VhrMC6.js";import{B as ce}from"./index-DNT32797.js";import{u as Qe}from"./useScrollTo-VXXfg99K.js";import{C as Ue}from"./check-circle-1-CH6VNuLl.js";/* empty css                         */import{u as C}from"./useTranslation-BYGhmYBG.js";import{u as te}from"./useResponsive-DQBhMvnf.js";import{E as Xe}from"./index-CrOxkS7a.js";import{M as W}from"./index-E8Xemi00.js";import{D as Ke}from"./alert-CQfNZT_D.js";import"./index-BoI371yk.js";import"./index-4p5aklhB.js";import"./throttle-C5YRRb_b.js";import"./_baseIsEqual-DwR-aJgz.js";import"./iframe-CrganuSH.js";import"../sb-preview/runtime.js";import"./nonIterableRest-CnCppAvF.js";import"./formik.esm-DgjVmEdT.js";import"./index-m5SwaE3w.js";import"./recaptcha-wrapper-CLWKokWK.js";/* empty css              */import"./useMutation-DnofRurj.js";import"./index-CxdTol_D.js";import"./Tips-j9k3pi84.js";import"./useInterweave-MFQvh887.js";import"./light-bulb-shine-BN5xHApG.js";import"./createWithBsPrefix--uDGuUX5.js";import"./divWithClassName-BF71WaKi.js";import"./cross-circle-D-gJHWvz.js";var Ge={};function We({className:s,btnId:i,hideAddNew:o,needMessage:n}){var le;const{t:a}=C(),{NODE_ENV:r}=Ge,c=r==="test"?ye:"";let u=!1;if(n){const h=F();R(["DashboardMessages"]);const N=new O(h,{queryKey:["DashboardMessages"]}),{isFetched:A}=N.getCurrentResult();u=A}const{isLoading:b,...l}=L("ContractListQuery",({signal:h})=>T.get(M.CONTRACT_SELECTOR,{baseURL:c,signal:h}),{enabled:!n||u}),m=(le=l==null?void 0:l.data)==null?void 0:le.data,w=ee("selector-contract position-relative",s),[f,t]=p.useState(!1),[j,x]=p.useState(null),[D,E]=p.useState(null),[k,_]=p.useState(""),[v,y]=p.useState(null),g=p.useRef(),B=Qe(),q=document.getElementById(i);ge(()=>{t(!1)},[q,g]);const P=h=>{const A=document.querySelectorAll(".list-contract-item")[h].offsetTop;B(A,g.current)},V=m?m[0]:[];Ce(["uparrow","downarrow","esc","tab"],h=>{const{keyCode:N}=h;f&&(N===27&&t(!1),N===40&&oe(),N===38&&fe(),N===9&&(h.preventDefault(),oe()))});const G=()=>{t(h=>!h)},K=(h,N)=>{x(h==="enter"?N:null)},we=(h,N)=>{he(),E(h);const{fullRefFormat:A}=N,J=window.location.pathname;window.location.href=Ve.replace(":fullRefFormat",A).replace(":pathname",J)},oe=()=>{x(h=>{let N;return h===null||h+1===m.length?N=0:N=h+1,P(N),N})},fe=()=>{x(h=>{let N;return h?(m.length-1,N=h-1):N=m.length-1,P(N),N})},je=h=>h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ve=({target:h})=>{const{value:N}=h,A=N.split(" ");_(N),y(()=>N.length>0?m.filter(({searchData:J})=>A.every(xe=>{const pe=je(xe);return new RegExp(pe,"i").test(J.toLowerCase())})):null)};return V?e.jsxDEV("div",{className:w,children:[b?e.jsxDEV(ae,{count:1,width:120,height:45,style:{borderRadius:"1.5rem"}},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:188,columnNumber:9},this):e.jsxDEV(d.SzButton,{icon:"arrow-down-1",onClick:G,variant:"outlined",border:"rounded",alignIcon:"right",className:"contract-btn bg-transparent text-white border-white","data-cy":"contract-selector-btn",id:i,children:V.name??a("contract")},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:195,columnNumber:9},this),f&&e.jsxDEV("div",{ref:g,className:"selector-contract-modal bg-white shadow rounded-1 position-absolute",children:[(m==null?void 0:m.length)>=0&&e.jsxDEV("div",{className:"search-contract d-flex",children:e.jsxDEV(d.SzInput,{className:"bg-white border-white",icon:"search",onChange:ve,value:k},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:216,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:215,columnNumber:13},this),e.jsxDEV("div",{className:"list-contract rounded-1 position-relative",children:[v&&v.length===0?e.jsxDEV("div",{className:"px-4",children:e.jsxDEV(d.SzTypographie,{className:"mt-2",weight:"medium",children:a("cel_dashboard.cardContract.noResult")},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:227,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:226,columnNumber:15},this):(v||m).map((h,N)=>e.jsxDEV($e,{itemKey:N,onMouseOver:K,contract:h,isHovered:j,selectContract:()=>{we(N,h)},isLoading:D===N},`list-contract-item-${N}`,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:234,columnNumber:19},this)),o?null:e.jsxDEV("div",{className:"add-button border-top sz-border-1 bg-white position-sticky bottom-0 d-flex justify-content-center",children:e.jsxDEV(S,{variant:"text",icon:"add-circle",alignIcon:"right",to:Ee,"data-cy":"add-contract-button",children:a("cel_dashboard.cardContract.addContract")},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:251,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:250,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:224,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:210,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:186,columnNumber:5},this):null}function $e({itemKey:s,onMouseOver:i,contract:o,selectContract:n,isHovered:a,isLoading:r}){const{t:c}=C(),{isCurrentContract:u,isActif:b,name:l,addrServed:m,fullRefFormat:w,codeSituation:f}=o,t=f===9,j=ee("list-contract-item position-relative border-bottom sz-border-1 d-flex p-3",{hovered:a===s,active:u,disabled:!b&&!u&&!t}),x=()=>{u||n(s,o)};return e.jsxDEV("div",{className:j,onClick:x,role:"button",tabIndex:"0",onKeyPress:x,onMouseEnter:()=>i("enter",s),onMouseLeave:()=>i("leave",s),children:[e.jsxDEV("div",{className:"list-contract-item-content mr-2",children:[e.jsxDEV(d.SzTypographie,{variant:"button",size:"M",className:"list-contract-item-title",children:l?Te(l,20):c("contract")},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:315,columnNumber:9},this),e.jsxDEV("div",{className:"list-contract-item-infos mt-1",children:[e.jsxDEV(d.SzTypographie,{variant:"caption",size:"M",weight:"regular",children:m},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:323,columnNumber:11},this),e.jsxDEV(d.SzTypographie,{variant:"caption",size:"M",weight:"regular",children:c("cel_dashboard.cardContract.contractNb",{fullRefFormat:w})},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:326,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:322,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:314,columnNumber:7},this),e.jsxDEV("div",{className:"list-contract-item-status d-flex flex-column ml-auto",children:[r&&e.jsxDEV(d.SzSpinner,{className:"list-contract-item-spinner align-self-end"},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:333,columnNumber:11},this),u&&e.jsxDEV("div",{className:"list-contract-item-selected align-self-end",children:e.jsxDEV("img",{src:Ue,alt:""},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:337,columnNumber:13},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:336,columnNumber:11},this),!b&&!t&&e.jsxDEV(ce,{color:"gray",textColor:"light",className:"list-contract-item-badge",children:c("cel_dashboard.cardContract.badge_canceled")},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:341,columnNumber:11},this),t&&e.jsxDEV(ce,{color:"primary-dark",textColor:"light",className:"list-contract-item-badge",children:c("cel_dashboard.cardContract.badge_inprogress")},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:350,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:331,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/ContractSelector/index.jsx",lineNumber:305,columnNumber:5},this)}const Ze="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.75%203.75H2.25C1.42157%203.75%200.75%204.42157%200.75%205.25V18.75C0.75%2019.5784%201.42157%2020.25%202.25%2020.25H21.75C22.5784%2020.25%2023.25%2019.5784%2023.25%2018.75V5.25C23.25%204.42157%2022.5784%203.75%2021.75%203.75Z'%20stroke='%233D466C'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M3.75%2015L6.9%209.75L9.75%2015L12.75%2012L15.75%2015L20.25%208.25'%20stroke='%233D466C'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",re=Ne.createContext(),$=s=>[ke,_e].includes(s);function Je(){var y,g,B,q,Q,P;const s=te(),{t:i}=C(),o=i("cel_dashboard.notification.title"),n=[{fields:{title:o,content:e.jsxDEV(de,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:33,columnNumber:18},this)}}],{DashboardQuery:a}=p.useContext(H),{leak_alert:r,overconsumption_alert:c,requests_list:u}=((g=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:g.content)||{},b=r===z,l=c===z,m=u===z,w=V=>{const{leak_alert:X,overconsumption_alert:G}=V;let K=0;return X&&$(X.status)&&K++,G&&$(G.status)&&K++,K},f=V=>{if(!(V!=null&&V.cases))return null;const{notification_state:X}=V;return X===!1?null:1},t=F();R(["DashboardMessages"]);const j=new O(t,{queryKey:["DashboardMessages"]}),{isFetched:x}=j.getCurrentResult(),D=L("TileAlertsQuery",({signal:V})=>T.get(M.CEL_DASHBOARD_TILE_ALERTS,{signal:V}),{enabled:(b||l)&&x}),E=L("requests_list",({signal:V})=>T.get(M.REQUESTS_GET_LIST,{signal:V}),{enabled:m&&x});let k=D.data?w((q=(B=D.data)==null?void 0:B.data)==null?void 0:q.content):0;const _=E.data?f((P=(Q=E.data)==null?void 0:Q.data)==null?void 0:P.content):0;return k+=_,a.isLoading||D.isLoading?null:e.jsxDEV(re.Provider,{value:{TileAlertsQuery:D,RequestQuery:E,isLeakAllowed:b,isCsptAllowed:l,isRequestAllowed:m,badgeCount:k},children:s?e.jsxDEV(Xe,{toggle:!1,data:n,activeKey:"1",buttonArrow:!0,borderBottom:!1,isNotif:!0,className:"mt-0",btnChildren:e.jsxDEV(ue,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:131,columnNumber:24},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:123,columnNumber:9},this):e.jsxDEV("div",{className:"notification-container pb-2 position-relative",children:[e.jsxDEV("div",{className:"d-flex p-4",children:[e.jsxDEV(d.SzTypographie,{variant:"H3",size:"M",className:"mb-0",weight:"medium",children:o},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:136,columnNumber:13},this),e.jsxDEV(ue,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:144,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:135,columnNumber:11},this),e.jsxDEV(de,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:146,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:134,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:112,columnNumber:5},this)}const de=()=>{var b,l,m,w,f,t;const{TileAlertsQuery:s,isLeakAllowed:i,isCsptAllowed:o,isRequestAllowed:n,RequestQuery:a}=p.useContext(re),r=(l=(b=s==null?void 0:s.data)==null?void 0:b.data)==null?void 0:l.content.leak_alert,c=(w=(m=a==null?void 0:a.data)==null?void 0:m.data)==null?void 0:w.content,u=(t=(f=s==null?void 0:s.data)==null?void 0:f.data)==null?void 0:t.content.overconsumption_alert;return e.jsxDEV("div",{className:"notification-list",children:[n&&c&&e.jsxDEV(Ye,{data:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:168,columnNumber:43},void 0),i&&r&&e.jsxDEV(es,{data:r},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:169,columnNumber:38},void 0),o&&u&&e.jsxDEV(ss,{data:u},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:171,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:167,columnNumber:5},void 0)},ie=({title:s,text:i,icon:o,isNew:n,link:a})=>e.jsxDEV(Me,{to:a,className:"text-decoration-none",children:e.jsxDEV("div",{className:"notification-item position-relative p-3 p-md-4 d-flex align-items-center",children:[n&&e.jsxDEV("div",{className:"notification-alert"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:180,columnNumber:17},void 0),e.jsxDEV("div",{className:"notification-icon mr-2 d-flex justify-content-center align-items-center",children:o},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:181,columnNumber:7},void 0),e.jsxDEV("div",{children:[e.jsxDEV(d.SzTypographie,{variant:"H5",size:"L",tag:"h4",className:"text-uppercase mb-0",children:s},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:185,columnNumber:9},void 0),e.jsxDEV(d.SzTypographie,{className:"text-dark m-0",children:i},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:193,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:184,columnNumber:7},void 0),e.jsxDEV(d.SzIcon,{icon:"arrow-right-1",variant:"line",className:"ml-auto notification-arrow pl-2"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:195,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:179,columnNumber:5},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:178,columnNumber:3},void 0),ue=()=>{const{badgeCount:s}=p.useContext(re);return s===0?null:e.jsxDEV("div",{className:"notification-badge ml-auto d-flex justify-content-center",children:e.jsxDEV(d.SzTypographie,{className:"text-white",weight:"bold",children:["+",s]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:213,columnNumber:7},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:212,columnNumber:5},void 0)},Ye=({data:s})=>{if(!s.cases)return null;const{t:i}=C(),o=i("cel_dashboard.notification.request"),n="Suivre mes demandes",a=e.jsxDEV(d.SzIcon,{icon:"pin-location-1",variant:"line"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:228,columnNumber:16},void 0),r=(s==null?void 0:s.notification_state)===!0;return e.jsxDEV(ie,{title:o,text:n,icon:a,isNew:r,link:Se},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:232,columnNumber:5},void 0)},es=({data:s})=>{if(!s.buttons)return null;const{t:i}=C(),o=i("cel_dashboard.notification.leak_alert"),n=s.message,a=$(s.status),r=e.jsxDEV("div",{className:"notification-icon mr-2",children:e.jsxDEV(d.SzIcon,{icon:"water-protection-faucet",variant:"line"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:253,columnNumber:7},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:252,columnNumber:5},void 0),c=s.buttons[0]!==void 0&&s.buttons[0].url;return e.jsxDEV(ie,{title:o,text:n,icon:r,isNew:a,link:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:260,columnNumber:5},void 0)},ss=({data:s})=>{if(!s.buttons)return null;const{t:i}=C(),o=i("cel_dashboard.notification.overconsumption_alert"),n=s.message,a=$(s.status),r=e.jsxDEV("img",{src:Ze,alt:"",style:{width:24,height:24}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:280,columnNumber:5},void 0),c=s.buttons[0]!==void 0&&s.buttons[0].url;return e.jsxDEV(ie,{title:o,text:n,icon:r,isNew:a,link:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/Notification.jsx",lineNumber:293,columnNumber:5},void 0)};function as(){return e.jsxDEV(Pe.SkeletonTheme,{highlightColor:"#abafbf",color:"#d5d6de",children:e.jsxDEV(ae,{count:1,width:"80%",height:15},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/CardContractText.jsx",lineNumber:7,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/CardContractText.jsx",lineNumber:6,columnNumber:5},this)}function ts(){var t;const{t:s}=C(),{DashboardQuery:i}=p.useContext(H),{leak_alert:o,overconsumption_alert:n,requests_list:a,attestation_abo:r}=((t=i.data)==null?void 0:t.data.content)||{},c=F();R(["ContractListQuery"]);const u=new O(c,{queryKey:["ContractListQuery"]}),{isLoading:b,data:l}=u.getCurrentResult(),{addrServed:m,fullRefFormat:w}=(l==null?void 0:l.data[0])||{},f=[o,n,a].includes(z);return e.jsxDEV(Ae,{className:"card-contract",borderColor:"#3d466c",backgroundColor:"var(--gray-100)",children:[e.jsxDEV("div",{className:De("card-contract-top p-3 p-md-4",{single:!f}),"data-cy":"contract-card",children:[e.jsxDEV(d.SzTypographie,{variant:"H2",size:"XL",weight:"bold",color:"white",className:"mb-4",children:"Mon contrat"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:51,columnNumber:9},this),e.jsxDEV(We,{btnId:"card-contract-selector",needMessage:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:60,columnNumber:9},this),(l==null?void 0:l.data.length)>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"my-3",children:[e.jsxDEV(me,{icon:"pin-location-1",isLoading:b,children:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:64,columnNumber:15},this),e.jsxDEV(me,{icon:"house-3",isLoading:b,children:s("cel_dashboard.cardContract.contractNb",{fullRefFormat:w})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:67,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:63,columnNumber:13},this),r===z&&e.jsxDEV(S,{to:Y.PROOF_OF_RESIDENCE,variant:"text",icon:"keyboard-arrow-right",alignIcon:"right",className:"pl-0 text-white","data-cy":"proof-of-residence-button",children:s("cel_dashboard.cardContract.proofOfResidence")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:72,columnNumber:15},this),e.jsxDEV(S,{to:Y.CANCEL,variant:"text",icon:"keyboard-arrow-right",alignIcon:"right",className:"pl-0 text-white","data-cy":"cancel-contract-button",children:s("cel_dashboard.cardContract.cancelContract")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:84,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:62,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:46,columnNumber:7},this),f&&e.jsxDEV(Je,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:97,columnNumber:28},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:41,columnNumber:5},this)}const me=({icon:s,children:i,isLoading:o})=>e.jsxDEV("div",{className:"text-white mt-2",children:[e.jsxDEV(d.SzIcon,{icon:s,variant:"line",className:"mr-2 contract-icon float-left"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:105,columnNumber:7},void 0),o?e.jsxDEV(as,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:111,columnNumber:9},void 0):e.jsxDEV(d.SzTypographie,{variant:"caption",size:"M",children:i},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:113,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/CardContract/index.jsx",lineNumber:104,columnNumber:5},void 0),rs=""+new URL("boy_water_glass-Q42xccFP.jpg",import.meta.url).href,is="data:image/svg+xml,%3csvg%20width='80'%20height='80'%20viewBox='0%200%2080%2080'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='37'%20cy='39'%20r='12'%20fill='%23E8F6B1'/%3e%3cpath%20d='M21.25%2043.75V58.75'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M21.25%2056.25H48.75C48.75%2054.9239%2048.2232%2053.6521%2047.2855%2052.7145C46.3479%2051.7768%2045.0761%2051.25%2043.75%2051.25H37.5C37.5%2049.9239%2036.9732%2048.6521%2036.0355%2047.7145C35.0979%2046.7768%2033.8261%2046.25%2032.5%2046.25H21.25'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M31.25%2051.25H37.5'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M38.75%2026.25C38.75%2027.5761%2039.8036%2028.8479%2041.6789%2029.7855C43.5543%2030.7232%2046.0978%2031.25%2048.75%2031.25C51.4022%2031.25%2053.9457%2030.7232%2055.8211%2029.7855C57.6964%2028.8479%2058.75%2027.5761%2058.75%2026.25C58.75%2024.9239%2057.6964%2023.6521%2055.8211%2022.7145C53.9457%2021.7768%2051.4022%2021.25%2048.75%2021.25C46.0978%2021.25%2043.5543%2021.7768%2041.6789%2022.7145C39.8036%2023.6521%2038.75%2024.9239%2038.75%2026.25V26.25Z'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M38.75%2026.25V38.75C38.75%2041.5117%2043.2267%2043.75%2048.75%2043.75C54.2733%2043.75%2058.75%2041.5117%2058.75%2038.75V26.25'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M58.75%2032.5C58.75%2035.2617%2054.2733%2037.5%2048.75%2037.5C43.2267%2037.5%2038.75%2035.2617%2038.75%2032.5'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ns="data:image/svg+xml,%3csvg%20width='80'%20height='80'%20viewBox='0%200%2080%2080'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='28'%20cy='38'%20r='12'%20fill='%23E8F6B1'/%3e%3cpath%20d='M56.25%2056.25C56.25%2056.913%2055.9866%2057.5489%2055.5178%2058.0178C55.0489%2058.4866%2054.413%2058.75%2053.75%2058.75H26.25C25.587%2058.75%2024.9511%2058.4866%2024.4822%2058.0178C24.0134%2057.5489%2023.75%2056.913%2023.75%2056.25V23.75C23.75%2023.087%2024.0134%2022.4511%2024.4822%2021.9822C24.9511%2021.5134%2025.587%2021.25%2026.25%2021.25H43.965C44.6276%2021.2501%2045.263%2021.5133%2045.7317%2021.9817L55.5183%2031.7683C55.9867%2032.237%2056.2499%2032.8724%2056.25%2033.535V56.25Z'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M56.25%2033.75H46.25C45.587%2033.75%2044.9511%2033.4866%2044.4822%2033.0178C44.0134%2032.5489%2043.75%2031.913%2043.75%2031.25V21.25'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M35.8099%2040.8334C34.2312%2040.718%2032.7546%2040.0094%2031.6768%2038.85C30.5991%2037.6906%2030%2036.1663%2030%2034.5834C30%2033.0004%2030.5991%2031.4761%2031.6768%2030.3167C32.7546%2029.1573%2034.2312%2028.4487%2035.8099%2028.3334'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M28.333%2033.3334H34.9997'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M28.333%2036.6666H34.9997'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M40%2045H50'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M31.25%2052.5H50'%20stroke='%232E88FF'%20stroke-width='2.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",I="col-12 col-lg-6 px-md-4 tdb-card-spacer",ne=()=>{const{track:s}=Fe();return{onClickPrimary(i){s("CEL_DSB_1",{sz_clic_tbc_home_service_nom:i,"sz_clic_tbc_home_service_cta-level":"main"})},onClickSecondary(i){s("CEL_DSB_1",{sz_clic_tbc_home_service_nom:i,"sz_clic_tbc_home_service_cta-level":"secondary"})}}};function os(){var D,E,k,_;const{t:s}=C(),{onClickPrimary:i,onClickSecondary:o}=ne(),n=s("cel_dashboard.paymentCard"),a=e.jsxDEV("img",{src:is,alt:"",className:"card-bubble-icon"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:55,columnNumber:16},this),{DashboardQuery:r}=p.useContext(H),{isLoading:c,data:u}=r,{balance:b}=((D=u==null?void 0:u.data)==null?void 0:D.content)||{},l=b===z,m=F();R(["DashboardMessages"]);const w=new O(m,{queryKey:["DashboardMessages"]}),{isFetched:f}=w.getCurrentResult(),{data:t,...j}=L("TilePaymentQuery",({signal:v})=>T.get(M.CEL_DASHBOARD_TILE_BALANCE,{signal:v}),{enabled:!c&&l&&f}),x=r.isLoading||j.isLoading;return x?e.jsxDEV("div",{className:I,"data-cy":"payment-card",children:e.jsxDEV(Z,{icon:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:82,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:81,columnNumber:7},this):!t||!(t!=null&&t.data)||!x&&!l?null:e.jsxDEV("div",{className:I,"data-cy":"payment-card",children:e.jsxDEV(se,{title:n,icon:a,children:[((E=t.data.content)==null?void 0:E.balance)>0&&e.jsxDEV(d.SzTypographie,{variant:"H2",size:"XL",weight:"bold",className:"text-dark",children:[e.jsxDEV(W,{content:String((k=t.data.content)==null?void 0:k.balance)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:105,columnNumber:13},this),"€"]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:99,columnNumber:11},this),e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",className:"text-dark",children:e.jsxDEV(W,{content:(_=t.data.content)==null?void 0:_.message},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:109,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:108,columnNumber:9},this),e.jsxDEV("div",{className:"mt-auto",children:[t.data.content.buttons[0]!==void 0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(S,{to:t.data.content.buttons[0].url,variant:"contained",border:"soft","data-cy":"direct-debit-subscription-button",onClick:()=>i(n),children:t.data.content.buttons[0].label},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:114,columnNumber:15},this),e.jsxDEV("div",{className:"w-100"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:123,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:113,columnNumber:13},this),t.data.content.buttons[1]!==void 0&&e.jsxDEV(S,{to:t.data.content.buttons[1].url,variant:"text",icon:"keyboard-arrow-right",alignIcon:"right",className:"pl-0","data-cy":"timeline-button",onClick:()=>o(n),children:t.data.content.buttons[1].label},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:111,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:97,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:96,columnNumber:5},this)}function ls({data:s}){var n,a,r,c,u,b,l,m;const{t:i}=C(),o=()=>{var w,f,t,j;return((f=(w=s==null?void 0:s.data)==null?void 0:w.content)==null?void 0:f.qualiteDernierIndex)==="E"?"estim":((j=(t=s==null?void 0:s.data)==null?void 0:t.content)==null?void 0:j.qualiteDernierIndex)===null?"short":"picked"};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(d.SzTypographie,{variant:"H2",size:"XL",weight:"bold",tag:"span",className:"text-dark",children:[(a=(n=s==null?void 0:s.data)==null?void 0:n.content)==null?void 0:a.volume.toFixed(2)," ",e.jsxDEV("sup",{className:"text-expo",children:e.jsxDEV("sup",{children:"3"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:170,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:169,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:161,columnNumber:7},this),e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",className:"text-dark mb-0",children:i("cel_dashboard.consumptionCard.lastBill",{lastIndexDate:(c=(r=s==null?void 0:s.data)==null?void 0:r.content)==null?void 0:c.dateAncienIndex,dateIndex:(b=(u=s==null?void 0:s.data)==null?void 0:u.content)==null?void 0:b.date,context:o()})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:174,columnNumber:7},this),e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",className:"text-dark mb-1",children:i("cel_dashboard.consumptionCard.lastValue",{index:(m=(l=s==null?void 0:s.data)==null?void 0:l.content)==null?void 0:m.index})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:181,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:160,columnNumber:5},this)}function cs({data:s,keyMode:i}){var n,a,r,c;const{t:o}=C();return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",className:"mt-3 text-dark mb-1",children:o("cel_dashboard.consumptionCardIndexDate.lastValue",{lastIndexDate:(a=(n=s==null?void 0:s.data)==null?void 0:n.content)==null?void 0:a.date,index:(c=(r=s==null?void 0:s.data)==null?void 0:r.content)==null?void 0:c.index})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:195,columnNumber:7},this),e.jsxDEV(d.SzAlert,{variant:"info",className:"mt-3 mb-0 py-1",children:e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",className:"text-dark mb-1",children:o("cel_dashboard.consumptionCardIndexDate.info",{context:i})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:202,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:201,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:194,columnNumber:5},this)}function be(){const{t:s}=C();return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(d.SzTypographie,{variant:"body",weight:"medium",size:"XL",className:"mt-5 text-dark mb-1",children:s("cel_dashboard.consumptionNoData.subTitle")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:217,columnNumber:7},this),e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",className:"mt-4 text-dark mb-1",children:s("cel_dashboard.consumptionNoData.info")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:226,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:216,columnNumber:5},this)}function ds(){var _,v;const{t:s}=C(),{onClickPrimary:i,onClickSecondary:o}=ne(),n=s("cel_dashboard.consumptionCard.title"),a=e.jsxDEV("img",{src:Re,alt:"",className:"card-bubble-icon"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:237,columnNumber:16},this),{DashboardQuery:r}=p.useContext(H),{isLoading:c,data:u}=r,{consumption:b}=((_=u==null?void 0:u.data)==null?void 0:_.content)||{},l=b===z,m=F();R(["DashboardMessages"]);const w=new O(m,{queryKey:["DashboardMessages"]}),{isFetched:f}=w.getCurrentResult(),{data:t,...j}=L("TileConsumptionQuery",({signal:y})=>T.get(M.CEL_DASHBOARD_TILE_CONSUMPTION,{signal:y}),{enabled:!c&&l&&f}),x=r.isLoading||j.isLoading;if(x)return e.jsxDEV("div",{className:I,"data-cy":"consumption-card",children:e.jsxDEV(Z,{icon:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:263,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:262,columnNumber:7},this);if(!t||!(t!=null&&t.data)||!x&&!l)return null;const D=((v=t==null?void 0:t.data)==null?void 0:v.content)||{},{keyMode:E}=D||"",k=(y,g)=>{switch(y){case U.CONSUMPTION.TR:case U.CONSUMPTION.NO_TR:return e.jsxDEV(ls,{data:g},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:283,columnNumber:16},this);case U.CONSUMPTION.INDEX_DATE_TR:case U.CONSUMPTION.INDEX_DATE_NO_TR:return e.jsxDEV(cs,{data:g,keyMode:y},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:286,columnNumber:16},this);case U.CONSUMPTION.INDEX_NO_DATA:return e.jsxDEV(be,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:288,columnNumber:16},this);default:return e.jsxDEV(be,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:291,columnNumber:16},this)}};return e.jsxDEV("div",{className:I,"data-cy":"consumption-card",id:"consumption-card",children:e.jsxDEV(se,{title:n,icon:a,children:[k(E,t),E!==U.CONSUMPTION.INDEX_NO_DATA&&e.jsxDEV("div",{className:"mt-auto",children:[t.data.content.buttons[0]!==void 0&&e.jsxDEV(S,{to:t.data.content.buttons[0].url,variant:"contained",border:"soft","data-cy":"consumption-history-button",onClick:()=>i(n),children:t.data.content.buttons[0].label},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:303,columnNumber:15},this),t.data.content.buttons[1]!==void 0&&e.jsxDEV(S,{to:t.data.content.buttons[1].url,variant:"text",icon:"keyboard-arrow-right",alignIcon:"right",className:"pl-0","data-cy":"declare-consumption-button",onClick:()=>o(n),children:t.data.content.buttons[1].label},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:314,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:301,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:297,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:296,columnNumber:5},this)}function us(){var q,Q;const s=te(),{t:i}=C(),{onClickPrimary:o,onClickSecondary:n}=ne(),a=i("cel_dashboard.invoiceCard.title"),r=e.jsxDEV("img",{src:ns,alt:"",className:"card-bubble-icon"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:338,columnNumber:16},this),{DashboardQuery:c}=p.useContext(H),{isLoading:u,data:b}=c,{invoice:l}=((q=b==null?void 0:b.data)==null?void 0:q.content)||{},m=l===z,w=F();R(["DashboardMessages"]);const f=new O(w,{queryKey:["DashboardMessages"]}),{isFetched:t}=f.getCurrentResult(),{data:j,...x}=L("TileInvoiceQuery",({signal:P})=>T.get(M.CEL_DASHBOARD_TILE_INVOICE,{signal:P}),{enabled:!u&&m&&t}),D=((Q=j==null?void 0:j.data)==null?void 0:Q.content)||{},{last_invoice_amount:E,last_invoice_date:k,last_invoice_number:_,buttons:v}=D||"",y=c.isLoading||x.isLoading;if(y)return e.jsxDEV("div",{className:I,"data-cy":"invoice-card",children:e.jsxDEV(Z,{title:a,icon:r},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:371,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:370,columnNumber:7},this);if(!j||!(j!=null&&j.data)||!y&&!m)return null;const g=v.length,B=ee({"px-0":!s&&g===3,"pl-0":s&&g===3||g===2});return e.jsxDEV("div",{className:I,"data-cy":"invoice-card",children:e.jsxDEV(se,{title:a,icon:r,children:[e.jsxDEV(d.SzTypographie,{variant:"H2",size:"XL",weight:"bold",tag:"span",className:"text-dark",children:[E,"€"]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:394,columnNumber:9},this),e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",className:"text-dark mb-0",children:i("cel_dashboard.invoiceCard.emited",{last_invoice_date:k})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:403,columnNumber:9},this),e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",className:"text-dark",children:i("cel_dashboard.invoiceCard.ref",{last_invoice_number:_})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:408,columnNumber:9},this),e.jsxDEV("div",{className:"mt-auto d-flex flex-wrap",children:[v[0]!==void 0&&e.jsxDEV(S,{to:v[0].url,variant:"contained",border:"soft",className:"mr-2","data-cy":"e-invoice-subscription-button",onClick:()=>o(a),children:e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",weight:"medium",className:"mb-0",children:v[0].label},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:423,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:415,columnNumber:13},this),v[1]!==void 0&&e.jsxDEV(S,{to:v[1].url,variant:"text",icon:s||g===2?"keyboard-arrow-right":"",alignIcon:s||g===2?"right":"",className:B,"data-cy":"show-invoice-button",onClick:()=>n(a),children:[(s||g===2)&&v[1].label,!s&&g===3&&e.jsxDEV(d.SzTypographie,{variant:"caption",size:"M",weight:"regular",children:v[1].label},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:445,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:434,columnNumber:13},this),v[2]!==void 0&&e.jsxDEV(S,{to:v[2].url,variant:"text",icon:"keyboard-arrow-right",alignIcon:"right",className:B,"data-cy":"understand-invoice-button",onClick:()=>n(a),children:v[2].label},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:452,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:413,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:393,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:392,columnNumber:5},this)}function ms(){var x;const s=te(),{t:i}=C(),{DashboardQuery:o}=p.useContext(H),{isLoading:n,data:a}=o,{edmc:r}=((x=a==null?void 0:a.data)==null?void 0:x.content)||{},c=(r==null?void 0:r.status)===z,u=r?r==null?void 0:r.municipality:"",b=r?r==null?void 0:r.inseeCode:"",l=i("cel_dashboard.waterCard.title",{municipality:u}),m=e.jsxDEV("img",{src:Oe,alt:""},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:480,columnNumber:16},this),w=o.isIdle||n,f=ze();if(w)return e.jsxDEV("div",{className:I,"data-cy":"water-card",children:e.jsxDEV(Z,{icon:m,backgroundColor:"var(--blue-electric-light)",iconBackgroundColor:"var(--blue-electric-light)"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:487,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:486,columnNumber:7},this);if(!w&&!c)return null;const t=Le(Y.EDMC_DASHBOARD,{city:u==null?void 0:u.concat("-",b)}),j=()=>{he(),f.push(t)};return e.jsxDEV("div",{className:I,"data-cy":"water-card",children:e.jsxDEV(Ie,{title:l,type:"CEL",editoImg:rs,ellipseSmall:s,children:e.jsxDEV("div",{className:"my-4",children:[e.jsxDEV(d.SzTypographie,{className:"text-dark mb-0 mb-lg-3",children:i("cel_dashboard.waterCard.content")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:518,columnNumber:11},this),e.jsxDEV(d.SzButton,{onClick:j,variant:"text",className:"pl-0",icon:"keyboard-arrow-right",alignIcon:"right","data-cy":"edmc-dashboard-button",children:i("cel_dashboard.waterCard.btn")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:521,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:517,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:511,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:510,columnNumber:5},this)}function bs(){var f;const{DashboardQuery:s}=p.useContext(H),{isLoading:i,data:o}=s,{taste:n}=((f=o==null?void 0:o.data)==null?void 0:f.content)||{},a=n===z,{t:r}=C(),c=F();R(["DashboardMessages"]);const u=new O(c,{queryKey:["DashboardMessages"]}),{isFetched:b}=u.getCurrentResult(),{data:l,...m}=L("TileTasteQuery",({signal:t})=>T.get(M.CEL_DASHBOARD_TILE_TASTE,{signal:t}),{enabled:!i&&a&&b}),w=s.isLoading||m.isLoading;return w?e.jsxDEV("div",{className:"col-12 px-md-4","data-cy":"tasting-in-dashboard",children:e.jsxDEV("div",{className:"tdb-card-tasting rounded-3 bg-white w-100 p-3 p-lg-4",children:e.jsxDEV(ae,{count:1,width:"100%"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:565,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:564,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:563,columnNumber:7},this):!l||!(l!=null&&l.data)||!w&&!a?null:e.jsxDEV("div",{className:"col-12 px-md-4","data-cy":"tasting-in-dashboard",children:e.jsxDEV("div",{className:"tdb-card-tasting rounded-3 bg-white w-100 p-3 p-lg-4",children:e.jsxDEV("div",{className:"d-flex flex-column flex-lg-row justify-content-between align-items-baseline align-items-lg-center",children:[e.jsxDEV(d.SzTypographie,{variant:"H4",size:"L",weight:"medium",className:"mb-lg-0",tag:"span",children:r("cel_dashboard.taste.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:583,columnNumber:11},this),e.jsxDEV(d.SzTypographie,{variant:"body",size:"S",className:"mt-0 mt-lg-1 mb-lg-0 text-dark",children:l.data.content.message},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:592,columnNumber:11},this),e.jsxDEV(S,{to:l.data.content.buttons[0].url,variant:"text",icon:"keyboard-arrow-right",alignIcon:"right",className:"pl-0","data-cy":"tasting-know-more-button",children:l.data.content.buttons[0].label},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:599,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:582,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:581,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/celCards.jsx",lineNumber:580,columnNumber:5},this)}function Ns(){const s={permanent:[],flash:[]},[i,o]=p.useState(s),{isLoading:n}=L("DashboardMessages",()=>T.get(M.CEL_DASHBOARD_MSG),{onSuccess:({data:c})=>{o(c.content)},initialData:s}),{permanent:a,flash:r}=i;return!n&&e.jsxDEV(e.Fragment,{children:[a.map((c,u)=>{const{type:b,title:l}=c;return e.jsxDEV(Ke,{variant:b,children:e.jsxDEV(W,{content:l},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:37,columnNumber:15},this)},`perm-${b}-${u}`,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:36,columnNumber:13},this)}),r[0]&&e.jsxDEV(hs,{...r[0]},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:42,columnNumber:22},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:32,columnNumber:7},this)}function hs({title:s,subtitle:i,linkCTA:o,libCTA:n,targetBlank:a}){const[r,c]=p.useState(!0),u=()=>{c(!1)};return e.jsxDEV(d.SzModal,{handleClose:u,show:r,title:e.jsxDEV(d.SzTypographie,{variant:"H3",size:"L",weight:"medium",children:s},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:60,columnNumber:9},this),border:"smooth",size:"lg",centered:!0,children:[e.jsxDEV(d.SzTypographie,{children:e.jsxDEV(W,{content:i},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:69,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:68,columnNumber:7},this),n&&o&&e.jsxDEV("div",{className:"d-flex justify-content-center",children:e.jsxDEV(S,{to:o,variant:"contained",border:"soft",className:"text-white",target:a?"_blank":"_self",children:n},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:73,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:72,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/messages.jsx",lineNumber:56,columnNumber:5},this)}const ws=""+new URL("girl_shower-DHwy4PTi.jpg",import.meta.url).href,H=Ne.createContext({});function ea(){var l,m;const s=(m=(l=window.tsme_data)==null?void 0:l.celDashboard)==null?void 0:m.tiles,[i,o]=p.useState(s),{t:n}=C(),a=F();R(["DashboardMessages"]);const r=new O(a,{queryKey:["DashboardMessages"]}),{isFetched:c}=r.getCurrentResult(),u=L("DashboardQuery",({signal:w})=>T.get(M.CEL_DASHBOARD_TILES_LIST,{signal:w}),{onSuccess:({data:w})=>{o(w.content)},initialData:s,enabled:!i&&c}),b=Be();return e.jsxDEV(H.Provider,{value:{DashboardQuery:u},children:e.jsxDEV("main",{className:"dashboard container-fluid p-0",children:[e.jsxDEV(Ns,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:56,columnNumber:9},this),e.jsxDEV(He,{ellipseLarge:!0,ellipseImg:ws,overflowHidden:b,tag:"div",children:[e.jsxDEV("div",{className:"row pt-3 pt-lg-5",children:e.jsxDEV("div",{className:"col-12 mt-5",children:[e.jsxDEV(d.SzTypographie,{variant:"H1",size:"XL",color:"white",className:"text-uppercase",children:n("cel_dashboard.title_start")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:65,columnNumber:15},this),e.jsxDEV(d.SzTypographie,{variant:"H2",tag:"h1",size:"XL",color:"white",children:n("cel_dashboard.title_end")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:73,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:64,columnNumber:13},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:63,columnNumber:11},this),e.jsxDEV("div",{className:"tdb-container row",children:[e.jsxDEV("div",{className:"col-12 col-md-6 col-lg-4 pr-md-4 tdb-card-spacer",children:e.jsxDEV(ts,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:80,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:79,columnNumber:13},this),e.jsxDEV("div",{className:"col-12 col-md-6 col-lg-8 p-md-0",children:e.jsxDEV("div",{className:"row no-gutters tdb-card-container",children:[e.jsxDEV(os,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:84,columnNumber:17},this),e.jsxDEV(us,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:85,columnNumber:17},this),e.jsxDEV(ds,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:86,columnNumber:17},this),e.jsxDEV(ms,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:87,columnNumber:17},this),e.jsxDEV(bs,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:88,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:83,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:82,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:78,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:57,columnNumber:9},this),e.jsxDEV(qe,{needMessage:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:93,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:55,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/celDashboard/index.jsx",lineNumber:52,columnNumber:5},this)}export{H as CELDashboardContext,ea as default};
