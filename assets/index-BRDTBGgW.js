import{x as hs,y as dt,j as e,a as Ae,b}from"./index-BAjkLHRS.js";import{a as ct,R as me,r as N}from"./index-Djf8kdDz.js";import{B as ut}from"./index-BYcN8_oV.js";import{r as q}from"./index-BcQ2dhrg.js";import{M as xe,B as pt,bY as mt,O as ne,d as Y,e as St,a as X,o as ft,_ as ee,V as le,t as m,bZ as gt,b_ as wt,l as Ie,ag as Nt,b$ as ht,n as bt,S as ke,h as _e,c0 as he,Y as ue,k as Se,A as fe,x as He,W as $e,c1 as ps,c2 as ms,c3 as At,c4 as xt,c5 as we,$ as Os,c6 as vt,c7 as Et,c8 as yt,c9 as jt,ca as Vs,cb as Ls,cc as _t,q as Ss,cd as bs,ce as Ct,cf as Rs,L as As,cg as Dt,ch as Tt,m as xs,ci as It,bc as Ot,ap as Vt,u as Lt,cj as Rt,ck as kt,cl as zt,cm as Pt,cn as vs}from"./react-spring-web.esm-BXduOQz-.js";import{B as Gt}from"./index-GH-OyLMD.js";import{E as Bt}from"./index-CFKrvidp.js";import{u as Oe}from"./useInterweave-CyiDgcKg.js";import{u as F}from"./useTranslation-Cclpl_OC.js";import{F as Q}from"./FormError-B1L9786s.js";import{F as ie}from"./index-CMwthcxG.js";/* empty css              *//* empty css                         */import{p as Mt,I as Ft}from"./PhoneInput-B4baFBfA.js";import"./index-CCqWUn_M.js";import"./throttle-BPCfK1uX.js";import"./_baseIsEqual-8OBVMFu7.js";import"./iframe-fNLlJobk.js";import"../sb-preview/runtime.js";import"./Tips-RI6rFAQq.js";import"./light-bulb-shine-BN5xHApG.js";import"./createWithBsPrefix-OZLcO0Cc.js";import"./divWithClassName-Bip2r8Rx.js";var Ht=typeof Element<"u",Ut=typeof Map=="function",qt=typeof Set=="function",Kt=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Ge(s,a){if(s===a)return!0;if(s&&a&&typeof s=="object"&&typeof a=="object"){if(s.constructor!==a.constructor)return!1;var t,r,i;if(Array.isArray(s)){if(t=s.length,t!=a.length)return!1;for(r=t;r--!==0;)if(!Ge(s[r],a[r]))return!1;return!0}var o;if(Ut&&s instanceof Map&&a instanceof Map){if(s.size!==a.size)return!1;for(o=s.entries();!(r=o.next()).done;)if(!a.has(r.value[0]))return!1;for(o=s.entries();!(r=o.next()).done;)if(!Ge(r.value[1],a.get(r.value[0])))return!1;return!0}if(qt&&s instanceof Set&&a instanceof Set){if(s.size!==a.size)return!1;for(o=s.entries();!(r=o.next()).done;)if(!a.has(r.value[0]))return!1;return!0}if(Kt&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(a)){if(t=s.length,t!=a.length)return!1;for(r=t;r--!==0;)if(s[r]!==a[r])return!1;return!0}if(s.constructor===RegExp)return s.source===a.source&&s.flags===a.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof a.valueOf=="function")return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof a.toString=="function")return s.toString()===a.toString();if(i=Object.keys(s),t=i.length,t!==Object.keys(a).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(a,i[r]))return!1;if(Ht&&s instanceof Element)return!1;for(r=t;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&s.$$typeof)&&!Ge(s[i[r]],a[i[r]]))return!1;return!0}return s!==s&&a!==a}var Wt=function(a,t){try{return Ge(a,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Yt=ct(Wt);function te(){return te=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},te.apply(this,arguments)}function fs(s,a){s.prototype=Object.create(a.prototype),s.prototype.constructor=s,ls(s,a)}function ls(s,a){return ls=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},ls(s,a)}function Es(s,a){if(s==null)return{};var t,r,i={},o=Object.keys(s);for(r=0;r<o.length;r++)a.indexOf(t=o[r])>=0||(i[t]=s[t]);return i}var V={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},$t={rel:["amphtml","canonical","alternate"]},Qt={type:["application/ld+json"]},Xt={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},ys=Object.keys(V).map(function(s){return V[s]}),Ue={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Zt=Object.keys(Ue).reduce(function(s,a){return s[Ue[a]]=a,s},{}),De=function(s,a){for(var t=s.length-1;t>=0;t-=1){var r=s[t];if(Object.prototype.hasOwnProperty.call(r,a))return r[a]}return null},Jt=function(s){var a=De(s,V.TITLE),t=De(s,"titleTemplate");if(Array.isArray(a)&&(a=a.join("")),t&&a)return t.replace(/%s/g,function(){return a});var r=De(s,"defaultTitle");return a||r||void 0},er=function(s){return De(s,"onChangeClientState")||function(){}},ss=function(s,a){return a.filter(function(t){return t[s]!==void 0}).map(function(t){return t[s]}).reduce(function(t,r){return te({},t,r)},{})},sr=function(s,a){return a.filter(function(t){return t[V.BASE]!==void 0}).map(function(t){return t[V.BASE]}).reverse().reduce(function(t,r){if(!t.length)for(var i=Object.keys(r),o=0;o<i.length;o+=1){var l=i[o].toLowerCase();if(s.indexOf(l)!==-1&&r[l])return t.concat(r)}return t},[])},Ve=function(s,a,t){var r={};return t.filter(function(i){return!!Array.isArray(i[s])||(i[s]!==void 0&&console&&typeof console.warn=="function"&&console.warn("Helmet: "+s+' should be of type "Array". Instead found type "'+typeof i[s]+'"'),!1)}).map(function(i){return i[s]}).reverse().reduce(function(i,o){var l={};o.filter(function(f){for(var g,h=Object.keys(f),v=0;v<h.length;v+=1){var A=h[v],S=A.toLowerCase();a.indexOf(S)===-1||g==="rel"&&f[g].toLowerCase()==="canonical"||S==="rel"&&f[S].toLowerCase()==="stylesheet"||(g=S),a.indexOf(A)===-1||A!=="innerHTML"&&A!=="cssText"&&A!=="itemprop"||(g=A)}if(!g||!f[g])return!1;var w=f[g].toLowerCase();return r[g]||(r[g]={}),l[g]||(l[g]={}),!r[g][w]&&(l[g][w]=!0,!0)}).reverse().forEach(function(f){return i.push(f)});for(var n=Object.keys(l),d=0;d<n.length;d+=1){var c=n[d],u=te({},r[c],l[c]);r[c]=u}return i},[]).reverse()},tr=function(s,a){if(Array.isArray(s)&&s.length){for(var t=0;t<s.length;t+=1)if(s[t][a])return!0}return!1},ks=function(s){return Array.isArray(s)?s.join(""):s},ts=function(s,a){return Array.isArray(s)?s.reduce(function(t,r){return function(i,o){for(var l=Object.keys(i),n=0;n<l.length;n+=1)if(o[l[n]]&&o[l[n]].includes(i[l[n]]))return!0;return!1}(r,a)?t.priority.push(r):t.default.push(r),t},{priority:[],default:[]}):{default:s}},js=function(s,a){var t;return te({},s,((t={})[a]=void 0,t))},rr=[V.NOSCRIPT,V.SCRIPT,V.STYLE],rs=function(s,a){return a===void 0&&(a=!0),a===!1?String(s):String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},_s=function(s){return Object.keys(s).reduce(function(a,t){var r=s[t]!==void 0?t+'="'+s[t]+'"':""+t;return a?a+" "+r:r},"")},Cs=function(s,a){return a===void 0&&(a={}),Object.keys(s).reduce(function(t,r){return t[Ue[r]||r]=s[r],t},a)},Be=function(s,a){return a.map(function(t,r){var i,o=((i={key:r})["data-rh"]=!0,i);return Object.keys(t).forEach(function(l){var n=Ue[l]||l;n==="innerHTML"||n==="cssText"?o.dangerouslySetInnerHTML={__html:t.innerHTML||t.cssText}:o[n]=t[l]}),me.createElement(s,o)})},ce=function(s,a,t){switch(s){case V.TITLE:return{toComponent:function(){return i=a.titleAttributes,(o={key:r=a.title})["data-rh"]=!0,l=Cs(i,o),[me.createElement(V.TITLE,l,r)];var r,i,o,l},toString:function(){return function(r,i,o,l){var n=_s(o),d=ks(i);return n?"<"+r+' data-rh="true" '+n+">"+rs(d,l)+"</"+r+">":"<"+r+' data-rh="true">'+rs(d,l)+"</"+r+">"}(s,a.title,a.titleAttributes,t)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return Cs(a)},toString:function(){return _s(a)}};default:return{toComponent:function(){return Be(s,a)},toString:function(){return function(r,i,o){return i.reduce(function(l,n){var d=Object.keys(n).filter(function(f){return!(f==="innerHTML"||f==="cssText")}).reduce(function(f,g){var h=n[g]===void 0?g:g+'="'+rs(n[g],o)+'"';return f?f+" "+h:h},""),c=n.innerHTML||n.cssText||"",u=rr.indexOf(r)===-1;return l+"<"+r+' data-rh="true" '+d+(u?"/>":">"+c+"</"+r+">")},"")}(s,a,t)}}}},ds=function(s){var a=s.baseTag,t=s.bodyAttributes,r=s.encode,i=s.htmlAttributes,o=s.noscriptTags,l=s.styleTags,n=s.title,d=n===void 0?"":n,c=s.titleAttributes,u=s.linkTags,f=s.metaTags,g=s.scriptTags,h={toComponent:function(){},toString:function(){return""}};if(s.prioritizeSeoTags){var v=function(A){var S=A.linkTags,w=A.scriptTags,p=A.encode,y=ts(A.metaTags,Xt),T=ts(S,$t),L=ts(w,Qt);return{priorityMethods:{toComponent:function(){return[].concat(Be(V.META,y.priority),Be(V.LINK,T.priority),Be(V.SCRIPT,L.priority))},toString:function(){return ce(V.META,y.priority,p)+" "+ce(V.LINK,T.priority,p)+" "+ce(V.SCRIPT,L.priority,p)}},metaTags:y.default,linkTags:T.default,scriptTags:L.default}}(s);h=v.priorityMethods,u=v.linkTags,f=v.metaTags,g=v.scriptTags}return{priority:h,base:ce(V.BASE,a,r),bodyAttributes:ce("bodyAttributes",t,r),htmlAttributes:ce("htmlAttributes",i,r),link:ce(V.LINK,u,r),meta:ce(V.META,f,r),noscript:ce(V.NOSCRIPT,o,r),script:ce(V.SCRIPT,g,r),style:ce(V.STYLE,l,r),title:ce(V.TITLE,{title:d,titleAttributes:c},r)}},Pe=[],cs=function(s,a){var t=this;a===void 0&&(a=typeof document<"u"),this.instances=[],this.value={setHelmet:function(r){t.context.helmet=r},helmetInstances:{get:function(){return t.canUseDOM?Pe:t.instances},add:function(r){(t.canUseDOM?Pe:t.instances).push(r)},remove:function(r){var i=(t.canUseDOM?Pe:t.instances).indexOf(r);(t.canUseDOM?Pe:t.instances).splice(i,1)}}},this.context=s,this.canUseDOM=a,a||(s.helmet=ds({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},zs=me.createContext({}),ar=q.shape({setHelmet:q.func,helmetInstances:q.shape({get:q.func,add:q.func,remove:q.func})}),ir=typeof document<"u",Re=function(s){function a(t){var r;return(r=s.call(this,t)||this).helmetData=new cs(r.props.context,a.canUseDOM),r}return fs(a,s),a.prototype.render=function(){return me.createElement(zs.Provider,{value:this.helmetData.value},this.props.children)},a}(N.Component);Re.canUseDOM=ir,Re.propTypes={context:q.shape({helmet:q.shape()}),children:q.node.isRequired},Re.defaultProps={context:{}},Re.displayName="HelmetProvider";var Ce=function(s,a){var t,r=document.head||document.querySelector(V.HEAD),i=r.querySelectorAll(s+"[data-rh]"),o=[].slice.call(i),l=[];return a&&a.length&&a.forEach(function(n){var d=document.createElement(s);for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(c==="innerHTML"?d.innerHTML=n.innerHTML:c==="cssText"?d.styleSheet?d.styleSheet.cssText=n.cssText:d.appendChild(document.createTextNode(n.cssText)):d.setAttribute(c,n[c]===void 0?"":n[c]));d.setAttribute("data-rh","true"),o.some(function(u,f){return t=f,d.isEqualNode(u)})?o.splice(t,1):l.push(d)}),o.forEach(function(n){return n.parentNode.removeChild(n)}),l.forEach(function(n){return r.appendChild(n)}),{oldTags:o,newTags:l}},as=function(s,a){var t=document.getElementsByTagName(s)[0];if(t){for(var r=t.getAttribute("data-rh"),i=r?r.split(","):[],o=[].concat(i),l=Object.keys(a),n=0;n<l.length;n+=1){var d=l[n],c=a[d]||"";t.getAttribute(d)!==c&&t.setAttribute(d,c),i.indexOf(d)===-1&&i.push(d);var u=o.indexOf(d);u!==-1&&o.splice(u,1)}for(var f=o.length-1;f>=0;f-=1)t.removeAttribute(o[f]);i.length===o.length?t.removeAttribute("data-rh"):t.getAttribute("data-rh")!==l.join(",")&&t.setAttribute("data-rh",l.join(","))}},Ds=function(s,a){var t=s.baseTag,r=s.htmlAttributes,i=s.linkTags,o=s.metaTags,l=s.noscriptTags,n=s.onChangeClientState,d=s.scriptTags,c=s.styleTags,u=s.title,f=s.titleAttributes;as(V.BODY,s.bodyAttributes),as(V.HTML,r),function(A,S){A!==void 0&&document.title!==A&&(document.title=ks(A)),as(V.TITLE,S)}(u,f);var g={baseTag:Ce(V.BASE,t),linkTags:Ce(V.LINK,i),metaTags:Ce(V.META,o),noscriptTags:Ce(V.NOSCRIPT,l),scriptTags:Ce(V.SCRIPT,d),styleTags:Ce(V.STYLE,c)},h={},v={};Object.keys(g).forEach(function(A){var S=g[A],w=S.newTags,p=S.oldTags;w.length&&(h[A]=w),p.length&&(v[A]=g[A].oldTags)}),a&&a(),n(s,h,v)},Le=null,qe=function(s){function a(){for(var r,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(r=s.call.apply(s,[this].concat(o))||this).rendered=!1,r}fs(a,s);var t=a.prototype;return t.shouldComponentUpdate=function(r){return!dt(r,this.props)},t.componentDidUpdate=function(){this.emitChange()},t.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},t.emitChange=function(){var r,i,o=this.props.context,l=o.setHelmet,n=null,d=(r=o.helmetInstances.get().map(function(c){var u=te({},c.props);return delete u.context,u}),{baseTag:sr(["href"],r),bodyAttributes:ss("bodyAttributes",r),defer:De(r,"defer"),encode:De(r,"encodeSpecialCharacters"),htmlAttributes:ss("htmlAttributes",r),linkTags:Ve(V.LINK,["rel","href"],r),metaTags:Ve(V.META,["name","charset","http-equiv","property","itemprop"],r),noscriptTags:Ve(V.NOSCRIPT,["innerHTML"],r),onChangeClientState:er(r),scriptTags:Ve(V.SCRIPT,["src","innerHTML"],r),styleTags:Ve(V.STYLE,["cssText"],r),title:Jt(r),titleAttributes:ss("titleAttributes",r),prioritizeSeoTags:tr(r,"prioritizeSeoTags")});Re.canUseDOM?(i=d,Le&&cancelAnimationFrame(Le),i.defer?Le=requestAnimationFrame(function(){Ds(i,function(){Le=null})}):(Ds(i),Le=null)):ds&&(n=ds(d)),l(n)},t.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},t.render=function(){return this.init(),null},a}(N.Component);qe.propTypes={context:ar.isRequired},qe.displayName="HelmetDispatcher";var nr=["children"],or=["children"],Me=function(s){function a(){return s.apply(this,arguments)||this}fs(a,s);var t=a.prototype;return t.shouldComponentUpdate=function(r){return!Yt(js(this.props,"helmetData"),js(r,"helmetData"))},t.mapNestedChildrenToProps=function(r,i){if(!i)return null;switch(r.type){case V.SCRIPT:case V.NOSCRIPT:return{innerHTML:i};case V.STYLE:return{cssText:i};default:throw new Error("<"+r.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},t.flattenArrayTypeChildren=function(r){var i,o=r.child,l=r.arrayTypeChildren;return te({},l,((i={})[o.type]=[].concat(l[o.type]||[],[te({},r.newChildProps,this.mapNestedChildrenToProps(o,r.nestedChildren))]),i))},t.mapObjectTypeChildren=function(r){var i,o,l=r.child,n=r.newProps,d=r.newChildProps,c=r.nestedChildren;switch(l.type){case V.TITLE:return te({},n,((i={})[l.type]=c,i.titleAttributes=te({},d),i));case V.BODY:return te({},n,{bodyAttributes:te({},d)});case V.HTML:return te({},n,{htmlAttributes:te({},d)});default:return te({},n,((o={})[l.type]=te({},d),o))}},t.mapArrayTypeChildrenToProps=function(r,i){var o=te({},i);return Object.keys(r).forEach(function(l){var n;o=te({},o,((n={})[l]=r[l],n))}),o},t.warnOnInvalidChildren=function(r,i){return hs(ys.some(function(o){return r.type===o}),typeof r.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+ys.join(", ")+" are allowed. Helmet does not support rendering <"+r.type+"> elements. Refer to our API for more information."),hs(!i||typeof i=="string"||Array.isArray(i)&&!i.some(function(o){return typeof o!="string"}),"Helmet expects a string as a child of <"+r.type+">. Did you forget to wrap your children in braces? ( <"+r.type+">{``}</"+r.type+"> ) Refer to our API for more information."),!0},t.mapChildrenToProps=function(r,i){var o=this,l={};return me.Children.forEach(r,function(n){if(n&&n.props){var d=n.props,c=d.children,u=Es(d,nr),f=Object.keys(u).reduce(function(h,v){return h[Zt[v]||v]=u[v],h},{}),g=n.type;switch(typeof g=="symbol"?g=g.toString():o.warnOnInvalidChildren(n,c),g){case V.FRAGMENT:i=o.mapChildrenToProps(c,i);break;case V.LINK:case V.META:case V.NOSCRIPT:case V.SCRIPT:case V.STYLE:l=o.flattenArrayTypeChildren({child:n,arrayTypeChildren:l,newChildProps:f,nestedChildren:c});break;default:i=o.mapObjectTypeChildren({child:n,newProps:i,newChildProps:f,nestedChildren:c})}}}),this.mapArrayTypeChildrenToProps(l,i)},t.render=function(){var r=this.props,i=r.children,o=Es(r,or),l=te({},o),n=o.helmetData;return i&&(l=this.mapChildrenToProps(i,l)),!n||n instanceof cs||(n=new cs(n.context,n.instances)),n?me.createElement(qe,te({},l,{context:n.value,helmetData:void 0})):me.createElement(zs.Consumer,null,function(d){return me.createElement(qe,te({},l,{context:d}))})},a}(N.Component);Me.propTypes={base:q.object,bodyAttributes:q.object,children:q.oneOfType([q.arrayOf(q.node),q.node]),defaultTitle:q.string,defer:q.bool,encodeSpecialCharacters:q.bool,htmlAttributes:q.object,link:q.arrayOf(q.object),meta:q.arrayOf(q.object),noscript:q.arrayOf(q.object),onChangeClientState:q.func,script:q.arrayOf(q.object),style:q.arrayOf(q.object),title:q.string,titleAttributes:q.object,titleTemplate:q.string,prioritizeSeoTags:q.bool,helmetData:q.object},Me.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},Me.displayName="Helmet";const lr=({robots:s})=>e.jsxDEV(Me,{children:s&&e.jsxDEV("meta",{name:"robots",content:s},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Seo/index.tsx",lineNumber:9,columnNumber:29},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Seo/index.tsx",lineNumber:9,columnNumber:10},void 0),re=me.createContext({});function dr({children:s,initialValue:a}){return e.jsxDEV(re.Provider,{value:a,children:s},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/diagAssContext.tsx",lineNumber:25,columnNumber:5},this)}function cr(s,a){const t=[...s.steps];switch(a.type){case"activeStep":return{...s,currentStep:a.payload};case"lockStep":const r={...t[a.payload.index]};return r.locked=!0,t[a.payload.index]=r,{...s,steps:t};case"reset":return{...Ys};case"setDisplay":return{...s,displayList:a.payload};case"setDisplayError":return{...s,displayError:a.payload};case"showHistory":return{...s,showHistory:a.payload};case"step":return t[a.payload.index]=a.payload.step,{...s,steps:t};case"steps":return{...s,steps:a.payload};default:throw new Error("Not a reducer")}}function gs({children:s,title:a,subtitle:t,displayBadge:r=!1,index:i,innerPadding:o=!0}){const d=Ae("step-content",{"mt-2":!a&&t,"mt-3":a&&!t}),c=Ae("bg-white rounded-3 position-relative mx-auto",{"px-3 py-4 px-lg-6 py-lg-5":o});return e.jsxDEV("div",{id:"diagAssContainer",className:c,style:{maxWidth:750},children:[r&&e.jsxDEV(Gt,{borderColor:"expert-blue",className:"bg-blue-1 mb-2",textWeight:"bold",textSize:"M",textClassName:"text-white",children:[i," / ",6]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:45,columnNumber:9},this),a&&e.jsxDEV(b.SzTypographie,{variant:"H3",weight:"medium",size:"L",className:"mb-2",children:a},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:56,columnNumber:9},this),t&&e.jsxDEV(b.SzTypographie,{className:"mb-2 text-dark",children:t},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:61,columnNumber:9},this),e.jsxDEV("div",{className:d,children:s},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:63,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:39,columnNumber:5},this)}function Qe({className:s,steps:a,isStepList:t,icons:r}){const{transform:i}=Oe();return e.jsxDEV("div",{className:s,children:a.map(({summary:o,link:l,locked:n},d)=>{const c=Ae("row no-gutters align-items-center",{"pt-3 mt-3 border-top border-1 border-gray-200":0<d}),u=Ae("col-2  text-lg-right",{"offset-2 offset-lg-0":t});return e.jsxDEV("div",{className:c,"data-cy":"stepHistory",children:[t&&e.jsxDEV("div",{className:"col-2 col-lg-1",children:r&&r[d]?e.jsxDEV(b.SzIcon,{className:"mr-3",variant:"line",icon:r[d]},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:41,columnNumber:19},this):e.jsxDEV(b.SzTypographie,{className:"step-list inline-flex mr-3",weight:"bold",children:d+1},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:43,columnNumber:19},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:39,columnNumber:15},this),e.jsxDEV("div",{className:t?"col-10 col-lg-9":"col-12 col-lg-10",children:e.jsxDEV(b.SzTypographie,{className:"m-0 text-dark",children:e.jsxDEV(xe,{content:o,transform:i},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:56,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:55,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:52,columnNumber:13},this),e.jsxDEV("div",{className:u,children:!n&&e.jsxDEV(pt,{className:"p-0 sz-typo-caption md",onClick:l==null?void 0:l.onClick,children:l==null?void 0:l.label},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:61,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:59,columnNumber:13},this)]},`stepsHistory-${d}`,!0,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:37,columnNumber:11},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:26,columnNumber:5},this)}function ur({currentStep:s}){const{t:a}=F(),{state:t}=N.useContext(re),{steps:r}=t,[i,o]=N.useState(""),l=[{fields:{title:a("diagAss.step.step0.history.title"),content:e.jsxDEV(Qe,{steps:r.slice(0,s-1)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/stepper/history.tsx",lineNumber:18,columnNumber:18},this)}}],n=d=>{o(d)};return e.jsxDEV("div",{style:{maxWidth:750,margin:"auto"},children:e.jsxDEV(Bt,{data:l,className:"rounded-3 mb-3",activeKey:i,setCurrentKey:n,toggle:!1,borderBottom:!1,buttonArrow:!0,isHistory:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/stepper/history.tsx",lineNumber:29,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/stepper/history.tsx",lineNumber:28,columnNumber:5},this)}function ze(){return{setSummaryStep1:(r,i,o)=>{let l=[];return l.push(i),o&&o!==""&&l.push(o),l.push(r),{label:"diagAss.stepper.step1",values:{value:l.join(", ")}}},setSummaryStep2:(r,i)=>({label:"diagAss.stepper.step2",values:{value:i(`diagAss.step.step2.sanitize.radioCard_${r}.label`)}}),setSummaryStep3:(r,i,o,l)=>({label:"diagAss.stepper.step3",values:{value1:`${r} ${i}`,value2:l,value3:o,context:l}})}}function Ps(s,a){return`${s}/${a}`}function Xe(s){return s.split("/",2)}function ye(s,a){return[s,a].filter(t=>t).join(" ")}function Gs(s){return s.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-zA-Z0-9 ]/g,"").trim().replace(/ /g,"_").toLowerCase()}mt(Y,"textValid",function(s){const a=/^[aàâäAæÆbBcCçdDeéèêëEfFgGhHiïîIjJkKlLmMnNñoôöOœŒpPqQrRsStTuùûüUvVwWxXyÿYzZ\-' ]*$/;return this.test("text-valid",s,t=>a.test(t))});const pr=ne({selectOrigin:Y().required("diagAss.error.select_option")}),Bs=ne({ownerLoginOwnerHome:Y().required("diagAss.error.select_option")}),mr=Bs.shape({ownerLoginSuezUser:Y().required("diagAss.error.select_option")}),Sr=ne({profile:Y().required("diagAss.error.mandatory_field")}),is=ne({city:Y().required("diagAss.step.step1.create.error_field")}),fr=ne({city:Y().required("diagAss.step.step1.create.error_field"),address:Y().required("diagAss.step.step1.create.error_field"),additionalAddress:Y()}),gr=ne({addressId:Y().required("diagAss.error.select_option")}),wr=ne({radioBtn:Y().required("diagAss.error.select_option")}),Nr=ne({civilite:Y().required("diagAss.error.mandatory_field"),prenom:Y().textValid("diagAss.error.text_invalid").required("diagAss.error.mandatory_field"),nom:Y().textValid("diagAss.error.text_invalid").required("diagAss.error.mandatory_field"),email:Y().email("diagAss.error.email_invalid").required("diagAss.error.mandatory_field")}),hr=ne({contactId:Y().required("diagAss.error.select_option")}),br=ne({serviceId:Y().required("diagAss.error.select_option")}),Ar=ne().shape({waterSupplied:Y().required("diagAss.error.select_option")}),xr={city:Y().required("diagAss.error.mandatory_field")},vr={address:Y().required("diagAss.error.mandatory_field")},Er={city:Y().required("diagAss.error.mandatory_field"),zip:Y().required("diagAss.error.mandatory_field"),country:Y().required("diagAss.error.mandatory_field"),address:Y().required("diagAss.error.mandatory_field")},yr=ne({confirmConditions:St().oneOf([!0],"diagAss.step.confirm.conditions.error")});function jr(){const s=X(),a=ft(),{t}=F(),{track:r}=ee(),i="particular",o="professional",l="particulier",n="professionnel",d=[{label:t("particular"),value:i},{label:t("professional"),value:o}],c=({profile:f})=>{const{value:g,label:h}=f;r("DIAGASS_1",{profil_demandeur:h===t("particular")?l:n}),o===g?s.push(m.DIAG_ASS.STEP_0_PRO_NOT_ELIGIBLE):s.push(m.DIAG_ASS.STEP_0_SELECTION_ORIGIN)},u={label:t("diagAss.step.step0.start.submit"),align:"right"};return e.jsxDEV(le,{initialValues:{profile:""},validateOnBlur:!0,validationSchema:Sr,validateOnMount:!1,onSubmit:c,children:({handleSubmit:f,setFieldValue:g,values:h,errors:v})=>{const A=S=>{g("profile",S)};return e.jsxDEV("form",{id:"diagAssStart",onSubmit:f,children:[e.jsxDEV("label",{id:"profile-aria-label",className:"mb-2",htmlFor:"profileInput",children:e.jsxDEV(b.SzTypographie,{tag:"span",children:t("diagAss.step.step0.start.profile_label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:77,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:72,columnNumber:13},this),e.jsxDEV(b.SzSelect,{id:"profile",name:"profile",inputId:"profileInput",className:a?"w-75":"","aria-labelledby":"profile-aria-label",placeholder:t("diagAss.step.step0.start.profile_placeholder"),options:d,value:h.profile,onChange:A,isSearchable:!1},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:81,columnNumber:13},this),e.jsxDEV(Q,{field:"profile",customDisplay:v.profile},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:93,columnNumber:13},this),e.jsxDEV("div",{className:"pt-1",children:e.jsxDEV(ie,{next:u},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:95,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:71,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:56,columnNumber:5},this)}function Ne(s){const{title:a,body:t,next:r,previous:i}=s,{transform:o}=Oe(),{t:l}=F(),n=X(),[d,c]=N.useState(!1),u=()=>{c(!0),n.push(m.CUSTOMER_SERVICE)},f={label:l("diagAss.error.contact_customer_service"),loader:d,align:"right",onClick:u,disabled:!1},g=r??f;return e.jsxDEV(gs,{title:a??l("diagAss.error.sorry"),subtitle:e.jsxDEV(xe,{content:t,transform:o},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/error.tsx",lineNumber:42,columnNumber:17},this),children:e.jsxDEV(ie,{previous:{...i,disabled:!1},next:g},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/error.tsx",lineNumber:44,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/error.tsx",lineNumber:40,columnNumber:5},this)}function _r(){const{t:s}=F(),{track:a}=ee(),[t,r]=N.useState(!1),i=()=>{a("DIAGASS_2",{motif_contact_client:gt}),r(!0),window.location.href=m.CUSTOMER_SERVICE},o={label:s("diagAss.error.contact_customer_service"),loader:t,align:"right",onClick:i,disabled:!1};return e.jsxDEV(Ne,{body:s("diagAss.step.step0.pro_not_eligible.body"),next:o},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/ProNotEligible.tsx",lineNumber:31,columnNumber:5},this)}function Cr(){const s=X(),{t:a}=F(),{track:t}=ee(),r=({selectOrigin:o})=>{t("DIAGASS_3",{origine_demande:o?a("operator"):a("particular").toLowerCase()}),o?s.push(m.DIAG_ASS.STEP_0_ERROR_REQUEST_ORIGIN):s.push(m.DIAG_ASS.STEP_0_OWNER_LOGIN)},i={label:a("validate"),align:"right"};return e.jsxDEV(le,{initialValues:{selectOrigin:""},validateOnBlur:!0,validationSchema:pr,onSubmit:r,children:({handleSubmit:o,setFieldValue:l,values:n,errors:d})=>{const c=u=>{l("selectOrigin",!!+u.target.value)};return e.jsxDEV("form",{id:"diagAssSelectionOrigin",onSubmit:o,children:[e.jsxDEV("div",{className:"d-flex flex-column",children:[e.jsxDEV(b.SzRadio,{className:"mb-2",id:"selectionOriginNo",name:"selectOrigin",label:a("diagAss.step.step0.selection_origin.choiceYourOwnInitiative"),value:"0",checked:n.selectOrigin!==""&&!n.selectOrigin,onChange:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:53,columnNumber:15},this),e.jsxDEV(b.SzRadio,{id:"selectionOriginYes",name:"selectOrigin",label:a("diagAss.step.step0.selection_origin.choiceSanitationCompany"),value:"1",checked:n.selectOrigin!==""&&!!n.selectOrigin,onChange:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:64,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:52,columnNumber:13},this),e.jsxDEV(Q,{field:"selectOrigin",customDisplay:d.selectOrigin},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:75,columnNumber:13},this),e.jsxDEV(ie,{next:i},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:79,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:51,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:37,columnNumber:5},this)}function Ze(s){const{t:a}=F(),{track:t}=ee(),[r,i]=N.useState(!1),o=()=>{t("DIAGASS_2",{motif_contact_client:s}),i(!0),window.location.href=m.CUSTOMER_SERVICE};return{label:a("diagAss.error.contact_customer_service"),loader:r,align:"right",onClick:o,disabled:!1}}function Dr(){const{t:s}=F(),a=Ze(wt);return e.jsxDEV(Ne,{body:s("diagAss.step.step0.error_request_origin.body"),next:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/ErrorRequestOrigin.tsx",lineNumber:12,columnNumber:5},this)}const ws=me.createContext(null);function Tr(){const s=X(),{t:a}=F(),{track:t}=ee(),[r,i]=N.useState(!1),[o,l]=N.useState(!0),[n,d]=N.useState({}),{isConnected:c}=window.tsme_data,u={label:a("next"),align:"right",arrow:!0},f={label:a("validate"),align:"right"},[g,h]=N.useState(u);N.useEffect(()=>{d(r&&!c?mr:Bs)},[r]);const v=({ownerLoginOwnerHome:S,ownerLoginSuezUser:w})=>{S||(t("DIAGASS_6"),s.push(m.DIAG_ASS.STEP_0_ERROR_NOT_OWNER)),S&&(!w||c)&&(t("DIAGASS_7"),s.push(m.DIAG_ASS.STEP_1))},A={ownerLoginOwnerHome:"",ownerLoginSuezUser:""};return e.jsxDEV(ws.Provider,{value:{setShowFormButtons:l,setShowSuezUser:i,stepOwnerLoginSchema:n,setStepOwnerLoginSchema:d,nextButton:g,setNextButton:h,nextButtonDefault:u,nextButtonValidate:f,isConnected:c},children:e.jsxDEV(le,{initialValues:A,validateOnBlur:!0,validationSchema:n,onSubmit:v,children:({handleSubmit:S})=>e.jsxDEV("form",{id:"diagAssOwnerLogin",onSubmit:S,children:[e.jsxDEV(Ir,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:99,columnNumber:15},this),r&&!c&&e.jsxDEV(Or,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:100,columnNumber:48},this),o&&e.jsxDEV(ie,{next:g},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:101,columnNumber:35},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:98,columnNumber:13},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:90,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:77,columnNumber:5},this)}function Ir(){const{setShowSuezUser:s,setShowFormButtons:a,setNextButton:t,nextButtonValidate:r,nextButtonDefault:i,isConnected:o}=N.useContext(ws),l=Ie(),{values:n,setFieldValue:d,errors:c}=l,{t:u}=F(),f=g=>{const h=!!parseInt(g.target.value);d("ownerLoginSuezUser","",!1),d("ownerLoginOwnerHome",h),s(h),a(!0),t(h&&!o?i:r)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(b.SzTypographie,{size:"XL",children:u("diagAss.step.step0.owner_login.owner_home")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:136,columnNumber:7},this),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(b.SzRadio,{id:"ownerLoginOwnerHomeYes",name:"ownerLoginOwnerHome",label:u("yes"),value:"1",checked:n.ownerLoginOwnerHome!==""&&!!n.ownerLoginOwnerHome,onChange:f},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:140,columnNumber:9},this),e.jsxDEV(b.SzRadio,{className:"ml-3",id:"ownerLoginOwnerHomeNo",name:"ownerLoginOwnerHome",label:u("no"),value:"0",checked:n.ownerLoginOwnerHome!==""&&!n.ownerLoginOwnerHome,onChange:f},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:150,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:139,columnNumber:7},this),e.jsxDEV(Q,{field:"ownerLoginOwnerHome",customDisplay:c.ownerLoginOwnerHome},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:162,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:135,columnNumber:5},this)}function Or(){const{setShowFormButtons:s,setNextButton:a,nextButtonDefault:t,nextButtonValidate:r}=N.useContext(ws),i=Ie(),{values:o,setFieldValue:l,errors:n}=i,{t:d}=F(),{track:c}=ee(),u=X(),[f,g]=N.useState(!1),{brand:h}=window.tsme_data,v=p=>{const y=!!parseInt(p.target.value);l("ownerLoginSuezUser",y),s(!y),a(y?t:r)},A=()=>{c("DIAGASS_5"),g(!0)},S=()=>{c("DIAGASS_4"),u.push(m.SIGN_UP+"?redirect=diagass")},w=()=>{g(!1)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(b.SzModal,{handleClose:w,show:f,border:"smooth",centered:!0,fullscreen:"md",size:"md",backdrop:!0,title:"",children:e.jsxDEV(Nt,{className:"px-3 py-3 login-menu no-gutters",title:d("signIn.hasAccount.button_submit"),submitText:d("signIn.hasAccount.button_submit"),targetPath:m.DIAG_ASS.STEP_1,usernameInputId:"username-popin",passwordInputId:"password-popin",variant:"redesign",isModal:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:221,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:211,columnNumber:7},this),e.jsxDEV("div",{className:"mt-5",children:[e.jsxDEV(b.SzTypographie,{size:"XL",children:d("diagAss.step.step0.owner_login.suez_user",{brand:h.name})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:233,columnNumber:9},this),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(b.SzRadio,{id:"ownerLoginSuezUserYes",name:"ownerLoginSuezUser",label:d("yes"),value:"1",checked:o.ownerLoginSuezUser!==""&&!!o.ownerLoginSuezUser,onChange:v},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:237,columnNumber:11},this),e.jsxDEV(b.SzRadio,{className:"ml-3",id:"ownerLoginSuezUserNo",name:"ownerLoginSuezUser",label:d("no"),value:"0",checked:o.ownerLoginSuezUser!==""&&!o.ownerLoginSuezUser,onChange:v},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:247,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:236,columnNumber:9},this),e.jsxDEV(Q,{field:"ownerLoginSuezUser",customDisplay:n.ownerLoginSuezUser},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:259,columnNumber:9},this),!!o.ownerLoginSuezUser&&e.jsxDEV("div",{className:"mt-4 mt-lg-5",children:[e.jsxDEV(b.SzTypographie,{children:d("diagAss.step.step0.owner_login.suez_user_login",{brand:h.name})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:265,columnNumber:13},this),e.jsxDEV("div",{className:"row",children:[e.jsxDEV("div",{className:"col-12 col-lg-auto order-lg-1",children:e.jsxDEV(b.SzButton,{id:"OwnerLogin",variant:"contained",border:"soft",onClick:A,children:d("diagAss.step.step0.owner_login.login")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:272,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:271,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-auto order-lg-0 mt-2 mt-lg-0",children:e.jsxDEV(b.SzButton,{id:"OwnerRegister",variant:"outlined",border:"soft",onClick:S,children:d("diagAss.step.step0.owner_login.register")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:282,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:281,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:270,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:264,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:232,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:210,columnNumber:5},this)}function Vr(){const s=X(),{t:a}=F(),{track:t}=ee(),[r,i]=N.useState(!1),o=()=>{i(!0),t("DIAGASS_8",{motif_retour_accueil:ht}),s.push(m.HOME)},l={label:a("diagAss.error.back_home"),onClick:o,loader:r,align:"right"};return e.jsxDEV(Ne,{body:a("diagAss.step.step0.error_not_owner.body"),next:l},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/ErrorNotOwner.tsx",lineNumber:33,columnNumber:5},this)}const Ms=bt.input`
  appearance: none;
  width: 24px;
  height: 24px;
  border: 2px solid var(--blue-1);
  border-radius: 50%;
  &:checked {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    &::after {
      content: '';
      position: absolute;
      width: 8px;
      height: 8px;
      background-color: var(--blue-1);
      border-radius: 50%;
    }
  }
`;Ms.defaultProps={type:"radio"};const Lr=({className:s,children:a,label:t,onChange:r,checked:i,name:o,value:l,id:n,imgSrc:d,radioPosition:c})=>{const u=Ae("ml-auto d-flex",{"align-items-center":c==="center","align-items-end":c==="bottom"}),f=Ae("cursor-pointer bg-white row no-gutters rounded-2 border border-1 p-3 p-lg-4 w-100",{"border-card-disabled":!i,"border-primary-dark":i},s),g=Ae("d-flex col-12",{"col-lg-9":d}),h=N.useRef(),v=()=>{const A=new InputEvent("change",{bubbles:!0});h.current&&(h.current.dispatchEvent(A),r&&r(A))};return e.jsxDEV("div",{className:f,onClick:v,style:{maxWidth:515},children:[d&&e.jsxDEV("div",{className:"d-flex col-12 col-lg-3 mb-3 mr-auto",style:{flex:0},children:e.jsxDEV("img",{src:d,width:80,height:80,alt:""},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:85,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:81,columnNumber:9},void 0),e.jsxDEV("div",{className:g,children:[e.jsxDEV("div",{className:"mr-3",children:[t&&e.jsxDEV("label",{className:"m-0 cursor-pointer",htmlFor:n||o,children:e.jsxDEV(b.SzTypographie,{variant:"H5",tag:"span",className:"text-uppercase",children:t},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:93,columnNumber:15},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:92,columnNumber:13},void 0),a]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:90,columnNumber:9},void 0),e.jsxDEV("div",{className:u,children:e.jsxDEV(Ms,{ref:h,className:"ml-auto",onChange:r,name:o,id:n||o,value:l,checked:i},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:101,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:100,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:89,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:75,columnNumber:5},void 0)},je=Lr;function Ns({count:s=1}){return e.jsxDEV(e.Fragment,{children:Array.from({length:s},(a,t)=>e.jsxDEV("div",{className:"row no-gutters rounded-2 border border-1 p-3 p-lg-4 w-100 mb-3",style:{maxWidth:515},children:[e.jsxDEV("div",{className:"col-8",children:[e.jsxDEV(ke,{height:40,className:"mb-3"},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:14,columnNumber:13},this),e.jsxDEV(ke,{count:2,className:"ml-4"},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:15,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:13,columnNumber:11},this),e.jsxDEV("div",{className:"col-1 offset-3 align-self-center",children:e.jsxDEV(ke,{height:24,width:24,circle:!0,className:"ml-auto"},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:18,columnNumber:13},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:17,columnNumber:11},this)]},t,!0,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:8,columnNumber:9},this))},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:6,columnNumber:5},this)}function Rr(s){var _;const{currentStep:a}=s,t=X(),{setSummaryStep1:r}=ze(),{t:i}=F(),{dispatch:o,extraFn:l,state:n}=N.useContext(re),{saveStep:d}=l,{steps:c}=n,u=a-1,f=(_=c[u])==null?void 0:_.values,[g,h]=N.useState(!1),{isConnected:v}=window.tsme_data,{track:A}=ee();N.useEffect(()=>{o({type:"activeStep",payload:1}),v||t.push(m.DIAG_ASS.STEP_1_CREATE)},[]);const{data:S,isLoading:w}=_e("addressList",()=>Se.get(fe.DIAG_ASS.SITE_ADDRESS),{onSuccess:({data:C})=>{const{message:x}=C;ue.KO_ADRESSE===x&&t.push(m.DIAG_ASS.STEP_1_CREATE)},onError:()=>{t.push(m.DIAG_ASS.TECHNICAL_ERROR)},enabled:v}),{content:p=[]}=(S==null?void 0:S.data)||{},y=()=>{h(!0),t.push(m.DIAG_ASS.STEP_0_START)},T={label:i("go_back"),arrow:!0,enabled:!0,loader:g,onClick:y},L={label:i("validate"),align:"right"},k=C=>{const{city:x,address:D,additionalAddress:B}=C,{label:H,values:R}=r(x,D,B);return i(H,R)},E=C=>{const{addressId:x}=C;if(he===x)t.push({pathname:m.DIAG_ASS.STEP_1_CREATE});else{const D=k(C);d(m.DIAG_ASS.STEP_1,C,D),t.push(m.DIAG_ASS.STEP_2)}},I={addressId:(f==null?void 0:f.addressId)??"",city:(f==null?void 0:f.city)??"",address:(f==null?void 0:f.address)??"",additionalAddress:(f==null?void 0:f.additionalAddress)??""};return e.jsxDEV(le,{initialValues:I,validateOnBlur:!0,validateOnChange:!1,validationSchema:gr,onSubmit:E,children:({handleSubmit:C,setFieldValue:x,values:D,errors:B})=>{const H=O=>{const{addressId:z}=D;if(A("DIAGASS_9"),he!==z){const[U,K]=Xe(z),j=p.find(P=>P.iliadeSiteId===U&&P.odysseAccountId===K);j&&(x("city",ye(j.zipCode,j.city)),x("address",ye(j.streetNumber,j.address)),x("additionalAddress",j.additionalAddress))}C(O)},R=O=>{x("city",""),x("address",""),x("additionalAddress",""),x("addressId",O.target.value,!0)};return e.jsxDEV("form",{id:"diagAssAddress",onSubmit:H,children:[e.jsxDEV(b.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:i("diagAss.step.step1.list.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:164,columnNumber:13},this),e.jsxDEV("div",{className:"my-3 mt-lg-4",children:w?e.jsxDEV(Ns,{count:3},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:169,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{"data-cy":"address-list",className:"mh-lg",children:p.map(({contractName:O,iliadeSiteId:z,odysseAccountId:U,address:K,streetNumber:j,additionalAddress:P,zipCode:W,city:Z},oe)=>{const ae=Ps(z,U),G=`address-${ae}`;return e.jsxDEV(je,{id:G,name:"addressId",className:oe===p.length-1?"mb-0":"mb-3",label:O??void 0,value:ae,checked:ae===D.addressId,onChange:R,radioPosition:"center",children:[e.jsxDEV(b.SzTypographie,{className:"mb-3",variant:"caption",size:"M",color:"disabled",weight:"regular",children:[i("num")," ",U]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:206,columnNumber:29},this),e.jsxDEV(b.SzData,{icon:"pin-location-1",variant:"line",className:"d-lg-flex align-items-center",children:e.jsxDEV(b.SzTypographie,{className:"mb-0",weight:"regular",children:[j," ",K,P&&`, ${P}`,", ",W," ",Z]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:220,columnNumber:31},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:215,columnNumber:29},this)]},G,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:193,columnNumber:27},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:172,columnNumber:19},this),e.jsxDEV(je,{id:"address-other",name:"addressId",className:"my-3",value:he,checked:he===D.addressId,onChange:R,radioPosition:"center",children:e.jsxDEV(b.SzData,{icon:"add-circle",variant:"line",className:"d-flex align-items-center",children:e.jsxDEV(b.SzTypographie,{className:"mb-0",weight:"regular",children:i("diagAss.step.step1.list.other")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:245,columnNumber:23},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:240,columnNumber:21},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:231,columnNumber:19},this),e.jsxDEV(Q,{field:"addressId",customDisplay:B.addressId},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:250,columnNumber:19},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:171,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:167,columnNumber:13},this),e.jsxDEV(ie,{previous:T,next:L},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:257,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:163,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:120,columnNumber:5},this)}function kr({currentStep:s}){var ae;const a=X(),{t}=F(),{track:r}=ee(),{setSummaryStep1:i}=ze(),{dispatch:o,extraFn:l,state:n}=N.useContext(re),{saveStep:d}=l,{steps:c}=n,u=s-1,f=(ae=c[u])==null?void 0:ae.values,[g,h]=N.useState(!1),[v,A]=N.useState(!1),[S,w]=N.useState(()=>{var J;const G=(J=c[u])==null?void 0:J.values;if(G&&(G==null?void 0:G.address)!==""){const{address:M,locality:$,localityId:se,postalCode:de}=G;return{locality:$,zipcode:de,inseecode:se,text:M}}return null}),[p,y]=N.useState(!1),[T,L]=N.useState(!1),[k,E]=N.useState(!1),{isConnected:I}=window.tsme_data,_={locality:S==null?void 0:S.locality,localityId:S==null?void 0:S.inseecode,postalCode:S==null?void 0:S.zipcode},C={label:t("validate"),align:"right"},x={label:t("next"),align:"right",arrow:!0},[D,B]=N.useState(()=>{var J;const G=(J=c[u])==null?void 0:J.values;return G&&(G==null?void 0:G.address)!==""?C:x}),[H,R]=N.useState(is);N.useEffect(()=>{o({type:"activeStep",payload:1})},[]);const{data:O}=_e("addressList",()=>Se.get(fe.DIAG_ASS.SITE_ADDRESS),{onError:()=>{a.push(m.DIAG_ASS.TECHNICAL_ERROR)},enabled:I}),{content:z=[]}=(O==null?void 0:O.data)||{},U=G=>{let J;G?(J=is.concat(fr),B(C)):(J=is,B(x)),R(J)},K=()=>{I&&0<z.length?(window.scrollTo(0,0),a.push(m.DIAG_ASS.STEP_1)):(E(!0),a.push(m.DIAG_ASS.STEP_0_START))},j={label:t("go_back"),arrow:!0,enabled:!0,loader:k,onClick:K},P=(G,J)=>G!=null&&G[J]&&(G==null?void 0:G.addressId)===he?G==null?void 0:G[J]:"",W={addressId:(f==null?void 0:f.addressId)??"",city:P(f,"city"),address:P(f,"address"),additionalAddress:P(f,"additionalAddress")},Z=G=>{const{city:J,address:M,additionalAddress:$}=G,{label:se,values:de}=i(J,M,$);return t(se,de)},oe=G=>{r("DIAGASS_10");const J=Z(G);d(m.DIAG_ASS.STEP_1_CREATE,G,J),a.push(m.DIAG_ASS.STEP_2)};return e.jsxDEV(le,{initialValues:W,validateOnBlur:!0,validateOnChange:!1,validationSchema:H,onSubmit:oe,children:({handleChange:G,handleSubmit:J,setFieldValue:M,validateForm:$,values:se,errors:de,resetForm:$s})=>{const Qs=pe=>{const{text:es}=pe;w(pe),h(!1),$s({values:{addressId:(se==null?void 0:se.addressId)??"",city:es,address:"",additionalAddress:""},errors:{}}),y(!1),U(!0)},Xs=({target:pe})=>{pe.value.length===0?(M("address","",!1),M("additionalAddress","",!1)):2<pe.value.length&&!g&&h(!0),y(!0),M("city",pe.value)},Zs=()=>{se.city.length>0&&p&&(M("address",""),M("city","",!0),w(null),U(!1)),h(!1)},Js=pe=>{const{text:es,localityId:tt,streetId:rt,streetNumber:at,streetNumberExt:it,streetName:nt,locality:ot,postalCode:lt}=pe;M("address",es),M("localityId",tt),M("streetId",rt),M("streetNumber",at),M("streetNumberExt",it),M("streetName",nt),M("locality",ot),M("postalCode",lt),M("addressId",he),$(),L(!1),A(!1)},et=({target:pe})=>{pe.value.length>2&&!v&&A(!0),U(!0),L(!0),M("address",pe.value)},st=()=>{se.address.length>0&&T&&M("address","",!0),A(!1)};return e.jsxDEV("form",{id:"diagAssAddress",onSubmit:J,children:[e.jsxDEV(b.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:t("diagAss.step.step1.create.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:251,columnNumber:13},this),e.jsxDEV(b.SzTypographie,{className:"mt-2 text-dark",children:t("diagAss.step.step1.create.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:254,columnNumber:13},this),e.jsxDEV("div",{className:"row",children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"searchInput-town",children:e.jsxDEV(b.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:t("diagAss.step.step1.create.city")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:260,columnNumber:19},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:259,columnNumber:17},this),e.jsxDEV(He,{type:"town",name:"city",value:se.city,placeholder:t("diagAss.step.step1.create.city_placeholder"),onChange:Xs,onClick:Qs,onClickAway:Zs,isSearching:g},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:268,columnNumber:17},this),e.jsxDEV(Q,{field:"city",customDisplay:de.city},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:278,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:258,columnNumber:15},this),S&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"searchInput-town",children:e.jsxDEV(b.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:t("diagAss.step.step6.edit.address.label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:284,columnNumber:23},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:283,columnNumber:21},this),e.jsxDEV(He,{type:"street",name:"address",value:se.address,placeholder:t("diagAss.step.step1.create.address_placeholder"),onChange:et,onClick:Js,onClickAway:st,isSearching:v,address:_},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:292,columnNumber:21},this),e.jsxDEV(Q,{field:"address",customDisplay:de.address},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:305,columnNumber:21},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:282,columnNumber:19},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzInput,{id:"additionalAddress",name:"additionalAddress",label:t("diagAss.step.step1.create.additional_address"),placeholder:t("diagAss.step.step1.create.additional_address_placeholder"),variant:"outlined",value:se.additionalAddress,onChange:G},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:308,columnNumber:21},this),e.jsxDEV(Q,{field:"additionalAddress",customDisplay:de.additionalAddress},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:319,columnNumber:21},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:307,columnNumber:19},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:281,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:257,columnNumber:13},this),e.jsxDEV(ie,{previous:j,next:D},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:327,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:250,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:154,columnNumber:5},this)}const zr=""+new URL("sanitize_group-BRGooCBV.svg",import.meta.url).href,Pr="data:image/svg+xml,%3csvg%20width='80'%20height='81'%20viewBox='0%200%2080%2081'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='mask0_5823_3014'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='80'%20height='81'%3e%3ccircle%20cx='40'%20cy='40.8154'%20r='40'%20fill='white'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_5823_3014)'%3e%3crect%20x='-8.75'%20y='45.8154'%20width='97.5'%20height='35'%20fill='%23BBDBFD'/%3e%3ccircle%20cx='40'%20cy='40.8154'%20r='39.5'%20stroke='%233D466C'/%3e%3cpath%20d='M57.5797%2027.2845L41.5356%2011.2467C41.4%2011.11%2041.2387%2011.0016%2041.0609%2010.9276C40.8832%2010.8535%2040.6925%2010.8154%2040.5%2010.8154C40.3075%2010.8154%2040.1168%2010.8535%2039.9391%2010.9276C39.7613%2011.0016%2039.6%2011.11%2039.4644%2011.2467L23.4203%2027.2845C23.2179%2027.4895%2023.0809%2027.7499%2023.0263%2028.0327C22.9718%2028.3155%2023.0023%2028.6082%2023.114%2028.8737C23.2235%2029.1399%2023.4093%2029.3679%2023.6481%2029.5287C23.8869%2029.6896%2024.168%2029.7762%2024.4559%2029.7776H26.2791C26.3758%2029.7776%2026.4686%2029.816%2026.5369%2029.8844C26.6053%2029.9528%2026.6437%2030.0455%2026.6437%2030.1421V44.3575C26.6437%2044.7441%2026.7974%2045.115%2027.0709%2045.3884C27.3445%2045.6618%2027.7155%2045.8154%2028.1023%2045.8154H36.489C36.5857%2045.8154%2036.6784%2045.777%2036.7468%2045.7087C36.8152%2045.6403%2036.8536%2045.5476%2036.8536%2045.4509V38.5255C36.8536%2037.5588%2037.2378%2036.6317%2037.9216%2035.9482C38.6054%2035.2646%2039.5329%2034.8806%2040.5%2034.8806C41.4671%2034.8806%2042.3946%2035.2646%2043.0784%2035.9482C43.7622%2036.6317%2044.1464%2037.5588%2044.1464%2038.5255V45.4509C44.1464%2045.5476%2044.1848%2045.6403%2044.2532%2045.7087C44.3216%2045.777%2044.4143%2045.8154%2044.511%2045.8154H52.8977C53.2845%2045.8154%2053.6555%2045.6618%2053.9291%2045.3884C54.2026%2045.115%2054.3563%2044.7441%2054.3563%2044.3575V30.1421C54.3563%2030.0455%2054.3947%2029.9528%2054.4631%2029.8844C54.5314%2029.816%2054.6242%2029.7776%2054.7209%2029.7776H56.5441C56.832%2029.7762%2057.1131%2029.6896%2057.3519%2029.5287C57.5907%2029.3679%2057.7765%2029.1399%2057.886%2028.8737C57.9977%2028.6082%2058.0282%2028.3155%2057.9737%2028.0327C57.9191%2027.7499%2057.782%2027.4895%2057.5797%2027.2845Z'%20fill='%23030F40'/%3e%3c/g%3e%3cg%20clip-path='url(%23clip0_5823_3014)'%3e%3cpath%20d='M34%2047.8154V45.3154'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M26%2056.3154H25.5C25.1022%2056.3154%2024.7206%2056.1574%2024.4393%2055.8761C24.158%2055.5948%2024%2055.2133%2024%2054.8154C24%2054.4176%2024.158%2054.0361%2024.4393%2053.7548C24.7206%2053.4735%2025.1022%2053.3154%2025.5%2053.3154H29C30.0637%2053.3141%2031.0994%2052.9742%2031.957%2052.345C32.8146%2051.7157%2033.4496%2050.8297%2033.77%2049.8154'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M33.5%2056.3154H26'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M26%2059.3154H33.5'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M30.3213%2049.8154C29.9569%2050.1381%2029.4868%2050.316%2029%2050.3154H25.5C24.3065%2050.3154%2023.1619%2050.7895%2022.318%2051.6334C21.4741%2052.4774%2021%2053.622%2021%2054.8154C21%2056.0089%2021.4741%2057.1535%2022.318%2057.9974C23.1619%2058.8413%2024.3065%2059.3154%2025.5%2059.3154H26'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M31%2045.3154V47.8154'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M33.5%2060.3154V55.3154'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M30%2047.8154H35'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3crect%20x='36'%20y='61.8154'%20width='24'%20height='6'%20fill='%2359B9FF'/%3e%3cpath%20d='M60%2058.3154V66.8154C60%2067.3677%2059.5523%2067.8154%2059%2067.8154H37C36.4477%2067.8154%2036%2067.3677%2036%2066.8154V54.8154C36%2054.2631%2036.4477%2053.8154%2037%2053.8154H59C59.5523%2053.8154%2060%2054.2631%2060%2054.8154V56.0654'%20stroke='%23030F40'%20stroke-linecap='round'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5823_3014'%3e%3crect%20width='16'%20height='16'%20fill='white'%20transform='matrix(1%200%200%20-1%2020%2060.8154)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Ke="ANC",us="AC";function Gr({currentStep:s}){var k;const{isConnected:a}=window.tsme_data,t=X(),{t:r}=F(),{track:i}=ee(),{setSummaryStep2:o}=ze(),{extraFn:l,state:n}=N.useContext(re),{saveStep:d}=l,{steps:c}=n,u=s-1,f=(k=c[u])==null?void 0:k.values,[g,h]=N.useState(!1),[v,A]=N.useState(!1),S=()=>{h(!0);const{addressId:E}=c[0].values,I=he===E&&!a?m.DIAG_ASS.STEP_1_CREATE:m.DIAG_ASS.STEP_1;t.push(I)},w={label:r("go_back"),arrow:!0,enabled:!0,loader:g,onClick:S},p=E=>{const{radioBtn:I}=E,{label:_,values:C}=o(I,r);return r(_,C)},y={radioBtn:(f==null?void 0:f.radioBtn)??""},T=E=>{var B;A(!0);const I=p(E);d(m.DIAG_ASS.STEP_2,E,I);const _=(B=c[0])==null?void 0:B.values,{addressId:C}=_;let x={sanitationType:E.radioBtn};const D={ANC:ps,AC:ms};if(i("DIAGASS_11",{type_assainissement:E.radioBtn in D&&D[E.radioBtn]}),C===he){const{additionalAddress:H,locality:R,localityId:O,postalCode:z,streetId:U,streetName:K,streetNumber:j,streetNumberExt:P}=_;if(x={...x,insee:O,hexavia:U,streetName:K,city:R,zipCode:z,additionalAddress:H},j){let W;P===void 0?W=j:W=ye(j,P),x={...x,streetNumber:W}}}else{const[H,R]=Xe(C);x={...x,iliadeSiteId:H,odysseAccountId:R}}L.mutate(x)},L=$e(E=>Se.post(fe.DIAG_ASS.ELIGIBILITY,E),{onSuccess:({data:E})=>{if(ue.SUCCESS===E.code)switch(E.message){case ue.OK_ELIGIBILITE:t.push(m.DIAG_ASS.STEP_3);break;case ue.KO_MULTI_SITES:case ue.KO_ELIGIBILITE_DIGITAL:t.push(m.DIAG_ASS.STEP_2_KO_DIGITAL);break;case ue.KO_ELIGIBILITE_SECTEUR:t.push(m.DIAG_ASS.STEP_2_KO_CONTRACT);break}else t.push(m.DIAG_ASS.TECHNICAL_ERROR)},onError:()=>{t.push(m.DIAG_ASS.TECHNICAL_ERROR)}});return e.jsxDEV(le,{initialValues:y,validateOnBlur:!0,validationSchema:wr,onSubmit:T,children:({values:E,handleChange:I,handleSubmit:_,errors:C})=>e.jsxDEV("form",{id:"diagAssSanitizeType",onSubmit:_,children:[e.jsxDEV(je,{name:"radioBtn",id:"radio-1",className:"mb-3",label:r("diagAss.step.step2.sanitize.radioCard_AC.label"),onChange:I,checked:E.radioBtn===us,imgSrc:zr,value:us,children:[e.jsxDEV(b.SzTypographie,{className:"mb-3",variant:"caption",size:"M",color:"disabled",weight:"regular",children:r("diagAss.step.step2.sanitize.radioCard_AC.type")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:195,columnNumber:15},this),e.jsxDEV(b.SzTypographie,{className:"m-0 text-dark",children:r("diagAss.step.step2.sanitize.radioCard_AC.info")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:204,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:185,columnNumber:13},this),e.jsxDEV(je,{name:"radioBtn",id:"radio-2",className:"mb-3",label:r("diagAss.step.step2.sanitize.radioCard_ANC.label"),onChange:I,checked:E.radioBtn===Ke,imgSrc:Pr,value:Ke,children:[e.jsxDEV(b.SzTypographie,{className:"mb-3",variant:"caption",size:"M",color:"disabled",weight:"regular",children:r("diagAss.step.step2.sanitize.radioCard_ANC.type")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:218,columnNumber:15},this),e.jsxDEV(b.SzTypographie,{className:"m-0 text-dark",children:r("diagAss.step.step2.sanitize.radioCard_ANC.info")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:227,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:208,columnNumber:13},this),e.jsxDEV(Q,{field:"radioBtn",customDisplay:!E.radioBtn&&C.radioBtn},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:231,columnNumber:13},this),e.jsxDEV(ie,{previous:w,next:{align:"right",loader:v}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:238,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:184,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:176,columnNumber:5},this)}function Br(){const s=X(),{t:a}=F(),{track:t}=ee(),[r,i]=N.useState(!1),{brand:o}=window.tsme_data,l=()=>{t("DIAGASS_8",{motif_retour_accueil:At}),i(!0),s.push(m.HOME)},n={label:a("diagAss.error.back_home"),loader:r,align:"right",onClick:l};return e.jsxDEV(Ne,{body:a("diagAss.step.step2.ko_contract.body",{brand:o.name}),next:n},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/KoContract.tsx",lineNumber:35,columnNumber:5},this)}function Mr(){const{t:s}=F(),a=Ze(xt);return e.jsxDEV(Ne,{body:s("diagAss.step.step2.ko_digital.body"),next:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/KoDigital.tsx",lineNumber:12,columnNumber:5},this)}function Fr({currentStep:s}){var I;const a=X(),{t}=F(),{track:r}=ee(),{extraFn:i,state:o}=N.useContext(re),{deleteStep:l,saveStep:n}=i,{steps:d}=o,c=s-1,u=(I=d[c])==null?void 0:I.values,[f,g]=N.useState(!1),{isConnected:h}=window.tsme_data;if(N.useEffect(()=>{h||a.push(m.DIAG_ASS.STEP_3_CREATE)},[]),!h)return e.jsxDEV(e.Fragment,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:55,columnNumber:12},this);const{data:v,isLoading:A}=_e("interlocutors",()=>Se.get(fe.DIAG_ASS.INTERLOCUTORS),{onSuccess:({data:_})=>{const{message:C}=_;ue.KO_INTERLOCUTEUR===C&&a.push(m.DIAG_ASS.STEP_3_CREATE)},onError:()=>{a.push(m.DIAG_ASS.TECHNICAL_ERROR)},enabled:h}),{content:S=[]}=(v==null?void 0:v.data)||{},w=()=>{g(!0),a.push(m.DIAG_ASS.STEP_2)},p={label:t("validate"),align:"right"},y={label:t("go_back"),arrow:!0,enabled:!0,loader:f,onClick:w},T=(_,C)=>ye(_,C),L=_=>{const{prenom:C,nom:x,email:D,telPortable:B}=_;return t("diagAss.stepper.step3",{value1:T(x,C),value2:B,value3:D,context:B?"":"no_phone"})},k=_=>{r("DIAGASS_15"),l(s);const{contactId:C}=_;if(we===C)n(m.DIAG_ASS.STEP_3_CREATE,_),a.push(m.DIAG_ASS.STEP_3_CREATE);else{const x=L(_);n(m.DIAG_ASS.STEP_3,_,x),a.push(m.DIAG_ASS.STEP_RGPD_CONFIRM)}},E={contactId:(u==null?void 0:u.contactId)??""};return e.jsxDEV(le,{initialValues:E,validateOnBlur:!0,validateOnChange:!1,validationSchema:hr,onSubmit:k,children:({handleSubmit:_,values:C,errors:x,setFieldValue:D})=>{const B=R=>{var z,U;const{contactId:O}=C;if(we!==O){const[K,j]=Xe(O),P=S.find(W=>W.id===K&&W.compteId===j);if(P){const{civilite:W,prenom:Z,nom:oe,email:ae,telPortable:G}=P;D("civilite",W),D("prenom",Z),D("nom",oe),D("email",ae),D("telPortable",G)}}if(we===O&&we===((z=d[2])==null?void 0:z.values.contactId)){const{civilite:K,prenom:j,nom:P,email:W,telPortable:Z}=(U=d[2])==null?void 0:U.values;D("civilite",K),D("prenom",j),D("nom",P),D("email",W),D("telPortable",Z)}_(R)},H=R=>{D("civilite",""),D("prenom",""),D("nom",""),D("email",""),D("telPortable",""),D("contactId",R.target.value,!0)};return e.jsxDEV("form",{id:"diagAssContact",onSubmit:B,children:[e.jsxDEV("div",{className:"my-3 mt-lg-4",children:A?e.jsxDEV(Ns,{count:3},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:179,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{"data-cy":"contact-list",className:"mh-lg",children:S.map(({id:R,compteId:O,prenom:z,nom:U,email:K,telPortable:j},P)=>{const W=Ps(R,O),Z=`contact-${W}`;return e.jsxDEV(je,{id:Z,name:"contactId",className:P===S.length-1?"mb-0":"mb-3",label:T(U,z),value:W,checked:W===C.contactId,onChange:H,radioPosition:"center",children:e.jsxDEV(b.SzData,{icon:"single-neutral-id-card-3",variant:"line",className:"d-flex align-items-center mt-3",children:e.jsxDEV(b.SzData.Text,{children:[K&&e.jsxDEV(b.SzTypographie,{className:"mb-0 text-break",weight:"regular",children:K},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:211,columnNumber:35},this),j&&e.jsxDEV(b.SzTypographie,{className:"mb-0",weight:"regular",children:j},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:219,columnNumber:35},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:209,columnNumber:31},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:204,columnNumber:29},this)},Z,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:191,columnNumber:27},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:182,columnNumber:19},this),e.jsxDEV(je,{id:"contact-other",name:"contactId",className:"my-3",value:we,checked:we===C.contactId,onChange:H,radioPosition:"center",children:e.jsxDEV(b.SzData,{icon:"add-circle",variant:"line",className:"d-flex align-items-center",children:e.jsxDEV(b.SzTypographie,{className:"mb-0",weight:"regular",children:t("diagAss.step.step3.list.other")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:247,columnNumber:23},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:242,columnNumber:21},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:233,columnNumber:19},this),e.jsxDEV(Q,{field:"contactId",customDisplay:x.contactId},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:252,columnNumber:19},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:181,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:177,columnNumber:13},this),e.jsxDEV(ie,{previous:y,next:p},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:259,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:176,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:127,columnNumber:5},this)}function Hr({currentStep:s}){var k;const a=X(),{t}=F(),{track:r}=ee(),{setSummaryStep3:i}=ze(),{extraFn:o,state:l}=N.useContext(re),{saveStep:n}=o,{steps:d}=l,c=s-1,u=(k=d[c])==null?void 0:k.values,[f,g]=N.useState(!1),{isConnected:h}=window.tsme_data,{data:v}=_e("interlocutors",()=>Se.get(fe.DIAG_ASS.INTERLOCUTORS),{onError:()=>{a.push(m.DIAG_ASS.TECHNICAL_ERROR)},enabled:h}),{content:A=[]}=(v==null?void 0:v.data)||{},S=()=>{g(!0),a.push(0<A.length?m.DIAG_ASS.STEP_3:m.DIAG_ASS.STEP_2)},w={label:t("validate"),align:"right"},p={label:t("go_back"),arrow:!0,enabled:!0,loader:f,onClick:S},y=E=>{const{prenom:I,nom:_,email:C,telPortable:x}=E,{label:D,values:B}=i(I,_,C,x);return t(D,B)},T=E=>{r("DIAGASS_16");const I=y(E);n(m.DIAG_ASS.STEP_3_CREATE,E,I),a.push(m.DIAG_ASS.STEP_RGPD_CONFIRM)},L={contactId:we,civilite:(u==null?void 0:u.civilite)??"",prenom:(u==null?void 0:u.prenom)??"",nom:(u==null?void 0:u.nom)??"",email:(u==null?void 0:u.email)??"",telPortable:(u==null?void 0:u.telPortable)??""};return e.jsxDEV(le,{initialValues:L,validateOnBlur:!0,validateOnChange:!1,validationSchema:Nr.concat(Mt(t,"telPortable")),onSubmit:T,children:({handleSubmit:E,setFieldValue:I,values:_,errors:C,isSubmitting:x,isValid:D,touched:B,handleChange:H,handleBlur:R})=>{const O=K=>{I("civilite",K.target.value,!0)};x&&!D&&Object.keys(C).length>0&&r("DIAGASS_17");const z=K=>j=>{j.target.value.length<=K&&H(j)},U=K=>j=>{j.target.value.length<=K&&H(j)};return e.jsxDEV("form",{id:"diagAssContact",onSubmit:E,children:[e.jsxDEV("div",{className:"row mt-4",children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzTypographie,{className:"mb-2",children:t("diagAss.step.step3.create.civility")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:149,columnNumber:17},this),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(b.SzRadio,{id:"civilityMiss",name:"civilite",label:t("civility.mrs_short"),value:"MME",checked:_.civilite==="MME",onChange:O},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:153,columnNumber:19},this),e.jsxDEV(b.SzRadio,{className:"ml-3",id:"civilityMister",name:"civilite",label:t("civility.mr_short"),value:"M",checked:_.civilite==="M",onChange:O},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:161,columnNumber:19},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:152,columnNumber:17},this),e.jsxDEV(Q,{field:"civilite",customDisplay:B.civilite&&C.civilite},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:171,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:148,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzInput,{id:"nom",name:"nom",label:t("diagAss.step.step3.create.lastname"),placeholder:t("diagAss.step.step3.create.lastname_placeholder"),variant:"outlined",value:_.nom,onBlur:R,onChange:z(80)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:177,columnNumber:17},this),e.jsxDEV(Q,{field:"nom",customDisplay:B.nom&&C.nom},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:189,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:176,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzInput,{id:"prenom",name:"prenom",label:t("diagAss.step.step3.create.firstname"),placeholder:t("diagAss.step.step3.create.firstname_placeholder"),variant:"outlined",value:_.prenom,onBlur:R,onChange:z(40)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:195,columnNumber:17},this),e.jsxDEV(Q,{field:"prenom",customDisplay:B.prenom&&C.prenom},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:207,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:194,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzInput,{id:"email",name:"email",label:t("diagAss.step.step3.create.email"),placeholder:t("diagAss.step.step3.create.email_placeholder"),variant:"outlined",value:_.email,onBlur:R,onChange:U(80)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:213,columnNumber:17},this),e.jsxDEV(Q,{field:"email",customDisplay:B.email&&C.email},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:223,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:212,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:e.jsxDEV(Ft,{name:"telPortable"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:229,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:228,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:147,columnNumber:13},this),e.jsxDEV(ie,{previous:p,next:w},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:232,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:146,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:105,columnNumber:5},this)}const be="APPART",ve="MAISON",Fs="Visite1",Hs="ContreVisite1",Ur="Vente",qr="NouvelleInstallation",Kr="ControlePeriodique",Wr="NouveauRaccordement",We="oui",Ts="non",Te="other";function Yr(s,a){const t=[{context:"lodging",name:"type",inputs:[{label:"label_APPART",value:be},{label:"label_MAISON",value:ve},{label:"label_other",value:Te}]}],r=[{context:"floor",name:"floor",dependency:{name:"type",value:be}}],i=[{context:"pool",name:"pool",inputs:[{label:"pool_yes",value:We},{label:"pool_no",value:Ts}],dependency:{name:"type",value:ve}},{context:"extra_equipment",name:"extra_equipment",inputs:[{label:"extra_equipment_yes",value:We},{label:"extra_equipment_no",value:Ts}],dependency:{name:"pool"}}],o=[{context:"size",name:"size",dependency:{name:s===be?"floor":["pool","extra_equipment"]}},{context:"water",name:"water",infos:!0,dependency:{name:"size"}},{context:"visit",name:"visit",inputs:[{label:"label_first",value:Fs},{label:"label_after",value:Hs}],dependency:{name:"water"}}],d=[{context:"context",name:"context",inputs:[{label:"label_to_sell",value:Ur},...a==="ANC"?[{label:"label_control",value:qr},{label:"label_period",value:Kr}]:[{label:"label_new_connection",value:Wr}]],dependency:{name:"visit"}}];return{form:[...t,...s===be?r:[],...s===ve?i:[],...s===Te?[]:o,...s===Te?[]:d]}}const Fe={floor:2,size:3,water:2},Ee=s=>s.required("diagAss.error.mandatory_field"),$r=ne({type:Y().required("diagAss.error.select_option"),floor:Y().max(Fe.floor,"diagAss.error.size").when("type",{is:s=>s===be,then:Ee}),pool:Y().when("type",{is:s=>s===ve,then:Ee}),extra_equipment:Y().when("pool",{is:s=>s,then:Ee}),size:Y().max(Fe.size,"diagAss.error.size").when(["type","floor","pool","extra_equipment"],{is:(s,a,t,r)=>s===be&&a||s===ve&&t&&r,then:Ee}),water:Y().max(Fe.water,"diagAss.error.size").when("size",{is:s=>s,then:Ee}),visit:Y().when("water",{is:s=>s,then:Ee}),context:Y().when("visit",{is:s=>s,then:Ee})});function Qr({showConfirmModal:s,setShowConfirmModal:a,name:t,values:r}){const{t:i}=F(),{transform:o}=Oe(),l=X(),{setExceedsValueField:n}=N.useContext(re),[d,c]=N.useState(!1);let u="";for(const[p,y]of Object.entries(r))p===t&&(u=y);const f=i("diagAss.step.step4.confirmation.title",{context:t}),g=i("diagAss.step.step4.confirmation.body",{context:t,value:u}),h=()=>{a(!1)},v=()=>{a(!1)},A={variant:"outlined",enabled:!0,prevArrow:!1,label:i("diagAss.step.step4.confirmation.button",{context:"left"}),onClick:v,disabled:!1,className:"pl-3 fix-my-value-btn"},S=()=>{c(!0),n(t),l.push(m.DIAG_ASS.STEP_4_KO_MAX_VALUE)},w={variant:"contained",label:i("diagAss.step.step4.confirmation.button",{context:"right"}),loader:d,align:"right",onClick:S,disabled:!1,className:"confirm-and-go-on-btn"};return e.jsxDEV(b.SzModal,{handleClose:h,show:s,border:"smooth",centered:!0,fullscreen:"md",size:"lg",backdrop:!0,title:"",children:e.jsxDEV("div",{className:"container",children:[e.jsxDEV(b.SzTypographie,{variant:"H3",weight:"medium",size:"L",className:"mb-2",children:f},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:85,columnNumber:9},this),e.jsxDEV(b.SzTypographie,{className:"mb-2 text-dark",children:e.jsxDEV(xe,{content:g,transform:o},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:89,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:88,columnNumber:9},this),e.jsxDEV(ie,{previous:A,next:w},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:91,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:84,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:74,columnNumber:5},this)}function Us(s){const t=Object.entries({Vente:"vente",NouvelleInstallation:"nouvelle_installation",ControlePeriodique:"controle_periodique",NouveauRaccordement:"nouveau_raccordement"}).find(r=>r[0]===s);return t?t[1]:""}function qs(s){return s===Fs?"premiere_visite":s===Hs?"contre_visite":"contre_visite_supplementaire"}function Xr({currentStep:s}){var w;const a=X(),{t}=F(),{extraFn:r,state:i}=N.useContext(re),{saveStep:o}=r,{steps:l}=i,n=s-1,d=(w=l[n])==null?void 0:w.values,c=l[1].values.radioBtn,u=c===Ke?ps:ms,{track:f}=ee(),g=p=>{const{type:y,size:T,water:L,visit:k,context:E}=p;return t("diagAss.stepper.step4",{value1:t("diagAss.step.step4.complementary_infos.questions.visit.label_short",{context:k}),value2:t("diagAss.step.step4.complementary_infos.questions.context.label_short",{context:E}),value3:t("diagAss.step.step4.complementary_infos.questions.lodging.label",{context:y}),value4:T+"m2",value5:t("diagAss.step.step4.complementary_infos.questions.water.label_count",{count:parseInt(L)})})},h=p=>{if(Te===(p==null?void 0:p.type))a.push(m.DIAG_ASS.STEP_4_KO);else{const y=g(p);o(m.DIAG_ASS.STEP_4,p,y);const T={housingType:p==null?void 0:p.type,surface:p==null?void 0:p.size,waterRooms:p==null?void 0:p.water,visitType:p==null?void 0:p.visit,requestType:p==null?void 0:p.context};ve===(p==null?void 0:p.type)?(T.pool=(p==null?void 0:p.pool)===We,T.exterior=(p==null?void 0:p.extra_equipment)===We):be===(p==null?void 0:p.type)&&(T.floor=p==null?void 0:p.floor);const L=qs(p==null?void 0:p.visit),k=Us(p==null?void 0:p.context);f("DIAGASS_19",{type_assainissement:u,type_logement:(p==null?void 0:p.type)===ve?"maison":(p==null?void 0:p.type)===be?"appartement":"autres",surface_logement:p==null?void 0:p.size,nombre_piece_eau:p==null?void 0:p.water,type_visite:L,contexte_demande:k,etage_logement:p==null?void 0:p.floor,equipement_piscine:p==null?void 0:p.pool,dependance_exterieure:p==null?void 0:p.extra_equipment}),A.mutate(T)}},{isLoading:v,...A}=$e(p=>Se.post(fe.DIAG_ASS.REQUEST_SITE,p),{onSuccess:({data:p})=>{p.message===ue.OK_MAJ_DEMANDE_SITE&&a.push(m.DIAG_ASS.STEP_5)},onError:()=>{a.push(m.DIAG_ASS.TECHNICAL_ERROR)}}),S={type:(d==null?void 0:d.type)??"",floor:(d==null?void 0:d.floor)??"",pool:(d==null?void 0:d.pool)??"",extra_equipment:(d==null?void 0:d.extra_equipment)??"",size:(d==null?void 0:d.size)??"",water:(d==null?void 0:d.water)??"",visit:(d==null?void 0:d.visit)??"",context:(d==null?void 0:d.context)??""};return e.jsxDEV(le,{initialValues:S,validationSchema:$r,onSubmit:h,validateOnChange:!1,validateOnBlur:!0,children:()=>e.jsxDEV(Zr,{nextLoader:v,sanitationType:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:169,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:161,columnNumber:5},this)}const Zr=({nextLoader:s,sanitationType:a})=>{const{t}=F("translation"),[r,i]=N.useState(null),[o,l]=N.useState(!1),{handleSubmit:n,handleChange:d,values:c,setFieldValue:u,errors:f,validateField:g,setFieldError:h,status:v,setStatus:A,validateForm:S}=Ie(),{type:w,context:p}=c,{form:y}=Yr(w,a),T=w!==Te&&p||w===Te,L={label:t("next"),align:"right",arrow:!0,type:"button",onClick:async()=>{if(!c[r]){await S();return}x(r,c[r])?(C(r),l(!0)):(r!=null&&g(r),A(),i(null),H(r,c[r]))}},k={label:t("validate"),align:"right",loader:s,type:"submit"},E="writing",I=(R,O)=>{if(!O)for(let z=R+1;z<y.length;z++)c[y[z].name]&&u(y[z].name,void 0),f[y[z].name]&&h(y[z].name,void 0)},[_,C]=N.useState(""),x=(R,O)=>{const U=[{name:"floor",value:9},{name:"size",value:400},{name:"water",value:6}].find(j=>j.name===R),K=(U==null?void 0:U.value)||{};return parseInt(O)>K},D=R=>new Promise(O=>setTimeout(O,R)),B=async R=>{await D(100);const O=document.getElementById(R);O&&O.focus()},H=(R,O)=>{O!==""&&(R==="floor"&&B("size"),R==="size"&&B("water"),R==="water"&&B("visit"))};return e.jsxDEV("form",{onSubmit:n,children:[y.map(({context:R,name:O,inputs:z,dependency:U,infos:K=!1},j)=>{const P=`diagAss.step.step4.complementary_infos.questions.${R}`,W=Ae("question-block",{"border-top border-1 border-card-disabled-light":j>0,"py-4":!z,"py-3":z}),Z=j+1===y.length,oe=async M=>{const{name:$,value:se}=M.target;I(j,Z),await u($,se),g($)},ae=M=>{const{name:$}=M.target;i($)},G=M=>{const{name:$,value:se}=M.target,de=se.at(-1);I(j,Z),(/\d/g.test(de||"")&&se.length<=Fe[$]||se.length<c[$].length)&&(d(M),A({[$]:E}))},J=M=>{const{name:$,value:se}=M.target;x($,se)?(C($),l(!0)):(g($),A(),H($,se))};if(U){const{value:M,name:$}=U;if(Array.isArray($)){if(!$.every(de=>c[de]))return null}else if(M&&c[$]!==M||!M&&!c[$]||v&&v[$]===E)return null}return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:W,children:[e.jsxDEV(b.SzTypographie,{size:"L",weight:"regular",children:t(`${P}.title`)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:364,columnNumber:15},void 0),!z&&e.jsxDEV("div",{className:"row no-gutters",children:[e.jsxDEV(b.SzTypographie,{color:"dark",className:"mb-2",tag:"span",children:e.jsxDEV("label",{htmlFor:O,children:t(`${P}.label`)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:370,columnNumber:21},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:369,columnNumber:19},void 0),K&&e.jsxDEV("div",{className:"row",children:e.jsxDEV(b.SzTypographie,{variant:"caption",size:"M",weight:"regular",color:"dark",className:"mb-2 col-8",children:t(`${P}.infos`)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:374,columnNumber:23},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:373,columnNumber:21},void 0),e.jsxDEV(b.SzInput,{className:"col-8",onChange:G,onBlur:J,onFocus:ae,variant:"outlined",name:O,id:O,value:c[O]},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:385,columnNumber:19},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:368,columnNumber:17},void 0),(z||[]).map(({label:M,value:$})=>e.jsxDEV("div",{className:"d-flex input-group mb-2",children:e.jsxDEV(b.SzRadio,{id:M,name:O,label:e.jsxDEV(Os,{t,i18nKey:`${P}.${M}`,components:[e.jsxDEV(b.SzTypographie,{weight:"bold",tag:"span"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:408,columnNumber:29},void 0)]},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:404,columnNumber:25},void 0),value:$,checked:c[O]===$,onChange:oe},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:400,columnNumber:21},void 0)},M,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:399,columnNumber:19},void 0)),e.jsxDEV(Q,{field:O,customDisplay:f[O]},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:419,columnNumber:15},void 0)]},R,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:363,columnNumber:13},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:362,columnNumber:11},void 0)}),e.jsxDEV(Qr,{showConfirmModal:o,setShowConfirmModal:l,name:_,values:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:424,columnNumber:7},void 0),e.jsxDEV(ie,{next:T?k:L},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:430,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:292,columnNumber:5},void 0)};function Jr(){const{t:s}=F(),a=Ze(vt);return e.jsxDEV(Ne,{body:s("diagAss.step.step4.ko.body"),next:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/Step4Ko.tsx",lineNumber:11,columnNumber:10},this)}function ea(){const{t:s}=F(),{track:a}=ee(),{exceedsValueField:t}=N.useContext(re),[r,i]=N.useState(!1),o=()=>{const d=[{name:"floor",value:Et},{name:"size",value:yt},{name:"water",value:jt}].find(u=>u.name===t),c=(d==null?void 0:d.value)||{};a("DIAGASS_2",{motif_contact_client:c}),i(!0),window.location.href=m.CUSTOMER_SERVICE},l={label:s("diagAss.error.contact_customer_service"),loader:r,align:"right",onClick:o,disabled:!1};return e.jsxDEV(Ne,{body:s("diagAss.step.step4.confirmation.max_value_final_body"),next:l},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/Step4KoMaxValue.tsx",lineNumber:46,columnNumber:5},this)}const{isConnected:sa}=window.tsme_data;function ta(){const s=X(),{t:a}=F(),[t,r]=N.useState(!1),[i,o]=N.useState(!1),{brand:l}=window.tsme_data,{state:n,extraFn:d}=N.useContext(re),{steps:c}=n,{lockStep:u}=d,{track:f}=ee(),g=()=>{var T;f("DIAGASS_18"),u([1,2,3]),o(!0);const w=(T=c[2])==null?void 0:T.values,{contactId:p}=w;let y;if(p!==we){const[L]=Xe(p);y={idInterlocutor:L}}else{const{civilite:L,nom:k,prenom:E,email:I,telPortable:_}=w;y={civility:L,lastName:k,firstName:E,email:I,cellphone:_}}h.mutate(y)},h=$e(w=>Se.post(fe.DIAG_ASS.REQUEST,w),{onSuccess:({data:w})=>{var p,y;(p=w==null?void 0:w.content)!=null&&p.redirect?window.location.href=(y=w==null?void 0:w.content)==null?void 0:y.redirect:w.message===ue.OK_INITIALISATION_DEMANDE?s.push(m.DIAG_ASS.STEP_4):s.push(m.DIAG_ASS.TECHNICAL_ERROR)},onError:()=>{s.push(m.DIAG_ASS.TECHNICAL_ERROR)}}),v=()=>{r(!0);const{contactId:w}=c[2].values,p=we===w&&!sa?m.DIAG_ASS.STEP_3_CREATE:m.DIAG_ASS.STEP_3;s.push(p)},A={label:a("diagAss.step.rgpd_confirm.button"),align:"right",loader:i,onClick:g},S={label:a("go_back"),arrow:!0,enabled:!0,loader:t,onClick:v};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(b.SzTypographie,{className:"mb-lg-5 text-dark",children:a("diagAss.step.rgpd_confirm.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:108,columnNumber:7},this),e.jsxDEV(Qe,{className:"stepper mb-3 mb-lg-5",steps:c,isStepList:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:111,columnNumber:7},this),e.jsxDEV(b.SzTypographie,{className:"mb-lg-5 text-dark",children:a("diagAss.step.rgpd_confirm.rgpd",{brand:l.name})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:116,columnNumber:7},this),e.jsxDEV(ie,{previous:S,next:A},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:119,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:107,columnNumber:5},this)}function ra({currentStep:s}){const a=X(),{t}=F(),{extraFn:r,state:i}=N.useContext(re),{saveStep:o}=r,{steps:l}=i,n=s-1,{values:d}=l[n]||{},[c,u]=N.useState(!1),{track:f}=ee(),{data:g,isLoading:h}=_e("services",()=>Se.get(fe.DIAG_ASS.SERVICES),{onSuccess:({data:E})=>{const{message:I}=E;ue.KO_CERTIFICAT===I&&a.push(m.DIAG_ASS.STEP_5_KO)},onError:()=>{a.push(m.DIAG_ASS.TECHNICAL_ERROR)}}),{content:v=[]}=(g==null?void 0:g.data)||{},A=E=>{const I=(E==null?void 0:E.tariffSpecification)||"";return t("diagAss.stepper.step5",{value:E==null?void 0:E.certificateType.concat(" ",I)})},S=E=>v.find(I=>I.idArticle===E),w=(E,I)=>Number(E)===0||I?t("free"):E.replace(".",",")+" €",p=(E,I)=>{const _=S(E.serviceId);if(_){const{setValues:C}=I,x=w(_.priceWithVAT,_.communityInvoice),D={...E,needWater:_.needWater?"1":"0",priceWithVAT:x};C(D);let B=_.certificateType;B+=_.tariffSpecification?" "+_.tariffSpecification:"";const H=Gs(B);f("DIAGASS_20",{type_diagnostic:H,tarif:x});const R=A(_);o(m.DIAG_ASS.STEP_5,D,R),_.needWater?a.push(m.DIAG_ASS.STEP_5_WATER):a.push(m.DIAG_ASS.STEP_6)}},y=()=>{u(!0),a.push(m.DIAG_ASS.STEP_4)},T={label:t("validate"),align:"right"},L={label:t("go_back"),arrow:!0,enabled:!0,loader:c,onClick:y},k={serviceId:(d==null?void 0:d.serviceId)??"",needWater:(d==null?void 0:d.needWater)??"",priceWithVAT:(d==null?void 0:d.priceWithVAT)??""};return e.jsxDEV(le,{initialValues:k,validateOnBlur:!0,validationSchema:br,onSubmit:p,children:({values:E,errors:I,handleChange:_,handleSubmit:C})=>e.jsxDEV("form",{id:"diagAssServices",onSubmit:C,children:[e.jsxDEV("div",{"data-cy":"services-list",className:"my-4 mh-lg",children:h?e.jsxDEV(Ns,{count:3},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:143,columnNumber:17},this):v.map(({idArticle:x,certificateType:D,tariffSpecification:B,certificateLabel:H,priceWithVAT:R,communityInvoice:O},z)=>{const U=B||"";return e.jsxDEV(je,{id:`service-${x}`,name:"serviceId",className:z===v.length-1?"mb-0":"mb-3",label:ye(D,U),value:x,checked:x===E.serviceId,onChange:_,children:[e.jsxDEV(b.SzTypographie,{className:"mb-4",color:"disabled",children:H},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:171,columnNumber:25},this),e.jsxDEV(b.SzTypographie,{className:"mb-0 text-uppercase",weight:"bold",children:[t("price",{context:"ttc"})," :"," ",w(R,O)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:174,columnNumber:25},this)]},x,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:159,columnNumber:23},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:141,columnNumber:13},this),e.jsxDEV(Q,{field:"serviceId",customDisplay:I.serviceId},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:187,columnNumber:13},this),e.jsxDEV(ie,{previous:L,next:T},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:188,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:140,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:132,columnNumber:5},this)}function aa(){const s=X(),{t:a}=F(),{extraFn:t,state:r}=N.useContext(re),{steps:i}=r,{saveStep:o}=t,{track:l}=ee(),n=i[4].values.serviceId,d=i[4].values.needWater,c=i[4].values.priceWithVAT,u=i[4].summary,f=({waterSupplied:h})=>{const v={serviceId:n,needWater:d,priceWithVAT:c,waterSupplied:h};o(m.DIAG_ASS.STEP_5_WATER,v,u),l("DIAGASS_21",{alimentation_eau:h?Vs:Ls}),h?s.push(m.DIAG_ASS.STEP_6):s.push(m.DIAG_ASS.STEP_5_WATER_KO)},g={label:a("validate"),align:"right"};return e.jsxDEV(le,{initialValues:{waterSupplied:""},validateOnBlur:!0,validationSchema:Ar,onSubmit:f,children:({handleSubmit:h,setFieldValue:v,values:A,errors:S})=>e.jsxDEV("form",{id:"diagAssWaterSupplied",onSubmit:h,children:[e.jsxDEV(b.SzTypographie,{size:"XL",children:a("diagAss.step.step5.water.water_supplied")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(b.SzRadio,{id:"waterSuppliedYes",name:"waterSupplied",label:a("yes"),value:"1",checked:A.waterSupplied!==""&&!!A.waterSupplied,onChange:w=>{v("waterSupplied",!!parseInt(w.target.value))}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:74,columnNumber:15},this),e.jsxDEV(b.SzRadio,{className:"ml-3",id:"waterSuppliedNo",name:"waterSupplied",label:a("no"),value:"0",checked:A.waterSupplied!==""&&!A.waterSupplied,onChange:w=>{v("waterSupplied",!!parseInt(w.target.value))}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:87,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:73,columnNumber:13},this),e.jsxDEV(Q,{field:"waterSupplied",customDisplay:S.waterSupplied},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:102,columnNumber:13},this),e.jsxDEV(ie,{next:g},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:106,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:69,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:59,columnNumber:5},this)}function ia(){const{t:s}=F(),a=Ze(_t);return e.jsxDEV(Ne,{body:s("diagAss.step.step5.ko.body"),next:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Ko.tsx",lineNumber:11,columnNumber:10},this)}function na(){const s=X(),{t:a}=F(),{track:t}=ee(),[r,i]=N.useState(!1),o=()=>{i(!0),t("DIAGASS_22"),s.push(m.DIAG_ASS.STEP_6)},l={label:a("diagAss.step.step5.ko_water.button"),loader:r,align:"right",onClick:o};return e.jsxDEV(Ne,{title:a("diagAss.step.step5.ko_water.title"),body:a("diagAss.step.step5.ko_water.body"),next:l},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5WaterKo.tsx",lineNumber:29,columnNumber:5},this)}const ge="france",Ye="foreign",oa="Gratuit",Je=me.createContext(null),Ks=({address:s,city:a,additionalAddress:t})=>{const r=", ",i=a.split(r).reverse().join(" ");return t&&t!==""?s.concat(r,t,r,i):s.concat(r,i)};function la({currentStep:s}){var x,D,B,H,R;const a=X(),{track:t}=ee(),{state:r}=Ss(),{t:i}=F(),{extraFn:o,state:l}=N.useContext(re),{steps:n}=l,{saveStep:d}=o,c=s-1,u=(D=(x=n[c])==null?void 0:x.values)!=null&&D.isDefaultAddress?null:(B=n[c])==null?void 0:B.values,f=(H=n[0])==null?void 0:H.values,[g]=N.useState(!1),[h,v]=N.useState([]),S=((R=n[4])==null?void 0:R.values.priceWithVAT)===oa,[w,p]=N.useState(ne()),y=O=>{let{address:z,additionalAddress:U,city:K,country:j,countryForm:P,zip:W}=O;Ye===P&&z===""&&K===""&&(z=f.address,U=f.additionalAddress,K=f.city,W=f.zip,P=ge);const Z=ge===P,oe=Ks({address:z,city:Z?K:`${W} ${K}`,additionalAddress:U});if(!Z){const ae=h.find(G=>G.label===j);if(ae)return i("diagAss.step.step6.check.body",{context:S?"":"fee",address:oe.concat(", ",ae.label)})}return i("diagAss.step.step6.check.body",{context:S?"":"fee",address:oe})},T=O=>{const z=y(O);if(d(m.DIAG_ASS.STEP_6,O,z),O.isDefaultAddress===!1){const U=O.countryForm===bs?bs:Ct;t("DIAGASS_24",{pays_adresse_facturation:U})}else t("DIAGASS_23");a.push(m.DIAG_ASS.STEP_CONFIRM)},L=()=>{r!=null&&r.showEdit?a.push(m.DIAG_ASS.STEP_6,{showEdit:!1}):a.push(m.DIAG_ASS.STEP_5)},k={label:i("validate"),align:"right"},E={label:i("next"),align:"right",arrow:!0},I={label:i("go_back"),arrow:!0,enabled:!0,loader:g,onClick:L},[_,C]=N.useState(k);return e.jsxDEV(Je.Provider,{value:{currentStep:s,franceMainObject:xr,franceSubObject:vr,foreignObject:Er,setStep6Schema:p,countryOptions:h,setCountryOptions:v,nextButtonDefault:k,nextButtonNext:E,setNextButton:C},children:e.jsxDEV(le,{initialValues:{countryForm:(u==null?void 0:u.countryForm)??ge,country:(u==null?void 0:u.country)??"",countryObj:(u==null?void 0:u.countryObj)??{},city:(u==null?void 0:u.city)??"",zip:(u==null?void 0:u.zip)??"",address:(u==null?void 0:u.address)??"",additionalAddress:(u==null?void 0:u.additionalAddress)??"",isDefaultAddress:!1},validateOnBlur:!0,validateOnChange:!1,validationSchema:w,onSubmit:T,children:({handleSubmit:O,setFieldValue:z,values:U})=>{const K=j=>{var Z;const{city:P,countryForm:W}=U;if(!(r!=null&&r.showEdit)&&ge===W&&P===""){const{address:oe,additionalAddress:ae,city:G}=(Z=n[0])==null?void 0:Z.values;z("city",G),z("address",oe),z("additionalAddress",ae),z("isDefaultAddress",!0)}O(j)};return e.jsxDEV("form",{id:"diagAssBillingAddress",onSubmit:K,children:[r!=null&&r.showEdit?e.jsxDEV(pa,{isFreeDiag:S},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:231,columnNumber:17},this):e.jsxDEV(da,{isFreeDiag:S},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:233,columnNumber:17},this),e.jsxDEV(ie,{previous:I,next:_},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:235,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:229,columnNumber:13},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:196,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:182,columnNumber:5},this)}function da({isFreeDiag:s}){const a=X(),{t}=F(),{track:r}=ee(),{state:i}=N.useContext(re),{steps:o}=i,l=["pin-location-1"],[n]=N.useState(()=>{var h,v;const c=((h=o[5])==null?void 0:h.values)??((v=o[0])==null?void 0:v.values),{address:u,additionalAddress:f,city:g}=c;return Ks({address:u,city:g,additionalAddress:f})}),d=[{locked:!1,summary:t("diagAss.step.step6.check.body",{context:s?"":"fee",address:n}),link:{onClick:()=>{r("DIAGASS_14",{type_information:Rs}),a.push(m.DIAG_ASS.STEP_6,{showEdit:!0})},label:t("edit")},values:{}}];return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(b.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:t("diagAss.step.step6.check.title",{context:s?"":"fee"})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:279,columnNumber:7},this),e.jsxDEV(Qe,{className:"mt-3 mt-lg-4",steps:d,isStepList:!0,icons:l},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:284,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:278,columnNumber:5},this)}const ca=()=>{const{t:s}=F(),{currentStep:a,franceMainObject:t,franceSubObject:r,setStep6Schema:i,setNextButton:o,nextButtonNext:l,nextButtonDefault:n}=N.useContext(Je),{state:d}=N.useContext(re),{steps:c}=d,u=a-1,f=Ie(),{values:g,errors:h,handleChange:v,handleBlur:A,setFieldValue:S,validateForm:w}=f,[p,y]=N.useState(!1),[T,L]=N.useState(!1),[k,E]=N.useState(()=>{var P,W,Z;const j=(W=(P=c[u])==null?void 0:P.values)!=null&&W.isDefaultAddress?null:(Z=c[u])==null?void 0:Z.values;if(j&&(j==null?void 0:j.city)!==""&&ge===(j==null?void 0:j.countryForm)){const{address:oe,locality:ae,localityId:G,postalCode:J}=j;return{locality:ae,zipcode:J,inseecode:G,text:oe}}return null}),[I,_]=N.useState(!1),[C,x]=N.useState(!1);N.useEffect(()=>{var j,P,W;(!((j=c[u])!=null&&j.values)||(W=(P=c[u])==null?void 0:P.values)!=null&&W.isDefaultAddress)&&o(l)},[]);const D={locality:k==null?void 0:k.locality,localityId:k==null?void 0:k.inseecode,postalCode:k==null?void 0:k.zipcode},B=j=>{let P;j?(P=ne({...t,...r}),o(n)):(P=ne(t),o(l)),i(P)},H=j=>{const{text:P}=j;E(j),y(!1),S("city",P,!0),S("address","",!1),S("additionalAddress","",!1),_(!1),B(!0)},R=({target:j})=>{j.value.length===0?(S("address","",!1),S("additionalAddress","",!1)):2<j.value.length&&!p&&y(!0),_(!0),S("city",j.value)},O=()=>{g.city.length>0&&I&&(S("address",""),S("city","",!0),E(null),B(!1)),y(!1)},z=j=>{const{locality:P,localityId:W,streetId:Z,streetName:oe,streetNumber:ae,streetNumberExt:G,text:J,postalCode:M}=j;S("address",J),S("localityId",W),S("streetId",Z),S("streetNumber",ae),S("streetNumberExt",G),S("streetName",oe),S("locality",P),S("postalCode",M),w(),x(!1),L(!1)},U=({target:j})=>{j.value.length>2&&!T&&L(!0),B(!0),x(!0),S("address",j.value)},K=()=>{g.address.length>0&&C&&S("address","",!0),L(!1)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"searchInput-town",children:e.jsxDEV(b.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:s("diagAss.step.step6.edit.city.label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:441,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:440,columnNumber:9},void 0),e.jsxDEV(He,{type:"town",name:"city",value:g.city,placeholder:s("diagAss.step.step6.edit.city.placeholder"),onChange:R,onClick:H,onClickAway:O,isSearching:p},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:449,columnNumber:9},void 0),e.jsxDEV(Q,{field:"city",customDisplay:h.city},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:459,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:439,columnNumber:7},void 0),k&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"searchInput-town",children:e.jsxDEV(b.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:s("diagAss.step.step6.edit.address.label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:465,columnNumber:15},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:464,columnNumber:13},void 0),e.jsxDEV(He,{type:"street",name:"address",value:g.address,placeholder:s("diagAss.step.step6.edit.address.placeholder"),onChange:U,onClick:z,onClickAway:K,isSearching:T,address:D},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:473,columnNumber:13},void 0),e.jsxDEV(Q,{field:"address",customDisplay:h.address},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:484,columnNumber:13},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:463,columnNumber:11},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzInput,{id:"additionalAddress",name:"additionalAddress",label:s("diagAss.step.step6.edit.additional_address.label"),placeholder:s("diagAss.step.step6.edit.additional_address.placeholder"),variant:"outlined",value:g.additionalAddress,onChange:v,onBlur:A},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:487,columnNumber:13},void 0),e.jsxDEV(Q,{field:"additionalAddress",customDisplay:h.additionalAddress},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:499,columnNumber:13},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:486,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:462,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:438,columnNumber:5},void 0)},ua=()=>{const{setNextButton:s,nextButtonDefault:a,countryOptions:t,setCountryOptions:r}=N.useContext(Je),{t:i}=F(),o=Ie(),{values:l,errors:n,touched:d,handleBlur:c,handleChange:u,setFieldTouched:f,setFieldValue:g}=o;N.useEffect(()=>{s(a)},[]);const{isLoading:h}=_e("countries",()=>Se.get(fe.GET_COUNTRIES),{refetchOnWindowFocus:!1,onSuccess:({data:S})=>{const w=S.map(({id:p,fr:y})=>({label:y,value:p}));r(w)}}),v=()=>{f("country",!0,!0)},A=S=>{g("country",S.label,!0),g("countryObj",S)};return h?e.jsxDEV(e.Fragment,{children:Array.from({length:5},(S,w)=>e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(ke,{height:20,width:100,className:"mb-2"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:562,columnNumber:13},void 0),e.jsxDEV(ke,{height:48},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:563,columnNumber:13},void 0)]},w,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:561,columnNumber:11},void 0))},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:559,columnNumber:7},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"country",children:e.jsxDEV(b.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:i("diagAss.step.step6.edit.country.label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:574,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:573,columnNumber:9},void 0),e.jsxDEV(b.SzSelect,{name:"country",id:"country",placeholder:i("diagAss.step.step6.edit.country.placeholder"),options:t,value:l.country,defaultValue:Object.keys(l.countryObj).length>0?l.countryObj:t.find(({value:S})=>S===l.country),onBlur:v,onChange:A},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:582,columnNumber:9},void 0),e.jsxDEV(Q,{field:"country",customDisplay:d.country&&n.country},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:596,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:572,columnNumber:7},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzInput,{id:"city",name:"city",label:i("diagAss.step.step6.edit.city.label"),placeholder:i("diagAss.step.step6.edit.city.placeholder",{context:"foreign"}),variant:"outlined",value:l.city,onChange:u,onBlur:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:602,columnNumber:9},void 0),e.jsxDEV(Q,{field:"city",customDisplay:d.city&&n.city},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:614,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:601,columnNumber:7},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzInput,{id:"zip",name:"zip",label:i("diagAss.step.step6.edit.zip.label"),placeholder:i("diagAss.step.step6.edit.zip.placeholder"),variant:"outlined",value:l.zip,onChange:u,onBlur:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:617,columnNumber:9},void 0),e.jsxDEV(Q,{field:"zip",customDisplay:d.zip&&n.zip},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:627,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:616,columnNumber:7},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzInput,{id:"address",name:"address",label:i("diagAss.step.step6.edit.address.label"),placeholder:i("diagAss.step.step6.edit.address.placeholder"),variant:"outlined",value:l.address,onChange:u,onBlur:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:630,columnNumber:9},void 0),e.jsxDEV(Q,{field:"address",customDisplay:d.address&&n.address},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:640,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:629,columnNumber:7},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzInput,{id:"additionalAddress",name:"additionalAddress",label:i("diagAss.step.step6.edit.additional_address.label"),placeholder:i("diagAss.step.step6.edit.additional_address.placeholder"),variant:"outlined",value:l.additionalAddress,onChange:u,onBlur:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:646,columnNumber:9},void 0),e.jsxDEV(Q,{field:"additionalAddress",customDisplay:d.additionalAddress&&n.additionalAddress},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:658,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:645,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:571,columnNumber:5},void 0)},pa=({isFreeDiag:s})=>{const{t:a}=F(),{currentStep:t,franceMainObject:r,foreignObject:i,setStep6Schema:o,setNextButton:l,nextButtonDefault:n,nextButtonNext:d}=N.useContext(Je),{state:c}=N.useContext(re),{steps:u}=c,f=t-1,g=Ie(),{values:h,resetForm:v}=g,A=S=>{var y;const w=(y=u[f])==null?void 0:y.values,p=S.target.value===(w==null?void 0:w.countryForm)?{country:w==null?void 0:w.country,countryObj:w==null?void 0:w.countryObj,city:w==null?void 0:w.city,address:w==null?void 0:w.address,zip:w==null?void 0:w.zip,additionalAddress:w==null?void 0:w.additionalAddress,isDefaultAddress:!1}:{country:"",countryObj:{},city:"",address:"",zip:"",additionalAddress:"",isDefaultAddress:!1};v({values:{countryForm:S.target.value,...p},errors:{}}),o(ne(ge===S.target.value?r:i)),l(ge===S.target.value?d:n)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(b.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:a("diagAss.step.step6.edit.title",{context:s?"":"fee"})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:724,columnNumber:7},void 0),e.jsxDEV(b.SzTypographie,{className:"mb-lg-4 text-dark",children:a("diagAss.step.step6.edit.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:729,columnNumber:7},void 0),e.jsxDEV("div",{className:"row mt-4",children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(b.SzTypographie,{className:"mb-2",children:a("diagAss.step.step6.edit.country_form.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:734,columnNumber:11},void 0),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(b.SzRadio,{id:"countryFormFrance",name:"countryForm",label:a("diagAss.step.step6.edit.country_form.france"),value:"france",checked:ge===h.countryForm,onChange:A},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:738,columnNumber:13},void 0),e.jsxDEV(b.SzRadio,{className:"ml-3",id:"countryFormForeign",name:"countryForm",label:a("diagAss.step.step6.edit.country_form.foreign"),value:"foreign",checked:Ye===h.countryForm,onChange:A},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:746,columnNumber:13},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:737,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:733,columnNumber:9},void 0),ge===h.countryForm?e.jsxDEV(ca,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:758,columnNumber:11},void 0):e.jsxDEV(ua,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:760,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:732,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:723,columnNumber:5},void 0)},ns="yes",os="no";function ma(){var I,_,C;const s=X(),{t:a}=F(),{track:t}=ee(),{state:r}=N.useContext(re),{steps:i}=r,{link:o}=(C=(_=(I=window.tsme_data)==null?void 0:I.footer)==null?void 0:_.links_bottom)==null?void 0:C.credits_url,n=i[1].values.radioBtn===us,[d,c]=N.useState(!1),u=()=>{c(!0),s.push(m.DIAG_ASS.STEP_6,{showEdit:!0})},f=i[4].values.serviceId,g=i[4].values.needWater,h=i[4].values.waterSupplied,v={...i[0].values},A={...i[5].values},[S,w]=N.useState(A);N.useEffect(()=>{Ye===A.countryForm&&A.address===""&&A.city===""&&w(v)},[]);let p=null;v.address===S.address&&v.additionalAddress===S.additionalAddress&&v.city===S.city?p=null:S.countryForm===ge?p=ns:S.countryForm===Ye&&(p=os);const y=()=>{t("DIAGASS_26");let x={idCertificate:f};p!==null&&(x.isFrenchAddress=p),g==="1"&&(x.waterSupplyAccess=h?ns:os),p===ns&&(x.insee=S.localityId,x.hexavia=S.streetId,x.streetName=S.streetName,x.city=S.locality,x.zipCode=S.postalCode,S.streetNumber&&(x.streetNumber=S.streetNumber)),p===os&&(x.country=S.country,x.city=S.city,x.zipCode=S.zip,x.address=S.address),S.additionalAddress!==""&&p!==null&&(x.additionalAddress=S.additionalAddress),L.mutate(x)},{isLoading:T,...L}=$e(x=>Se.post(fe.DIAG_ASS.FINALIZE_REQUEST,x),{onSuccess:({data:x})=>{x.message===ue.OK_FINALISATION_DEMANDE?s.push(m.DIAG_ASS.STEP_END):s.push(m.DIAG_ASS.TECHNICAL_ERROR)},onError:()=>{s.push(m.DIAG_ASS.TECHNICAL_ERROR)}}),k={label:a("diagAss.step.confirm.button"),align:"right",loader:T},E={label:a("go_back"),arrow:!0,enabled:!0,loader:d,onClick:u};return e.jsxDEV(le,{initialValues:{confirmConditions:!1},validateOnChange:!1,validationSchema:yr,onSubmit:y,children:({errors:x,handleSubmit:D,setFieldValue:B,values:H})=>(N.useEffect(()=>{x.confirmConditions&&t("DIAGASS_25")},[x]),e.jsxDEV("form",{id:"diagAssConfirmSummary",onSubmit:D,children:[e.jsxDEV("div",{className:"mb-4 mb-lg-5",children:[e.jsxDEV(b.SzTypographie,{className:"mb-lg-5 text-dark",children:a("diagAss.step.confirm.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:169,columnNumber:15},this),e.jsxDEV(Qe,{className:"mb-3 mb-lg-4",steps:i,isStepList:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:172,columnNumber:15},this),e.jsxDEV(b.SzCheckbox,{id:"confirmConditions",name:"confirmConditions",type:"checkbox",label:e.jsxDEV(Os,{i18nKey:"diagAss.step.confirm.conditions.accept",components:{cgu:e.jsxDEV(As,{"data-cy":"linkCGU",to:o,target:"_blank",decorate:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:186,columnNumber:25},this),cge:e.jsxDEV(As,{"data-cy":"linkCGE",to:n?Dt:Tt,target:"_blank",decorate:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:194,columnNumber:25},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:182,columnNumber:19},this),checked:H.confirmConditions,onChange:R=>{B("confirmConditions",R.target.checked,!0)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:177,columnNumber:15},this),e.jsxDEV(Q,{field:"confirmConditions",customDisplay:x.confirmConditions},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:213,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:168,columnNumber:13},this),e.jsxDEV(ie,{previous:E,next:k},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:218,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:167,columnNumber:11},this))},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:151,columnNumber:5},this)}function Sa(){var _,C,x,D;const s=X(),{transform:a}=Oe(),{t}=F(),{track:r}=ee(),{state:i}=N.useContext(re),{steps:o}=i,l=o[2].values.email,n=o[3].values,d=((_=o[1].values)==null?void 0:_.radioBtn)===Ke?ps:ms,c=qs(n==null?void 0:n.visit),u=Us(n==null?void 0:n.context),f=(n==null?void 0:n.type)===ve?"maison":"appartement",g=n==null?void 0:n.size,h=n==null?void 0:n.water,v=c,A=u,S=n==null?void 0:n.floor,w=n==null?void 0:n.pool,p=n==null?void 0:n.extra_equipment,y=(C=o[4])==null?void 0:C.summary.split(">")[1].split("<")[0],T=Gs(y),L=(x=o[4].values)==null?void 0:x.priceWithVAT,k=(D=o[4].values)!=null&&D.waterSupplied?Vs:Ls;N.useEffect(()=>{r("DIAGASS_27",{type_assainissement:d,type_logement:f,surface_logement:g,nombre_piece_eau:h,type_visite:v,contexte_demande:A,etage_logement:S,equipement_piscine:w,dependance_exterieure:p,type_diagnostic:T,tarif:L,alimentation_eau:k})},[]);const E=()=>{s.push(m.HOME)},I={label:t("diagAss.step.end.button"),align:"right",onClick:E};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"d-flex p-4 mb-3 border-s border border-1 border-green-05 rounded-1 bg-lighten-30-green-light","data-cy":"success",children:[e.jsxDEV(b.SzIcon,{className:"text-success text-xlarge mr-4",icon:"check-circle-1",variant:"bold"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:89,columnNumber:9},this),e.jsxDEV(b.SzTypographie,{className:"m-0 new-line text-break",children:e.jsxDEV(xe,{content:t("diagAss.step.end.alert",{email:l}),transform:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:95,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:85,columnNumber:7},this),e.jsxDEV("div",{className:"d-flex align-items-lg-center mt-4 mt-lg-5 pt-2 border-top border-1 border-gray-200",children:[e.jsxDEV(b.SzIcon,{className:"text-dark text-small mr-2",icon:"information-circle",variant:"line"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:102,columnNumber:9},this),e.jsxDEV(b.SzTypographie,{className:"text-dark",variant:"caption",size:"M",weight:"regular",children:t("diagAss.step.end.info")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:101,columnNumber:7},this),e.jsxDEV(ie,{next:I},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:116,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:84,columnNumber:5},this)}var fa={};function ga(){const s=X(),{transform:a}=Oe(),[t,r]=N.useState(!1),[i,o]=N.useState(!1),{t:l}=F(),{isConnected:n}=window.tsme_data,d=()=>{r(!0),s.push(n?m.DASHBOARD:m.HOME)},c={label:l(n?"diagAss.error.back_dashboard":"diagAss.error.back_home"),loader:t,align:"left",onClick:d},u=()=>{o(!0),s.push(m.CUSTOMER_SERVICE)},f={id:"CustomerServiceButton",label:l("diagAss.error.contact_customer_service"),loader:i,variant:"text",arrow:!0,onClick:u},{NODE_ENV:g}=fa,h=g===It.TEST?new Date("2024-01-01T12:00:00"):new Date;return e.jsxDEV(gs,{title:l("diagAss.step.technical_error.title",{date:xs(h,l("date.short_date")),time:xs(h,l("date.hour"))}),subtitle:e.jsxDEV(xe,{content:l("diagAss.step.technical_error.body"),transform:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:57,columnNumber:9},this),innerPadding:!1,children:[e.jsxDEV(ie,{next:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:64,columnNumber:7},this),e.jsxDEV("div",{className:"row",children:e.jsxDEV(ie,{next:f,marginTop:!1},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:66,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:65,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:51,columnNumber:5},this)}function Ws(){const{t:s}=F(),{transform:a}=Oe();return[{displayBadge:!1,step:jr,path:m.DIAG_ASS.STEP_0_START,title:s("diagAss.step.step0.start.title"),subtitle:e.jsxDEV(xe,{content:s("diagAss.step.step0.start.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/useSteps.tsx",lineNumber:57,columnNumber:17},this)},{displayBadge:!1,step:_r,path:m.DIAG_ASS.STEP_0_PRO_NOT_ELIGIBLE,error:!0},{displayBadge:!1,step:Cr,title:s("diagAss.step.step0.selection_origin.title"),path:m.DIAG_ASS.STEP_0_SELECTION_ORIGIN,subtitle:e.jsxDEV(xe,{content:s("diagAss.step.step0.selection_origin.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/useSteps.tsx",lineNumber:71,columnNumber:9},this)},{displayBadge:!1,step:Dr,path:m.DIAG_ASS.STEP_0_ERROR_REQUEST_ORIGIN,error:!0},{displayBadge:!1,step:Tr,title:s("diagAss.step.step0.owner_login.title"),path:m.DIAG_ASS.STEP_0_OWNER_LOGIN,index:0},{displayBadge:!1,step:Vr,path:m.DIAG_ASS.STEP_0_ERROR_NOT_OWNER,error:!0},{displayBadge:!0,step:Rr,index:1,path:m.DIAG_ASS.STEP_1},{displayBadge:!0,step:kr,index:1,path:m.DIAG_ASS.STEP_1_CREATE},{showHistory:!0,displayBadge:!0,step:Gr,index:2,title:s("diagAss.step.step2.sanitize.title"),path:m.DIAG_ASS.STEP_2},{displayBadge:!0,step:Br,title:s("diagAss.step.step3.list.title"),path:m.DIAG_ASS.STEP_2_KO_CONTRACT,error:!0},{displayBadge:!0,step:Mr,title:s("diagAss.step.step3.list.title"),path:m.DIAG_ASS.STEP_2_KO_DIGITAL,error:!0},{showHistory:!0,displayBadge:!0,step:Fr,index:3,title:s("diagAss.step.step3.list.title"),path:m.DIAG_ASS.STEP_3},{showHistory:!0,displayBadge:!0,step:Hr,index:3,title:s("diagAss.step.step3.create.title"),path:m.DIAG_ASS.STEP_3_CREATE},{displayBadge:!1,step:ta,title:s("diagAss.step.rgpd_confirm.title"),path:m.DIAG_ASS.STEP_RGPD_CONFIRM},{showHistory:!0,displayBadge:!0,step:Xr,index:4,title:s("diagAss.step.step4.complementary_infos.title"),path:m.DIAG_ASS.STEP_4},{displayBadge:!1,step:Jr,title:s("diagAss.step.step4.complementary_infos.title"),path:m.DIAG_ASS.STEP_4_KO,error:!0},{displayBadge:!1,step:ea,title:s("diagAss.step.step4.complementary_infos.title"),path:m.DIAG_ASS.STEP_4_KO_MAX_VALUE,error:!0},{showHistory:!0,displayBadge:!0,step:ra,index:5,title:s("diagAss.step.step5.title"),path:m.DIAG_ASS.STEP_5},{displayBadge:!1,step:aa,index:5,title:s("diagAss.step.step5.water.title"),subtitle:e.jsxDEV(xe,{content:s("diagAss.step.step5.water.body"),transform:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/useSteps.tsx",lineNumber:185,columnNumber:9},this),path:m.DIAG_ASS.STEP_5_WATER},{displayBadge:!1,step:ia,path:m.DIAG_ASS.STEP_5_KO,error:!0},{displayBadge:!1,step:na,title:s("diagAss.step.step5.title"),path:m.DIAG_ASS.STEP_5_WATER_KO,error:!0},{showHistory:!0,index:6,displayBadge:!0,step:la,path:m.DIAG_ASS.STEP_6},{displayBadge:!1,step:ma,title:s("diagAss.step.confirm.title"),path:m.DIAG_ASS.STEP_CONFIRM},{displayBadge:!1,step:Sa,title:s("diagAss.step.end.title"),path:m.DIAG_ASS.STEP_END},{step:ga,path:m.DIAG_ASS.TECHNICAL_ERROR}]}function wa(){const s=X(),a=Ss(),t=Ws(),{setSummaryStep1:r,setSummaryStep2:i,setSummaryStep3:o}=ze(),{t:l}=F(),{extraFn:n}=N.useContext(re),{lockStep:d,saveStep:c}=n,f=new URLSearchParams(a.search).get("token"),g=A=>{const{cellphone:S,email:w,lastName:p,additionalAddress:y,city:T,firstName:L,sanitationType:k,streetName:E,streetNumber:I,zipCode:_}=A,C=ye(I,E),x=ye(_,T),D=r(x,C,y);c(m.DIAG_ASS.STEP_1_CREATE,{addressId:"other",city:x,address:C,additionalAddress:y},l(D.label,D.values));const B=i(k,l);c(m.DIAG_ASS.STEP_2,{radioBtn:k},l(B.label,B.values));const H=o(L,p,w,S);c(m.DIAG_ASS.STEP_3,{value1:`${L} ${p}`,value2:S,value3:w,context:S},l(H.label,H.values)),d([1,2,3])},{isLoading:h,isIdle:v}=_e(["dataRestitution",f],()=>Se.get(fe.DIAG_ASS.DATA_RESTITUTION,{params:{token:f}}),{onSuccess:({data:A})=>{ue.SUCCESS===A.code?g(A.content):s.push(m.DIAG_ASS.TECHNICAL_ERROR)},onError:()=>{s.push(m.DIAG_ASS.TECHNICAL_ERROR)},enabled:!!f});return f&&(v||h)?e.jsxDEV(e.Fragment,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:104,columnNumber:12},this):e.jsxDEV(Ot,{children:t.map(A=>{const{path:S,title:w,subtitle:p,index:y,displayBadge:T,showHistory:L,error:k}=A,E=A.step;return e.jsxDEV(Vt,{path:S,children:[L&&e.jsxDEV(ur,{currentStep:y},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:124,columnNumber:29},this),k?e.jsxDEV(E,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:126,columnNumber:15},this):e.jsxDEV(gs,{displayBadge:T,title:w,subtitle:p,index:y,length:t.length,children:e.jsxDEV(E,{currentStep:y},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:135,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:128,columnNumber:15},this)]},S,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:123,columnNumber:11},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:108,columnNumber:5},this)}const{isConnected:Is}=window.tsme_data,Ys={displayList:!0,displayError:!1,currentStep:0,showHistory:!0,isRGPDValidation:!1,steps:[]};function Ma(){const s=X(),a=Ss(),{t}=F(),{track:r}=ee(),i=Lt(),o=Ws(),[l,n]=N.useState(a.pathname===m.DIAG_ASS.STEP_0_START),[d,c]=N.useReducer(cr,Ys),u=N.useMemo(()=>[d,c],[d,c]),{steps:f}=u[0];N.useEffect(()=>{n(a.pathname===m.DIAG_ASS.STEP_0_START)},[a]);const g=()=>{c({type:"setDisplay",payload:!1})},h=()=>{c({type:"setDisplayError",payload:!0})},v=T=>{if(Array.isArray(T))for(const L of T)c({type:"lockStep",payload:{index:L-1}});else c({type:"lockStep",payload:{index:T-1}})},A=T=>{const L=[...f];L[T-1]&&(delete L[T-1],c({type:"steps",payload:L}))},S=N.useCallback((T,L,k="")=>{const E=o.find(I=>I.path===T);if(E!=null&&E.index){const I=E.index-1,_=[...f],C={label:t("edit"),onClick:()=>{const H={[m.DIAG_ASS.STEP_1_CREATE]:Rt,[m.DIAG_ASS.STEP_2]:kt,[m.DIAG_ASS.STEP_3_CREATE]:zt,[m.DIAG_ASS.STEP_4]:Pt,[m.DIAG_ASS.STEP_5_WATER]:vs,[m.DIAG_ASS.STEP_5_WATER_KO]:vs,[m.DIAG_ASS.STEP_6]:Rs}[T];H&&r("DIAGASS_14",{type_information:H}),T===m.DIAG_ASS.STEP_1_CREATE&&Is?s.push(m.DIAG_ASS.STEP_1):T===m.DIAG_ASS.STEP_3_CREATE&&Is?s.push(m.DIAG_ASS.STEP_3):T===m.DIAG_ASS.STEP_5_WATER?s.push(m.DIAG_ASS.STEP_5):T===m.DIAG_ASS.STEP_6?s.push(m.DIAG_ASS.STEP_6,{showEdit:!0}):s.push(T)}},x={locked:!1,summary:"",link:C,values:{}};let D={..._[I]||x,summary:k,link:C};D.values=Object.assign(D.values,L),c({type:"step",payload:{index:I,step:D}})}},[f]),[w,p]=N.useState(""),y={state:u[0],dispatch:u[1],extraFn:{hideList:g,displayError:h,deleteStep:A,lockStep:v,saveStep:S},exceedsValueField:w,setExceedsValueField:p};return e.jsxDEV(ut,{id:"diagAssPage",type:"diag-ass",children:[!l&&e.jsxDEV(lr,{robots:"noindex"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:180,columnNumber:25},this),e.jsxDEV(b.SzTypographie,{variant:"H1",size:i?"L":"XL",weight:"black",color:"light",className:"text-center text-uppercase mb-4 mb-lg-5",children:t("diagAss.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:181,columnNumber:7},this),e.jsxDEV(dr,{initialValue:y,children:e.jsxDEV(wa,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:191,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:190,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:179,columnNumber:5},this)}export{Ma as default,Ys as initialState};
