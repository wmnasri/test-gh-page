import{j as e,b as i}from"./index-BzhTyqaY.js";import{r as m}from"./index-0X8QCd_i.js";import{M as r}from"./Meter-BDG96XlC.js";import{R as u}from"./main-BbuvrTKi.js";import{a as E}from"./useResponsive-DQBhMvnf.js";/* empty css                      */import{O as b,S as x,F as k}from"./formik.esm-DgjVmEdT.js";import{u as M}from"./useTranslation-BYGhmYBG.js";import{u as D}from"./AxiosInstance-BZZbXQ8a.js";import"./index-BoI371yk.js";import"./index-4p5aklhB.js";import"./throttle-C5YRRb_b.js";import"./_baseIsEqual-DwR-aJgz.js";import"./iframe-CrganuSH.js";import"../sb-preview/runtime.js";import"./nonIterableRest-CnCppAvF.js";const A=""+new URL("ask-email-CE0WiQPk.png",import.meta.url).href,V=b().shape({email:x().email("photoMeter.form.errors.email")});function Q(){const l=E(),{t:a}=M(),n=D(),[,c]=m.useState([]),[h,p]=m.useState(!1);m.useEffect(()=>{r.getDataSession().then(s=>{c(s)})},[]);const d=({target:s},o)=>{o("email",s.value)},N=s=>{const{email:o}=s;p(!0),r.updateSession({email:o}).then(()=>{r.sendConfirmationMail().then(t=>{t.isError==!1?n.push(u.PHOTO_COUNTER_CONFIRM,{isMailError:!1}):n.push(u.PHOTO_COUNTER_CONFIRM,{isMailSent:!0})})})};return e.jsxDEV("div",{className:"home-index",children:e.jsxDEV(k,{initialValues:{email:""},validateOnBlur:!0,validateOnChange:!0,validationSchema:V,onSubmit:N,children:({handleSubmit:s,values:o,errors:t,setFieldValue:w,isValid:j,dirty:f})=>e.jsxDEV("form",{onSubmit:s,children:[e.jsxDEV("div",{className:"container",children:e.jsxDEV("div",{className:"col-12 col-md-10 m-auto",children:e.jsxDEV(i.SzTypographie,{variant:"h1",className:"pl-3 title-page",children:a("photoMeter.askEmail.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:73,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:72,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:71,columnNumber:7},this),e.jsxDEV("div",{className:"container global-container mb-4",children:e.jsxDEV("div",{className:`col-12 col-md-10 m-auto ${l?"py-5":"py-3"}`,children:e.jsxDEV("div",{className:"row",children:[e.jsxDEV("div",{className:"col-md-6 d-md-block",children:[e.jsxDEV(i.SzTypographie,{weight:"regular",className:"mb-4",children:a("photoMeter.askEmail.formTitle")},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:85,columnNumber:15},this),e.jsxDEV(i.SzInput,{name:"email",value:o.email,onChange:v=>{d(v,w)},label:a("photoMeter.askEmail.email.label"),placeholder:a(l?"photoMeter.askEmail.email.placeholder.browser":"photoMeter.askEmail.email.placeholder.mobile"),icon:"envelope",valid:!t.email},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:89,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:84,columnNumber:13},this),e.jsxDEV("div",{className:"col-md-6 d-flex",children:e.jsxDEV("div",{className:"m-auto justify-content-center align-self-center d-md-block",children:e.jsxDEV("img",{src:A,alt:""},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:106,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:105,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:104,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:83,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:80,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:79,columnNumber:7},this),e.jsxDEV("div",{className:"container my-4",children:e.jsxDEV("div",{className:"col-12 col-md-10 m-auto d-flex",children:e.jsxDEV(i.SzButton,{type:"submit",variant:"contained",className:"m-auto",loader:h,isDisabled:!f||!j,children:e.jsxDEV(i.SzTypographie,{weight:"light",variant:"button",children:a("photoMeter.askEmail.submit")},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:122,columnNumber:13},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:115,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:114,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:113,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:70,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:52,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/photoMeter/AskEmail.jsx",lineNumber:51,columnNumber:5},this)}export{Q as default};
