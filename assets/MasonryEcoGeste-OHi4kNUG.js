import{j as a,b as V}from"./index-BAjkLHRS.js";import{R as N,r as d}from"./index-Djf8kdDz.js";import{M as z}from"./MasonryFilter-CeXoYWle.js";import{M as q}from"./MasonryCard-BUabWdVf.js";import{M as F}from"./MasonryInfo-Dd2VTqlg.js";import{r as m}from"./index-BcQ2dhrg.js";import{u as $}from"./useTranslation-Cclpl_OC.js";const H=({width:l=16,height:e=16,color:t="currentColor",className:n})=>a.jsxDEV("svg",{className:n,width:l,height:e,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsxDEV("path",{d:"M1.40887 9H16.4089",stroke:t,strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/usr/var/www/assets/js/icons/PlusIcon.tsx",lineNumber:18,columnNumber:5},void 0),a.jsxDEV("path",{d:"M8.90887 1.5V16.5",stroke:t,strokeLinecap:"round",strokeLinejoin:"round"},void 0,!1,{fileName:"/usr/var/www/assets/js/icons/PlusIcon.tsx",lineNumber:24,columnNumber:5},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/icons/PlusIcon.tsx",lineNumber:10,columnNumber:3},void 0);function j(){return j=Object.assign||function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(l[n]=t[n])}return l},j.apply(this,arguments)}function U(l,e){l.prototype=Object.create(e.prototype),l.prototype.constructor=l,C(l,e)}function C(l,e){return C=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},C(l,e)}var G=function(l){U(e,l);function e(){var n;return n=l.call(this)||this,n.state={columns:[],childRefs:[],hasDistributed:!1},n}var t=e.prototype;return t.componentDidUpdate=function(){!this.state.hasDistributed&&!this.props.sequential&&this.distributeChildren()},e.getDerivedStateFromProps=function(r,u){var p=r.children,i=r.columnsCount;return u&&p===u.children?null:j({},e.getEqualCountColumns(p,i),{children:p,hasDistributed:!1})},t.distributeChildren=function(){var r=this,u=this.props,p=u.children,i=u.columnsCount,h=Array(i).fill(0),v=this.state.childRefs.every(function(y){return y.current.getBoundingClientRect().height});if(v){var g=Array.from({length:i},function(){return[]}),w=0;N.Children.forEach(p,function(y){if(y&&N.isValidElement(y)){var E=r.state.childRefs[w].current.getBoundingClientRect().height,b=h.indexOf(Math.min.apply(Math,h));h[b]+=E,g[b].push(y),w++}}),this.setState(function(y){return j({},y,{columns:g,hasDistributed:!0})})}},e.getEqualCountColumns=function(r,u){var p=Array.from({length:u},function(){return[]}),i=0,h=[];return N.Children.forEach(r,function(v){if(v&&N.isValidElement(v)){var g=N.createRef();h.push(g),p[i%u].push(N.createElement("div",{style:{display:"flex",justifyContent:"stretch"},key:i,ref:g},v)),i++}}),{columns:p,childRefs:h}},t.renderColumns=function(){var r=this.props,u=r.gutter,p=r.itemTag,i=r.itemStyle;return this.state.columns.map(function(h,v){return N.createElement(p,{key:v,style:j({display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:u},i)},h.map(function(g){return g}))})},t.render=function(){var r=this.props,u=r.gutter,p=r.className,i=r.style,h=r.containerTag;return N.createElement(h,{style:j({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:u},i),className:p},this.renderColumns())},e}(N.Component);G.propTypes={children:m.oneOfType([m.arrayOf(m.node),m.node]).isRequired,columnsCount:m.number,gutter:m.string,className:m.string,style:m.object,containerTag:m.string,itemTag:m.string,itemStyle:m.object,sequential:m.bool};G.defaultProps={columnsCount:3,gutter:"0",className:null,style:{},containerTag:"div",itemTag:"div",itemStyle:{},sequential:!1};var I=1,_=typeof window<"u"?d.useLayoutEffect:d.useEffect,K=function(){var e=d.useState(!1),t=e[0],n=e[1];return _(function(){n(!0)},[]),t},W=function(){var e=K(),t=d.useState(typeof window<"u"?window.innerWidth:0),n=t[0],r=t[1],u=d.useCallback(function(){e&&r(window.innerWidth)},[e]);return _(function(){if(e)return window.addEventListener("resize",u),u(),function(){return window.removeEventListener("resize",u)}},[e,u]),n},P=function(e){var t=e.columnsCountBreakPoints,n=t===void 0?{350:1,750:2,900:3}:t,r=e.children,u=e.className,p=u===void 0?null:u,i=e.style,h=i===void 0?null:i,v=W(),g=d.useMemo(function(){var w=Object.keys(n).sort(function(E,b){return E-b}),y=w.length>0?n[w[0]]:I;return w.forEach(function(E){E<v&&(y=n[E])}),y},[v,n]);return N.createElement("div",{className:p,style:h},N.Children.map(r,function(w,y){return N.cloneElement(w,{key:y,columnsCount:g})}))};P.propTypes={children:m.oneOfType([m.arrayOf(m.node),m.node]).isRequired,columnsCountBreakPoints:m.object,className:m.string,style:m.object};const B=({title:l,dataCard:e,dataWaterInfo:t,filterBy:n,sortBy:r,isError:u})=>{const{t:p}=$(),[i,h]=d.useState(e||[]),[v,g]=d.useState(t||[]),[w,y]=d.useState(1),[E,b]=d.useState(r==null?void 0:r[0]),[O,k]=d.useState(0),T=12;d.useEffect(()=>{h((e==null?void 0:e.sort((s,c)=>{const o=new Date(s.date||""),f=new Date(c.date||"");return s.date!==c.date?f.getTime()-o.getTime():c.scale-s.scale}))||[]),k(s=>s+1)},[e]),d.useEffect(()=>{g(t||[]),k(s=>s+1)},[t]);const R=d.useMemo(()=>{if(!n)return["all"];const s=[];return e==null||e.forEach(c=>{const o=c[n];o!==void 0&&(typeof o=="string"?s.push(o):Array.isArray(o)&&o.forEach(f=>{typeof f=="string"&&s.push(f)}))}),Array.from(new Set(s))},[e,n]),M=d.useCallback((s,c)=>c?[...s].sort((o,f)=>{const x=new Date(o.date||""),S=new Date(f.date||"");return c.key==="date"?o.date!==f.date?S.getTime()-x.getTime():f.scale-o.scale:c.key==="scale"?o.scale!==f.scale?f.scale-o.scale:S.getTime()-x.getTime():0}):s,[]),L=d.useCallback(s=>{b(s),h(c=>M(c,s)),y(1)},[M]),A=d.useCallback(s=>{if(!e||!n){h([]);return}let c;if(s.length===1&&s[0]==="all")c=e;else{const o=s.filter(f=>f!=="all");c=e.filter(f=>{const x=f[n];return typeof x=="string"?o.includes(x):Array.isArray(x)?x.some(S=>o.includes(S)):!1})}h(M(c,E)),y(1)},[e,n,E,M]),D=d.useMemo(()=>{const c=w*T,o=[];let f=0;for(let x=0;x<(i==null?void 0:i.length);x++)o.push(i[x]),(o.length===1||o.length>2&&(o.length-1)%5===0)&&v&&f<v.length&&(o.push(v[f]),f++);return o==null?void 0:o.slice(0,c)},[i,T,w,v]);return a.jsxDEV("div",{className:"position-relative",children:a.jsxDEV("div",{className:"bg-transparent",children:[a.jsxDEV("div",{className:"d-flex flex-column flex-wrap align-items-center justify-content-center text-center",children:a.jsxDEV(V.SzTypographie,{variant:"H1",size:"L",tag:"h2",children:l},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:170,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:169,columnNumber:9},void 0),a.jsxDEV("div",{className:"my-3",children:a.jsxDEV(z,{categories:R,sortByItems:r,onFilter:A,onSort:L},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:175,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:174,columnNumber:9},void 0),u?a.jsxDEV("div",{"data-cy":"error-masonry",children:a.jsxDEV(V.SzTypographie,{variant:"body",size:"XL",weight:"regular",className:"mt-3 mt-lg-4",children:p("ecoGeste.error_masonry")},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:184,columnNumber:13},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:183,columnNumber:11},void 0):a.jsxDEV(a.Fragment,{children:[a.jsxDEV(P,{columnsCountBreakPoints:{345:1,769:3,1024:4},children:a.jsxDEV(G,{sequential:!0,className:"custom-masonry",children:D==null?void 0:D.map((s,c)=>a.jsxDEV("div",{className:"masonry-item w-100",children:"response"in s?a.jsxDEV(F,{...s},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:203,columnNumber:23},void 0):a.jsxDEV(q,{...s},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:205,columnNumber:23},void 0)},c,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:201,columnNumber:19},void 0))},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:199,columnNumber:15},void 0)},O,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:195,columnNumber:13},void 0),D&&w*T<((i==null?void 0:i.length)??0)+((t==null?void 0:t.length)??0)?a.jsxDEV("div",{className:"position-relative d-flex justify-content-center mt-3",children:a.jsxDEV("div",{className:"d-flex align-items-center justify-content-between rounded-1 px-3 py-2 text-white bg-contained cursor-pointer gap-2",onClick:()=>y(s=>s+1),children:[a.jsxDEV(V.SzTypographie,{tag:"span",weight:"medium",children:p("ecoGeste.readMore")},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:219,columnNumber:19},void 0),a.jsxDEV(H,{className:"text-bold ml-2"},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:222,columnNumber:19},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:215,columnNumber:17},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:214,columnNumber:15},void 0):null]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:194,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:168,columnNumber:7},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/masonry/MasonryEcoGeste.tsx",lineNumber:167,columnNumber:5},void 0)},se=B;export{se as M};
