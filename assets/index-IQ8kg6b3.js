import{j as e,a as fe,b as w}from"./index-BzhTyqaY.js";import{R as He,r as g}from"./index-0X8QCd_i.js";import{B as Ts}from"./index-D593oKY2.js";import{W as Vs}from"./index.module-C4qxLcGZ.js";import{R as r,b0 as Se,b1 as pe,b2 as Os,b3 as Ls,f as Qe}from"./main-BbuvrTKi.js";import{a as Rs,u as ks}from"./useResponsive-DQBhMvnf.js";import{u as xe}from"./useQuery-DDRZMcvI.js";import{B as zs}from"./index-DNT32797.js";import{E as Gs}from"./index-CrOxkS7a.js";import{M as we}from"./index-E8Xemi00.js";import{c as Ps,d as Z,_ as Bs,$ as Fs,o as Ms,a0 as Hs,n as Us,b as De,a1 as Ue,a2 as qe,a3 as qs,a4 as Ws,T as ts,a5 as Ks,a6 as $s,a7 as Ys,a8 as Qs,a9 as as,aa as rs,ab as Xs,ac as Xe,ad as Zs,ae as is,L as Ze,af as Js,ag as et,ah as st,ai as tt,aj as Je}from"./react-spring-web.esm-DsMzZgQq.js";import{u as Ee}from"./useInterweave-MFQvh887.js";import{u as F}from"./useTranslation-BYGhmYBG.js";import{u as Y,C as oe,a as de,A as ce,b as We,E as at,S as rt,R as it}from"./AxiosInstance-BZZbXQ8a.js";import{c as nt,O as ae,S as W,b as ot,F as ie,u as _e}from"./formik.esm-DgjVmEdT.js";import{F as $}from"./FormError-BtpZASc0.js";import{F as te}from"./index-BsXj3zEC.js";import"./index-m5SwaE3w.js";/* empty css              *//* empty css                         */import{S as je}from"./index-R4VhrMC6.js";import{u as Oe}from"./useMutation-DnofRurj.js";import{p as lt,I as dt}from"./PhoneInput-CWQsNAcr.js";import"./index-BoI371yk.js";import"./index-4p5aklhB.js";import"./throttle-C5YRRb_b.js";import"./_baseIsEqual-DwR-aJgz.js";import"./iframe-CrganuSH.js";import"../sb-preview/runtime.js";import"./nonIterableRest-CnCppAvF.js";import"./Tips-j9k3pi84.js";import"./light-bulb-shine-BN5xHApG.js";import"./createWithBsPrefix--uDGuUX5.js";import"./divWithClassName-BF71WaKi.js";import"./recaptcha-wrapper-CLWKokWK.js";const ct=({robots:s})=>e.jsxDEV(Vs,{children:s&&e.jsxDEV("meta",{name:"robots",content:s},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Seo/index.tsx",lineNumber:9,columnNumber:29},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Seo/index.tsx",lineNumber:9,columnNumber:10},void 0),ee=He.createContext({});function ut({children:s,initialValue:a}){return e.jsxDEV(ee.Provider,{value:a,children:s},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/diagAssContext.tsx",lineNumber:25,columnNumber:5},this)}function pt(s,a){const t=[...s.steps];switch(a.type){case"activeStep":return{...s,currentStep:a.payload};case"lockStep":const i={...t[a.payload.index]};return i.locked=!0,t[a.payload.index]=i,{...s,steps:t};case"reset":return{...fs};case"setDisplay":return{...s,displayList:a.payload};case"setDisplayError":return{...s,displayError:a.payload};case"showHistory":return{...s,showHistory:a.payload};case"step":return t[a.payload.index]=a.payload.step,{...s,steps:t};case"steps":return{...s,steps:a.payload};default:throw new Error("Not a reducer")}}function Ke({children:s,title:a,subtitle:t,displayBadge:i=!1,index:l,innerPadding:S=!0}){const o=fe("step-content",{"mt-2":!a&&t,"mt-3":a&&!t}),m=fe("bg-white rounded-3 position-relative mx-auto",{"px-3 py-4 px-lg-6 py-lg-5":S});return e.jsxDEV("div",{id:"diagAssContainer",className:m,style:{maxWidth:750},children:[i&&e.jsxDEV(zs,{borderColor:"expert-blue",className:"bg-blue-1 mb-2",textWeight:"bold",textSize:"M",textClassName:"text-white",children:[l," / ",6]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:45,columnNumber:9},this),a&&e.jsxDEV(w.SzTypographie,{variant:"H3",weight:"medium",size:"L",className:"mb-2",children:a},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:56,columnNumber:9},this),t&&e.jsxDEV(w.SzTypographie,{className:"mb-2 text-dark",children:t},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:61,columnNumber:9},this),e.jsxDEV("div",{className:o,children:s},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:63,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/box.tsx",lineNumber:39,columnNumber:5},this)}function Le({className:s,steps:a,isStepList:t,icons:i}){const{transform:l}=Ee();return e.jsxDEV("div",{className:s,children:a.map(({summary:S,link:p,locked:u},o)=>{const m=fe("row no-gutters align-items-center",{"pt-3 mt-3 border-top border-1 border-gray-200":0<o}),c=fe("col-2  text-lg-right",{"offset-2 offset-lg-0":t});return e.jsxDEV("div",{className:m,"data-cy":"stepHistory",children:[t&&e.jsxDEV("div",{className:"col-2 col-lg-1",children:i&&i[o]?e.jsxDEV(w.SzIcon,{className:"mr-3",variant:"line",icon:i[o]},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:41,columnNumber:19},this):e.jsxDEV(w.SzTypographie,{className:"step-list inline-flex mr-3",weight:"bold",children:o+1},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:43,columnNumber:19},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:39,columnNumber:15},this),e.jsxDEV("div",{className:t?"col-10 col-lg-9":"col-12 col-lg-10",children:e.jsxDEV(w.SzTypographie,{className:"m-0 text-dark",children:e.jsxDEV(we,{content:S,transform:l},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:56,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:55,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:52,columnNumber:13},this),e.jsxDEV("div",{className:c,children:!u&&e.jsxDEV(Ps,{className:"p-0 sz-typo-caption md",onClick:p==null?void 0:p.onClick,children:p==null?void 0:p.label},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:61,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:59,columnNumber:13},this)]},`stepsHistory-${o}`,!0,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:37,columnNumber:11},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/history.tsx",lineNumber:26,columnNumber:5},this)}function mt({currentStep:s}){const{t:a}=F(),{state:t}=g.useContext(ee),{steps:i}=t,[l,S]=g.useState(""),p=[{fields:{title:a("diagAss.step.step0.history.title"),content:e.jsxDEV(Le,{steps:i.slice(0,s-1)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/stepper/history.tsx",lineNumber:18,columnNumber:18},this)}}],u=o=>{S(o)};return e.jsxDEV("div",{style:{maxWidth:750,margin:"auto"},children:e.jsxDEV(Gs,{data:p,className:"rounded-3 mb-3",activeKey:l,setCurrentKey:u,toggle:!1,borderBottom:!1,buttonArrow:!0,isHistory:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/stepper/history.tsx",lineNumber:29,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/stepper/history.tsx",lineNumber:28,columnNumber:5},this)}function ye(){return{setSummaryStep1:(i,l,S)=>{let p=[];return p.push(l),S&&S!==""&&p.push(S),p.push(i),{label:"diagAss.stepper.step1",values:{value:p.join(", ")}}},setSummaryStep2:(i,l)=>({label:"diagAss.stepper.step2",values:{value:l(`diagAss.step.step2.sanitize.radioCard_${i}.label`)}}),setSummaryStep3:(i,l,S,p)=>({label:"diagAss.stepper.step3",values:{value1:`${i} ${l}`,value2:p,value3:S,context:p}})}}function ns(s,a){return`${s}/${a}`}function Re(s){return s.split("/",2)}function Ae(s,a){return[s,a].filter(t=>t).join(" ")}function os(s){return s.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-zA-Z0-9 ]/g,"").trim().replace(/ /g,"_").toLowerCase()}nt(W,"textValid",function(s){const a=/^[aàâäAæÆbBcCçdDeéèêëEfFgGhHiïîIjJkKlLmMnNñoôöOœŒpPqQrRsStTuùûüUvVwWxXyÿYzZ\-' ]*$/;return this.test("text-valid",s,t=>a.test(t))});const St=ae({selectOrigin:W().required("diagAss.error.select_option")}),ls=ae({ownerLoginOwnerHome:W().required("diagAss.error.select_option")}),gt=ls.shape({ownerLoginSuezUser:W().required("diagAss.error.select_option")}),ft=ae({profile:W().required("diagAss.error.mandatory_field")}),Pe=ae({city:W().required("diagAss.step.step1.create.error_field")}),wt=ae({city:W().required("diagAss.step.step1.create.error_field"),address:W().required("diagAss.step.step1.create.error_field"),additionalAddress:W()}),Nt=ae({addressId:W().required("diagAss.error.select_option")}),bt=ae({radioBtn:W().required("diagAss.error.select_option")}),At=ae({civilite:W().required("diagAss.error.mandatory_field"),prenom:W().textValid("diagAss.error.text_invalid").required("diagAss.error.mandatory_field"),nom:W().textValid("diagAss.error.text_invalid").required("diagAss.error.mandatory_field"),email:W().email("diagAss.error.email_invalid").required("diagAss.error.mandatory_field")}),ht=ae({contactId:W().required("diagAss.error.select_option")}),xt=ae({serviceId:W().required("diagAss.error.select_option")}),vt=ae().shape({waterSupplied:W().required("diagAss.error.select_option")}),Et={city:W().required("diagAss.error.mandatory_field")},_t={address:W().required("diagAss.error.mandatory_field")},jt={city:W().required("diagAss.error.mandatory_field"),zip:W().required("diagAss.error.mandatory_field"),country:W().required("diagAss.error.mandatory_field"),address:W().required("diagAss.error.mandatory_field")},yt=ae({confirmConditions:ot().oneOf([!0],"diagAss.step.confirm.conditions.error")});function Ct(){const s=Y(),a=Rs(),{t}=F(),{track:i}=Z(),l="particular",S="professional",p="particulier",u="professionnel",o=[{label:t("particular"),value:l},{label:t("professional"),value:S}],m=({profile:N})=>{const{value:x,label:h}=N;i("DIAGASS_1",{profil_demandeur:h===t("particular")?p:u}),S===x?s.push(r.DIAG_ASS.STEP_0_PRO_NOT_ELIGIBLE):s.push(r.DIAG_ASS.STEP_0_SELECTION_ORIGIN)},c={label:t("diagAss.step.step0.start.submit"),align:"right"};return e.jsxDEV(ie,{initialValues:{profile:""},validateOnBlur:!0,validationSchema:ft,validateOnMount:!1,onSubmit:m,children:({handleSubmit:N,setFieldValue:x,values:h,errors:v})=>{const j=d=>{x("profile",d)};return e.jsxDEV("form",{id:"diagAssStart",onSubmit:N,children:[e.jsxDEV("label",{id:"profile-aria-label",className:"mb-2",htmlFor:"profileInput",children:e.jsxDEV(w.SzTypographie,{tag:"span",children:t("diagAss.step.step0.start.profile_label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:77,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:72,columnNumber:13},this),e.jsxDEV(w.SzSelect,{id:"profile",name:"profile",inputId:"profileInput",className:a?"w-75":"","aria-labelledby":"profile-aria-label",placeholder:t("diagAss.step.step0.start.profile_placeholder"),options:o,value:h.profile,onChange:j,isSearchable:!1},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:81,columnNumber:13},this),e.jsxDEV($,{field:"profile",customDisplay:v.profile},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:93,columnNumber:13},this),e.jsxDEV("div",{className:"pt-1",children:e.jsxDEV(te,{next:c},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:95,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:71,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/Start.tsx",lineNumber:56,columnNumber:5},this)}function me(s){const{title:a,body:t,next:i,previous:l}=s,{transform:S}=Ee(),{t:p}=F(),u=Y(),[o,m]=g.useState(!1),c=()=>{m(!0),u.push(r.CUSTOMER_SERVICE)},N={label:p("diagAss.error.contact_customer_service"),loader:o,align:"right",onClick:c,disabled:!1},x=i??N;return e.jsxDEV(Ke,{title:a??p("diagAss.error.sorry"),subtitle:e.jsxDEV(we,{content:t,transform:S},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/error.tsx",lineNumber:42,columnNumber:17},this),children:e.jsxDEV(te,{previous:{...l,disabled:!1},next:x},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/error.tsx",lineNumber:44,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/ez-components/diagAss/utils/error.tsx",lineNumber:40,columnNumber:5},this)}function Dt(){const{t:s}=F(),{track:a}=Z(),[t,i]=g.useState(!1),l=()=>{a("DIAGASS_2",{motif_contact_client:Bs}),i(!0),window.location.href=r.CUSTOMER_SERVICE},S={label:s("diagAss.error.contact_customer_service"),loader:t,align:"right",onClick:l,disabled:!1};return e.jsxDEV(me,{body:s("diagAss.step.step0.pro_not_eligible.body"),next:S},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/Start/ProNotEligible.tsx",lineNumber:31,columnNumber:5},this)}function It(){const s=Y(),{t:a}=F(),{track:t}=Z(),i=({selectOrigin:S})=>{t("DIAGASS_3",{origine_demande:S?a("operator"):a("particular").toLowerCase()}),S?s.push(r.DIAG_ASS.STEP_0_ERROR_REQUEST_ORIGIN):s.push(r.DIAG_ASS.STEP_0_OWNER_LOGIN)},l={label:a("validate"),align:"right"};return e.jsxDEV(ie,{initialValues:{selectOrigin:""},validateOnBlur:!0,validationSchema:St,onSubmit:i,children:({handleSubmit:S,setFieldValue:p,values:u,errors:o})=>{const m=c=>{p("selectOrigin",!!+c.target.value)};return e.jsxDEV("form",{id:"diagAssSelectionOrigin",onSubmit:S,children:[e.jsxDEV("div",{className:"d-flex flex-column",children:[e.jsxDEV(w.SzRadio,{className:"mb-2",id:"selectionOriginNo",name:"selectOrigin",label:a("diagAss.step.step0.selection_origin.choiceYourOwnInitiative"),value:"0",checked:u.selectOrigin!==""&&!u.selectOrigin,onChange:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:53,columnNumber:15},this),e.jsxDEV(w.SzRadio,{id:"selectionOriginYes",name:"selectOrigin",label:a("diagAss.step.step0.selection_origin.choiceSanitationCompany"),value:"1",checked:u.selectOrigin!==""&&!!u.selectOrigin,onChange:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:64,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:52,columnNumber:13},this),e.jsxDEV($,{field:"selectOrigin",customDisplay:o.selectOrigin},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:75,columnNumber:13},this),e.jsxDEV(te,{next:l},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:79,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:51,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/SelectionOrigin.tsx",lineNumber:37,columnNumber:5},this)}function ke(s){const{t:a}=F(),{track:t}=Z(),[i,l]=g.useState(!1),S=()=>{t("DIAGASS_2",{motif_contact_client:s}),l(!0),window.location.href=r.CUSTOMER_SERVICE};return{label:a("diagAss.error.contact_customer_service"),loader:i,align:"right",onClick:S,disabled:!1}}function Tt(){const{t:s}=F(),a=ke(Fs);return e.jsxDEV(me,{body:s("diagAss.step.step0.error_request_origin.body"),next:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/SelectionOrigin/ErrorRequestOrigin.tsx",lineNumber:12,columnNumber:5},this)}const $e=He.createContext(null);function Vt(){const s=Y(),{t:a}=F(),{track:t}=Z(),[i,l]=g.useState(!1),[S,p]=g.useState(!0),[u,o]=g.useState({}),{isConnected:m}=window.tsme_data,c={label:a("next"),align:"right",arrow:!0},N={label:a("validate"),align:"right"},[x,h]=g.useState(c);g.useEffect(()=>{o(i&&!m?gt:ls)},[i]);const v=({ownerLoginOwnerHome:d,ownerLoginSuezUser:f})=>{d||(t("DIAGASS_6"),s.push(r.DIAG_ASS.STEP_0_ERROR_NOT_OWNER)),d&&(!f||m)&&(t("DIAGASS_7"),s.push(r.DIAG_ASS.STEP_1))},j={ownerLoginOwnerHome:"",ownerLoginSuezUser:""};return e.jsxDEV($e.Provider,{value:{setShowFormButtons:p,setShowSuezUser:l,stepOwnerLoginSchema:u,setStepOwnerLoginSchema:o,nextButton:x,setNextButton:h,nextButtonDefault:c,nextButtonValidate:N,isConnected:m},children:e.jsxDEV(ie,{initialValues:j,validateOnBlur:!0,validationSchema:u,onSubmit:v,children:({handleSubmit:d})=>e.jsxDEV("form",{id:"diagAssOwnerLogin",onSubmit:d,children:[e.jsxDEV(Ot,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:99,columnNumber:15},this),i&&!m&&e.jsxDEV(Lt,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:100,columnNumber:48},this),S&&e.jsxDEV(te,{next:x},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:101,columnNumber:35},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:98,columnNumber:13},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:90,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:77,columnNumber:5},this)}function Ot(){const{setShowSuezUser:s,setShowFormButtons:a,setNextButton:t,nextButtonValidate:i,nextButtonDefault:l,isConnected:S}=g.useContext($e),p=_e(),{values:u,setFieldValue:o,errors:m}=p,{t:c}=F(),N=x=>{const h=!!parseInt(x.target.value);o("ownerLoginSuezUser","",!1),o("ownerLoginOwnerHome",h),s(h),a(!0),t(h&&!S?l:i)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(w.SzTypographie,{size:"XL",children:c("diagAss.step.step0.owner_login.owner_home")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:136,columnNumber:7},this),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(w.SzRadio,{id:"ownerLoginOwnerHomeYes",name:"ownerLoginOwnerHome",label:c("yes"),value:"1",checked:u.ownerLoginOwnerHome!==""&&!!u.ownerLoginOwnerHome,onChange:N},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:140,columnNumber:9},this),e.jsxDEV(w.SzRadio,{className:"ml-3",id:"ownerLoginOwnerHomeNo",name:"ownerLoginOwnerHome",label:c("no"),value:"0",checked:u.ownerLoginOwnerHome!==""&&!u.ownerLoginOwnerHome,onChange:N},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:150,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:139,columnNumber:7},this),e.jsxDEV($,{field:"ownerLoginOwnerHome",customDisplay:m.ownerLoginOwnerHome},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:162,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:135,columnNumber:5},this)}function Lt(){const{setShowFormButtons:s,setNextButton:a,nextButtonDefault:t,nextButtonValidate:i}=g.useContext($e),l=_e(),{values:S,setFieldValue:p,errors:u}=l,{t:o}=F(),{track:m}=Z(),c=Y(),[N,x]=g.useState(!1),{brand:h}=window.tsme_data,v=n=>{const C=!!parseInt(n.target.value);p("ownerLoginSuezUser",C),s(!C),a(C?t:i)},j=()=>{m("DIAGASS_5"),x(!0)},d=()=>{m("DIAGASS_4"),c.push(r.SIGN_UP+"?redirect=diagass")},f=()=>{x(!1)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(w.SzModal,{handleClose:f,show:N,border:"smooth",centered:!0,fullscreen:"md",size:"md",backdrop:!0,title:"",children:e.jsxDEV(Ms,{className:"px-3 py-3 login-menu no-gutters",title:o("signIn.hasAccount.button_submit"),submitText:o("signIn.hasAccount.button_submit"),targetPath:r.DIAG_ASS.STEP_1,usernameInputId:"username-popin",passwordInputId:"password-popin",variant:"redesign",isModal:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:221,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:211,columnNumber:7},this),e.jsxDEV("div",{className:"mt-5",children:[e.jsxDEV(w.SzTypographie,{size:"XL",children:o("diagAss.step.step0.owner_login.suez_user",{brand:h.name})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:233,columnNumber:9},this),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(w.SzRadio,{id:"ownerLoginSuezUserYes",name:"ownerLoginSuezUser",label:o("yes"),value:"1",checked:S.ownerLoginSuezUser!==""&&!!S.ownerLoginSuezUser,onChange:v},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:237,columnNumber:11},this),e.jsxDEV(w.SzRadio,{className:"ml-3",id:"ownerLoginSuezUserNo",name:"ownerLoginSuezUser",label:o("no"),value:"0",checked:S.ownerLoginSuezUser!==""&&!S.ownerLoginSuezUser,onChange:v},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:247,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:236,columnNumber:9},this),e.jsxDEV($,{field:"ownerLoginSuezUser",customDisplay:u.ownerLoginSuezUser},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:259,columnNumber:9},this),!!S.ownerLoginSuezUser&&e.jsxDEV("div",{className:"mt-4 mt-lg-5",children:[e.jsxDEV(w.SzTypographie,{children:o("diagAss.step.step0.owner_login.suez_user_login",{brand:h.name})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:265,columnNumber:13},this),e.jsxDEV("div",{className:"row",children:[e.jsxDEV("div",{className:"col-12 col-lg-auto order-lg-1",children:e.jsxDEV(w.SzButton,{id:"OwnerLogin",variant:"contained",border:"soft",onClick:j,children:o("diagAss.step.step0.owner_login.login")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:272,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:271,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-auto order-lg-0 mt-2 mt-lg-0",children:e.jsxDEV(w.SzButton,{id:"OwnerRegister",variant:"outlined",border:"soft",onClick:d,children:o("diagAss.step.step0.owner_login.register")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:282,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:281,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:270,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:264,columnNumber:11},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:232,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/OwnerLoginStep.tsx",lineNumber:210,columnNumber:5},this)}function Rt(){const s=Y(),{t:a}=F(),{track:t}=Z(),[i,l]=g.useState(!1),S=()=>{l(!0),t("DIAGASS_8",{motif_retour_accueil:Hs}),s.push(r.HOME)},p={label:a("diagAss.error.back_home"),onClick:S,loader:i,align:"right"};return e.jsxDEV(me,{body:a("diagAss.step.step0.error_not_owner.body"),next:p},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step0/OwnerLoginStep/ErrorNotOwner.tsx",lineNumber:33,columnNumber:5},this)}const ds=Us.input`
  appearance: none;
  width: 24px;
  height: 24px;
  border: 2px solid var(--blue-1);
  border-radius: 50%;
  &:checked {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    &::after {
      content: '';
      position: absolute;
      width: 8px;
      height: 8px;
      background-color: var(--blue-1);
      border-radius: 50%;
    }
  }
`;ds.defaultProps={type:"radio"};const kt=({className:s,children:a,label:t,onChange:i,checked:l,name:S,value:p,id:u,imgSrc:o,radioPosition:m})=>{const c=fe("ml-auto d-flex",{"align-items-center":m==="center","align-items-end":m==="bottom"}),N=fe("cursor-pointer bg-white row no-gutters rounded-2 border border-1 p-3 p-lg-4 w-100",{"border-card-disabled":!l,"border-primary-dark":l},s),x=fe("d-flex col-12",{"col-lg-9":o}),h=g.useRef(),v=()=>{const j=new InputEvent("change",{bubbles:!0});h.current&&(h.current.dispatchEvent(j),i&&i(j))};return e.jsxDEV("div",{className:N,onClick:v,style:{maxWidth:515},children:[o&&e.jsxDEV("div",{className:"d-flex col-12 col-lg-3 mb-3 mr-auto",style:{flex:0},children:e.jsxDEV("img",{src:o,width:80,height:80,alt:""},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:85,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:81,columnNumber:9},void 0),e.jsxDEV("div",{className:x,children:[e.jsxDEV("div",{className:"mr-3",children:[t&&e.jsxDEV("label",{className:"m-0 cursor-pointer",htmlFor:u||S,children:e.jsxDEV(w.SzTypographie,{variant:"H5",tag:"span",className:"text-uppercase",children:t},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:93,columnNumber:15},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:92,columnNumber:13},void 0),a]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:90,columnNumber:9},void 0),e.jsxDEV("div",{className:c,children:e.jsxDEV(ds,{ref:h,className:"ml-auto",onChange:i,name:S,id:u||S,value:p,checked:l},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:101,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:100,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:89,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/RadioCard/index.tsx",lineNumber:75,columnNumber:5},void 0)},he=kt;function Ye({count:s=1}){return e.jsxDEV(e.Fragment,{children:Array.from({length:s},(a,t)=>e.jsxDEV("div",{className:"row no-gutters rounded-2 border border-1 p-3 p-lg-4 w-100 mb-3",style:{maxWidth:515},children:[e.jsxDEV("div",{className:"col-8",children:[e.jsxDEV(je,{height:40,className:"mb-3"},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:14,columnNumber:13},this),e.jsxDEV(je,{count:2,className:"ml-4"},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:15,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:13,columnNumber:11},this),e.jsxDEV("div",{className:"col-1 offset-3 align-self-center",children:e.jsxDEV(je,{height:24,width:24,circle:!0,className:"ml-auto"},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:18,columnNumber:13},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:17,columnNumber:11},this)]},t,!0,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:8,columnNumber:9},this))},void 0,!1,{fileName:"/usr/var/www/assets/js/components/Skeleton/RadioCard/index.tsx",lineNumber:6,columnNumber:5},this)}function zt(s){var _;const{currentStep:a}=s,t=Y(),{setSummaryStep1:i}=ye(),{t:l}=F(),{dispatch:S,extraFn:p,state:u}=g.useContext(ee),{saveStep:o}=p,{steps:m}=u,c=a-1,N=(_=m[c])==null?void 0:_.values,[x,h]=g.useState(!1),{isConnected:v}=window.tsme_data,{track:j}=Z();g.useEffect(()=>{S({type:"activeStep",payload:1}),v||t.push(r.DIAG_ASS.STEP_1_CREATE)},[]);const{data:d,isLoading:f}=xe("addressList",()=>de.get(ce.DIAG_ASS.SITE_ADDRESS),{onSuccess:({data:y})=>{const{message:b}=y;oe.KO_ADRESSE===b&&t.push(r.DIAG_ASS.STEP_1_CREATE)},onError:()=>{t.push(r.DIAG_ASS.TECHNICAL_ERROR)},enabled:v}),{content:n=[]}=(d==null?void 0:d.data)||{},C=()=>{h(!0),t.push(r.DIAG_ASS.STEP_0_START)},V={label:l("go_back"),arrow:!0,enabled:!0,loader:x,onClick:C},R={label:l("validate"),align:"right"},L=y=>{const{city:b,address:D,additionalAddress:P}=y,{label:M,values:O}=i(b,D,P);return l(M,O)},A=y=>{const{addressId:b}=y;if(Se===b)t.push({pathname:r.DIAG_ASS.STEP_1_CREATE});else{const D=L(y);o(r.DIAG_ASS.STEP_1,y,D),t.push(r.DIAG_ASS.STEP_2)}},I={addressId:(N==null?void 0:N.addressId)??"",city:(N==null?void 0:N.city)??"",address:(N==null?void 0:N.address)??"",additionalAddress:(N==null?void 0:N.additionalAddress)??""};return e.jsxDEV(ie,{initialValues:I,validateOnBlur:!0,validateOnChange:!1,validationSchema:Nt,onSubmit:A,children:({handleSubmit:y,setFieldValue:b,values:D,errors:P})=>{const M=T=>{const{addressId:k}=D;if(j("DIAGASS_9"),Se!==k){const[H,U]=Re(k),E=n.find(z=>z.iliadeSiteId===H&&z.odysseAccountId===U);E&&(b("city",Ae(E.zipCode,E.city)),b("address",Ae(E.streetNumber,E.address)),b("additionalAddress",E.additionalAddress))}y(T)},O=T=>{b("city",""),b("address",""),b("additionalAddress",""),b("addressId",T.target.value,!0)};return e.jsxDEV("form",{id:"diagAssAddress",onSubmit:M,children:[e.jsxDEV(w.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:l("diagAss.step.step1.list.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:164,columnNumber:13},this),e.jsxDEV("div",{className:"my-3 mt-lg-4",children:f?e.jsxDEV(Ye,{count:3},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:169,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{"data-cy":"address-list",className:"mh-lg",children:n.map(({contractName:T,iliadeSiteId:k,odysseAccountId:H,address:U,streetNumber:E,additionalAddress:z,zipCode:q,city:Q},re)=>{const se=ns(k,H),G=`address-${se}`;return e.jsxDEV(he,{id:G,name:"addressId",className:re===n.length-1?"mb-0":"mb-3",label:T??void 0,value:se,checked:se===D.addressId,onChange:O,radioPosition:"center",children:[e.jsxDEV(w.SzTypographie,{className:"mb-3",variant:"caption",size:"M",color:"disabled",weight:"regular",children:[l("num")," ",H]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:206,columnNumber:29},this),e.jsxDEV(w.SzData,{icon:"pin-location-1",variant:"line",className:"d-lg-flex align-items-center",children:e.jsxDEV(w.SzTypographie,{className:"mb-0",weight:"regular",children:[E," ",U,z&&`, ${z}`,", ",q," ",Q]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:220,columnNumber:31},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:215,columnNumber:29},this)]},G,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:193,columnNumber:27},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:172,columnNumber:19},this),e.jsxDEV(he,{id:"address-other",name:"addressId",className:"my-3",value:Se,checked:Se===D.addressId,onChange:O,radioPosition:"center",children:e.jsxDEV(w.SzData,{icon:"add-circle",variant:"line",className:"d-flex align-items-center",children:e.jsxDEV(w.SzTypographie,{className:"mb-0",weight:"regular",children:l("diagAss.step.step1.list.other")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:245,columnNumber:23},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:240,columnNumber:21},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:231,columnNumber:19},this),e.jsxDEV($,{field:"addressId",customDisplay:P.addressId},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:250,columnNumber:19},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:171,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:167,columnNumber:13},this),e.jsxDEV(te,{previous:V,next:R},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:257,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:163,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressList.tsx",lineNumber:120,columnNumber:5},this)}function Gt({currentStep:s}){var se;const a=Y(),{t}=F(),{track:i}=Z(),{setSummaryStep1:l}=ye(),{dispatch:S,extraFn:p,state:u}=g.useContext(ee),{saveStep:o}=p,{steps:m}=u,c=s-1,N=(se=m[c])==null?void 0:se.values,[x,h]=g.useState(!1),[v,j]=g.useState(!1),[d,f]=g.useState(()=>{var X;const G=(X=m[c])==null?void 0:X.values;if(G&&(G==null?void 0:G.address)!==""){const{address:B,locality:K,localityId:J,postalCode:ne}=G;return{locality:K,zipcode:ne,inseecode:J,text:B}}return null}),[n,C]=g.useState(!1),[V,R]=g.useState(!1),[L,A]=g.useState(!1),{isConnected:I}=window.tsme_data,_={locality:d==null?void 0:d.locality,localityId:d==null?void 0:d.inseecode,postalCode:d==null?void 0:d.zipcode},y={label:t("validate"),align:"right"},b={label:t("next"),align:"right",arrow:!0},[D,P]=g.useState(()=>{var X;const G=(X=m[c])==null?void 0:X.values;return G&&(G==null?void 0:G.address)!==""?y:b}),[M,O]=g.useState(Pe);g.useEffect(()=>{S({type:"activeStep",payload:1})},[]);const{data:T}=xe("addressList",()=>de.get(ce.DIAG_ASS.SITE_ADDRESS),{onError:()=>{a.push(r.DIAG_ASS.TECHNICAL_ERROR)},enabled:I}),{content:k=[]}=(T==null?void 0:T.data)||{},H=G=>{let X;G?(X=Pe.concat(wt),P(y)):(X=Pe,P(b)),O(X)},U=()=>{I&&0<k.length?(window.scrollTo(0,0),a.push(r.DIAG_ASS.STEP_1)):(A(!0),a.push(r.DIAG_ASS.STEP_0_START))},E={label:t("go_back"),arrow:!0,enabled:!0,loader:L,onClick:U},z=(G,X)=>G!=null&&G[X]&&(G==null?void 0:G.addressId)===Se?G==null?void 0:G[X]:"",q={addressId:(N==null?void 0:N.addressId)??"",city:z(N,"city"),address:z(N,"address"),additionalAddress:z(N,"additionalAddress")},Q=G=>{const{city:X,address:B,additionalAddress:K}=G,{label:J,values:ne}=l(X,B,K);return t(J,ne)},re=G=>{i("DIAGASS_10");const X=Q(G);o(r.DIAG_ASS.STEP_1_CREATE,G,X),a.push(r.DIAG_ASS.STEP_2)};return e.jsxDEV(ie,{initialValues:q,validateOnBlur:!0,validateOnChange:!1,validationSchema:M,onSubmit:re,children:({handleChange:G,handleSubmit:X,setFieldValue:B,validateForm:K,values:J,errors:ne,resetForm:ws})=>{const Ns=le=>{const{text:Ge}=le;f(le),h(!1),ws({values:{addressId:(J==null?void 0:J.addressId)??"",city:Ge,address:"",additionalAddress:""},errors:{}}),C(!1),H(!0)},bs=({target:le})=>{le.value.length===0?(B("address","",!1),B("additionalAddress","",!1)):2<le.value.length&&!x&&h(!0),C(!0),B("city",le.value)},As=()=>{J.city.length>0&&n&&(B("address",""),B("city","",!0),f(null),H(!1)),h(!1)},hs=le=>{const{text:Ge,localityId:Es,streetId:_s,streetNumber:js,streetNumberExt:ys,streetName:Cs,locality:Ds,postalCode:Is}=le;B("address",Ge),B("localityId",Es),B("streetId",_s),B("streetNumber",js),B("streetNumberExt",ys),B("streetName",Cs),B("locality",Ds),B("postalCode",Is),B("addressId",Se),K(),R(!1),j(!1)},xs=({target:le})=>{le.value.length>2&&!v&&j(!0),H(!0),R(!0),B("address",le.value)},vs=()=>{J.address.length>0&&V&&B("address","",!0),j(!1)};return e.jsxDEV("form",{id:"diagAssAddress",onSubmit:X,children:[e.jsxDEV(w.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:t("diagAss.step.step1.create.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:251,columnNumber:13},this),e.jsxDEV(w.SzTypographie,{className:"mt-2 text-dark",children:t("diagAss.step.step1.create.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:254,columnNumber:13},this),e.jsxDEV("div",{className:"row",children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"searchInput-town",children:e.jsxDEV(w.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:t("diagAss.step.step1.create.city")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:260,columnNumber:19},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:259,columnNumber:17},this),e.jsxDEV(De,{type:"town",name:"city",value:J.city,placeholder:t("diagAss.step.step1.create.city_placeholder"),onChange:bs,onClick:Ns,onClickAway:As,isSearching:x},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:268,columnNumber:17},this),e.jsxDEV($,{field:"city",customDisplay:ne.city},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:278,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:258,columnNumber:15},this),d&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"searchInput-town",children:e.jsxDEV(w.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:t("diagAss.step.step6.edit.address.label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:284,columnNumber:23},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:283,columnNumber:21},this),e.jsxDEV(De,{type:"street",name:"address",value:J.address,placeholder:t("diagAss.step.step1.create.address_placeholder"),onChange:xs,onClick:hs,onClickAway:vs,isSearching:v,address:_},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:292,columnNumber:21},this),e.jsxDEV($,{field:"address",customDisplay:ne.address},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:305,columnNumber:21},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:282,columnNumber:19},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzInput,{id:"additionalAddress",name:"additionalAddress",label:t("diagAss.step.step1.create.additional_address"),placeholder:t("diagAss.step.step1.create.additional_address_placeholder"),variant:"outlined",value:J.additionalAddress,onChange:G},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:308,columnNumber:21},this),e.jsxDEV($,{field:"additionalAddress",customDisplay:ne.additionalAddress},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:319,columnNumber:21},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:307,columnNumber:19},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:281,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:257,columnNumber:13},this),e.jsxDEV(te,{previous:E,next:D},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:327,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:250,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step1/AddressCreate.tsx",lineNumber:154,columnNumber:5},this)}const Pt=""+new URL("sanitize_group-BRGooCBV.svg",import.meta.url).href,Bt="data:image/svg+xml,%3csvg%20width='80'%20height='81'%20viewBox='0%200%2080%2081'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='mask0_5823_3014'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='80'%20height='81'%3e%3ccircle%20cx='40'%20cy='40.8154'%20r='40'%20fill='white'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_5823_3014)'%3e%3crect%20x='-8.75'%20y='45.8154'%20width='97.5'%20height='35'%20fill='%23BBDBFD'/%3e%3ccircle%20cx='40'%20cy='40.8154'%20r='39.5'%20stroke='%233D466C'/%3e%3cpath%20d='M57.5797%2027.2845L41.5356%2011.2467C41.4%2011.11%2041.2387%2011.0016%2041.0609%2010.9276C40.8832%2010.8535%2040.6925%2010.8154%2040.5%2010.8154C40.3075%2010.8154%2040.1168%2010.8535%2039.9391%2010.9276C39.7613%2011.0016%2039.6%2011.11%2039.4644%2011.2467L23.4203%2027.2845C23.2179%2027.4895%2023.0809%2027.7499%2023.0263%2028.0327C22.9718%2028.3155%2023.0023%2028.6082%2023.114%2028.8737C23.2235%2029.1399%2023.4093%2029.3679%2023.6481%2029.5287C23.8869%2029.6896%2024.168%2029.7762%2024.4559%2029.7776H26.2791C26.3758%2029.7776%2026.4686%2029.816%2026.5369%2029.8844C26.6053%2029.9528%2026.6437%2030.0455%2026.6437%2030.1421V44.3575C26.6437%2044.7441%2026.7974%2045.115%2027.0709%2045.3884C27.3445%2045.6618%2027.7155%2045.8154%2028.1023%2045.8154H36.489C36.5857%2045.8154%2036.6784%2045.777%2036.7468%2045.7087C36.8152%2045.6403%2036.8536%2045.5476%2036.8536%2045.4509V38.5255C36.8536%2037.5588%2037.2378%2036.6317%2037.9216%2035.9482C38.6054%2035.2646%2039.5329%2034.8806%2040.5%2034.8806C41.4671%2034.8806%2042.3946%2035.2646%2043.0784%2035.9482C43.7622%2036.6317%2044.1464%2037.5588%2044.1464%2038.5255V45.4509C44.1464%2045.5476%2044.1848%2045.6403%2044.2532%2045.7087C44.3216%2045.777%2044.4143%2045.8154%2044.511%2045.8154H52.8977C53.2845%2045.8154%2053.6555%2045.6618%2053.9291%2045.3884C54.2026%2045.115%2054.3563%2044.7441%2054.3563%2044.3575V30.1421C54.3563%2030.0455%2054.3947%2029.9528%2054.4631%2029.8844C54.5314%2029.816%2054.6242%2029.7776%2054.7209%2029.7776H56.5441C56.832%2029.7762%2057.1131%2029.6896%2057.3519%2029.5287C57.5907%2029.3679%2057.7765%2029.1399%2057.886%2028.8737C57.9977%2028.6082%2058.0282%2028.3155%2057.9737%2028.0327C57.9191%2027.7499%2057.782%2027.4895%2057.5797%2027.2845Z'%20fill='%23030F40'/%3e%3c/g%3e%3cg%20clip-path='url(%23clip0_5823_3014)'%3e%3cpath%20d='M34%2047.8154V45.3154'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M26%2056.3154H25.5C25.1022%2056.3154%2024.7206%2056.1574%2024.4393%2055.8761C24.158%2055.5948%2024%2055.2133%2024%2054.8154C24%2054.4176%2024.158%2054.0361%2024.4393%2053.7548C24.7206%2053.4735%2025.1022%2053.3154%2025.5%2053.3154H29C30.0637%2053.3141%2031.0994%2052.9742%2031.957%2052.345C32.8146%2051.7157%2033.4496%2050.8297%2033.77%2049.8154'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M33.5%2056.3154H26'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M26%2059.3154H33.5'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M30.3213%2049.8154C29.9569%2050.1381%2029.4868%2050.316%2029%2050.3154H25.5C24.3065%2050.3154%2023.1619%2050.7895%2022.318%2051.6334C21.4741%2052.4774%2021%2053.622%2021%2054.8154C21%2056.0089%2021.4741%2057.1535%2022.318%2057.9974C23.1619%2058.8413%2024.3065%2059.3154%2025.5%2059.3154H26'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M31%2045.3154V47.8154'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M33.5%2060.3154V55.3154'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M30%2047.8154H35'%20stroke='%23030F40'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3crect%20x='36'%20y='61.8154'%20width='24'%20height='6'%20fill='%2359B9FF'/%3e%3cpath%20d='M60%2058.3154V66.8154C60%2067.3677%2059.5523%2067.8154%2059%2067.8154H37C36.4477%2067.8154%2036%2067.3677%2036%2066.8154V54.8154C36%2054.2631%2036.4477%2053.8154%2037%2053.8154H59C59.5523%2053.8154%2060%2054.2631%2060%2054.8154V56.0654'%20stroke='%23030F40'%20stroke-linecap='round'/%3e%3cdefs%3e%3cclipPath%20id='clip0_5823_3014'%3e%3crect%20width='16'%20height='16'%20fill='white'%20transform='matrix(1%200%200%20-1%2020%2060.8154)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Ie="ANC",Me="AC";function Ft({currentStep:s}){var L;const{isConnected:a}=window.tsme_data,t=Y(),{t:i}=F(),{track:l}=Z(),{setSummaryStep2:S}=ye(),{extraFn:p,state:u}=g.useContext(ee),{saveStep:o}=p,{steps:m}=u,c=s-1,N=(L=m[c])==null?void 0:L.values,[x,h]=g.useState(!1),[v,j]=g.useState(!1),d=()=>{h(!0);const{addressId:A}=m[0].values,I=Se===A&&!a?r.DIAG_ASS.STEP_1_CREATE:r.DIAG_ASS.STEP_1;t.push(I)},f={label:i("go_back"),arrow:!0,enabled:!0,loader:x,onClick:d},n=A=>{const{radioBtn:I}=A,{label:_,values:y}=S(I,i);return i(_,y)},C={radioBtn:(N==null?void 0:N.radioBtn)??""},V=A=>{var P;j(!0);const I=n(A);o(r.DIAG_ASS.STEP_2,A,I);const _=(P=m[0])==null?void 0:P.values,{addressId:y}=_;let b={sanitationType:A.radioBtn};const D={ANC:Ue,AC:qe};if(l("DIAGASS_11",{type_assainissement:A.radioBtn in D&&D[A.radioBtn]}),y===Se){const{additionalAddress:M,locality:O,localityId:T,postalCode:k,streetId:H,streetName:U,streetNumber:E,streetNumberExt:z}=_;if(b={...b,insee:T,hexavia:H,streetName:U,city:O,zipCode:k,additionalAddress:M},E){let q;z===void 0?q=E:q=Ae(E,z),b={...b,streetNumber:q}}}else{const[M,O]=Re(y);b={...b,iliadeSiteId:M,odysseAccountId:O}}R.mutate(b)},R=Oe(A=>de.post(ce.DIAG_ASS.ELIGIBILITY,A),{onSuccess:({data:A})=>{if(oe.SUCCESS===A.code)switch(A.message){case oe.OK_ELIGIBILITE:t.push(r.DIAG_ASS.STEP_3);break;case oe.KO_MULTI_SITES:case oe.KO_ELIGIBILITE_DIGITAL:t.push(r.DIAG_ASS.STEP_2_KO_DIGITAL);break;case oe.KO_ELIGIBILITE_SECTEUR:t.push(r.DIAG_ASS.STEP_2_KO_CONTRACT);break}else t.push(r.DIAG_ASS.TECHNICAL_ERROR)},onError:()=>{t.push(r.DIAG_ASS.TECHNICAL_ERROR)}});return e.jsxDEV(ie,{initialValues:C,validateOnBlur:!0,validationSchema:bt,onSubmit:V,children:({values:A,handleChange:I,handleSubmit:_,errors:y})=>e.jsxDEV("form",{id:"diagAssSanitizeType",onSubmit:_,children:[e.jsxDEV(he,{name:"radioBtn",id:"radio-1",className:"mb-3",label:i("diagAss.step.step2.sanitize.radioCard_AC.label"),onChange:I,checked:A.radioBtn===Me,imgSrc:Pt,value:Me,children:[e.jsxDEV(w.SzTypographie,{className:"mb-3",variant:"caption",size:"M",color:"disabled",weight:"regular",children:i("diagAss.step.step2.sanitize.radioCard_AC.type")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:195,columnNumber:15},this),e.jsxDEV(w.SzTypographie,{className:"m-0 text-dark",children:i("diagAss.step.step2.sanitize.radioCard_AC.info")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:204,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:185,columnNumber:13},this),e.jsxDEV(he,{name:"radioBtn",id:"radio-2",className:"mb-3",label:i("diagAss.step.step2.sanitize.radioCard_ANC.label"),onChange:I,checked:A.radioBtn===Ie,imgSrc:Bt,value:Ie,children:[e.jsxDEV(w.SzTypographie,{className:"mb-3",variant:"caption",size:"M",color:"disabled",weight:"regular",children:i("diagAss.step.step2.sanitize.radioCard_ANC.type")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:218,columnNumber:15},this),e.jsxDEV(w.SzTypographie,{className:"m-0 text-dark",children:i("diagAss.step.step2.sanitize.radioCard_ANC.info")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:227,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:208,columnNumber:13},this),e.jsxDEV($,{field:"radioBtn",customDisplay:!A.radioBtn&&y.radioBtn},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:231,columnNumber:13},this),e.jsxDEV(te,{previous:f,next:{align:"right",loader:v}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:238,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:184,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/SanitizeType.tsx",lineNumber:176,columnNumber:5},this)}function Mt(){const s=Y(),{t:a}=F(),{track:t}=Z(),[i,l]=g.useState(!1),{brand:S}=window.tsme_data,p=()=>{t("DIAGASS_8",{motif_retour_accueil:qs}),l(!0),s.push(r.HOME)},u={label:a("diagAss.error.back_home"),loader:i,align:"right",onClick:p};return e.jsxDEV(me,{body:a("diagAss.step.step2.ko_contract.body",{brand:S.name}),next:u},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/KoContract.tsx",lineNumber:35,columnNumber:5},this)}function Ht(){const{t:s}=F(),a=ke(Ws);return e.jsxDEV(me,{body:s("diagAss.step.step2.ko_digital.body"),next:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step2/KoDigital.tsx",lineNumber:12,columnNumber:5},this)}function Ut({currentStep:s}){var I;const a=Y(),{t}=F(),{track:i}=Z(),{extraFn:l,state:S}=g.useContext(ee),{deleteStep:p,saveStep:u}=l,{steps:o}=S,m=s-1,c=(I=o[m])==null?void 0:I.values,[N,x]=g.useState(!1),{isConnected:h}=window.tsme_data;if(g.useEffect(()=>{h||a.push(r.DIAG_ASS.STEP_3_CREATE)},[]),!h)return e.jsxDEV(e.Fragment,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:55,columnNumber:12},this);const{data:v,isLoading:j}=xe("interlocutors",()=>de.get(ce.DIAG_ASS.INTERLOCUTORS),{onSuccess:({data:_})=>{const{message:y}=_;oe.KO_INTERLOCUTEUR===y&&a.push(r.DIAG_ASS.STEP_3_CREATE)},onError:()=>{a.push(r.DIAG_ASS.TECHNICAL_ERROR)},enabled:h}),{content:d=[]}=(v==null?void 0:v.data)||{},f=()=>{x(!0),a.push(r.DIAG_ASS.STEP_2)},n={label:t("validate"),align:"right"},C={label:t("go_back"),arrow:!0,enabled:!0,loader:N,onClick:f},V=(_,y)=>Ae(_,y),R=_=>{const{prenom:y,nom:b,email:D,telPortable:P}=_;return t("diagAss.stepper.step3",{value1:V(b,y),value2:P,value3:D,context:P?"":"no_phone"})},L=_=>{i("DIAGASS_15"),p(s);const{contactId:y}=_;if(pe===y)u(r.DIAG_ASS.STEP_3_CREATE,_),a.push(r.DIAG_ASS.STEP_3_CREATE);else{const b=R(_);u(r.DIAG_ASS.STEP_3,_,b),a.push(r.DIAG_ASS.STEP_RGPD_CONFIRM)}},A={contactId:(c==null?void 0:c.contactId)??""};return e.jsxDEV(ie,{initialValues:A,validateOnBlur:!0,validateOnChange:!1,validationSchema:ht,onSubmit:L,children:({handleSubmit:_,values:y,errors:b,setFieldValue:D})=>{const P=O=>{var k,H;const{contactId:T}=y;if(pe!==T){const[U,E]=Re(T),z=d.find(q=>q.id===U&&q.compteId===E);if(z){const{civilite:q,prenom:Q,nom:re,email:se,telPortable:G}=z;D("civilite",q),D("prenom",Q),D("nom",re),D("email",se),D("telPortable",G)}}if(pe===T&&pe===((k=o[2])==null?void 0:k.values.contactId)){const{civilite:U,prenom:E,nom:z,email:q,telPortable:Q}=(H=o[2])==null?void 0:H.values;D("civilite",U),D("prenom",E),D("nom",z),D("email",q),D("telPortable",Q)}_(O)},M=O=>{D("civilite",""),D("prenom",""),D("nom",""),D("email",""),D("telPortable",""),D("contactId",O.target.value,!0)};return e.jsxDEV("form",{id:"diagAssContact",onSubmit:P,children:[e.jsxDEV("div",{className:"my-3 mt-lg-4",children:j?e.jsxDEV(Ye,{count:3},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:179,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{"data-cy":"contact-list",className:"mh-lg",children:d.map(({id:O,compteId:T,prenom:k,nom:H,email:U,telPortable:E},z)=>{const q=ns(O,T),Q=`contact-${q}`;return e.jsxDEV(he,{id:Q,name:"contactId",className:z===d.length-1?"mb-0":"mb-3",label:V(H,k),value:q,checked:q===y.contactId,onChange:M,radioPosition:"center",children:e.jsxDEV(w.SzData,{icon:"single-neutral-id-card-3",variant:"line",className:"d-flex align-items-center mt-3",children:e.jsxDEV(w.SzData.Text,{children:[U&&e.jsxDEV(w.SzTypographie,{className:"mb-0 text-break",weight:"regular",children:U},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:211,columnNumber:35},this),E&&e.jsxDEV(w.SzTypographie,{className:"mb-0",weight:"regular",children:E},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:219,columnNumber:35},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:209,columnNumber:31},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:204,columnNumber:29},this)},Q,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:191,columnNumber:27},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:182,columnNumber:19},this),e.jsxDEV(he,{id:"contact-other",name:"contactId",className:"my-3",value:pe,checked:pe===y.contactId,onChange:M,radioPosition:"center",children:e.jsxDEV(w.SzData,{icon:"add-circle",variant:"line",className:"d-flex align-items-center",children:e.jsxDEV(w.SzTypographie,{className:"mb-0",weight:"regular",children:t("diagAss.step.step3.list.other")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:247,columnNumber:23},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:242,columnNumber:21},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:233,columnNumber:19},this),e.jsxDEV($,{field:"contactId",customDisplay:b.contactId},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:252,columnNumber:19},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:181,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:177,columnNumber:13},this),e.jsxDEV(te,{previous:C,next:n},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:259,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:176,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactList.tsx",lineNumber:127,columnNumber:5},this)}function qt({currentStep:s}){var L;const a=Y(),{t}=F(),{track:i}=Z(),{setSummaryStep3:l}=ye(),{extraFn:S,state:p}=g.useContext(ee),{saveStep:u}=S,{steps:o}=p,m=s-1,c=(L=o[m])==null?void 0:L.values,[N,x]=g.useState(!1),{isConnected:h}=window.tsme_data,{data:v}=xe("interlocutors",()=>de.get(ce.DIAG_ASS.INTERLOCUTORS),{onError:()=>{a.push(r.DIAG_ASS.TECHNICAL_ERROR)},enabled:h}),{content:j=[]}=(v==null?void 0:v.data)||{},d=()=>{x(!0),a.push(0<j.length?r.DIAG_ASS.STEP_3:r.DIAG_ASS.STEP_2)},f={label:t("validate"),align:"right"},n={label:t("go_back"),arrow:!0,enabled:!0,loader:N,onClick:d},C=A=>{const{prenom:I,nom:_,email:y,telPortable:b}=A,{label:D,values:P}=l(I,_,y,b);return t(D,P)},V=A=>{i("DIAGASS_16");const I=C(A);u(r.DIAG_ASS.STEP_3_CREATE,A,I),a.push(r.DIAG_ASS.STEP_RGPD_CONFIRM)},R={contactId:pe,civilite:(c==null?void 0:c.civilite)??"",prenom:(c==null?void 0:c.prenom)??"",nom:(c==null?void 0:c.nom)??"",email:(c==null?void 0:c.email)??"",telPortable:(c==null?void 0:c.telPortable)??""};return e.jsxDEV(ie,{initialValues:R,validateOnBlur:!0,validateOnChange:!1,validationSchema:At.concat(lt(t,"telPortable")),onSubmit:V,children:({handleSubmit:A,setFieldValue:I,values:_,errors:y,isSubmitting:b,isValid:D,touched:P,handleChange:M,handleBlur:O})=>{const T=U=>{I("civilite",U.target.value,!0)};b&&!D&&Object.keys(y).length>0&&i("DIAGASS_17");const k=U=>E=>{E.target.value.length<=U&&M(E)},H=U=>E=>{E.target.value.length<=U&&M(E)};return e.jsxDEV("form",{id:"diagAssContact",onSubmit:A,children:[e.jsxDEV("div",{className:"row mt-4",children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzTypographie,{className:"mb-2",children:t("diagAss.step.step3.create.civility")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:149,columnNumber:17},this),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(w.SzRadio,{id:"civilityMiss",name:"civilite",label:t("civility.mrs_short"),value:"MME",checked:_.civilite==="MME",onChange:T},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:153,columnNumber:19},this),e.jsxDEV(w.SzRadio,{className:"ml-3",id:"civilityMister",name:"civilite",label:t("civility.mr_short"),value:"M",checked:_.civilite==="M",onChange:T},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:161,columnNumber:19},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:152,columnNumber:17},this),e.jsxDEV($,{field:"civilite",customDisplay:P.civilite&&y.civilite},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:171,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:148,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzInput,{id:"nom",name:"nom",label:t("diagAss.step.step3.create.lastname"),placeholder:t("diagAss.step.step3.create.lastname_placeholder"),variant:"outlined",value:_.nom,onBlur:O,onChange:k(80)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:177,columnNumber:17},this),e.jsxDEV($,{field:"nom",customDisplay:P.nom&&y.nom},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:189,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:176,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzInput,{id:"prenom",name:"prenom",label:t("diagAss.step.step3.create.firstname"),placeholder:t("diagAss.step.step3.create.firstname_placeholder"),variant:"outlined",value:_.prenom,onBlur:O,onChange:k(40)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:195,columnNumber:17},this),e.jsxDEV($,{field:"prenom",customDisplay:P.prenom&&y.prenom},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:207,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:194,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzInput,{id:"email",name:"email",label:t("diagAss.step.step3.create.email"),placeholder:t("diagAss.step.step3.create.email_placeholder"),variant:"outlined",value:_.email,onBlur:O,onChange:H(80)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:213,columnNumber:17},this),e.jsxDEV($,{field:"email",customDisplay:P.email&&y.email},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:223,columnNumber:17},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:212,columnNumber:15},this),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:e.jsxDEV(dt,{name:"telPortable"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:229,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:228,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:147,columnNumber:13},this),e.jsxDEV(te,{previous:n,next:f},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:232,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:146,columnNumber:11},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step3/ContactCreate.tsx",lineNumber:105,columnNumber:5},this)}const ge="APPART",Ne="MAISON",cs="Visite1",us="ContreVisite1",Wt="Vente",Kt="NouvelleInstallation",$t="ControlePeriodique",Yt="NouveauRaccordement",Te="oui",es="non",ve="other";function Qt(s,a){const t=[{context:"lodging",name:"type",inputs:[{label:"label_APPART",value:ge},{label:"label_MAISON",value:Ne},{label:"label_other",value:ve}]}],i=[{context:"floor",name:"floor",dependency:{name:"type",value:ge}}],l=[{context:"pool",name:"pool",inputs:[{label:"pool_yes",value:Te},{label:"pool_no",value:es}],dependency:{name:"type",value:Ne}},{context:"extra_equipment",name:"extra_equipment",inputs:[{label:"extra_equipment_yes",value:Te},{label:"extra_equipment_no",value:es}],dependency:{name:"pool"}}],S=[{context:"size",name:"size",dependency:{name:s===ge?"floor":["pool","extra_equipment"]}},{context:"water",name:"water",infos:!0,dependency:{name:"size"}},{context:"visit",name:"visit",inputs:[{label:"label_first",value:cs},{label:"label_after",value:us}],dependency:{name:"water"}}],o=[{context:"context",name:"context",inputs:[{label:"label_to_sell",value:Wt},...a==="ANC"?[{label:"label_control",value:Kt},{label:"label_period",value:$t}]:[{label:"label_new_connection",value:Yt}]],dependency:{name:"visit"}}];return{form:[...t,...s===ge?i:[],...s===Ne?l:[],...s===ve?[]:S,...s===ve?[]:o]}}const Ce={floor:2,size:3,water:2},be=s=>s.required("diagAss.error.mandatory_field"),Xt=ae({type:W().required("diagAss.error.select_option"),floor:W().max(Ce.floor,"diagAss.error.size").when("type",{is:s=>s===ge,then:be}),pool:W().when("type",{is:s=>s===Ne,then:be}),extra_equipment:W().when("pool",{is:s=>s,then:be}),size:W().max(Ce.size,"diagAss.error.size").when(["type","floor","pool","extra_equipment"],{is:(s,a,t,i)=>s===ge&&a||s===Ne&&t&&i,then:be}),water:W().max(Ce.water,"diagAss.error.size").when("size",{is:s=>s,then:be}),visit:W().when("water",{is:s=>s,then:be}),context:W().when("visit",{is:s=>s,then:be})});function Zt({showConfirmModal:s,setShowConfirmModal:a,name:t,values:i}){const{t:l}=F(),{transform:S}=Ee(),p=Y(),{setExceedsValueField:u}=g.useContext(ee),[o,m]=g.useState(!1);let c="";for(const[n,C]of Object.entries(i))n===t&&(c=C);const N=l("diagAss.step.step4.confirmation.title",{context:t}),x=l("diagAss.step.step4.confirmation.body",{context:t,value:c}),h=()=>{a(!1)},v=()=>{a(!1)},j={variant:"outlined",enabled:!0,prevArrow:!1,label:l("diagAss.step.step4.confirmation.button",{context:"left"}),onClick:v,disabled:!1,className:"pl-3 fix-my-value-btn"},d=()=>{m(!0),u(t),p.push(r.DIAG_ASS.STEP_4_KO_MAX_VALUE)},f={variant:"contained",label:l("diagAss.step.step4.confirmation.button",{context:"right"}),loader:o,align:"right",onClick:d,disabled:!1,className:"confirm-and-go-on-btn"};return e.jsxDEV(w.SzModal,{handleClose:h,show:s,border:"smooth",centered:!0,fullscreen:"md",size:"lg",backdrop:!0,title:"",children:e.jsxDEV("div",{className:"container",children:[e.jsxDEV(w.SzTypographie,{variant:"H3",weight:"medium",size:"L",className:"mb-2",children:N},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:85,columnNumber:9},this),e.jsxDEV(w.SzTypographie,{className:"mb-2 text-dark",children:e.jsxDEV(we,{content:x,transform:S},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:89,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:88,columnNumber:9},this),e.jsxDEV(te,{previous:j,next:f},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:91,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:84,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ConfirmationModal.tsx",lineNumber:74,columnNumber:5},this)}function ps(s){const t=Object.entries({Vente:"vente",NouvelleInstallation:"nouvelle_installation",ControlePeriodique:"controle_periodique",NouveauRaccordement:"nouveau_raccordement"}).find(i=>i[0]===s);return t?t[1]:""}function ms(s){return s===cs?"premiere_visite":s===us?"contre_visite":"contre_visite_supplementaire"}function Jt({currentStep:s}){var f;const a=Y(),{t}=F(),{extraFn:i,state:l}=g.useContext(ee),{saveStep:S}=i,{steps:p}=l,u=s-1,o=(f=p[u])==null?void 0:f.values,m=p[1].values.radioBtn,c=m===Ie?Ue:qe,{track:N}=Z(),x=n=>{const{type:C,size:V,water:R,visit:L,context:A}=n;return t("diagAss.stepper.step4",{value1:t("diagAss.step.step4.complementary_infos.questions.visit.label_short",{context:L}),value2:t("diagAss.step.step4.complementary_infos.questions.context.label_short",{context:A}),value3:t("diagAss.step.step4.complementary_infos.questions.lodging.label",{context:C}),value4:V+"m2",value5:t("diagAss.step.step4.complementary_infos.questions.water.label_count",{count:parseInt(R)})})},h=n=>{if(ve===(n==null?void 0:n.type))a.push(r.DIAG_ASS.STEP_4_KO);else{const C=x(n);S(r.DIAG_ASS.STEP_4,n,C);const V={housingType:n==null?void 0:n.type,surface:n==null?void 0:n.size,waterRooms:n==null?void 0:n.water,visitType:n==null?void 0:n.visit,requestType:n==null?void 0:n.context};Ne===(n==null?void 0:n.type)?(V.pool=(n==null?void 0:n.pool)===Te,V.exterior=(n==null?void 0:n.extra_equipment)===Te):ge===(n==null?void 0:n.type)&&(V.floor=n==null?void 0:n.floor);const R=ms(n==null?void 0:n.visit),L=ps(n==null?void 0:n.context);N("DIAGASS_19",{type_assainissement:c,type_logement:(n==null?void 0:n.type)===Ne?"maison":(n==null?void 0:n.type)===ge?"appartement":"autres",surface_logement:n==null?void 0:n.size,nombre_piece_eau:n==null?void 0:n.water,type_visite:R,contexte_demande:L,etage_logement:n==null?void 0:n.floor,equipement_piscine:n==null?void 0:n.pool,dependance_exterieure:n==null?void 0:n.extra_equipment}),j.mutate(V)}},{isLoading:v,...j}=Oe(n=>de.post(ce.DIAG_ASS.REQUEST_SITE,n),{onSuccess:({data:n})=>{n.message===oe.OK_MAJ_DEMANDE_SITE&&a.push(r.DIAG_ASS.STEP_5)},onError:()=>{a.push(r.DIAG_ASS.TECHNICAL_ERROR)}}),d={type:(o==null?void 0:o.type)??"",floor:(o==null?void 0:o.floor)??"",pool:(o==null?void 0:o.pool)??"",extra_equipment:(o==null?void 0:o.extra_equipment)??"",size:(o==null?void 0:o.size)??"",water:(o==null?void 0:o.water)??"",visit:(o==null?void 0:o.visit)??"",context:(o==null?void 0:o.context)??""};return e.jsxDEV(ie,{initialValues:d,validationSchema:Xt,onSubmit:h,validateOnChange:!1,validateOnBlur:!0,children:()=>e.jsxDEV(ea,{nextLoader:v,sanitationType:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:169,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:161,columnNumber:5},this)}const ea=({nextLoader:s,sanitationType:a})=>{const{t}=F("translation"),[i,l]=g.useState(null),[S,p]=g.useState(!1),{handleSubmit:u,handleChange:o,values:m,setFieldValue:c,errors:N,validateField:x,setFieldError:h,status:v,setStatus:j,validateForm:d}=_e(),{type:f,context:n}=m,{form:C}=Qt(f,a),V=f!==ve&&n||f===ve,R={label:t("next"),align:"right",arrow:!0,type:"button",onClick:async()=>{if(!m[i]){await d();return}b(i,m[i])?(y(i),p(!0)):(i!=null&&x(i),j(),l(null),M(i,m[i]))}},L={label:t("validate"),align:"right",loader:s,type:"submit"},A="writing",I=(O,T)=>{if(!T)for(let k=O+1;k<C.length;k++)m[C[k].name]&&c(C[k].name,void 0),N[C[k].name]&&h(C[k].name,void 0)},[_,y]=g.useState(""),b=(O,T)=>{const H=[{name:"floor",value:9},{name:"size",value:400},{name:"water",value:6}].find(E=>E.name===O),U=(H==null?void 0:H.value)||{};return parseInt(T)>U},D=O=>new Promise(T=>setTimeout(T,O)),P=async O=>{await D(100);const T=document.getElementById(O);T&&T.focus()},M=(O,T)=>{T!==""&&(O==="floor"&&P("size"),O==="size"&&P("water"),O==="water"&&P("visit"))};return e.jsxDEV("form",{onSubmit:u,children:[C.map(({context:O,name:T,inputs:k,dependency:H,infos:U=!1},E)=>{const z=`diagAss.step.step4.complementary_infos.questions.${O}`,q=fe("question-block",{"border-top border-1 border-card-disabled-light":E>0,"py-4":!k,"py-3":k}),Q=E+1===C.length,re=async B=>{const{name:K,value:J}=B.target;I(E,Q),await c(K,J),x(K)},se=B=>{const{name:K}=B.target;l(K)},G=B=>{const{name:K,value:J}=B.target,ne=J.at(-1);I(E,Q),(/\d/g.test(ne||"")&&J.length<=Ce[K]||J.length<m[K].length)&&(o(B),j({[K]:A}))},X=B=>{const{name:K,value:J}=B.target;b(K,J)?(y(K),p(!0)):(x(K),j(),M(K,J))};if(H){const{value:B,name:K}=H;if(Array.isArray(K)){if(!K.every(ne=>m[ne]))return null}else if(B&&m[K]!==B||!B&&!m[K]||v&&v[K]===A)return null}return e.jsxDEV(e.Fragment,{children:e.jsxDEV("div",{className:q,children:[e.jsxDEV(w.SzTypographie,{size:"L",weight:"regular",children:t(`${z}.title`)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:364,columnNumber:15},void 0),!k&&e.jsxDEV("div",{className:"row no-gutters",children:[e.jsxDEV(w.SzTypographie,{color:"dark",className:"mb-2",tag:"span",children:e.jsxDEV("label",{htmlFor:T,children:t(`${z}.label`)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:370,columnNumber:21},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:369,columnNumber:19},void 0),U&&e.jsxDEV("div",{className:"row",children:e.jsxDEV(w.SzTypographie,{variant:"caption",size:"M",weight:"regular",color:"dark",className:"mb-2 col-8",children:t(`${z}.infos`)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:374,columnNumber:23},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:373,columnNumber:21},void 0),e.jsxDEV(w.SzInput,{className:"col-8",onChange:G,onBlur:X,onFocus:se,variant:"outlined",name:T,id:T,value:m[T]},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:385,columnNumber:19},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:368,columnNumber:17},void 0),(k||[]).map(({label:B,value:K})=>e.jsxDEV("div",{className:"d-flex input-group mb-2",children:e.jsxDEV(w.SzRadio,{id:B,name:T,label:e.jsxDEV(ts,{t,i18nKey:`${z}.${B}`,components:[e.jsxDEV(w.SzTypographie,{weight:"bold",tag:"span"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:408,columnNumber:29},void 0)]},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:404,columnNumber:25},void 0),value:K,checked:m[T]===K,onChange:re},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:400,columnNumber:21},void 0)},B,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:399,columnNumber:19},void 0)),e.jsxDEV($,{field:T,customDisplay:N[T]},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:419,columnNumber:15},void 0)]},O,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:363,columnNumber:13},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:362,columnNumber:11},void 0)}),e.jsxDEV(Zt,{showConfirmModal:S,setShowConfirmModal:p,name:_,values:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:424,columnNumber:7},void 0),e.jsxDEV(te,{next:V?L:R},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:430,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/ComplementaryInfos.tsx",lineNumber:292,columnNumber:5},void 0)};function sa(){const{t:s}=F(),a=ke(Ks);return e.jsxDEV(me,{body:s("diagAss.step.step4.ko.body"),next:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/Step4Ko.tsx",lineNumber:11,columnNumber:10},this)}function ta(){const{t:s}=F(),{track:a}=Z(),{exceedsValueField:t}=g.useContext(ee),[i,l]=g.useState(!1),S=()=>{const o=[{name:"floor",value:$s},{name:"size",value:Ys},{name:"water",value:Qs}].find(c=>c.name===t),m=(o==null?void 0:o.value)||{};a("DIAGASS_2",{motif_contact_client:m}),l(!0),window.location.href=r.CUSTOMER_SERVICE},p={label:s("diagAss.error.contact_customer_service"),loader:i,align:"right",onClick:S,disabled:!1};return e.jsxDEV(me,{body:s("diagAss.step.step4.confirmation.max_value_final_body"),next:p},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step4/Step4KoMaxValue.tsx",lineNumber:46,columnNumber:5},this)}const{isConnected:aa}=window.tsme_data;function ra(){const s=Y(),{t:a}=F(),[t,i]=g.useState(!1),[l,S]=g.useState(!1),{brand:p}=window.tsme_data,{state:u,extraFn:o}=g.useContext(ee),{steps:m}=u,{lockStep:c}=o,{track:N}=Z(),x=()=>{var V;N("DIAGASS_18"),c([1,2,3]),S(!0);const f=(V=m[2])==null?void 0:V.values,{contactId:n}=f;let C;if(n!==pe){const[R]=Re(n);C={idInterlocutor:R}}else{const{civilite:R,nom:L,prenom:A,email:I,telPortable:_}=f;C={civility:R,lastName:L,firstName:A,email:I,cellphone:_}}h.mutate(C)},h=Oe(f=>de.post(ce.DIAG_ASS.REQUEST,f),{onSuccess:({data:f})=>{var n,C;(n=f==null?void 0:f.content)!=null&&n.redirect?window.location.href=(C=f==null?void 0:f.content)==null?void 0:C.redirect:f.message===oe.OK_INITIALISATION_DEMANDE?s.push(r.DIAG_ASS.STEP_4):s.push(r.DIAG_ASS.TECHNICAL_ERROR)},onError:()=>{s.push(r.DIAG_ASS.TECHNICAL_ERROR)}}),v=()=>{i(!0);const{contactId:f}=m[2].values,n=pe===f&&!aa?r.DIAG_ASS.STEP_3_CREATE:r.DIAG_ASS.STEP_3;s.push(n)},j={label:a("diagAss.step.rgpd_confirm.button"),align:"right",loader:l,onClick:x},d={label:a("go_back"),arrow:!0,enabled:!0,loader:t,onClick:v};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(w.SzTypographie,{className:"mb-lg-5 text-dark",children:a("diagAss.step.rgpd_confirm.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:108,columnNumber:7},this),e.jsxDEV(Le,{className:"stepper mb-3 mb-lg-5",steps:m,isStepList:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:111,columnNumber:7},this),e.jsxDEV(w.SzTypographie,{className:"mb-lg-5 text-dark",children:a("diagAss.step.rgpd_confirm.rgpd",{brand:p.name})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:116,columnNumber:7},this),e.jsxDEV(te,{previous:d,next:j},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:119,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepRgpdConfirm/StepRgpdConfirm.tsx",lineNumber:107,columnNumber:5},this)}function ia({currentStep:s}){const a=Y(),{t}=F(),{extraFn:i,state:l}=g.useContext(ee),{saveStep:S}=i,{steps:p}=l,u=s-1,{values:o}=p[u]||{},[m,c]=g.useState(!1),{track:N}=Z(),{data:x,isLoading:h}=xe("services",()=>de.get(ce.DIAG_ASS.SERVICES),{onSuccess:({data:A})=>{const{message:I}=A;oe.KO_CERTIFICAT===I&&a.push(r.DIAG_ASS.STEP_5_KO)},onError:()=>{a.push(r.DIAG_ASS.TECHNICAL_ERROR)}}),{content:v=[]}=(x==null?void 0:x.data)||{},j=A=>{const I=(A==null?void 0:A.tariffSpecification)||"";return t("diagAss.stepper.step5",{value:A==null?void 0:A.certificateType.concat(" ",I)})},d=A=>v.find(I=>I.idArticle===A),f=(A,I)=>Number(A)===0||I?t("free"):A.replace(".",",")+" €",n=(A,I)=>{const _=d(A.serviceId);if(_){const{setValues:y}=I,b=f(_.priceWithVAT,_.communityInvoice),D={...A,needWater:_.needWater?"1":"0",priceWithVAT:b};y(D);let P=_.certificateType;P+=_.tariffSpecification?" "+_.tariffSpecification:"";const M=os(P);N("DIAGASS_20",{type_diagnostic:M,tarif:b});const O=j(_);S(r.DIAG_ASS.STEP_5,D,O),_.needWater?a.push(r.DIAG_ASS.STEP_5_WATER):a.push(r.DIAG_ASS.STEP_6)}},C=()=>{c(!0),a.push(r.DIAG_ASS.STEP_4)},V={label:t("validate"),align:"right"},R={label:t("go_back"),arrow:!0,enabled:!0,loader:m,onClick:C},L={serviceId:(o==null?void 0:o.serviceId)??"",needWater:(o==null?void 0:o.needWater)??"",priceWithVAT:(o==null?void 0:o.priceWithVAT)??""};return e.jsxDEV(ie,{initialValues:L,validateOnBlur:!0,validationSchema:xt,onSubmit:n,children:({values:A,errors:I,handleChange:_,handleSubmit:y})=>e.jsxDEV("form",{id:"diagAssServices",onSubmit:y,children:[e.jsxDEV("div",{"data-cy":"services-list",className:"my-4 mh-lg",children:h?e.jsxDEV(Ye,{count:3},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:143,columnNumber:17},this):v.map(({idArticle:b,certificateType:D,tariffSpecification:P,certificateLabel:M,priceWithVAT:O,communityInvoice:T},k)=>{const H=P||"";return e.jsxDEV(he,{id:`service-${b}`,name:"serviceId",className:k===v.length-1?"mb-0":"mb-3",label:Ae(D,H),value:b,checked:b===A.serviceId,onChange:_,children:[e.jsxDEV(w.SzTypographie,{className:"mb-4",color:"disabled",children:M},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:171,columnNumber:25},this),e.jsxDEV(w.SzTypographie,{className:"mb-0 text-uppercase",weight:"bold",children:[t("price",{context:"ttc"})," :"," ",f(O,T)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:174,columnNumber:25},this)]},b,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:159,columnNumber:23},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:141,columnNumber:13},this),e.jsxDEV($,{field:"serviceId",customDisplay:I.serviceId},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:187,columnNumber:13},this),e.jsxDEV(te,{previous:R,next:V},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:188,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:140,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5.tsx",lineNumber:132,columnNumber:5},this)}function na(){const s=Y(),{t:a}=F(),{extraFn:t,state:i}=g.useContext(ee),{steps:l}=i,{saveStep:S}=t,{track:p}=Z(),u=l[4].values.serviceId,o=l[4].values.needWater,m=l[4].values.priceWithVAT,c=l[4].summary,N=({waterSupplied:h})=>{const v={serviceId:u,needWater:o,priceWithVAT:m,waterSupplied:h};S(r.DIAG_ASS.STEP_5_WATER,v,c),p("DIAGASS_21",{alimentation_eau:h?as:rs}),h?s.push(r.DIAG_ASS.STEP_6):s.push(r.DIAG_ASS.STEP_5_WATER_KO)},x={label:a("validate"),align:"right"};return e.jsxDEV(ie,{initialValues:{waterSupplied:""},validateOnBlur:!0,validationSchema:vt,onSubmit:N,children:({handleSubmit:h,setFieldValue:v,values:j,errors:d})=>e.jsxDEV("form",{id:"diagAssWaterSupplied",onSubmit:h,children:[e.jsxDEV(w.SzTypographie,{size:"XL",children:a("diagAss.step.step5.water.water_supplied")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(w.SzRadio,{id:"waterSuppliedYes",name:"waterSupplied",label:a("yes"),value:"1",checked:j.waterSupplied!==""&&!!j.waterSupplied,onChange:f=>{v("waterSupplied",!!parseInt(f.target.value))}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:74,columnNumber:15},this),e.jsxDEV(w.SzRadio,{className:"ml-3",id:"waterSuppliedNo",name:"waterSupplied",label:a("no"),value:"0",checked:j.waterSupplied!==""&&!j.waterSupplied,onChange:f=>{v("waterSupplied",!!parseInt(f.target.value))}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:87,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:73,columnNumber:13},this),e.jsxDEV($,{field:"waterSupplied",customDisplay:d.waterSupplied},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:102,columnNumber:13},this),e.jsxDEV(te,{next:x},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:106,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:69,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Water.tsx",lineNumber:59,columnNumber:5},this)}function oa(){const{t:s}=F(),a=ke(Xs);return e.jsxDEV(me,{body:s("diagAss.step.step5.ko.body"),next:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5Ko.tsx",lineNumber:11,columnNumber:10},this)}function la(){const s=Y(),{t:a}=F(),{track:t}=Z(),[i,l]=g.useState(!1),S=()=>{l(!0),t("DIAGASS_22"),s.push(r.DIAG_ASS.STEP_6)},p={label:a("diagAss.step.step5.ko_water.button"),loader:i,align:"right",onClick:S};return e.jsxDEV(me,{title:a("diagAss.step.step5.ko_water.title"),body:a("diagAss.step.step5.ko_water.body"),next:p},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step5/Step5WaterKo.tsx",lineNumber:29,columnNumber:5},this)}const ue="france",Ve="foreign",da="Gratuit",ze=He.createContext(null),Ss=({address:s,city:a,additionalAddress:t})=>{const i=", ",l=a.split(i).reverse().join(" ");return t&&t!==""?s.concat(i,t,i,l):s.concat(i,l)};function ca({currentStep:s}){var b,D,P,M,O;const a=Y(),{track:t}=Z(),{state:i}=We(),{t:l}=F(),{extraFn:S,state:p}=g.useContext(ee),{steps:u}=p,{saveStep:o}=S,m=s-1,c=(D=(b=u[m])==null?void 0:b.values)!=null&&D.isDefaultAddress?null:(P=u[m])==null?void 0:P.values,N=(M=u[0])==null?void 0:M.values,[x]=g.useState(!1),[h,v]=g.useState([]),d=((O=u[4])==null?void 0:O.values.priceWithVAT)===da,[f,n]=g.useState(ae()),C=T=>{let{address:k,additionalAddress:H,city:U,country:E,countryForm:z,zip:q}=T;Ve===z&&k===""&&U===""&&(k=N.address,H=N.additionalAddress,U=N.city,q=N.zip,z=ue);const Q=ue===z,re=Ss({address:k,city:Q?U:`${q} ${U}`,additionalAddress:H});if(!Q){const se=h.find(G=>G.label===E);if(se)return l("diagAss.step.step6.check.body",{context:d?"":"fee",address:re.concat(", ",se.label)})}return l("diagAss.step.step6.check.body",{context:d?"":"fee",address:re})},V=T=>{const k=C(T);if(o(r.DIAG_ASS.STEP_6,T,k),T.isDefaultAddress===!1){const H=T.countryForm===Xe?Xe:Zs;t("DIAGASS_24",{pays_adresse_facturation:H})}else t("DIAGASS_23");a.push(r.DIAG_ASS.STEP_CONFIRM)},R=()=>{i!=null&&i.showEdit?a.push(r.DIAG_ASS.STEP_6,{showEdit:!1}):a.push(r.DIAG_ASS.STEP_5)},L={label:l("validate"),align:"right"},A={label:l("next"),align:"right",arrow:!0},I={label:l("go_back"),arrow:!0,enabled:!0,loader:x,onClick:R},[_,y]=g.useState(L);return e.jsxDEV(ze.Provider,{value:{currentStep:s,franceMainObject:Et,franceSubObject:_t,foreignObject:jt,setStep6Schema:n,countryOptions:h,setCountryOptions:v,nextButtonDefault:L,nextButtonNext:A,setNextButton:y},children:e.jsxDEV(ie,{initialValues:{countryForm:(c==null?void 0:c.countryForm)??ue,country:(c==null?void 0:c.country)??"",countryObj:(c==null?void 0:c.countryObj)??{},city:(c==null?void 0:c.city)??"",zip:(c==null?void 0:c.zip)??"",address:(c==null?void 0:c.address)??"",additionalAddress:(c==null?void 0:c.additionalAddress)??"",isDefaultAddress:!1},validateOnBlur:!0,validateOnChange:!1,validationSchema:f,onSubmit:V,children:({handleSubmit:T,setFieldValue:k,values:H})=>{const U=E=>{var Q;const{city:z,countryForm:q}=H;if(!(i!=null&&i.showEdit)&&ue===q&&z===""){const{address:re,additionalAddress:se,city:G}=(Q=u[0])==null?void 0:Q.values;k("city",G),k("address",re),k("additionalAddress",se),k("isDefaultAddress",!0)}T(E)};return e.jsxDEV("form",{id:"diagAssBillingAddress",onSubmit:U,children:[i!=null&&i.showEdit?e.jsxDEV(Sa,{isFreeDiag:d},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:231,columnNumber:17},this):e.jsxDEV(ua,{isFreeDiag:d},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:233,columnNumber:17},this),e.jsxDEV(te,{previous:I,next:_},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:235,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:229,columnNumber:13},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:196,columnNumber:7},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:182,columnNumber:5},this)}function ua({isFreeDiag:s}){const a=Y(),{t}=F(),{track:i}=Z(),{state:l}=g.useContext(ee),{steps:S}=l,p=["pin-location-1"],[u]=g.useState(()=>{var h,v;const m=((h=S[5])==null?void 0:h.values)??((v=S[0])==null?void 0:v.values),{address:c,additionalAddress:N,city:x}=m;return Ss({address:c,city:x,additionalAddress:N})}),o=[{locked:!1,summary:t("diagAss.step.step6.check.body",{context:s?"":"fee",address:u}),link:{onClick:()=>{i("DIAGASS_14",{type_information:is}),a.push(r.DIAG_ASS.STEP_6,{showEdit:!0})},label:t("edit")},values:{}}];return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(w.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:t("diagAss.step.step6.check.title",{context:s?"":"fee"})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:279,columnNumber:7},this),e.jsxDEV(Le,{className:"mt-3 mt-lg-4",steps:o,isStepList:!0,icons:p},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:284,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:278,columnNumber:5},this)}const pa=()=>{const{t:s}=F(),{currentStep:a,franceMainObject:t,franceSubObject:i,setStep6Schema:l,setNextButton:S,nextButtonNext:p,nextButtonDefault:u}=g.useContext(ze),{state:o}=g.useContext(ee),{steps:m}=o,c=a-1,N=_e(),{values:x,errors:h,handleChange:v,handleBlur:j,setFieldValue:d,validateForm:f}=N,[n,C]=g.useState(!1),[V,R]=g.useState(!1),[L,A]=g.useState(()=>{var z,q,Q;const E=(q=(z=m[c])==null?void 0:z.values)!=null&&q.isDefaultAddress?null:(Q=m[c])==null?void 0:Q.values;if(E&&(E==null?void 0:E.city)!==""&&ue===(E==null?void 0:E.countryForm)){const{address:re,locality:se,localityId:G,postalCode:X}=E;return{locality:se,zipcode:X,inseecode:G,text:re}}return null}),[I,_]=g.useState(!1),[y,b]=g.useState(!1);g.useEffect(()=>{var E,z,q;(!((E=m[c])!=null&&E.values)||(q=(z=m[c])==null?void 0:z.values)!=null&&q.isDefaultAddress)&&S(p)},[]);const D={locality:L==null?void 0:L.locality,localityId:L==null?void 0:L.inseecode,postalCode:L==null?void 0:L.zipcode},P=E=>{let z;E?(z=ae({...t,...i}),S(u)):(z=ae(t),S(p)),l(z)},M=E=>{const{text:z}=E;A(E),C(!1),d("city",z,!0),d("address","",!1),d("additionalAddress","",!1),_(!1),P(!0)},O=({target:E})=>{E.value.length===0?(d("address","",!1),d("additionalAddress","",!1)):2<E.value.length&&!n&&C(!0),_(!0),d("city",E.value)},T=()=>{x.city.length>0&&I&&(d("address",""),d("city","",!0),A(null),P(!1)),C(!1)},k=E=>{const{locality:z,localityId:q,streetId:Q,streetName:re,streetNumber:se,streetNumberExt:G,text:X,postalCode:B}=E;d("address",X),d("localityId",q),d("streetId",Q),d("streetNumber",se),d("streetNumberExt",G),d("streetName",re),d("locality",z),d("postalCode",B),f(),b(!1),R(!1)},H=({target:E})=>{E.value.length>2&&!V&&R(!0),P(!0),b(!0),d("address",E.value)},U=()=>{x.address.length>0&&y&&d("address","",!0),R(!1)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"searchInput-town",children:e.jsxDEV(w.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:s("diagAss.step.step6.edit.city.label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:441,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:440,columnNumber:9},void 0),e.jsxDEV(De,{type:"town",name:"city",value:x.city,placeholder:s("diagAss.step.step6.edit.city.placeholder"),onChange:O,onClick:M,onClickAway:T,isSearching:n},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:449,columnNumber:9},void 0),e.jsxDEV($,{field:"city",customDisplay:h.city},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:459,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:439,columnNumber:7},void 0),L&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"searchInput-town",children:e.jsxDEV(w.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:s("diagAss.step.step6.edit.address.label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:465,columnNumber:15},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:464,columnNumber:13},void 0),e.jsxDEV(De,{type:"street",name:"address",value:x.address,placeholder:s("diagAss.step.step6.edit.address.placeholder"),onChange:H,onClick:k,onClickAway:U,isSearching:V,address:D},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:473,columnNumber:13},void 0),e.jsxDEV($,{field:"address",customDisplay:h.address},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:484,columnNumber:13},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:463,columnNumber:11},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzInput,{id:"additionalAddress",name:"additionalAddress",label:s("diagAss.step.step6.edit.additional_address.label"),placeholder:s("diagAss.step.step6.edit.additional_address.placeholder"),variant:"outlined",value:x.additionalAddress,onChange:v,onBlur:j},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:487,columnNumber:13},void 0),e.jsxDEV($,{field:"additionalAddress",customDisplay:h.additionalAddress},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:499,columnNumber:13},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:486,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:462,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:438,columnNumber:5},void 0)},ma=()=>{const{setNextButton:s,nextButtonDefault:a,countryOptions:t,setCountryOptions:i}=g.useContext(ze),{t:l}=F(),S=_e(),{values:p,errors:u,touched:o,handleBlur:m,handleChange:c,setFieldTouched:N,setFieldValue:x}=S;g.useEffect(()=>{s(a)},[]);const{isLoading:h}=xe("countries",()=>de.get(ce.GET_COUNTRIES),{refetchOnWindowFocus:!1,onSuccess:({data:d})=>{const f=d.map(({id:n,fr:C})=>({label:C,value:n}));i(f)}}),v=()=>{N("country",!0,!0)},j=d=>{x("country",d.label,!0),x("countryObj",d)};return h?e.jsxDEV(e.Fragment,{children:Array.from({length:5},(d,f)=>e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(je,{height:20,width:100,className:"mb-2"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:562,columnNumber:13},void 0),e.jsxDEV(je,{height:48},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:563,columnNumber:13},void 0)]},f,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:561,columnNumber:11},void 0))},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:559,columnNumber:7},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV("label",{className:"mb-2",htmlFor:"country",children:e.jsxDEV(w.SzTypographie,{weight:"regular",className:"text-primary-dark",tag:"span",children:l("diagAss.step.step6.edit.country.label")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:574,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:573,columnNumber:9},void 0),e.jsxDEV(w.SzSelect,{name:"country",id:"country",placeholder:l("diagAss.step.step6.edit.country.placeholder"),options:t,value:p.country,defaultValue:Object.keys(p.countryObj).length>0?p.countryObj:t.find(({value:d})=>d===p.country),onBlur:v,onChange:j},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:582,columnNumber:9},void 0),e.jsxDEV($,{field:"country",customDisplay:o.country&&u.country},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:596,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:572,columnNumber:7},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzInput,{id:"city",name:"city",label:l("diagAss.step.step6.edit.city.label"),placeholder:l("diagAss.step.step6.edit.city.placeholder",{context:"foreign"}),variant:"outlined",value:p.city,onChange:c,onBlur:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:602,columnNumber:9},void 0),e.jsxDEV($,{field:"city",customDisplay:o.city&&u.city},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:614,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:601,columnNumber:7},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzInput,{id:"zip",name:"zip",label:l("diagAss.step.step6.edit.zip.label"),placeholder:l("diagAss.step.step6.edit.zip.placeholder"),variant:"outlined",value:p.zip,onChange:c,onBlur:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:617,columnNumber:9},void 0),e.jsxDEV($,{field:"zip",customDisplay:o.zip&&u.zip},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:627,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:616,columnNumber:7},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzInput,{id:"address",name:"address",label:l("diagAss.step.step6.edit.address.label"),placeholder:l("diagAss.step.step6.edit.address.placeholder"),variant:"outlined",value:p.address,onChange:c,onBlur:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:630,columnNumber:9},void 0),e.jsxDEV($,{field:"address",customDisplay:o.address&&u.address},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:640,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:629,columnNumber:7},void 0),e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzInput,{id:"additionalAddress",name:"additionalAddress",label:l("diagAss.step.step6.edit.additional_address.label"),placeholder:l("diagAss.step.step6.edit.additional_address.placeholder"),variant:"outlined",value:p.additionalAddress,onChange:c,onBlur:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:646,columnNumber:9},void 0),e.jsxDEV($,{field:"additionalAddress",customDisplay:o.additionalAddress&&u.additionalAddress},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:658,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:645,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:571,columnNumber:5},void 0)},Sa=({isFreeDiag:s})=>{const{t:a}=F(),{currentStep:t,franceMainObject:i,foreignObject:l,setStep6Schema:S,setNextButton:p,nextButtonDefault:u,nextButtonNext:o}=g.useContext(ze),{state:m}=g.useContext(ee),{steps:c}=m,N=t-1,x=_e(),{values:h,resetForm:v}=x,j=d=>{var C;const f=(C=c[N])==null?void 0:C.values,n=d.target.value===(f==null?void 0:f.countryForm)?{country:f==null?void 0:f.country,countryObj:f==null?void 0:f.countryObj,city:f==null?void 0:f.city,address:f==null?void 0:f.address,zip:f==null?void 0:f.zip,additionalAddress:f==null?void 0:f.additionalAddress,isDefaultAddress:!1}:{country:"",countryObj:{},city:"",address:"",zip:"",additionalAddress:"",isDefaultAddress:!1};v({values:{countryForm:d.target.value,...n},errors:{}}),S(ae(ue===d.target.value?i:l)),p(ue===d.target.value?o:u)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(w.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:a("diagAss.step.step6.edit.title",{context:s?"":"fee"})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:724,columnNumber:7},void 0),e.jsxDEV(w.SzTypographie,{className:"mb-lg-4 text-dark",children:a("diagAss.step.step6.edit.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:729,columnNumber:7},void 0),e.jsxDEV("div",{className:"row mt-4",children:[e.jsxDEV("div",{className:"col-12 col-lg-8 mb-3",children:[e.jsxDEV(w.SzTypographie,{className:"mb-2",children:a("diagAss.step.step6.edit.country_form.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:734,columnNumber:11},void 0),e.jsxDEV("div",{className:"d-flex",children:[e.jsxDEV(w.SzRadio,{id:"countryFormFrance",name:"countryForm",label:a("diagAss.step.step6.edit.country_form.france"),value:"france",checked:ue===h.countryForm,onChange:j},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:738,columnNumber:13},void 0),e.jsxDEV(w.SzRadio,{className:"ml-3",id:"countryFormForeign",name:"countryForm",label:a("diagAss.step.step6.edit.country_form.foreign"),value:"foreign",checked:Ve===h.countryForm,onChange:j},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:746,columnNumber:13},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:737,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:733,columnNumber:9},void 0),ue===h.countryForm?e.jsxDEV(pa,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:758,columnNumber:11},void 0):e.jsxDEV(ma,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:760,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:732,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/Step6/Step6.tsx",lineNumber:723,columnNumber:5},void 0)},Be="yes",Fe="no";function ga(){var I,_,y;const s=Y(),{t:a}=F(),{track:t}=Z(),{state:i}=g.useContext(ee),{steps:l}=i,{link:S}=(y=(_=(I=window.tsme_data)==null?void 0:I.footer)==null?void 0:_.links_bottom)==null?void 0:y.credits_url,u=l[1].values.radioBtn===Me,[o,m]=g.useState(!1),c=()=>{m(!0),s.push(r.DIAG_ASS.STEP_6,{showEdit:!0})},N=l[4].values.serviceId,x=l[4].values.needWater,h=l[4].values.waterSupplied,v={...l[0].values},j={...l[5].values},[d,f]=g.useState(j);g.useEffect(()=>{Ve===j.countryForm&&j.address===""&&j.city===""&&f(v)},[]);let n=null;v.address===d.address&&v.additionalAddress===d.additionalAddress&&v.city===d.city?n=null:d.countryForm===ue?n=Be:d.countryForm===Ve&&(n=Fe);const C=()=>{t("DIAGASS_26");let b={idCertificate:N};n!==null&&(b.isFrenchAddress=n),x==="1"&&(b.waterSupplyAccess=h?Be:Fe),n===Be&&(b.insee=d.localityId,b.hexavia=d.streetId,b.streetName=d.streetName,b.city=d.locality,b.zipCode=d.postalCode,d.streetNumber&&(b.streetNumber=d.streetNumber)),n===Fe&&(b.country=d.country,b.city=d.city,b.zipCode=d.zip,b.address=d.address),d.additionalAddress!==""&&n!==null&&(b.additionalAddress=d.additionalAddress),R.mutate(b)},{isLoading:V,...R}=Oe(b=>de.post(ce.DIAG_ASS.FINALIZE_REQUEST,b),{onSuccess:({data:b})=>{b.message===oe.OK_FINALISATION_DEMANDE?s.push(r.DIAG_ASS.STEP_END):s.push(r.DIAG_ASS.TECHNICAL_ERROR)},onError:()=>{s.push(r.DIAG_ASS.TECHNICAL_ERROR)}}),L={label:a("diagAss.step.confirm.button"),align:"right",loader:V},A={label:a("go_back"),arrow:!0,enabled:!0,loader:o,onClick:c};return e.jsxDEV(ie,{initialValues:{confirmConditions:!1},validateOnChange:!1,validationSchema:yt,onSubmit:C,children:({errors:b,handleSubmit:D,setFieldValue:P,values:M})=>(g.useEffect(()=>{b.confirmConditions&&t("DIAGASS_25")},[b]),e.jsxDEV("form",{id:"diagAssConfirmSummary",onSubmit:D,children:[e.jsxDEV("div",{className:"mb-4 mb-lg-5",children:[e.jsxDEV(w.SzTypographie,{className:"mb-lg-5 text-dark",children:a("diagAss.step.confirm.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:169,columnNumber:15},this),e.jsxDEV(Le,{className:"mb-3 mb-lg-4",steps:l,isStepList:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:172,columnNumber:15},this),e.jsxDEV(w.SzCheckbox,{id:"confirmConditions",name:"confirmConditions",type:"checkbox",label:e.jsxDEV(ts,{i18nKey:"diagAss.step.confirm.conditions.accept",components:{cgu:e.jsxDEV(Ze,{"data-cy":"linkCGU",to:S,target:"_blank",decorate:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:186,columnNumber:25},this),cge:e.jsxDEV(Ze,{"data-cy":"linkCGE",to:u?Os:Ls,target:"_blank",decorate:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:194,columnNumber:25},this)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:182,columnNumber:19},this),checked:M.confirmConditions,onChange:O=>{P("confirmConditions",O.target.checked,!0)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:177,columnNumber:15},this),e.jsxDEV($,{field:"confirmConditions",customDisplay:b.confirmConditions},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:213,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:168,columnNumber:13},this),e.jsxDEV(te,{previous:A,next:L},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:218,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:167,columnNumber:11},this))},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepConfirm/StepConfirm.tsx",lineNumber:151,columnNumber:5},this)}function fa(){var _,y,b,D;const s=Y(),{transform:a}=Ee(),{t}=F(),{track:i}=Z(),{state:l}=g.useContext(ee),{steps:S}=l,p=S[2].values.email,u=S[3].values,o=((_=S[1].values)==null?void 0:_.radioBtn)===Ie?Ue:qe,m=ms(u==null?void 0:u.visit),c=ps(u==null?void 0:u.context),N=(u==null?void 0:u.type)===Ne?"maison":"appartement",x=u==null?void 0:u.size,h=u==null?void 0:u.water,v=m,j=c,d=u==null?void 0:u.floor,f=u==null?void 0:u.pool,n=u==null?void 0:u.extra_equipment,C=(y=S[4])==null?void 0:y.summary.split(">")[1].split("<")[0],V=os(C),R=(b=S[4].values)==null?void 0:b.priceWithVAT,L=(D=S[4].values)!=null&&D.waterSupplied?as:rs;g.useEffect(()=>{i("DIAGASS_27",{type_assainissement:o,type_logement:N,surface_logement:x,nombre_piece_eau:h,type_visite:v,contexte_demande:j,etage_logement:d,equipement_piscine:f,dependance_exterieure:n,type_diagnostic:V,tarif:R,alimentation_eau:L})},[]);const A=()=>{s.push(r.HOME)},I={label:t("diagAss.step.end.button"),align:"right",onClick:A};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"d-flex p-4 mb-3 border-s border border-1 border-green-05 rounded-1 bg-lighten-30-green-light","data-cy":"success",children:[e.jsxDEV(w.SzIcon,{className:"text-success text-xlarge mr-4",icon:"check-circle-1",variant:"bold"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:89,columnNumber:9},this),e.jsxDEV(w.SzTypographie,{className:"m-0 new-line text-break",children:e.jsxDEV(we,{content:t("diagAss.step.end.alert",{email:p}),transform:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:95,columnNumber:11},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:85,columnNumber:7},this),e.jsxDEV("div",{className:"d-flex align-items-lg-center mt-4 mt-lg-5 pt-2 border-top border-1 border-gray-200",children:[e.jsxDEV(w.SzIcon,{className:"text-dark text-small mr-2",icon:"information-circle",variant:"line"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:102,columnNumber:9},this),e.jsxDEV(w.SzTypographie,{className:"text-dark",variant:"caption",size:"M",weight:"regular",children:t("diagAss.step.end.info")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:101,columnNumber:7},this),e.jsxDEV(te,{next:I},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:116,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/StepEnd/StepEnd.tsx",lineNumber:84,columnNumber:5},this)}var wa={};function Na(){const s=Y(),{transform:a}=Ee(),[t,i]=g.useState(!1),[l,S]=g.useState(!1),{t:p}=F(),{isConnected:u}=window.tsme_data,o=()=>{i(!0),s.push(u?r.DASHBOARD:r.HOME)},m={label:p(u?"diagAss.error.back_dashboard":"diagAss.error.back_home"),loader:t,align:"left",onClick:o},c=()=>{S(!0),s.push(r.CUSTOMER_SERVICE)},N={id:"CustomerServiceButton",label:p("diagAss.error.contact_customer_service"),loader:l,variant:"text",arrow:!0,onClick:c},{NODE_ENV:x}=wa,h=x===at.TEST?new Date("2024-01-01T12:00:00"):new Date;return e.jsxDEV(Ke,{title:p("diagAss.step.technical_error.title",{date:Qe(h,p("date.short_date")),time:Qe(h,p("date.hour"))}),subtitle:e.jsxDEV(we,{content:p("diagAss.step.technical_error.body"),transform:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:57,columnNumber:9},this),innerPadding:!1,children:[e.jsxDEV(te,{next:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:64,columnNumber:7},this),e.jsxDEV("div",{className:"row",children:e.jsxDEV(te,{next:N,marginTop:!1},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:66,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:65,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/TechnicalError/index.tsx",lineNumber:51,columnNumber:5},this)}function gs(){const{t:s}=F(),{transform:a}=Ee();return[{displayBadge:!1,step:Ct,path:r.DIAG_ASS.STEP_0_START,title:s("diagAss.step.step0.start.title"),subtitle:e.jsxDEV(we,{content:s("diagAss.step.step0.start.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/useSteps.tsx",lineNumber:57,columnNumber:17},this)},{displayBadge:!1,step:Dt,path:r.DIAG_ASS.STEP_0_PRO_NOT_ELIGIBLE,error:!0},{displayBadge:!1,step:It,title:s("diagAss.step.step0.selection_origin.title"),path:r.DIAG_ASS.STEP_0_SELECTION_ORIGIN,subtitle:e.jsxDEV(we,{content:s("diagAss.step.step0.selection_origin.body")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/useSteps.tsx",lineNumber:71,columnNumber:9},this)},{displayBadge:!1,step:Tt,path:r.DIAG_ASS.STEP_0_ERROR_REQUEST_ORIGIN,error:!0},{displayBadge:!1,step:Vt,title:s("diagAss.step.step0.owner_login.title"),path:r.DIAG_ASS.STEP_0_OWNER_LOGIN,index:0},{displayBadge:!1,step:Rt,path:r.DIAG_ASS.STEP_0_ERROR_NOT_OWNER,error:!0},{displayBadge:!0,step:zt,index:1,path:r.DIAG_ASS.STEP_1},{displayBadge:!0,step:Gt,index:1,path:r.DIAG_ASS.STEP_1_CREATE},{showHistory:!0,displayBadge:!0,step:Ft,index:2,title:s("diagAss.step.step2.sanitize.title"),path:r.DIAG_ASS.STEP_2},{displayBadge:!0,step:Mt,title:s("diagAss.step.step3.list.title"),path:r.DIAG_ASS.STEP_2_KO_CONTRACT,error:!0},{displayBadge:!0,step:Ht,title:s("diagAss.step.step3.list.title"),path:r.DIAG_ASS.STEP_2_KO_DIGITAL,error:!0},{showHistory:!0,displayBadge:!0,step:Ut,index:3,title:s("diagAss.step.step3.list.title"),path:r.DIAG_ASS.STEP_3},{showHistory:!0,displayBadge:!0,step:qt,index:3,title:s("diagAss.step.step3.create.title"),path:r.DIAG_ASS.STEP_3_CREATE},{displayBadge:!1,step:ra,title:s("diagAss.step.rgpd_confirm.title"),path:r.DIAG_ASS.STEP_RGPD_CONFIRM},{showHistory:!0,displayBadge:!0,step:Jt,index:4,title:s("diagAss.step.step4.complementary_infos.title"),path:r.DIAG_ASS.STEP_4},{displayBadge:!1,step:sa,title:s("diagAss.step.step4.complementary_infos.title"),path:r.DIAG_ASS.STEP_4_KO,error:!0},{displayBadge:!1,step:ta,title:s("diagAss.step.step4.complementary_infos.title"),path:r.DIAG_ASS.STEP_4_KO_MAX_VALUE,error:!0},{showHistory:!0,displayBadge:!0,step:ia,index:5,title:s("diagAss.step.step5.title"),path:r.DIAG_ASS.STEP_5},{displayBadge:!1,step:na,index:5,title:s("diagAss.step.step5.water.title"),subtitle:e.jsxDEV(we,{content:s("diagAss.step.step5.water.body"),transform:a},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/useSteps.tsx",lineNumber:185,columnNumber:9},this),path:r.DIAG_ASS.STEP_5_WATER},{displayBadge:!1,step:oa,path:r.DIAG_ASS.STEP_5_KO,error:!0},{displayBadge:!1,step:la,title:s("diagAss.step.step5.title"),path:r.DIAG_ASS.STEP_5_WATER_KO,error:!0},{showHistory:!0,index:6,displayBadge:!0,step:ca,path:r.DIAG_ASS.STEP_6},{displayBadge:!1,step:ga,title:s("diagAss.step.confirm.title"),path:r.DIAG_ASS.STEP_CONFIRM},{displayBadge:!1,step:fa,title:s("diagAss.step.end.title"),path:r.DIAG_ASS.STEP_END},{step:Na,path:r.DIAG_ASS.TECHNICAL_ERROR}]}function ba(){const s=Y(),a=We(),t=gs(),{setSummaryStep1:i,setSummaryStep2:l,setSummaryStep3:S}=ye(),{t:p}=F(),{extraFn:u}=g.useContext(ee),{lockStep:o,saveStep:m}=u,N=new URLSearchParams(a.search).get("token"),x=j=>{const{cellphone:d,email:f,lastName:n,additionalAddress:C,city:V,firstName:R,sanitationType:L,streetName:A,streetNumber:I,zipCode:_}=j,y=Ae(I,A),b=Ae(_,V),D=i(b,y,C);m(r.DIAG_ASS.STEP_1_CREATE,{addressId:"other",city:b,address:y,additionalAddress:C},p(D.label,D.values));const P=l(L,p);m(r.DIAG_ASS.STEP_2,{radioBtn:L},p(P.label,P.values));const M=S(R,n,f,d);m(r.DIAG_ASS.STEP_3,{value1:`${R} ${n}`,value2:d,value3:f,context:d},p(M.label,M.values)),o([1,2,3])},{isLoading:h,isIdle:v}=xe(["dataRestitution",N],()=>de.get(ce.DIAG_ASS.DATA_RESTITUTION,{params:{token:N}}),{onSuccess:({data:j})=>{oe.SUCCESS===j.code?x(j.content):s.push(r.DIAG_ASS.TECHNICAL_ERROR)},onError:()=>{s.push(r.DIAG_ASS.TECHNICAL_ERROR)},enabled:!!N});return N&&(v||h)?e.jsxDEV(e.Fragment,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:104,columnNumber:12},this):e.jsxDEV(rt,{children:t.map(j=>{const{path:d,title:f,subtitle:n,index:C,displayBadge:V,showHistory:R,error:L}=j,A=j.step;return e.jsxDEV(it,{path:d,children:[R&&e.jsxDEV(mt,{currentStep:C},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:124,columnNumber:29},this),L?e.jsxDEV(A,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:126,columnNumber:15},this):e.jsxDEV(Ke,{displayBadge:V,title:f,subtitle:n,index:C,length:t.length,children:e.jsxDEV(A,{currentStep:C},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:135,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:128,columnNumber:15},this)]},d,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:123,columnNumber:11},this)})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/Stepper/index.tsx",lineNumber:108,columnNumber:5},this)}const{isConnected:ss}=window.tsme_data,fs={displayList:!0,displayError:!1,currentStep:0,showHistory:!0,isRGPDValidation:!1,steps:[]};function sr(){const s=Y(),a=We(),{t}=F(),{track:i}=Z(),l=ks(),S=gs(),[p,u]=g.useState(a.pathname===r.DIAG_ASS.STEP_0_START),[o,m]=g.useReducer(pt,fs),c=g.useMemo(()=>[o,m],[o,m]),{steps:N}=c[0];g.useEffect(()=>{u(a.pathname===r.DIAG_ASS.STEP_0_START)},[a]);const x=()=>{m({type:"setDisplay",payload:!1})},h=()=>{m({type:"setDisplayError",payload:!0})},v=V=>{if(Array.isArray(V))for(const R of V)m({type:"lockStep",payload:{index:R-1}});else m({type:"lockStep",payload:{index:V-1}})},j=V=>{const R=[...N];R[V-1]&&(delete R[V-1],m({type:"steps",payload:R}))},d=g.useCallback((V,R,L="")=>{const A=S.find(I=>I.path===V);if(A!=null&&A.index){const I=A.index-1,_=[...N],y={label:t("edit"),onClick:()=>{const M={[r.DIAG_ASS.STEP_1_CREATE]:Js,[r.DIAG_ASS.STEP_2]:et,[r.DIAG_ASS.STEP_3_CREATE]:st,[r.DIAG_ASS.STEP_4]:tt,[r.DIAG_ASS.STEP_5_WATER]:Je,[r.DIAG_ASS.STEP_5_WATER_KO]:Je,[r.DIAG_ASS.STEP_6]:is}[V];M&&i("DIAGASS_14",{type_information:M}),V===r.DIAG_ASS.STEP_1_CREATE&&ss?s.push(r.DIAG_ASS.STEP_1):V===r.DIAG_ASS.STEP_3_CREATE&&ss?s.push(r.DIAG_ASS.STEP_3):V===r.DIAG_ASS.STEP_5_WATER?s.push(r.DIAG_ASS.STEP_5):V===r.DIAG_ASS.STEP_6?s.push(r.DIAG_ASS.STEP_6,{showEdit:!0}):s.push(V)}},b={locked:!1,summary:"",link:y,values:{}};let D={..._[I]||b,summary:L,link:y};D.values=Object.assign(D.values,R),m({type:"step",payload:{index:I,step:D}})}},[N]),[f,n]=g.useState(""),C={state:c[0],dispatch:c[1],extraFn:{hideList:x,displayError:h,deleteStep:j,lockStep:v,saveStep:d},exceedsValueField:f,setExceedsValueField:n};return e.jsxDEV(Ts,{id:"diagAssPage",type:"diag-ass",children:[!p&&e.jsxDEV(ct,{robots:"noindex"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:180,columnNumber:25},this),e.jsxDEV(w.SzTypographie,{variant:"H1",size:l?"L":"XL",weight:"black",color:"light",className:"text-center text-uppercase mb-4 mb-lg-5",children:t("diagAss.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:181,columnNumber:7},this),e.jsxDEV(ut,{initialValue:C,children:e.jsxDEV(ba,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:191,columnNumber:9},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:190,columnNumber:7},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/diagAss/index.tsx",lineNumber:179,columnNumber:5},this)}export{sr as default,fs as initialState};
