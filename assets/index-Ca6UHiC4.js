import{j as e,b as a,a as Y}from"./index-BAjkLHRS.js";import{O as xe,e as ye,a as ue,_ as X,W as we,y as C,t as p,k,A as H,S as O,ad as Ee,ae as je,M as le,V as Ie,$ as Ce,L as Ve,u as J,B as de,w as De,m as ce,aR as ve,h as Z,q as me,C as Me,av as Te,aS as Se}from"./react-spring-web.esm-BXduOQz-.js";import{r as P}from"./index-Djf8kdDz.js";import{u as _e}from"./useInterweave-CyiDgcKg.js";import{F as Oe}from"./index-CMwthcxG.js";import{A as re}from"./index-CzMjzDBE.js";import{u as he,P as Fe,M as Le,a as Pe}from"./index-QSzm1s2p.js";import{F as ke}from"./FormError-B1L9786s.js";import{u as fe}from"./useQueryObserver-JDa9NgZY.js";/* empty css              *//* empty css                         */import{u as F}from"./useTranslation-Cclpl_OC.js";import{P as be}from"./index-uv5aPsVN.js";import{u as He}from"./useSearchParams-B1N2HOwe.js";import{p as Ne}from"./index-DiRmYu4I.js";import{u as ze}from"./useToRedirect-CT6jxEtz.js";import{B as Ae,M as Be}from"./index-B2jJIgGW.js";import{S as Ue}from"./index-B0sO1uuX.js";import"./index-BcQ2dhrg.js";import"./index-CCqWUn_M.js";import"./throttle-BPCfK1uX.js";import"./_baseIsEqual-8OBVMFu7.js";import"./iframe-fNLlJobk.js";import"../sb-preview/runtime.js";import"./cross-circle-D-gJHWvz.js";import"./index-BYcN8_oV.js";import"./PhoneInput-B4baFBfA.js";import"./index-BAo06JVc.js";import"./index-CnVkoL_H.js";import"./index-B1FFCuch.js";import"./PaymentChoice-CjOlchtg.js";import"./index-GH-OyLMD.js";import"./ContractSummary-De77m2_-.js";import"./emotion-css.esm-CzHtF_01.js";import"./useIsFetching-Cm2LMWlv.js";import"./alert-1x2DqBXR.js";import"./useSetOtp-C204e7pq.js";import"./Tips-RI6rFAQq.js";import"./light-bulb-shine-BN5xHApG.js";import"./InputSeries-CzwU4lJX.js";import"./index-CFKrvidp.js";import"./createWithBsPrefix-OZLcO0Cc.js";import"./divWithClassName-Bip2r8Rx.js";import"./OnConnectCoachContent-BvLCsyMd.js";import"./usePostCustomerAdditionalInfos-D8Abe1De.js";import"./useWaitForDOMRef-kdEpDSq_.js";import"./index-BxUKmwkz.js";import"./useScrollTo-VXXfg99K.js";import"./check-circle-1-CH6VNuLl.js";import"./index-BBUdod_g.js";import"./index-DYhus6MJ.js";import"./add-circle-56pf8-2t.js";const Re=""+new URL("invoices-explain-DSCrodL9.png",import.meta.url).href,Ye=xe({consent:ye().oneOf([!0],"mandatory_field")}),We=({closeModal:n})=>{var z,A;const{t:i}=F(),{transform:o}=_e(),c=ue(),{modeListPaymentData:r,isLoading:d,isError:t}=he(),{refetch:m}=fe("GetDataPushService"),[l,s]=P.useState(!1),{footer:N}=window.tsme_data,h=(A=(z=N==null?void 0:N.links_bottom)==null?void 0:z.credits_url)==null?void 0:A.link,{currentPaymentModeCode:u}=r||{},f=["M","P"].includes(u??""),{track:x}=X(),{isError:y,error:v,reset:V,isLoading:D,isSuccess:g,...I}=we(()=>k.post(H.PAYMENT.POST_PAYMENT_E_INVOICE),{onSuccess:()=>{m(),c.push(C(p.ACCOUNT_INVOICES,{modal:"modale-e-facture",status:"confirmation"}))},onError:()=>{c.push(C(p.ACCOUNT_INVOICES,{modal:"modale-e-facture",status:"erreur"}))}}),L={label:i("invoiceHistory.EFactureModal.button",{context:f?"subscribe":"redirect"}),align:"right",loader:l||D},M={consent:!1},ee=()=>{f?(x("INVOICE_CONSULTATION_3",{etat_prelevement_auto:"prelevement_auto_ok"}),I.mutate()):(x("INVOICE_CONSULTATION_3",{etat_prelevement_auto:"prelevement_auto_pas_ok"}),s(!0),c.push(p.PAYMENT.MY_PAYMENT_METHOD_EFACTURE))};return d?e.jsxDEV("div",{children:[e.jsxDEV(O,{count:1,width:"50%",height:28,className:"mb-2"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:107,columnNumber:9},void 0),e.jsxDEV(O,{count:1,width:"100%",height:300},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:108,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:106,columnNumber:7},void 0):y||t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(a.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:i("invoiceHistory.EFactureModal.technical_error.title",{date:Ee,time:je})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:116,columnNumber:9},void 0),e.jsxDEV(re,{variant:"alert",className:"my-3 my-lg-4",children:e.jsxDEV(a.SzTypographie,{variant:"body",size:"M",weight:"regular",tag:"span",children:i("invoiceHistory.EFactureModal.technical_error.description",{context:y?"subscribe":"init"})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:123,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:122,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-lg-right mt-4 mt-lg-5",children:e.jsxDEV(a.SzButton,{variant:"contained",border:"soft",type:"button",onClick:n,"data-cy":"close-e-facture-modal",children:i("close")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:130,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:129,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:115,columnNumber:7},void 0):g?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(a.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:i("invoiceHistory.EFactureModal.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:147,columnNumber:9},void 0),e.jsxDEV(re,{variant:"success",className:"my-3 my-lg-4",children:e.jsxDEV(a.SzTypographie,{variant:"body",size:"M",weight:"regular",tag:"span",children:i("invoiceHistory.EFactureModal.confirmation")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:151,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:150,columnNumber:9},void 0),e.jsxDEV("div",{className:"text-lg-right mt-4 mt-lg-5",children:e.jsxDEV(a.SzButton,{variant:"contained",border:"soft",type:"button","data-cy":"close-e-facture-modal",onClick:n,children:i("close")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:156,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:155,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:146,columnNumber:7},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(a.SzTypographie,{variant:"H3",weight:"medium",size:"L",children:i("invoiceHistory.EFactureModal.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:172,columnNumber:7},void 0),e.jsxDEV(a.SzTypographie,{variant:"body",size:"L",weight:"regular",className:"text-dark",children:e.jsxDEV(le,{content:i("invoiceHistory.EFactureModal.description"),transform:o},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:181,columnNumber:9},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:175,columnNumber:7},void 0),!f&&e.jsxDEV(re,{variant:"info",children:e.jsxDEV(le,{content:i("invoiceHistory.EFactureModal.info"),transform:o},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:188,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:187,columnNumber:9},void 0),e.jsxDEV(Ie,{initialValues:M,validateOnBlur:!1,validateOnChange:!0,validationSchema:Ye,onSubmit:ee,children:({handleSubmit:B,values:U,setFieldValue:R,errors:T})=>e.jsxDEV("form",{id:"e-facture-subscribe",onSubmit:B,children:[e.jsxDEV("div",{className:"col-12 mt-4 px-0 pt-3 border-top border-1 border-gray-100",children:[e.jsxDEV(a.SzCheckbox,{id:"consent",name:"consent",label:e.jsxDEV(a.SzTypographie,{variant:"body",weight:"regular",className:"text-dark",children:e.jsxDEV(Ce,{i18nKey:"invoiceHistory.EFactureModal.CGU",components:{redirect:e.jsxDEV(Ve,{decorate:!0,to:h,className:"text-dark"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:218,columnNumber:29},void 0)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:214,columnNumber:23},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:209,columnNumber:21},void 0),type:"checkbox",checked:U.consent,onChange:W=>{R("consent",W.target.checked,!0)}},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:205,columnNumber:17},void 0),e.jsxDEV(ke,{field:"consent",customDisplay:T.consent},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:234,columnNumber:17},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:204,columnNumber:15},void 0),e.jsxDEV(Oe,{next:L},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:236,columnNumber:15},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:203,columnNumber:13},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:194,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/EFactureModalContent.tsx",lineNumber:171,columnNumber:5},void 0)},Ge=({date:n,type:i,amount:o})=>{const{t:c}=F();return e.jsxDEV("div",{className:"bg-gray-200 rounded-2 p-3 px-lg-4 py-lg-3",children:[e.jsxDEV(a.SzTypographie,{variant:"body",weight:"bold",className:"text-blue-electric mb-0",tag:"span",children:n},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:25,columnNumber:7},void 0),e.jsxDEV(a.SzTypographie,{variant:"H2",size:"XL",weight:"bold",className:"mb-2",children:c("invoiceHistory.invoiceList.modal.amount",{amount:o})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:33,columnNumber:7},void 0),e.jsxDEV(a.SzTypographie,{variant:"body",weight:"regular",className:"text-dark mb-0",children:i},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:36,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:24,columnNumber:5},void 0)},$e=({insert:n,invoiceNumber:i,invoiceAmount:o,invoiceType:c,invoiceDate:r,push:d})=>{const{t}=F(),{track:m}=X(),l=J(),[s,N]=P.useState(!1),h=Y("col-12 col-lg-8 mt-4 mt-lg-0 ml-0 ml-lg-4 pt-4 pt-lg-0 px-0 pl-lg-4 d-flex flex-column align-items-start border-1 border-gray-100",{"border-top":l,"border-left":!l}),u=Y("push-item overflow-hidden d-flex bg-white rounded-2 cursor-pointer mb-4"),f=()=>{N(!0),m("INVOICE_CONSULTATION_1",{nature_facture:c});const x=C(p.ACCOUNT_INVOICES_INVOICE_VIEW,{invoice:i??""});window.open(x,"_blank"),N(!1)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(a.SzTypographie,{variant:"H3",weight:"medium",size:"L",className:"mb-4",children:t("invoiceHistory.invoiceList.modal.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:83,columnNumber:7},void 0),e.jsxDEV("div",{className:"d-flex flex-column flex-lg-row",children:[e.jsxDEV("div",{className:"col-12 col-lg-4 px-0",children:[e.jsxDEV(Ge,{amount:o,type:c,date:r},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:88,columnNumber:11},void 0),e.jsxDEV(a.SzButton,{variant:"contained",icon:"download-bottom",alignIcon:"right",border:"soft",className:"mt-3",onClick:f,loader:s,"data-cy":"download-invoice",children:t("invoiceHistory.invoiceList.modal.downloadBtn")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:93,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:87,columnNumber:9},void 0),(n||d)&&e.jsxDEV("div",{className:h,children:[d&&e.jsxDEV(be,{data:d,style:u},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:108,columnNumber:22},void 0),n&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"d-flex align-items-center",children:[e.jsxDEV(a.SzIcon,{icon:"attachment",variant:"bold"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:112,columnNumber:19},void 0),e.jsxDEV(a.SzTypographie,{variant:"H5",size:"L",weight:"bold",className:"text-uppercase mb-0 ml-2",children:t("invoiceHistory.invoiceList.modal.attachments")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:113,columnNumber:19},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:111,columnNumber:17},void 0),n.map((x,y)=>e.jsxDEV(Qe,{invoiceNumber:i,data:x},y,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:123,columnNumber:19},void 0))]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:110,columnNumber:15},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:107,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:86,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:82,columnNumber:5},void 0)},Qe=({invoiceNumber:n,data:i})=>{const{lbEncart:o,urlEncart:c}=i,r=C(p.ACCOUNT_INVOICES_ENCART_VIEW,{invoice:n??"",insert:c});return e.jsxDEV(de,{variant:"text",to:r,target:"_blank","data-cy":"insert-item",children:e.jsxDEV(a.SzTypographie,{variant:"caption",size:"M",weight:"regular",className:"mb-0",children:o},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:148,columnNumber:7},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/DownloadInvoiceModalContent.tsx",lineNumber:147,columnNumber:5},void 0)};function qe(){return function({path:i,params:o,queryParams:c}){const r=C(i,o),d=new URLSearchParams(c);return`${r}?${d.toString()}`}}const Ke=({style:n,data:i,handleClick:o,loading:c})=>{const r=J(),{t:d,i18n:t}=F(),{dateFacture:m,motifFacturation:l,montantFacture:s}=i,h=t.exists(`invoiceHistory.invoiceLabels.${l}`)?d(`invoiceHistory.invoiceLabels.${l}`):"";return e.jsxDEV("div",{className:n,"data-cy":"invoice-list-item",children:[r?e.jsxDEV(a.SzTypographie,{weight:"regular",className:"text-dark mb-1 mb-lg-0",children:[m," - ",h]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:52,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(a.SzTypographie,{weight:"regular",className:"text-dark mb-0",children:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:57,columnNumber:11},void 0),e.jsxDEV(a.SzTypographie,{weight:"regular",className:"text-dark mb-0",children:h},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:60,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:56,columnNumber:9},void 0),e.jsxDEV(a.SzTypographie,{weight:"bold",className:"mb-0",children:[s," â‚¬"]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:65,columnNumber:7},void 0),e.jsxDEV(de,{"data-cy":"invoice-dl-btn",variant:"text",className:"px-0",icon:"download-bottom",alignIcon:"right",onClick:()=>o(i),loader:c,children:d("download")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:68,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:50,columnNumber:5},void 0)},Xe=({invoiceData:n,currentPage:i,itemsPerPage:o,handlePageChange:c})=>{var Q,q,E,S;const{t:r,i18n:d}=F(),t=ue(),{modal:m}=De(),l=qe(),N=He().get("facture"),{track:h}=X(),u=n.findIndex(w=>w.numeroFacture===N),[f,x]=P.useState(u),y={numeroFacture:null,montantFacture:null,motifFacturation:null,dateFacture:null},v=f>-1?n[f]:y,V=Math.ceil(n.length/o),D=Math.max(1,Math.min(i,V)),g=(D-1)*o,I=Math.min(g+o,n.length),L=f%o,{data:M}=fe("GetDataPushHorizontal"),z=(((q=(Q=M==null?void 0:M.data)==null?void 0:Q.content)==null?void 0:q.dataPush)||[]).find(w=>w.push_modale),B=d.exists(`invoiceHistory.invoiceLabels.${v==null?void 0:v.motifFacturation}`)?r(`invoiceHistory.invoiceLabels.${v==null?void 0:v.motifFacturation}`):"",U=w=>{c(w)},R=()=>{t.push(C(p.ACCOUNT_INVOICES))},{data:T,isError:W,error:ne,reset:ae,isLoading:se,isSuccess:oe,...G}=we(w=>k.post(H.INVOICE_HISTORY.INSERTS,w),{onSuccess:({data:w},{invoiceNumber:b})=>{var j,_;if(((_=(j=w.content)==null?void 0:j.ListeEncarts)==null?void 0:_.length)>0){const K=l({path:p.ACCOUNT_INVOICES,params:{modal:ve},queryParams:{facture:b}});t.push(K)}else{const K=C(p.ACCOUNT_INVOICES_INVOICE_VIEW,{invoice:b});window.open(K,"_blank")}},onError:(w,{invoiceNumber:b})=>{const j=C(p.ACCOUNT_INVOICES_INVOICE_VIEW,{invoice:b});window.open(j,"_blank")}}),ie=(w,b)=>{x(g+b);const{numeroFacture:j,dateFacture:_,motifFacturation:K}=w,pe=r(`invoiceHistory.invoiceLabels.${K}`),ge=Ne(_,"dd/MM/yyyy",new Date);h("INVOICE_CONSULTATION_1",{nature_facture:pe}),G.mutate({invoiceNumber:j,invoiceDate:ce(ge,"dd-MM-yyyy")})},te=((S=(E=T==null?void 0:T.data)==null?void 0:E.content)==null?void 0:S.ListeEncarts)||[],$=m===ve;return P.useEffect(()=>{const{numeroFacture:w,dateFacture:b}=v||{},j=b?Ne(b,"dd/MM/yyyy",new Date):"";if($)if(u===-1){const _=C(p.ACCOUNT_INVOICES);t.push(_)}else u>=0&&w&&G.mutate({invoiceNumber:w,invoiceDate:j?ce(j,"dd-MM-yyyy"):""})},[]),e.jsxDEV(e.Fragment,{children:[n.slice(g,I).map((w,b)=>{const j=Y("invoice-table border-1 border-gray-100 align-items-baseline py-2 px-3 pl-lg-3",{"border-top":b!==I-1,"border-top border-bottom":b===I-1});return e.jsxDEV(Ke,{data:w,style:j,handleClick:_=>ie(_,b),loading:se&&L===b},b,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:236,columnNumber:11},void 0)}),e.jsxDEV("div",{className:"d-flex col-5 justify-content-center mx-auto px-0 mt-4",id:"invoice-pagination",children:e.jsxDEV(a.SzPagination,{totalItemsCount:V,activePage:D,onChange:U,itemsCountPerPage:o,pageRangeDisplayed:V,enableDisabled:!0,variant:"custom",aria:{prevLabel:"Previous",nextLabel:"Next"},prevButtonId:"invoice-pagination-prev",nextButtonId:"invoice-pagination-next"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:246,columnNumber:9},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:245,columnNumber:7},void 0),e.jsxDEV(a.SzModal,{size:"lg",show:$,handleClose:R,backdrop:!0,centered:!0,scrollable:!0,border:"smooth",fullscreen:"md",title:"",children:v!=null&&v.numeroFacture?e.jsxDEV($e,{insert:te,invoiceAmount:v==null?void 0:v.montantFacture,invoiceType:B,invoiceDate:v==null?void 0:v.dateFacture,invoiceNumber:v.numeroFacture,push:z},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:274,columnNumber:11},void 0):null},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:262,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceTable.tsx",lineNumber:225,columnNumber:5},void 0)};function Je(){let i=new Date().getFullYear()-2,o=new Date(i,0,1);return Z("InvoiceList",()=>k.post(H.INVOICE_HISTORY.INVOICES_LIST,{minBillingDate:ce(o,"yyyy-MM-dd"),currentPage:1,itemsPerPage:999}))}const Ze=n=>{const[i,o]=P.useState(!1),c=ue(),r=me(),{toRedirect:d}=ze(),{pathname:t}=r,{icon:m,title:l,description:s,cta:N}=n,{track:h}=X();P.useEffect(()=>{t==="/mon-compte-en-ligne/mes-factures/modale-e-facture"&&o(!0)},[t]);const u=()=>{o(!1),c.push(C(p.ACCOUNT_INVOICES))},f=()=>{h("INVOICE_CONSULTATION_2"),d(N.url)};return e.jsxDEV("div",{className:"push-insert rounded-2 bg-blue-03 p-3 p-lg-4 ml-lg-5 mb-3 mb-lg-0 d-flex flex-column text-center align-items-center order-1 order-lg-0 mx-3 mx-lg-0","data-cy":"push-insert",children:[e.jsxDEV("div",{className:"push-icon-container bg-white rounded-circle p-3 d-flex align-items-center justify-content-center mb-3",children:e.jsxDEV("img",{src:m.src,alt:m.alt,className:"push-icon"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:56,columnNumber:9},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:55,columnNumber:7},void 0),e.jsxDEV(a.SzTypographie,{variant:"H4",weight:"medium",size:"L",children:l},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:58,columnNumber:7},void 0),e.jsxDEV(a.SzTypographie,{weight:"regular",className:"text-dark",tag:"span",children:e.jsxDEV(le,{content:s},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:62,columnNumber:9},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:61,columnNumber:7},void 0),e.jsxDEV("div",{className:"col-6 mx-auto",children:e.jsxDEV(a.SzButton,{variant:"contained",border:"soft",onClick:f,"data-cy":"push-service",children:N.label},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:65,columnNumber:9},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:64,columnNumber:7},void 0),e.jsxDEV(a.SzModal,{size:"lg",show:i,handleClose:u,backdrop:!0,centered:!0,scrollable:!0,border:"smooth",fullscreen:"md",title:"",children:e.jsxDEV(We,{closeModal:u},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:86,columnNumber:9},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:75,columnNumber:7},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:51,columnNumber:5},void 0)},es=()=>{var y,v,V,D,g,I,L;const{t:n}=F(),i=J(),[o,c]=P.useState(1),r=4,d=M=>{c(M)},{data:t,isError:m,isLoading:l}=Je(),{data:s,isLoading:N}=Z("GetDataPushService",()=>k.get(H.INVOICE_HISTORY.PUSH,{params:{type:"service"}})),u=((V=(((v=(y=t==null?void 0:t.data)==null?void 0:y.content)==null?void 0:v.clientFacturesPro)||[])[0])==null?void 0:V.facturesPro)||[],f=Object.keys(((g=(D=s==null?void 0:s.data)==null?void 0:D.content)==null?void 0:g.dataPush)||{}).length>0,x=((L=(I=s==null?void 0:s.data)==null?void 0:I.content)==null?void 0:L.dataPush)||{};return l||N?e.jsxDEV("div",{className:"col-12 px-0 mx-auto",children:e.jsxDEV("div",{className:"bg-white rounded-2 p-4 p-lg-5",children:[e.jsxDEV(O,{width:i?"100%":"30%",height:30,className:"mb-3 mb-lg-4"},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:126,columnNumber:11},void 0),e.jsxDEV(O,{width:"100%",height:300},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:131,columnNumber:11},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:125,columnNumber:9},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:124,columnNumber:7},void 0):e.jsxDEV("div",{className:"col-12 px-0 mx-auto",children:e.jsxDEV("div",{className:"bg-white rounded-2 py-4 p-lg-5","data-cy":"invoice-list",children:[e.jsxDEV(a.SzTypographie,{variant:"H3",size:"L",weight:"medium",className:"pl-3 pl-lg-0 mb-3 mb-lg-4",children:n("invoiceHistory.invoiceList.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:140,columnNumber:9},void 0),e.jsxDEV("div",{className:"d-flex flex-column flex-lg-row align-items-lg-start",children:[e.jsxDEV("div",{className:"invoice-table-container order-2 order-lg-0",children:!m&&(u==null?void 0:u.length)>0?e.jsxDEV(Xe,{invoiceData:u,currentPage:o,itemsPerPage:r,handlePageChange:d},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:151,columnNumber:15},void 0):e.jsxDEV(a.SzTypographie,{variant:"body",weight:"regular",className:"text-dark mb-3 mb-lg-4",children:n("invoiceHistory.invoiceList.subtitle",{context:m?"error":"empty"})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:158,columnNumber:15},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:149,columnNumber:11},void 0),f&&e.jsxDEV(Ze,{...x},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:169,columnNumber:38},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:148,columnNumber:9},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:139,columnNumber:7},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/InvoiceList.tsx",lineNumber:138,columnNumber:5},void 0)},ss=()=>{var r,d,t,m,l;const n=J(),{data:i,isLoading:o,isSuccess:c}=Z("GetDataPushHorizontal",()=>k.get(H.INVOICE_HISTORY.PUSH,{params:{type:"horizontal"}}));if(o)return e.jsxDEV("div",{className:"col-12 px-0 mt-4 rounded-2",children:e.jsxDEV(O,{width:"100%",height:200},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PushBlock.tsx",lineNumber:25,columnNumber:9},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PushBlock.tsx",lineNumber:24,columnNumber:7},void 0);if(c&&((t=(d=(r=i==null?void 0:i.data)==null?void 0:r.content)==null?void 0:d.dataPush)==null?void 0:t.length)>0){const s=(l=(m=i==null?void 0:i.data)==null?void 0:m.content)==null?void 0:l.dataPush;return e.jsxDEV("div",{className:"push-block d-flex flex-column flex-lg-row",children:s.map((N,h)=>{const u=Y("push-item-invoices overflow-hidden d-flex bg-white rounded-2 cursor-pointer",{"mt-3":n,"mt-4":!n,"mr-4":!n&&h!==s.length-1});return e.jsxDEV(be,{data:N,style:u},h,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PushBlock.tsx",lineNumber:45,columnNumber:18},void 0)})},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PushBlock.tsx",lineNumber:34,columnNumber:7},void 0)}return null},is=({className:n})=>{var N,h,u;const{t:i}=F(),c=me().pathname,{data:r,isLoading:d,error:t}=Z("dataHistoPayment",()=>k.get(H.PAYMENT.GET_PAYMENT_HISTO)),m=((N=r==null?void 0:r.data)==null?void 0:N.content)||{},l=((u=(h=t==null?void 0:t.response)==null?void 0:h.data)==null?void 0:u.message)||"",s=typeof l<"u"&&!(l!=null&&l.startsWith("KO_ROLE_"));return l!=null&&l.startsWith("KO_ROLE_")&&c===p.TIMELINE_AND_OPERATIONS&&(window.location.href=p.DASHBOARD),s?e.jsxDEV("div",{className:n,children:e.jsxDEV("div",{className:"bg-white rounded-2 py-4 px-3 p-lg-5 mt-3 mt-lg-4","data-cy":"bloc-payment-histo",children:d?e.jsxDEV(O,{height:300},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PaymentHistoryChart.tsx",lineNumber:42,columnNumber:11},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(a.SzTypographie,{variant:"H3",size:"L",weight:"medium",className:"mb-2",children:i("invoiceHistory.paymentList.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PaymentHistoryChart.tsx",lineNumber:45,columnNumber:13},void 0),e.jsxDEV(a.SzTypographie,{variant:"body",weight:"regular",className:"text-dark mb-3 mb-lg-4",children:i("invoiceHistory.paymentList.subtitle")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PaymentHistoryChart.tsx",lineNumber:53,columnNumber:13},void 0),(m==null?void 0:m.indexMaxData)>0?e.jsxDEV("div",{className:"col-12 pr-3",children:e.jsxDEV(Ue,{data:m},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PaymentHistoryChart.tsx",lineNumber:62,columnNumber:17},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PaymentHistoryChart.tsx",lineNumber:61,columnNumber:15},void 0):e.jsxDEV(a.SzTypographie,{variant:"body",weight:"regular",className:"text-dark mb-3 mb-lg-4",children:i("invoiceHistory.paymentList.empty")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PaymentHistoryChart.tsx",lineNumber:65,columnNumber:15},void 0)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PaymentHistoryChart.tsx",lineNumber:44,columnNumber:11},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PaymentHistoryChart.tsx",lineNumber:37,columnNumber:7},void 0)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/PaymentHistoryChart.tsx",lineNumber:36,columnNumber:5},void 0):null};function si(){var A,B,U,R,T,W,ne,ae,se,oe,G,ie,te,$,Q,q;const{t:n}=F(),i=J(),r=me().pathname===p.TIMELINE_AND_OPERATIONS,{track:d}=X(),{data:t,isLoading:m,isError:l}=Z("GetDataPushMore",()=>k.get(H.INVOICE_HISTORY.PUSH,{params:{type:"more"}})),{modeListPaymentData:s,isLoading:N,promotedValue:h}=he(),u=s==null?void 0:s.currentPaymentModeCode,f=Se[u],x=[Le,Pe],y=["-","0"],v=typeof(s==null?void 0:s.balanceAmount)<"u"&&(s==null?void 0:s.balanceAmount)!==null&&!y.includes(s==null?void 0:s.balanceAmount.charAt(0)),V=(s==null?void 0:s.paymentModesList)&&Object.values(s==null?void 0:s.paymentModesList).every(E=>!E),D=!x.includes(u)&&v&&!V,g={titleCode:(A=s==null?void 0:s.grayBlock)==null?void 0:A.titleCode,amount:(U=(B=s==null?void 0:s.grayBlock)==null?void 0:B.content)==null?void 0:U.amount,date:(T=(R=s==null?void 0:s.grayBlock)==null?void 0:R.content)==null?void 0:T.date,showEtip:s==null?void 0:s.hasEtipSignedValidMandate,paymentMode:f,currentPaymentModeCode:u,showPayBillButton:D},I=E=>{var S,w;d("INVOICE_CONSULTATION_4",{nom_modale:E==null?void 0:E.type,cas_client:(w=(S=t==null?void 0:t.data)==null?void 0:S.content)==null?void 0:w.clientContext})},M=!["M","P"].includes(u)&&h===null,ee=Y("tsme-container pt-0 pb-6 text-center",{"pt-0":((ae=(ne=(W=t==null?void 0:t.data)==null?void 0:W.content)==null?void 0:ne.dataPush)==null?void 0:ae.length)>0,"pt-4":((G=(oe=(se=t==null?void 0:t.data)==null?void 0:se.content)==null?void 0:oe.dataPush)==null?void 0:G.length)<=0||l}),z=Y("px-0 pr-lg-4 pl-lg-0 col-lg-8",{"col-12":!g||i,"col-lg-8":g});return e.jsxDEV(Me,{fullscreen:!0,className:"p-0",tag:"main",children:[e.jsxDEV(Te,{ellipseImg:Re,zIndex:!0,tag:"div",children:[e.jsxDEV("div",{className:"pt-5 pt-md-3 pt-lg-0",children:[e.jsxDEV("div",{className:"col-12 mt-5",children:e.jsxDEV(a.SzTypographie,{variant:"H1",size:i?"L":"XL",color:"light",className:"text-uppercase",weight:"black",children:n(r?"timelineAndOperations.title":"invoiceHistory.title")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:103,columnNumber:13},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:102,columnNumber:11},this),!r&&e.jsxDEV("div",{className:"mt-4 mt-lg-6",children:[e.jsxDEV(es,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:115,columnNumber:15},this),e.jsxDEV(ss,{},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:116,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:114,columnNumber:13},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:101,columnNumber:9},this),e.jsxDEV("div",{className:"d-flex flex-column flex-lg-row align-items-lg-start justify-content-lg-center",children:[e.jsxDEV(is,{className:z},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:121,columnNumber:11},this),N?e.jsxDEV("div",{className:"col-12 col-lg-4 px-0 mt-3 mt-lg-4 rounded-2",children:e.jsxDEV(O,{width:"100%",height:360},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:125,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:124,columnNumber:13},this):g&&!M?e.jsxDEV("div",{className:"col-12 col-lg-4 px-0",children:e.jsxDEV(Fe,{...g,invoiceVariant:!0},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:129,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:128,columnNumber:13},this):null]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:120,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:100,columnNumber:7},this),!r&&e.jsxDEV(Ae,{children:m?e.jsxDEV("div",{className:"col-12 px-0 mt-4 rounded-2",children:e.jsxDEV(O,{width:"100%",height:200},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:138,columnNumber:15},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:137,columnNumber:13},this):(($=(te=(ie=t==null?void 0:t.data)==null?void 0:ie.content)==null?void 0:te.dataPush)==null?void 0:$.length)>0?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Be,{title:n("pedagoFacture.board.card_contract_module_title"),items:(q=(Q=t==null?void 0:t.data)==null?void 0:Q.content)==null?void 0:q.dataPush,openCard:I},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:142,columnNumber:15},this),e.jsxDEV("div",{className:ee,children:e.jsxDEV(de,{variant:"outlined",border:"soft",className:"border-white bg-transparent mb-1 mb-lg-0 text-white",to:p.HELP_AND_CONTACT,id:"invoice-explanation-other-question-btn",onClick:()=>{var E,S;d("INVOICE_CONSULTATION_5",{cas_client:(S=(E=t==null?void 0:t.data)==null?void 0:E.content)==null?void 0:S.clientContext})},children:n("pedagoFacture.board.otherQuestionBtn")},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:149,columnNumber:17},this)},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:148,columnNumber:15},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:141,columnNumber:13},this):null},void 0,!1,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:135,columnNumber:9},this)]},void 0,!0,{fileName:"/usr/var/www/assets/js/pages/invoice-history/index.tsx",lineNumber:99,columnNumber:5},this)}export{si as default};
